{"failedCount":0,"prefixedPath":"classpath:examples\/users\/TestUserNoAdminCantDo.feature","packageQualifiedName":"examples.users.TestUserNoAdminCantDo","loopIndex":-1,"relativePath":"examples\/users\/TestUserNoAdminCantDo.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1281800,"millis":1.2818,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"11:00:10.278 karate.env system property was: prod \n"},{"result":{"nanos":29900,"millis":0.0299,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":31263100,"millis":31.2631,"status":"passed"},"step":{"comments":["# Get the idToken for one of the user created by the admin"],"line":13,"prefix":"*","index":0,"text":"def datas = read('signinDatasUserNoAdmin.json')"}},{"result":{"nanos":904974700,"millis":904.9747,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the user's datas"],"line":16,"prefix":"*","index":1,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-17 11:00:20 a.Â m.","durationMillis":881.5446,"callArg":{"password":"Password_1","clientId":"799hogucm363v55l7dk2n1l5u0","username":"user8@test.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":25100,"millis":0.0251,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":2577300,"millis":2.5773,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":4602900,"millis":4.6029,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"11:00:10.365 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"user8@test.com\",\n  \"password\": \"Password_1\"\n}\n \n"},{"result":{"nanos":4846700,"millis":4.8467,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":25400,"millis":0.0254,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":503200,"millis":0.5032,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":866958200,"millis":866.9582,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"11:00:10.588 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 93\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Password_1\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"user8@test.com\"}\n\n11:00:11.235 response time in milliseconds: 633\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 3994\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 09:00:11 GMT\n1 < x-amzn-RequestId: 5b8c5394-4834-4ba6-8d55-28dcb6797354\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fdyISHVJjoEFmfg=\n1 < X-Amzn-Trace-Id: Root=1-60a2309b-6a12321f24c1990106d75c0b\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 8698da0cfd5dac9801848770e0d61b63.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: QzZxAj2TMCOITlW2PG510AaBUoa37wCBBGGWxI3K227ccWMONwbtqA==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNDIwMTEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI0NTYxMSwiaWF0IjoxNjIxMjQyMDExLCJqdGkiOiIwYjliOTM4Yy1hMmMwLTQ3MDAtODYwMy03NmRmYjM5MWI3NDYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.ASJuuWzomb5Lql1ZvheZfwufCKex_Ly341rdIAMqbSOfBa5F_kD5hMz11aPEg3Lip3IoHpOQ5TzjuwrxvfLHX-3UXkCHHuOMy8ZpMapMQoHFCSzfYioG1Zl-2THPV6wrCjF5LmazQ5k3IyjLsVdpNK9O2dWuwEeIkfSJdmop3Fn-k4seRwqvnm4wI6Piy0vOa6q-OiPM6OPgfiksVp99IgBmfgPwMDQrAV_uTJ7ECleWMCio_pPNyQxRimdSkbmpaGO8iHev8MCZ4UDnI802wWEtKYOioP4yQLFtwWjnWU7lwcLpf0c41Peq_lgTgTpCkLZ2TSF0cxbTQMUoR2gepw\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bnX-G5urNPF3RmEs0NSIRGz_ecdkDfuP6akN-hgPPskLfR8BHjbB7DkLOWSqcPz3ND7Gh_7tq9n6k8muoKyohG6HBneHo6cZKGJzoqQAAwk3hXsQULMda456tzsKWCZH9Ez6bcKSYIXKSM4zm_RfFnLbdxXtbTfNSj1H98wZ9dU55ag637rFhDPlOm8PvlEX3WHIzJyLrYIoQJn_tGk-cITwZjzqcZIB7P-pJKtZpU2OigsJ0fIL0Rb0d5z9VS1IKLu1K9gdbaq4b2FeDmLRr5dQrB_pwPuyfi_f5idJ7I4X0xM9QBB4kWrFfHEFFdY9Uu_llP-67UQmxC1JXDSiKw.e4HJUGYF_giu7iB_.ns3Xn19Pyxgvd_hI9AFykm5LcOsg80QCiEU-02G720jaq1iph5rtJNxJGwC9CrutDvlmZ84WbmHKOHbdXb14zzrUfAxf_9HS85LxLfnqul1D9bPL8Tnyy_38tkL2uUUj_sZADzAesM4kzIl6XRAQft4HVP79dHp5ma-zQMa03f7gaKvBV-1zbqGCNgLyUQeFYXb_kp62HYzjKB6FPeQFM4j9lh622qqe3GeVP7BSY5D3SlilXqjBgtzPHNoftGu88bzwC68JUFMKJNqxKizOWKCDj10BvLvtkKK-tFHP8FPQuvbvnrQqG0SIHRtIUwBjZO4JJJ2_owzxARhVkZstbQBwHLZL5fdecpmxFj5N4vdUZbmgm-CReM6ePMkncBqms15FTTqe1jd-_pCIdLDvw2uhjVgm93t5RaGOm_pIZGWKQsgTxwJlnlkGDwEFZtOR9YIKxHDk-2j5HrImqrk3nCqt-t12EdnqMXS0o12c-KqaEc7U39t2cgq68a5kI3_IudnJeUPIwZq01r_tJPWkoUyZO8gZwXYpjattKIbJ__wUM4l2wN-C35gCSWP9gyn-1DDNeepBA8Vq8e5WffqMTlG133VUI_WHi343jHVVbZ-g2rAAcmfkvB7cXG4FIKE1besvIKQE7uE7qm--FIsCfaPUDx4_oYHzMzXrhpjzLYhbcep7T6T7WeClNZ9tZ8kSPS0hA5n8P9Rp5ADiQ0_Y2uw3Y8vUW2-jBKK7EHyJz93OSmEW2CNnlYD40FJ3_G80LWYQsQCTK_gNYRaickM0Bq6bWZZMxD1pMAYvy3MrJyymInVCOOxqjDI-5o1dgd_DB9dzgTtDDxkOka-drwBBBCU7rwN0bbPY1Zhkawg9mmeiQfxbPoCPpyo_yL77yyR8pNukXin9RCdhpbYSnJZozGimCUhGihe-O3PBXFzZChqU1o3HbT4GTE_rwfLZ_HalW0kKkww6UsO9NAcJhhfpBSWZZsNSoUebqc0GdfWKGbEcZY1T6bM9kzMCt-Dyznwwn_MQTF7Oqr0ELqOu8n7RNnje8pgL2BMd4w28OIGMHC2Biou7Jd3fgPsRMSRQYz0Q6DBxKxMPWyBojpdu3SYbjXKGDyz1F_48kwAMdIfzKmfcO8Sxa6MpZ3Gep-3xQoF1irGsiz8LzG8LKMeeIiQpjTeZR5jNCihIzhai3AXAR0PcsfTuwczkiknLVgH9_4mOYmqgoayXngqGLnGL1gZzhRw6pfXcMNDlyLdW5lYdR8s4_9PkMardUq1s88eiAEP3cdUb0ZSL8f3r-00xiqODvPTJRE8qWDNih_rrHszEaqxfV8p0qbtNpPp4tcbzKdk.NxfBmG2-eVercdTbDZLkcw\"}\n"},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":988200,"millis":0.9882,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":992900,"millis":0.9929,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"11:00:11.240 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":881.5446,"startTime":1621242010357,"failed":false,"refId":"[1:6]","endTime":1621242011240,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":1516700,"millis":1.5167,"status":"passed"},"step":{"line":17,"prefix":"*","index":2,"text":"print signIn.response"},"stepLog":"11:00:11.244 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNDIwMTEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI0NTYxMSwiaWF0IjoxNjIxMjQyMDExLCJqdGkiOiIwYjliOTM4Yy1hMmMwLTQ3MDAtODYwMy03NmRmYjM5MWI3NDYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.ASJuuWzomb5Lql1ZvheZfwufCKex_Ly341rdIAMqbSOfBa5F_kD5hMz11aPEg3Lip3IoHpOQ5TzjuwrxvfLHX-3UXkCHHuOMy8ZpMapMQoHFCSzfYioG1Zl-2THPV6wrCjF5LmazQ5k3IyjLsVdpNK9O2dWuwEeIkfSJdmop3Fn-k4seRwqvnm4wI6Piy0vOa6q-OiPM6OPgfiksVp99IgBmfgPwMDQrAV_uTJ7ECleWMCio_pPNyQxRimdSkbmpaGO8iHev8MCZ4UDnI802wWEtKYOioP4yQLFtwWjnWU7lwcLpf0c41Peq_lgTgTpCkLZ2TSF0cxbTQMUoR2gepw\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bnX-G5urNPF3RmEs0NSIRGz_ecdkDfuP6akN-hgPPskLfR8BHjbB7DkLOWSqcPz3ND7Gh_7tq9n6k8muoKyohG6HBneHo6cZKGJzoqQAAwk3hXsQULMda456tzsKWCZH9Ez6bcKSYIXKSM4zm_RfFnLbdxXtbTfNSj1H98wZ9dU55ag637rFhDPlOm8PvlEX3WHIzJyLrYIoQJn_tGk-cITwZjzqcZIB7P-pJKtZpU2OigsJ0fIL0Rb0d5z9VS1IKLu1K9gdbaq4b2FeDmLRr5dQrB_pwPuyfi_f5idJ7I4X0xM9QBB4kWrFfHEFFdY9Uu_llP-67UQmxC1JXDSiKw.e4HJUGYF_giu7iB_.ns3Xn19Pyxgvd_hI9AFykm5LcOsg80QCiEU-02G720jaq1iph5rtJNxJGwC9CrutDvlmZ84WbmHKOHbdXb14zzrUfAxf_9HS85LxLfnqul1D9bPL8Tnyy_38tkL2uUUj_sZADzAesM4kzIl6XRAQft4HVP79dHp5ma-zQMa03f7gaKvBV-1zbqGCNgLyUQeFYXb_kp62HYzjKB6FPeQFM4j9lh622qqe3GeVP7BSY5D3SlilXqjBgtzPHNoftGu88bzwC68JUFMKJNqxKizOWKCDj10BvLvtkKK-tFHP8FPQuvbvnrQqG0SIHRtIUwBjZO4JJJ2_owzxARhVkZstbQBwHLZL5fdecpmxFj5N4vdUZbmgm-CReM6ePMkncBqms15FTTqe1jd-_pCIdLDvw2uhjVgm93t5RaGOm_pIZGWKQsgTxwJlnlkGDwEFZtOR9YIKxHDk-2j5HrImqrk3nCqt-t12EdnqMXS0o12c-KqaEc7U39t2cgq68a5kI3_IudnJeUPIwZq01r_tJPWkoUyZO8gZwXYpjattKIbJ__wUM4l2wN-C35gCSWP9gyn-1DDNeepBA8Vq8e5WffqMTlG133VUI_WHi343jHVVbZ-g2rAAcmfkvB7cXG4FIKE1besvIKQE7uE7qm--FIsCfaPUDx4_oYHzMzXrhpjzLYhbcep7T6T7WeClNZ9tZ8kSPS0hA5n8P9Rp5ADiQ0_Y2uw3Y8vUW2-jBKK7EHyJz93OSmEW2CNnlYD40FJ3_G80LWYQsQCTK_gNYRaickM0Bq6bWZZMxD1pMAYvy3MrJyymInVCOOxqjDI-5o1dgd_DB9dzgTtDDxkOka-drwBBBCU7rwN0bbPY1Zhkawg9mmeiQfxbPoCPpyo_yL77yyR8pNukXin9RCdhpbYSnJZozGimCUhGihe-O3PBXFzZChqU1o3HbT4GTE_rwfLZ_HalW0kKkww6UsO9NAcJhhfpBSWZZsNSoUebqc0GdfWKGbEcZY1T6bM9kzMCt-Dyznwwn_MQTF7Oqr0ELqOu8n7RNnje8pgL2BMd4w28OIGMHC2Biou7Jd3fgPsRMSRQYz0Q6DBxKxMPWyBojpdu3SYbjXKGDyz1F_48kwAMdIfzKmfcO8Sxa6MpZ3Gep-3xQoF1irGsiz8LzG8LKMeeIiQpjTeZR5jNCihIzhai3AXAR0PcsfTuwczkiknLVgH9_4mOYmqgoayXngqGLnGL1gZzhRw6pfXcMNDlyLdW5lYdR8s4_9PkMardUq1s88eiAEP3cdUb0ZSL8f3r-00xiqODvPTJRE8qWDNih_rrHszEaqxfV8p0qbtNpPp4tcbzKdk.NxfBmG2-eVercdTbDZLkcw\"\n}\n \n"},{"result":{"nanos":660800,"millis":0.6608,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"line":20,"prefix":"*","index":3,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":10406000,"millis":10.406,"status":"passed"},"step":{"line":21,"prefix":"*","index":4,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":934400,"millis":0.9344,"status":"passed"},"step":{"line":22,"prefix":"*","index":5,"text":"print user_header"},"stepLog":"11:00:11.256 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w \n"},{"result":{"nanos":1270700,"millis":1.2707,"status":"passed"},"step":{"endLine":31,"comments":["# List all the users. Only an admin user can, so the test shouldn't retrun datas","# Get the query from a .feature field"],"line":28,"prefix":"*","docString":"read('UserReadModels.graphql')","index":6,"text":"def query ="}},{"result":{"nanos":581300,"millis":0.5813,"status":"passed"},"step":{"line":33,"prefix":"Given","index":7,"text":"path 'graphql'"}},{"result":{"nanos":2015500,"millis":2.0155,"status":"passed"},"step":{"line":34,"prefix":"And","index":8,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":429600,"millis":0.4296,"status":"passed"},"step":{"line":35,"prefix":"And","index":9,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":1041300,"millis":1.0413,"status":"passed"},"step":{"line":36,"prefix":"And","index":10,"text":"request { query: '#(query)' }"}},{"result":{"nanos":255910200,"millis":255.9102,"status":"passed"},"step":{"line":37,"prefix":"When","index":11,"text":"method post"},"stepLog":"11:00:11.265 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 102\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query UserReadModels {\\r\\n    UserReadModels {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n11:00:11.516 response time in milliseconds: 250\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 162\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 09:00:11 GMT\n1 < x-amzn-RequestId: 2e1a23f5-6146-4faf-a429-422d13561c72\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fdyIXGeYjoEFfLw=\n1 < X-Amzn-Trace-Id: Root=1-60a2309b-11a3bbc92c8438ba0cb84311;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 17a71b4bf5d35b398b0fd90a5cd154a7.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: ARRpkOU98JDkyLv4JRMUQWyR6Io-PGPW7jZVI3uMc2HVDfigRwtjAA==\n{\"data\":{\"UserReadModels\":null},\"errors\":[{\"path\":[\"UserReadModels\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"Access denied for read model UserReadModel\"}]}\n"},{"result":{"nanos":17000,"millis":0.017,"status":"passed"},"step":{"line":38,"prefix":"Then","index":12,"text":"status 200"}},{"result":{"nanos":6360400,"millis":6.3604,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":41,"prefix":"*","index":13,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":8140600,"millis":8.1406,"status":"passed"},"step":{"comments":["# As the user is not admin, the response contains a field \"error\" and it is printed"],"line":44,"prefix":"*","index":14,"text":"match response.errors != '#notpresent'"}},{"result":{"nanos":1609600,"millis":1.6096,"status":"passed"},"step":{"endLine":52,"comments":["#The user not admin can't create a new user"],"line":49,"prefix":"*","docString":"read('SaveUser.graphql')","index":15,"text":"def query ="},"stepLog":"11:00:11.534 over-writing existing variable 'query' with new value: read('SaveUser.graphql')\n"},{"result":{"nanos":720400,"millis":0.7204,"status":"passed"},"step":{"comments":["# JSON file with the new user's datas"],"line":54,"prefix":"*","index":16,"text":"def user_datas = read('NewUser.json')"}},{"result":{"nanos":143000,"millis":0.143,"status":"passed"},"step":{"line":56,"prefix":"Given","index":17,"text":"path 'graphql'"}},{"result":{"nanos":404600,"millis":0.4046,"status":"passed"},"step":{"line":57,"prefix":"And","index":18,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":920500,"millis":0.9205,"status":"passed"},"step":{"line":58,"prefix":"And","index":19,"text":"request { query: '#(query)',  variables: '#(user_datas)'}"}},{"result":{"nanos":118448800,"millis":118.4488,"status":"passed"},"step":{"line":59,"prefix":"When","index":20,"text":"method post"},"stepLog":"11:00:11.539 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 249\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password1\",\"role\":\"User\",\"username\":\"user9@test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n11:00:11.655 response time in milliseconds: 115\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 144\n2 < Connection: keep-alive\n2 < Date: Mon, 17 May 2021 09:00:12 GMT\n2 < x-amzn-RequestId: 7a295217-26cc-4d7c-8aad-fa00a5edb1ff\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fdyIaEuRjoEFeNw=\n2 < X-Amzn-Trace-Id: Root=1-60a2309c-36b84abc7f1307686574784e;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 713e5c81a0f7ad564b97cf451e92aaac.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD50-C1\n2 < X-Amz-Cf-Id: IsNvPsBC7IPOKdawWIkjm_C5fIcdL60PUIms9sUzXHKaRCRncdNclg==\n{\"data\":{\"SaveUser\":null},\"errors\":[{\"path\":[\"SaveUser\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"Access denied for command 'SaveUser'\"}]}\n"},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":60,"prefix":"Then","index":21,"text":"status 200"}},{"result":{"nanos":4018913500,"millis":4018.9135,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":63,"prefix":"*","index":22,"text":"wait(4000)"}},{"result":{"nanos":455700,"millis":0.4557,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":66,"prefix":"*","index":23,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":481700,"millis":0.4817,"status":"passed"},"step":{"comments":["# As the user is not admin, the response must contains a field \"error\""],"line":69,"prefix":"*","index":24,"text":"match response.errors != '#notpresent'"}},{"result":{"nanos":2362900,"millis":2.3629,"status":"passed"},"step":{"endLine":78,"comments":["# The user can't list a user by id","# Get the query from a .graphql file"],"line":75,"prefix":"*","docString":"read('UserReadModel.graphql')","index":25,"text":"def query ="},"stepLog":"11:00:15.678 over-writing existing variable 'query' with new value: read('UserReadModel.graphql')\n"},{"result":{"nanos":1065900,"millis":1.0659,"status":"passed"},"step":{"comments":["# Define the username of the user to list"],"line":81,"prefix":"*","index":26,"text":"def newUser = read('NewUser.json')"}},{"result":{"nanos":533900,"millis":0.5339,"status":"passed"},"step":{"endLine":87,"line":82,"prefix":"*","docString":"{ \n   \"id\": \"#(newUser.username)\"\n}","index":27,"text":"def id ="}},{"result":{"nanos":674400,"millis":0.6744,"status":"passed"},"step":{"line":88,"prefix":"*","index":28,"text":"print id"},"stepLog":"11:00:15.682 [print] {\n  \"id\": \"user9@test.com\"\n}\n \n"},{"result":{"nanos":135900,"millis":0.1359,"status":"passed"},"step":{"line":90,"prefix":"Given","index":29,"text":"path 'graphql'"}},{"result":{"nanos":194500,"millis":0.1945,"status":"passed"},"step":{"line":92,"prefix":"And","index":30,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":53800,"millis":0.0538,"status":"passed"},"step":{"line":93,"prefix":"And","index":31,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":339700,"millis":0.3397,"status":"passed"},"step":{"line":94,"prefix":"And","index":32,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":237594600,"millis":237.5946,"status":"passed"},"step":{"line":95,"prefix":"When","index":33,"text":"method post"},"stepLog":"11:00:15.684 request:\n3 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n3 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 155\n3 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n3 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"user9@test.com\"},\"query\":\"query UserReadModel($id: ID!) {\\r\\n    UserReadModel(id: $id) {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n11:00:15.919 response time in milliseconds: 234\n3 < 200\n3 < Content-Type: application\/json\n3 < Content-Length: 160\n3 < Connection: keep-alive\n3 < Date: Mon, 17 May 2021 09:00:16 GMT\n3 < x-amzn-RequestId: 10e02ae0-1ad6-420a-ba8d-cafde1a559db\n3 < Access-Control-Allow-Origin: *\n3 < x-amz-apigw-id: fdyJEECqjoEF8qQ=\n3 < X-Amzn-Trace-Id: Root=1-60a230a0-59740fc967457b7f0314de99;Sampled=0\n3 < X-Cache: Miss from cloudfront\n3 < Via: 1.1 315f537a0be356b37267f2ae21a5363d.cloudfront.net (CloudFront)\n3 < X-Amz-Cf-Pop: MAD50-C1\n3 < X-Amz-Cf-Id: NveCcf2O9bgHod_KdRQLVXkf4f7K2-1DGeJ9EBGO8tYE6y96ETMgJw==\n{\"data\":{\"UserReadModel\":null},\"errors\":[{\"path\":[\"UserReadModel\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"Access denied for read model UserReadModel\"}]}\n"},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":96,"prefix":"Then","index":34,"text":"status 200"}},{"result":{"nanos":1927900,"millis":1.9279,"status":"passed"},"step":{"comments":["# As the user is not admin, the response of the query shouldn't contain the datas of the user tryed to saved"],"line":99,"prefix":"*","index":35,"text":"match response.data.UserReadModel != {id: '#(newUser.username)', role: '#(newUser.role)' }"}},{"result":{"nanos":1882400,"millis":1.8824,"status":"passed"},"step":{"endLine":107,"comments":["# An user no admin can't change the role of other user"],"line":104,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":36,"text":"def query ="},"stepLog":"11:00:15.923 over-writing existing variable 'query' with new value: read('ChangeUserRole.graphql')\n"},{"result":{"nanos":647200,"millis":0.6472,"status":"passed"},"step":{"comments":["# JSON file with the new user role"],"line":109,"prefix":"*","index":37,"text":"def user_datas_change = read('UserRole.json')"}},{"result":{"nanos":139500,"millis":0.1395,"status":"passed"},"step":{"line":111,"prefix":"Given","index":38,"text":"path 'graphql'"}},{"result":{"nanos":182000,"millis":0.182,"status":"passed"},"step":{"line":112,"prefix":"And","index":39,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":175600,"millis":0.1756,"status":"passed"},"step":{"line":113,"prefix":"And","index":40,"text":"request { query: '#(query)',  variables: '#(user_datas)'}"}},{"result":{"nanos":234934200,"millis":234.9342,"status":"passed"},"step":{"line":114,"prefix":"When","index":41,"text":"method post"},"stepLog":"11:00:15.929 request:\n4 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n4 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\n4 > Content-Type: application\/json; charset=UTF-8\n4 > Content-Length: 218\n4 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n4 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password1\",\"role\":\"User\",\"username\":\"user9@test.com\"},\"query\":\"mutation ChangeUserRole($username: String, $role: String) {\\r\\n  ChangeUserRole(input: {username: $username, role: $role})\\r\\n}\"}\n\n11:00:16.161 response time in milliseconds: 231\n4 < 200\n4 < Content-Type: application\/json\n4 < Content-Length: 162\n4 < Connection: keep-alive\n4 < Date: Mon, 17 May 2021 09:00:16 GMT\n4 < x-amzn-RequestId: 237e08e4-a92d-46ce-bb89-cb648b718ac0\n4 < Access-Control-Allow-Origin: *\n4 < x-amz-apigw-id: fdyJGE7UDoEFX4Q=\n4 < X-Amzn-Trace-Id: Root=1-60a230a0-535544be261ebcd41af869cb;Sampled=0\n4 < X-Cache: Miss from cloudfront\n4 < Via: 1.1 d8c266ed74a4ecc05eeffe79fa473f7e.cloudfront.net (CloudFront)\n4 < X-Amz-Cf-Pop: MAD50-C1\n4 < X-Amz-Cf-Id: J-DUSWhKWAnhiB52_07F3n2KwuptdF9mrk3EhP1s83w5LZYbSoEALA==\n{\"data\":{\"ChangeUserRole\":null},\"errors\":[{\"path\":[\"ChangeUserRole\"],\"locations\":[{\"line\":2,\"column\":3}],\"message\":\"Access denied for command 'ChangeUserRole'\"}]}\n"},{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"line":115,"prefix":"Then","index":42,"text":"status 200"}},{"result":{"nanos":4006332500,"millis":4006.3325,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":118,"prefix":"*","index":43,"text":"wait(4000)"}},{"result":{"nanos":358500,"millis":0.3585,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":121,"prefix":"*","index":44,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":525300,"millis":0.5253,"status":"passed"},"step":{"comments":["# As the user is not admin, the response must contain a field \"error\""],"line":124,"prefix":"*","index":45,"text":"match response.errors != '#notpresent'"}},{"result":{"nanos":2107700,"millis":2.1077,"status":"passed"},"step":{"endLine":134,"comments":["# The user can't delete other users","# Get the query from a .graphql file"],"line":131,"prefix":"*","docString":"read('DeleteUser.graphql')","index":46,"text":"def query ="},"stepLog":"11:00:20.170 over-writing existing variable 'query' with new value: read('DeleteUser.graphql')\n"},{"result":{"nanos":1688200,"millis":1.6882,"status":"passed"},"step":{"comments":["# Define the username of the user to list"],"line":137,"prefix":"*","index":47,"text":"def newUser = read('UserToDelete.json')"},"stepLog":"11:00:20.173 over-writing existing variable 'newUser' with new value: read('UserToDelete.json')\n"},{"result":{"nanos":4628000,"millis":4.628,"status":"passed"},"step":{"endLine":143,"line":138,"prefix":"*","docString":"{ \n   \"id\": \"#(UserToDelete.username)\"\n}","index":48,"text":"def id ="},"stepLog":"11:00:20.174 over-writing existing variable 'id' with new value: { \n   \"id\": \"#(UserToDelete.username)\"\n}\n"},{"result":{"nanos":558100,"millis":0.5581,"status":"passed"},"step":{"line":144,"prefix":"*","index":49,"text":"print id"},"stepLog":"11:00:20.179 [print] {\n  \"id\": \"#(UserToDelete.username)\"\n}\n \n"},{"result":{"nanos":219400,"millis":0.2194,"status":"passed"},"step":{"line":146,"prefix":"Given","index":50,"text":"path 'graphql'"}},{"result":{"nanos":209000,"millis":0.209,"status":"passed"},"step":{"line":148,"prefix":"And","index":51,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":69300,"millis":0.0693,"status":"passed"},"step":{"line":149,"prefix":"And","index":52,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":390500,"millis":0.3905,"status":"passed"},"step":{"line":150,"prefix":"And","index":53,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":244873300,"millis":244.8733,"status":"passed"},"step":{"line":151,"prefix":"When","index":54,"text":"method post"},"stepLog":"11:00:20.182 request:\n5 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n5 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjhkOGVkYmE5LTUwOGItNDI1MC04ZTQyLTFjNjc5NWYzMjg3NCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjQyMDExLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMjQ1NjExLCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjEyNDIwMTEsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.g5Ws7HrWclOJS8DOAoI0bctqBEhsClbv5r1oBNDjGS-_qu_FzcOnU14ZuczK8A33VFcMpVP0SnBIaj40cor7P1Z2Nio80BTyoFWU6nKyZvQnz_vFYn3CzkJKfn_uq5h24nHZGwoP6Rsv-NPv2GOKhTif7mgn6bks6BVfpj8PPsH_v4MVvIPPnSyMKwk45SkUwuG4qojKKFdvlF4CKCdj9sMNklhhxf8aUadQnGu778EJFX2FeXBKZXHSOGoxVSpILs-4Zfk3r8cyWr9YX7uZXrSVKdFzN-FpRDj9IK0v-FHpyUCmf-tEUoA0TX1hTcwd08x5x2HJ7k7_vhdYDli-9w\n5 > Content-Type: application\/json; charset=UTF-8\n5 > Content-Length: 156\n5 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n5 > Connection: Keep-Alive\n5 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n5 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"#(UserToDelete.username)\"},\"query\":\"mutation DeleteUser($username: String) {\\r\\n    DeleteUser(input: {username: $username})\\r\\n} \\r\\n\"}\n\n11:00:20.425 response time in milliseconds: 242\n5 < 200\n5 < Content-Type: application\/json\n5 < Content-Length: 150\n5 < Connection: keep-alive\n5 < Date: Mon, 17 May 2021 09:00:20 GMT\n5 < x-amzn-RequestId: 4b58d9f5-c09f-44b8-8cac-b38d2e66528b\n5 < Access-Control-Allow-Origin: *\n5 < x-amz-apigw-id: fdyJxGlCDoEFewg=\n5 < X-Amzn-Trace-Id: Root=1-60a230a4-0bfe68d730fd96bc16d9fd22;Sampled=0\n5 < X-Cache: Miss from cloudfront\n5 < Via: 1.1 eb28dde7b66308b26496e3a543c93412.cloudfront.net (CloudFront)\n5 < X-Amz-Cf-Pop: MAD50-C1\n5 < X-Amz-Cf-Id: nVTROENM9FQn3JozujXcO1DYJ2osOmK7BpwMTCIIRsHuyLoK91QpOg==\n{\"data\":{\"DeleteUser\":null},\"errors\":[{\"path\":[\"DeleteUser\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"Access denied for command 'DeleteUser'\"}]}\n"},{"result":{"nanos":15400,"millis":0.0154,"status":"passed"},"step":{"line":152,"prefix":"Then","index":55,"text":"status 200"}},{"result":{"nanos":529700,"millis":0.5297,"status":"passed"},"step":{"comments":["# As the user is not admin, the response of the query shouldn't contain the datas of the user tryed to saved"],"line":155,"prefix":"*","index":56,"text":"match response.errors != '#notpresent'"}}],"executorName":"main","line":10,"name":"Querys for an user not admin","description":"","durationMillis":10114.3265,"startTime":1621242010153,"failed":false,"refId":"[1:10]","endTime":1621242020427,"exampleIndex":-1}],"callDepth":0,"name":"Test that an user not admin isn't allowed to do admin functions in the environment set from the java class","description":"","resultDate":"2021-05-17 11:00:20 a.Â m.","durationMillis":10114.3265,"passedCount":1}