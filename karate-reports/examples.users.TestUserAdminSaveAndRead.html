<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>examples.users.TestUserAdminSaveAndRead</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">7</div>
      <div id="nav-fail" class="bg-danger">1</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2021-05-18 12:34:06 a.Â m.</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item passed">
            <a href="#[1:17]"><span>[1:17]</span> <span>The user admin save a new user</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[2:39]"><span>[2:39]</span> <span>List the new user by id</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[3:68]"><span>[3:68]</span> <span>Test that datas must be correct to create a new user</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[4:106]"><span>[4:106]</span> <span>The user admin can list all the users</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[5:127]"><span>[5:127]</span> <span>The admin user can create customers:</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[6:189]"><span>[6:189]</span> <span>The admin user can change the role of an user</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[7:214]"><span>[7:214]</span> <span>Delete an existing user</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[8:258]"><span>[8:258]</span> <span>The use admin can delete customers</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">examples/users/TestUserAdminSaveAndRead.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Test the creation of users and customers by an admin user in the environment set from the java class</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:17]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:17]</span>
                <span class="scenario-name">The user admin save a new user</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>7391</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:17]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:17]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:24.299 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[1:17]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:17]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">39</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:17]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">864</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">839</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:24.400 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">7</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">821</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:24.639 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:25.227 response time in milliseconds: 585
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:25 GMT
1 &lt; x-amzn-RequestId: b0e6e28e-8719-4217-8d68-12c7a29ef40c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpQVExVDoEF1dw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef35-36f68bd71b3f60a66afe5ff3
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 06bb36c6f8415e5c64e03df316bffb5b.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: A_oyTpERBivgpGiPRDW0v9jTMoosDWAQIRjqo6hl3u0LuIyOv8fGAw==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOGQyMjM4YS0wZmJkLTQxNjctOGI5Ni1jNWVlMTJhYTllMWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgwNSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQwNSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgwNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.zfAMbeAbX8O5Z1ttJbJqmsLrDN2YNL2bKCHF2VnwZ6UZCHFBE-9Qo-3YrqqMzTQeUt86XLp6q8MjacM4N0SZL8_zqZADWd3i04pdETgPejFpuHohQLartbYT6sMO8iCfDVPMCgMGOQsOAGLBbGokw6foFivrIvxMBj8Oquq0ewB0Jt8-7dHReEKWIm5FdveqlurEJTB0DAB-TfUO4bDlckDE7YUKxM7J_kawxg8xNrPh6_5TI4VoeLPDdE-AqkdCIUfdjukO86KEnu25LxdpOibflUUaTjOxQkguSy4rgzLL1wJk5-jqjy2zJgK6dOvSzZaSQ04LGHMUEiYk3V45NA&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImM4ZDIyMzhhLTBmYmQtNDE2Ny04Yjk2LWM1ZWUxMmFhOWUxZiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MDUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQwNSwiaWF0IjoxNjIxMjkwODA1LCJqdGkiOiI2MGNjMGJiNC00OTUxLTQxYjEtOWU5MC0zYjljMmVjYTNjNDYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.IR_hlVc2WPkbcKJrlppkXTR_1yal8pEsTAMs7wDPxZw5rGHFBKUoW47vo0zGxUdh1JCgK6eKXJZ8xqxUGov9rmbusfOanMJZCnXx4rcl4hKLPS62vj14qM_qJDUhgufkktNbmYf9IIGlfT514QtIDWSCEwiqTkdeZ0-MTfOi1HT0INu3LlHR-8jqmKo7YClVLgd1tgtsUiLZKCbbjWT8RmGAEKAUQ-6eqlMeHNjaLSD9OwQDcP79Bh0Za18C9OCIeOBVcgwKV73OAV6HIbXt8cMxwZbQC1ZDoa9eFF6hkIWkwOAAjny_yA58m3fv_CavwNIQ5MH3Gp9HfCzaL7W_iQ&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Pr-FY9Kd46LjNYUeafGH-I7ZuGsR-u4JEq0ZcGmnZeoty1mhMBjH9tCxJivgBxGpXDQixD2svldZLI8u834qsWSXQ5ON81acIJwk2FXU8qD2KazzXYRmhm7LScdrb0T1enaP7ntkqA92cWXS5AokJ6ECn2OT8blcE3Z2nI3HY6o3AModDkLYU7PEFU6oCqwtXEvR8WIfSSytvX1l0fKhA5SyyQDeJCEWe5xmWRnGY1SV-llRRRJ05dofg_aT_k5Gx_WTDXzIiNiIFDFph8vhMIM2IXeEuDJougZgayoxTt794kOBIc8f9z4WcrykwrfCgS2cQdqQ2qLGeXZq6XeFrw.yt776X7EgMvosVF4.ID7NXxmXm0osEIdaRcWuM4-OceDgWACfQqKvWHZ43nItQ5fhP1twRXDdzTzpHYyS4mgg4e9JpYAFb9dc852GvBm_LDPaacuZhO7b_ZAFCESzVnAaqqUdqej2ebE3DtoWAbeFlFFwD0_UfX7tqf8oRzeUOABSxC2vsGGh6xfKxBsJtJd6dxY1wPzq5xJjy6E1q-ehdvK9EGMoYrkRnlSxYnKfcFizq8Pk4oXFolBYtFyV2KShvh_VtAlxcrh38cnBItpki8c7oUQ_ytn3K7eHPJ17e_lJpsuv66nghfxSc_ia3mfYA-c4SbuflA4XBKM5qWErISp-6iPjRG_YPvOVlHG5oLky0iyIHhe4js1SUPXMSXOjyiDdHseajVMJKKOdAz6z_ORRKwwf036qDyZ7M7I7tcfJRtz301wEoK2iKKe78F_p0LLYgr9uZDGVxZgid565ovwktWfsAUKUqY8HQcuMPr_j5-9pG1O570e4mx9M04gtg1I-R5yCpq1iDlA7WS1IFmZqt0FJLUy3x4MbYp8_sAz5X6g_1HdX3kFxy6icmKXLR-IQ4qEWmjXqIFXRVGWnlqY4zfrqj7sCPfDCdlsaGolEoyYcPcNI-Kzqm8l_S6HsrGQF_UaMh_YKyL52zAZ-hEI8m5viJmNlmnFZF5_fseaw9vaJHsyUNHVCTkwsDCH6kEGakvOt0hWSDjfAPrLIN7b0_eCHjUSMTaqp3MkPczDbkgdOWEZDCUvvpo_EVZ1cvo25SHluQnlt88cmw3rkGktZA57gkLzscpeox5SF0IgXyYyzV60Z1jyfdqNIXWa4VOzoUCFN3kpH1YGorjvmL41bR-iKeinNiDAfi9TzSVqv3pH9WycLm9sB0s8ws90NmcIHGKOzSmWsBujtRG6krgTQX5AyEwODfQUYZOq9bse1h8YM2lCSi8NgXwJxaY-DaQVJFr7uC494dNElNkDfhDvk4jZrawBwN0lE5kfPzakvs8Rfm1gTJEGaKsLJip9gRyNB458f_gC_wzjQYiHuXIz8uKPETKvlw_JJTNvUf91xHynSPhMBSabI-E1CsUu4xHF3VlQtsnJpwLXSaMRVPSvjj8w8EQTnVkuY_GfYtPbzICsOMflwwol5q_cxQil9L5vJjX0AlZKtUm9iaLtusi3Miiy_yFF5lPShG_JquoP2Z9O4zxi4rlsQDjUjv7qUBzR2BUnKx76PWUDUJRJwpIjONh1C3LcjiaUo1OfrUovj942FF01MtHh6YaNDCVhtD-3jE6aEF0YIirY_Rrc_0wYFcVKBbdUULNW0GiSmk3wAowZs_IbclpNQARKQC7lKk4PgeaCH5per3Dc.lNdqMQRlKq-dffiGsBYjjg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:25.233 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOGQyMjM4YS0wZmJkLTQxNjctOGI5Ni1jNWVlMTJhYTllMWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgwNSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQwNSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgwNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.zfAMbeAbX8O5Z1ttJbJqmsLrDN2YNL2bKCHF2VnwZ6UZCHFBE-9Qo-3YrqqMzTQeUt86XLp6q8MjacM4N0SZL8_zqZADWd3i04pdETgPejFpuHohQLartbYT6sMO8iCfDVPMCgMGOQsOAGLBbGokw6foFivrIvxMBj8Oquq0ewB0Jt8-7dHReEKWIm5FdveqlurEJTB0DAB-TfUO4bDlckDE7YUKxM7J_kawxg8xNrPh6_5TI4VoeLPDdE-AqkdCIUfdjukO86KEnu25LxdpOibflUUaTjOxQkguSy4rgzLL1wJk5-jqjy2zJgK6dOvSzZaSQ04LGHMUEiYk3V45NA 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[1:17]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:25.236 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOGQyMjM4YS0wZmJkLTQxNjctOGI5Ni1jNWVlMTJhYTllMWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgwNSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQwNSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgwNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.zfAMbeAbX8O5Z1ttJbJqmsLrDN2YNL2bKCHF2VnwZ6UZCHFBE-9Qo-3YrqqMzTQeUt86XLp6q8MjacM4N0SZL8_zqZADWd3i04pdETgPejFpuHohQLartbYT6sMO8iCfDVPMCgMGOQsOAGLBbGokw6foFivrIvxMBj8Oquq0ewB0Jt8-7dHReEKWIm5FdveqlurEJTB0DAB-TfUO4bDlckDE7YUKxM7J_kawxg8xNrPh6_5TI4VoeLPDdE-AqkdCIUfdjukO86KEnu25LxdpOibflUUaTjOxQkguSy4rgzLL1wJk5-jqjy2zJgK6dOvSzZaSQ04LGHMUEiYk3V45NA&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImM4ZDIyMzhhLTBmYmQtNDE2Ny04Yjk2LWM1ZWUxMmFhOWUxZiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MDUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQwNSwiaWF0IjoxNjIxMjkwODA1LCJqdGkiOiI2MGNjMGJiNC00OTUxLTQxYjEtOWU5MC0zYjljMmVjYTNjNDYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.IR_hlVc2WPkbcKJrlppkXTR_1yal8pEsTAMs7wDPxZw5rGHFBKUoW47vo0zGxUdh1JCgK6eKXJZ8xqxUGov9rmbusfOanMJZCnXx4rcl4hKLPS62vj14qM_qJDUhgufkktNbmYf9IIGlfT514QtIDWSCEwiqTkdeZ0-MTfOi1HT0INu3LlHR-8jqmKo7YClVLgd1tgtsUiLZKCbbjWT8RmGAEKAUQ-6eqlMeHNjaLSD9OwQDcP79Bh0Za18C9OCIeOBVcgwKV73OAV6HIbXt8cMxwZbQC1ZDoa9eFF6hkIWkwOAAjny_yA58m3fv_CavwNIQ5MH3Gp9HfCzaL7W_iQ&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Pr-FY9Kd46LjNYUeafGH-I7ZuGsR-u4JEq0ZcGmnZeoty1mhMBjH9tCxJivgBxGpXDQixD2svldZLI8u834qsWSXQ5ON81acIJwk2FXU8qD2KazzXYRmhm7LScdrb0T1enaP7ntkqA92cWXS5AokJ6ECn2OT8blcE3Z2nI3HY6o3AModDkLYU7PEFU6oCqwtXEvR8WIfSSytvX1l0fKhA5SyyQDeJCEWe5xmWRnGY1SV-llRRRJ05dofg_aT_k5Gx_WTDXzIiNiIFDFph8vhMIM2IXeEuDJougZgayoxTt794kOBIc8f9z4WcrykwrfCgS2cQdqQ2qLGeXZq6XeFrw.yt776X7EgMvosVF4.ID7NXxmXm0osEIdaRcWuM4-OceDgWACfQqKvWHZ43nItQ5fhP1twRXDdzTzpHYyS4mgg4e9JpYAFb9dc852GvBm_LDPaacuZhO7b_ZAFCESzVnAaqqUdqej2ebE3DtoWAbeFlFFwD0_UfX7tqf8oRzeUOABSxC2vsGGh6xfKxBsJtJd6dxY1wPzq5xJjy6E1q-ehdvK9EGMoYrkRnlSxYnKfcFizq8Pk4oXFolBYtFyV2KShvh_VtAlxcrh38cnBItpki8c7oUQ_ytn3K7eHPJ17e_lJpsuv66nghfxSc_ia3mfYA-c4SbuflA4XBKM5qWErISp-6iPjRG_YPvOVlHG5oLky0iyIHhe4js1SUPXMSXOjyiDdHseajVMJKKOdAz6z_ORRKwwf036qDyZ7M7I7tcfJRtz301wEoK2iKKe78F_p0LLYgr9uZDGVxZgid565ovwktWfsAUKUqY8HQcuMPr_j5-9pG1O570e4mx9M04gtg1I-R5yCpq1iDlA7WS1IFmZqt0FJLUy3x4MbYp8_sAz5X6g_1HdX3kFxy6icmKXLR-IQ4qEWmjXqIFXRVGWnlqY4zfrqj7sCPfDCdlsaGolEoyYcPcNI-Kzqm8l_S6HsrGQF_UaMh_YKyL52zAZ-hEI8m5viJmNlmnFZF5_fseaw9vaJHsyUNHVCTkwsDCH6kEGakvOt0hWSDjfAPrLIN7b0_eCHjUSMTaqp3MkPczDbkgdOWEZDCUvvpo_EVZ1cvo25SHluQnlt88cmw3rkGktZA57gkLzscpeox5SF0IgXyYyzV60Z1jyfdqNIXWa4VOzoUCFN3kpH1YGorjvmL41bR-iKeinNiDAfi9TzSVqv3pH9WycLm9sB0s8ws90NmcIHGKOzSmWsBujtRG6krgTQX5AyEwODfQUYZOq9bse1h8YM2lCSi8NgXwJxaY-DaQVJFr7uC494dNElNkDfhDvk4jZrawBwN0lE5kfPzakvs8Rfm1gTJEGaKsLJip9gRyNB458f_gC_wzjQYiHuXIz8uKPETKvlw_JJTNvUf91xHynSPhMBSabI-E1CsUu4xHF3VlQtsnJpwLXSaMRVPSvjj8w8EQTnVkuY_GfYtPbzICsOMflwwol5q_cxQil9L5vJjX0AlZKtUm9iaLtusi3Miiy_yFF5lPShG_JquoP2Z9O4zxi4rlsQDjUjv7qUBzR2BUnKx76PWUDUJRJwpIjONh1C3LcjiaUo1OfrUovj942FF01MtHh6YaNDCVhtD-3jE6aEF0YIirY_Rrc_0wYFcVKBbdUULNW0GiSmk3wAowZs_IbclpNQARKQC7lKk4PgeaCH5per3Dc.lNdqMQRlKq-dffiGsBYjjg&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.18">
      <div class="step-ref passed">18</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.18">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.23">
      <div class="step-ref passed">23</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def NewUser = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref passed">25</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.26">
      <div class="step-ref passed">26</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">11</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.27">
      <div class="step-ref passed">27</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(NewUser)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.28">
      <div class="step-ref passed">28</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">2419</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28">00:33:25.255 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOGQyMjM4YS0wZmJkLTQxNjctOGI5Ni1jNWVlMTJhYTllMWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgwNSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQwNSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgwNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.zfAMbeAbX8O5Z1ttJbJqmsLrDN2YNL2bKCHF2VnwZ6UZCHFBE-9Qo-3YrqqMzTQeUt86XLp6q8MjacM4N0SZL8_zqZADWd3i04pdETgPejFpuHohQLartbYT6sMO8iCfDVPMCgMGOQsOAGLBbGokw6foFivrIvxMBj8Oquq0ewB0Jt8-7dHReEKWIm5FdveqlurEJTB0DAB-TfUO4bDlckDE7YUKxM7J_kawxg8xNrPh6_5TI4VoeLPDdE-AqkdCIUfdjukO86KEnu25LxdpOibflUUaTjOxQkguSy4rgzLL1wJk5-jqjy2zJgK6dOvSzZaSQ04LGHMUEiYk3V45NA
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 251
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user30@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

00:33:27.669 response time in milliseconds: 2413
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:27 GMT
1 &lt; x-amzn-RequestId: 94494f1c-1d35-4401-b1bb-c9d109f628d5
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpQaHGojoEF3AA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef35-3be0a0c0000d7fa40fa8b4dc;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 02fcbf68a81897cc093ee1510fb7e93e.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 85lAIq_DS89PgiGcIPdT-SV_ys92_GPTe24b4Bkue9oODsr6OZEqMA==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.29">
      <div class="step-ref passed">29</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref passed">32</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4025</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.34">
      <div class="step-ref passed">34</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the user can&#39;t be created, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.36">
      <div class="step-ref passed">36</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">24</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2:39]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2:39]</span>
                <span class="scenario-name">List the new user by id</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>857</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2:39]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2:39]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:31.731 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[2:39]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:39]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:39]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">559</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">549</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:31.743 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">543</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:31.746 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:32.286 response time in milliseconds: 538
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:32 GMT
1 &lt; x-amzn-RequestId: a3a9a46d-6505-4602-b2e9-2da0a2bc7f5f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpRbEFJjoEFw-w=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef3c-517bbd0129ac7ded5a0d00a3
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 52686d7bb0f6b3316a4c50b617ea8077.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: QEMSDSJlJUSTbDMwcbXz0mwxFNP7Q3Yg1CtSHwn-bCQz7m3bxCSfxQ==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJkZDMxMTY3Ny1jMTE0LTQ4YjctODJmMC04NjE2MDVmMWIzMmEiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.hQ8W7uRCExlULadrov8AmqILKMpucPepkEKZnKpdOaGb_cS_U8Z7N_I6tgq03QyuVO9D07dvUKw8_6-8C8wcuZ7kQ7oUYllYM_AH01yXxZ76fh0wI_fQv9YpG9c04n9Xz-X8Wja2N_1MpV-ZipeU9SdhzyVn69p_dYaeYcpR-nrzw6S5GQ6QcRX2k-6Et8nPEzP344PbHmkPZBuksSkx6NDr2Hp42i8lrZbeg7IcKcvwT-3tqZkuMEUsXA-yBOTZ4kQgvEhIx50t7srfI71pyYTrN0pBtdSDR6vl3mkVRiKbVwIrQOQ7cTEvHc9FTn9qcmzLm8Q7rC8dOyEbD3tIxw&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImRkMzExNjc3LWMxMTQtNDhiNy04MmYwLTg2MTYwNWYxYjMyYSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MTIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQxMiwiaWF0IjoxNjIxMjkwODEyLCJqdGkiOiJiMTE5OGZhMC03NWUwLTQ1NjMtOTI1OC0zZWE2ODFmYTUzYmEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.leMLjRww7rH_0brmRe7x3yBhycpkct5tqNO21SmqPnBDtWpEWmi-ZhQ7tHpFe5LOm8oFrEnndiiYVQcfUJ3q5F6wSUJ9Oxq0ZNbRHXWN101BcyRTOGEpynWZV-58talaTx_XR6sSWDWlzfK1Svtvb9NXb7_LMnY3SIjfxjpVPaJw-mBlliISuNIaPHie8x0kahP7KJ9NfPL0M4COWco2d3x84TxuB1EsrC5TdJZC47uu_JL7Z8cmstPd4V9KGZhRjF_4DAz9yzPMhf0GFoiTkWWIRHn4JuAJrhag3WtKKWAuvGwApT9wCg98qEpyaiGbiHkAta6UGYiDbgbQiEv7Qg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.hCpbiy07_T6zaYgmXPPHskNNBCCBO--OjsmVw1W_CH2NMCCQ48xMn_GylLHQ8-aTf5wlRWpmrY9sXRiifqPJ8SbptSApqhqkHhOI7495UQtAqd5cazfE_wYLPG1Gtm9336IlpTZw9TWgFBUIElNcyNYEyS4UjwZY0EZJJOOol-xSbzLNbovurRqgwydoLdbFkYXEfyROIO1AufI1jctx_x1Qh-PMnNlIp5xjiH_adw2pQoKEiWSL9jGOQYj3GnDVvhRlAY6lRNv0XkP5zUu_CAlNBNFNM7PQVKBOs5p54NHZlN1BGjqRNvMReFP1dr-b--oVUadoW0uERkSK6MhdvQ.j_s726Hz4dxUlSUH.1aNuwPlWUzsyxSNfKPJd_69etgJPJ5p2I3NA-jE-GBB5mLX2lDG5SUUIHWEImVtX_MoYLnq1IoB5eBjNRxtFF59MPEoyU8NJshyWYaKVI_DMM1PvsoCZ1aQR_e01ikDuZ5NuPDxrrxPT-5oVgoUAd_z7QdEPGIwC64vaUh4Cjznh3J2-ItOP7YOK64Bz1Km6kYtHmthj-_0JWuU35XT74fysJNAoVH8IUIxdbZl1No-A3xbQhuKvYRoRba1p8st7siHriEXSI7Ei5BDoNujnZStn_Dz5eZidHIkD7zlVXLlxoR7kPugyHZMjHb-Fd_JQzasOekrn17LLKWBMYa7mk3JlT_DU3j-27zut9fX4zVIv7udyCL4V6Sp8gYgk28UE7IY84ZEfhXZbSEr7PLIzmCKT59ZM37rY53My9DGdMfFmAYxRVWWVsivTCWPUvmbJwhSyUho_l2in33lQl0xHCOu0T8kskCMICxKgKWHNQu5E_2LwBapgQnMMD6qTbY5CJ2BkbojYkxY8hM4j2BgNWJptshXKiED7ZME3nxW0tVI8fFj9A2FxPk97GJ7rrmJHCHpfBfqz32USTVVyboPK1peaZAyFDjh2FfCccqlD1yD4DiNVnjg-mRmPci13-j6E-O3Ku8ZbnSaf_wF84kPQ70Kv71Ft_UPZ4i_fsvAPxRnJAntCoD4QKPHPA5m50GyAHSxjfVuajog-Xhil915s3IrMAg0nsd4LmYn1uZ0WgdXNlBoO2dJXeo79mXAyay3Cei6xcZ8Q4sSH3KACiiNcsnCNsjRSC2C1DUzZnPRMX6-7ZCGCQKO6ULLHiMbHzqHDlTCKZZlvkFJU5oXrgZ-2JQghwNYi64KMAqPw5hzRq4R4bNfyfnA2HqlnXmZ9NkPyBAAj6MKToyYAw4nkzzVkJESBW3fwMKK3atZN9a8zT375ie7pFaYJsPe-_YTvQfc3TCiGA4QURqKruIOnn0uHkDO1gzjaAiPPCNuQeeSZcHzvmopHbFTKbjijsZtyPEf9fW_u9jmseR0n3LVPPp8inQFQ5Fsi_TP3MWAMF_K32h5_kXBxZr2v-nqB_v2S8PTww0pQPr4iwKsWIwmfP9MCaT8-ut8Qr68H-ZWiAZuiV-aqiAhtme3hv8Hf5Bn4MKqw9T9SBwReDUTFwZnMhi3ED_Wu_ELq2X52RM8IFi8ox-tNUa9fJ220EFPIbVYmWd0jnfjlXjTaL9tIYOrC6jmeJ6Y_zLhxTiv0mdYiNEEl67gNFEouDENoBMsa3z0KJEl3Yjw1YJUNehUKgkKI7XkBbZlPdK3wnMVVl2u9ObCLzCqpXVp5NQGjuBzs_hGGCz8.06TOXzvloh98cYwobpY6qg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:32.290 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJkZDMxMTY3Ny1jMTE0LTQ4YjctODJmMC04NjE2MDVmMWIzMmEiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.hQ8W7uRCExlULadrov8AmqILKMpucPepkEKZnKpdOaGb_cS_U8Z7N_I6tgq03QyuVO9D07dvUKw8_6-8C8wcuZ7kQ7oUYllYM_AH01yXxZ76fh0wI_fQv9YpG9c04n9Xz-X8Wja2N_1MpV-ZipeU9SdhzyVn69p_dYaeYcpR-nrzw6S5GQ6QcRX2k-6Et8nPEzP344PbHmkPZBuksSkx6NDr2Hp42i8lrZbeg7IcKcvwT-3tqZkuMEUsXA-yBOTZ4kQgvEhIx50t7srfI71pyYTrN0pBtdSDR6vl3mkVRiKbVwIrQOQ7cTEvHc9FTn9qcmzLm8Q7rC8dOyEbD3tIxw 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[2:39]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:32.294 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJkZDMxMTY3Ny1jMTE0LTQ4YjctODJmMC04NjE2MDVmMWIzMmEiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.hQ8W7uRCExlULadrov8AmqILKMpucPepkEKZnKpdOaGb_cS_U8Z7N_I6tgq03QyuVO9D07dvUKw8_6-8C8wcuZ7kQ7oUYllYM_AH01yXxZ76fh0wI_fQv9YpG9c04n9Xz-X8Wja2N_1MpV-ZipeU9SdhzyVn69p_dYaeYcpR-nrzw6S5GQ6QcRX2k-6Et8nPEzP344PbHmkPZBuksSkx6NDr2Hp42i8lrZbeg7IcKcvwT-3tqZkuMEUsXA-yBOTZ4kQgvEhIx50t7srfI71pyYTrN0pBtdSDR6vl3mkVRiKbVwIrQOQ7cTEvHc9FTn9qcmzLm8Q7rC8dOyEbD3tIxw&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImRkMzExNjc3LWMxMTQtNDhiNy04MmYwLTg2MTYwNWYxYjMyYSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MTIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQxMiwiaWF0IjoxNjIxMjkwODEyLCJqdGkiOiJiMTE5OGZhMC03NWUwLTQ1NjMtOTI1OC0zZWE2ODFmYTUzYmEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.leMLjRww7rH_0brmRe7x3yBhycpkct5tqNO21SmqPnBDtWpEWmi-ZhQ7tHpFe5LOm8oFrEnndiiYVQcfUJ3q5F6wSUJ9Oxq0ZNbRHXWN101BcyRTOGEpynWZV-58talaTx_XR6sSWDWlzfK1Svtvb9NXb7_LMnY3SIjfxjpVPaJw-mBlliISuNIaPHie8x0kahP7KJ9NfPL0M4COWco2d3x84TxuB1EsrC5TdJZC47uu_JL7Z8cmstPd4V9KGZhRjF_4DAz9yzPMhf0GFoiTkWWIRHn4JuAJrhag3WtKKWAuvGwApT9wCg98qEpyaiGbiHkAta6UGYiDbgbQiEv7Qg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.hCpbiy07_T6zaYgmXPPHskNNBCCBO--OjsmVw1W_CH2NMCCQ48xMn_GylLHQ8-aTf5wlRWpmrY9sXRiifqPJ8SbptSApqhqkHhOI7495UQtAqd5cazfE_wYLPG1Gtm9336IlpTZw9TWgFBUIElNcyNYEyS4UjwZY0EZJJOOol-xSbzLNbovurRqgwydoLdbFkYXEfyROIO1AufI1jctx_x1Qh-PMnNlIp5xjiH_adw2pQoKEiWSL9jGOQYj3GnDVvhRlAY6lRNv0XkP5zUu_CAlNBNFNM7PQVKBOs5p54NHZlN1BGjqRNvMReFP1dr-b--oVUadoW0uERkSK6MhdvQ.j_s726Hz4dxUlSUH.1aNuwPlWUzsyxSNfKPJd_69etgJPJ5p2I3NA-jE-GBB5mLX2lDG5SUUIHWEImVtX_MoYLnq1IoB5eBjNRxtFF59MPEoyU8NJshyWYaKVI_DMM1PvsoCZ1aQR_e01ikDuZ5NuPDxrrxPT-5oVgoUAd_z7QdEPGIwC64vaUh4Cjznh3J2-ItOP7YOK64Bz1Km6kYtHmthj-_0JWuU35XT74fysJNAoVH8IUIxdbZl1No-A3xbQhuKvYRoRba1p8st7siHriEXSI7Ei5BDoNujnZStn_Dz5eZidHIkD7zlVXLlxoR7kPugyHZMjHb-Fd_JQzasOekrn17LLKWBMYa7mk3JlT_DU3j-27zut9fX4zVIv7udyCL4V6Sp8gYgk28UE7IY84ZEfhXZbSEr7PLIzmCKT59ZM37rY53My9DGdMfFmAYxRVWWVsivTCWPUvmbJwhSyUho_l2in33lQl0xHCOu0T8kskCMICxKgKWHNQu5E_2LwBapgQnMMD6qTbY5CJ2BkbojYkxY8hM4j2BgNWJptshXKiED7ZME3nxW0tVI8fFj9A2FxPk97GJ7rrmJHCHpfBfqz32USTVVyboPK1peaZAyFDjh2FfCccqlD1yD4DiNVnjg-mRmPci13-j6E-O3Ku8ZbnSaf_wF84kPQ70Kv71Ft_UPZ4i_fsvAPxRnJAntCoD4QKPHPA5m50GyAHSxjfVuajog-Xhil915s3IrMAg0nsd4LmYn1uZ0WgdXNlBoO2dJXeo79mXAyay3Cei6xcZ8Q4sSH3KACiiNcsnCNsjRSC2C1DUzZnPRMX6-7ZCGCQKO6ULLHiMbHzqHDlTCKZZlvkFJU5oXrgZ-2JQghwNYi64KMAqPw5hzRq4R4bNfyfnA2HqlnXmZ9NkPyBAAj6MKToyYAw4nkzzVkJESBW3fwMKK3atZN9a8zT375ie7pFaYJsPe-_YTvQfc3TCiGA4QURqKruIOnn0uHkDO1gzjaAiPPCNuQeeSZcHzvmopHbFTKbjijsZtyPEf9fW_u9jmseR0n3LVPPp8inQFQ5Fsi_TP3MWAMF_K32h5_kXBxZr2v-nqB_v2S8PTww0pQPr4iwKsWIwmfP9MCaT8-ut8Qr68H-ZWiAZuiV-aqiAhtme3hv8Hf5Bn4MKqw9T9SBwReDUTFwZnMhi3ED_Wu_ELq2X52RM8IFi8ox-tNUa9fJ220EFPIbVYmWd0jnfjlXjTaL9tIYOrC6jmeJ6Y_zLhxTiv0mdYiNEEl67gNFEouDENoBMsa3z0KJEl3Yjw1YJUNehUKgkKI7XkBbZlPdK3wnMVVl2u9ObCLzCqpXVp5NQGjuBzs_hGGCz8.06TOXzvloh98cYwobpY6qg&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Check the new user created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.42">
      <div class="step-ref passed">42</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.42">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define the username of the user to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.47">
      <div class="step-ref passed">47</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.48">
      <div class="step-ref passed">48</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.48">{ 
   &quot;id&quot;: &quot;#(newUser.username)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.54">
      <div class="step-ref passed">54</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.54">00:33:32.298 [print] {
  &quot;id&quot;: &quot;user30@test.com&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.56">
      <div class="step-ref passed">56</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.57">
      <div class="step-ref passed">57</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.58">
      <div class="step-ref passed">58</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.59">
      <div class="step-ref passed">59</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModel)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.60">
      <div class="step-ref passed">60</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">286</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.60">00:33:32.302 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJkZDMxMTY3Ny1jMTE0LTQ4YjctODJmMC04NjE2MDVmMWIzMmEiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.hQ8W7uRCExlULadrov8AmqILKMpucPepkEKZnKpdOaGb_cS_U8Z7N_I6tgq03QyuVO9D07dvUKw8_6-8C8wcuZ7kQ7oUYllYM_AH01yXxZ76fh0wI_fQv9YpG9c04n9Xz-X8Wja2N_1MpV-ZipeU9SdhzyVn69p_dYaeYcpR-nrzw6S5GQ6QcRX2k-6Et8nPEzP344PbHmkPZBuksSkx6NDr2Hp42i8lrZbeg7IcKcvwT-3tqZkuMEUsXA-yBOTZ4kQgvEhIx50t7srfI71pyYTrN0pBtdSDR6vl3mkVRiKbVwIrQOQ7cTEvHc9FTn9qcmzLm8Q7rC8dOyEbD3tIxw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 156
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user30@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

00:33:32.584 response time in milliseconds: 281
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 65
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:32 GMT
1 &lt; x-amzn-RequestId: 980e7e92-61b7-45cd-b3d2-31bc4c9a116c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpRhGSrDoEFTbw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef3c-2bc14bcf0db71a7808444b17;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 0ef74e866fd3a98abc576c37ab84cf4f.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: JfTeA85FRn243R-j_KkitGi6KI_kakmByJ0-3-YoVhKtLPzZZk5-Wg==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user30@test.com&quot;}}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.61">
      <div class="step-ref passed">61</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.64">
      <div class="step-ref passed">64</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># If the new user was created, the response of the query must contain the datas of the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.66">
      <div class="step-ref passed">66</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModel == {id: &#39;#(newUser.username)&#39;, role: &#39;#(newUser.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[3:68]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[3:68]</span>
                <span class="scenario-name">Test that datas must be correct to create a new user</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>9418</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[3:68]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[3:68]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:32.601 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[3:68]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:68]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:68]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">497</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">486</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:32.613 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">483</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:32.616 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:33.096 response time in milliseconds: 478
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:33 GMT
1 &lt; x-amzn-RequestId: a4736869-8118-4c0a-b4ad-b80c954f1be4
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpRkFRCDoEFlLA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef3d-1b33bbcb75ebccde2a51d525
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 5aa1be24b1cf8e3c10252fabac41cc27.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: VEUV64K-NLPkFmtIrD24ow1IGkwsEj34skj6K3VnogkNbZ_ON5SV4Q==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOTllMzE1ZS1jZjdjLTQ4MmItODc2NC1mZjM5NGNiMzU1NzkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.vOB6tkNMTcb6PXYfT9tT4s5H3JH_z0ohE_H4milYPIRC1lz2ek1qqlyNOjpzwLeaBNBmp3vodjiGDY9dr2YfDHAYNkzwdgw1Eblvch6aX6Svtf41tAKOPp9MDEWDB6CHG5k2tVwn1belM77CZt-Zpf9oA_4KxtkhNWIbbz8dqxha9iDWXbrau6veJPxE3NASM_Qlda_UZuoo49qGhpsxNk2e6SmT2LeSLDPlpf-mNVfvEMD6CD7MMwKA_q9Ze4wgAzCTrptwDwn9CSjknuYzg0ikzvAiMpREI5klgYe6EZYkSUKEl9zHhOQNfVTZwzbUHCLNkg-6tC-usJlXi-M3Xg&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImM5OWUzMTVlLWNmN2MtNDgyYi04NzY0LWZmMzk0Y2IzNTU3OSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MTMsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQxMywiaWF0IjoxNjIxMjkwODEzLCJqdGkiOiIxOTUxMGJkMy1lOWFkLTQ4MDgtOTBlOC1kNWMwNmFlOTc2YmMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.vm-S3xqZ3ImtcZI1PU0ZNroGL71r2aSUPoPt-8OAph9wrOZp1U278KsiYErEWaZ95OespJCjTfkOU8OUT-ttTBuws9dpF0ANHN0vStBeU-G8Xs7OLGKjKX_E3_Z0O8TlMexCbmVStSZOVst-HnrEVG6luNw89e0gVzKYLLTUfvkLUfyG_5NvWIW_xZmYJWyjqYZFFZgcGbqxB-gjzitvY15PoYQFDxwYidq9721FG0ozQ9wJ7z5uJTg62ebcRh3Nk71N9gZnu8dZv-PmqI4fFKAp_fY5BSqqdyerN91JPzECL7h_m2-r3EQl3465tlLYEpS93yfiFPwYseS_pUkOAA&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bkgUwxBuM1TGHN90zP8XEjd3Fl50x2zrku7g70p5p0jjMAKa5kkICtK_CXE_lZZzxvoTopq-4zfovS4ytYcmJ9ef08BEvOcrjSAqbkCH8geIYamQHSqX4KrAKvmUwU0847zwDdy_-JtLu2lJuWyvLQ5JmRrEPIJLLZa2_OZ5-U5rSrdQbIt0bfnhWjr0ppQpZoqdvpujNft3bCSyAx2lmTvod7vIYPDEUloBuRzcM9pQ5KPBTjRTtVUE6bytBVOud3XYfFo3v17yatAUZpfztBkib4QWGRWCLrsY22QA0e3RPp_Czgq4ceG5C8TZOu4sA0IFxCzS16vB-yM93vVATA.iBLeNlv06lcYInd5.2-7VJIWtkLoDf285eXI5deRdbOFcqy2diXhoChwODxJtxyVKKnDI-j4gT2AB0G9in3MazACxvmdK_z8SBIK2LFVT5K67Bu3MV-595KV2ectg2SrQ_V-5wtoCPkrqlS7Tw9vsyADOK4vsFesYsGdpdY5cJHrQp5YvA8OKbHzWyjWDzepEbBi2p8kaKCYqHD6m5OzPqWwEHCf74JxjbhBqk5NOoNE3yz3gfyoWPbNYF4yhfLAI0G1Dm9Ff2iG-PXeUOT7QzWjnyxZk4ossIYnJYrH-3h1Hai20Gugx--oGye1KMacVAoXwddai62OtbVN7INaKivMU73E44HEHEj0SAPH0PW84eKrA2NZXFQvfewtbDaX79DbZH7BiXCE5TLVR5K1ooDSNqcm09-_Y73_hfR5sI3gKgqx84_f4NuSOpaO85e1P7kalBqsPqO5o5bbOl9U5nxnQvy46R5ZBIaMr7sb3WI3-0zle8HAyqXwgGUnsf1e37BQr2m1tHDC2fibKIwu52ZkQWg6LBSnk904XiqT4ZtpclsNudc79s7v5VPGxrTgHZaf3zCVZF97VTdNSCtU-F9TN4hRdsYT7OMG0UOrN0ZmMavkVir32E2s2YYUHkh5AlWXblvZ0wMJPdRgCz21jxpeUnQiuJl6BiGTNEXxwQG5bKf3e8eSVMRbQiu8K2nh64jirYK42TBphqvVgMZ4wOnPlPq8OtWA4NnxkA9Cc49kPQITYEpvjhAlX9oAGKg2eJHR9tuPlk0VcTY2iwQ4J1nwtaOwGpBYFQ5ekzJkNkSReEn200dE3K-E-tigzTeQyI4kBSy9xczq2XPJA9d5pZleR7YTDKDsGMmV9VoxRfrnxtUOqCoSL8dbkTvzmPlqByjyYUh4J3yyhpSyPQBdfaZa0sXzA_faW14Wj5bcfB_ICmidg_fVVgvz01p-eRr43IqrwplLa9yFNkRM5Q6y9TCL8oM8Tw1sdZDYMupunURKAJTVtB9LfwSLSeYlpcaJ5_SRCvc8OCy_wvjM5ugZA-OHKOcJsW52WkE-TArs1a3q6NGnB7YEBOV59aF3dmUPK7qEn7hlU9Lv3WuoctKyhkJ_RwGft9zZaJyJS2Dl2665Zwo7P_jlr1T1dcWQOF4k7QqnurREqizIeyTqSH69hMDTZouNZxhmEXImKI-sq486JcIPw6AEiA9fhhrQVWNXedmjDQZuwRtynVmMRM6L6dWQTIPMPxisVnl4EAZjELTiWM-9OPx3InrckgRSxSvUcUqMXNHTTMcK4FhiROoFhcJV7HpEMvFfMX6h6-Rbn9JUgq51JoRgUfmUZLoEY3SPluHMgc_Yu3rtDI-M.MWrF-8panSXp8baY_0ZEmA&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:33.098 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOTllMzE1ZS1jZjdjLTQ4MmItODc2NC1mZjM5NGNiMzU1NzkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.vOB6tkNMTcb6PXYfT9tT4s5H3JH_z0ohE_H4milYPIRC1lz2ek1qqlyNOjpzwLeaBNBmp3vodjiGDY9dr2YfDHAYNkzwdgw1Eblvch6aX6Svtf41tAKOPp9MDEWDB6CHG5k2tVwn1belM77CZt-Zpf9oA_4KxtkhNWIbbz8dqxha9iDWXbrau6veJPxE3NASM_Qlda_UZuoo49qGhpsxNk2e6SmT2LeSLDPlpf-mNVfvEMD6CD7MMwKA_q9Ze4wgAzCTrptwDwn9CSjknuYzg0ikzvAiMpREI5klgYe6EZYkSUKEl9zHhOQNfVTZwzbUHCLNkg-6tC-usJlXi-M3Xg 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[3:68]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:33.101 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOTllMzE1ZS1jZjdjLTQ4MmItODc2NC1mZjM5NGNiMzU1NzkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.vOB6tkNMTcb6PXYfT9tT4s5H3JH_z0ohE_H4milYPIRC1lz2ek1qqlyNOjpzwLeaBNBmp3vodjiGDY9dr2YfDHAYNkzwdgw1Eblvch6aX6Svtf41tAKOPp9MDEWDB6CHG5k2tVwn1belM77CZt-Zpf9oA_4KxtkhNWIbbz8dqxha9iDWXbrau6veJPxE3NASM_Qlda_UZuoo49qGhpsxNk2e6SmT2LeSLDPlpf-mNVfvEMD6CD7MMwKA_q9Ze4wgAzCTrptwDwn9CSjknuYzg0ikzvAiMpREI5klgYe6EZYkSUKEl9zHhOQNfVTZwzbUHCLNkg-6tC-usJlXi-M3Xg&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImM5OWUzMTVlLWNmN2MtNDgyYi04NzY0LWZmMzk0Y2IzNTU3OSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MTMsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQxMywiaWF0IjoxNjIxMjkwODEzLCJqdGkiOiIxOTUxMGJkMy1lOWFkLTQ4MDgtOTBlOC1kNWMwNmFlOTc2YmMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.vm-S3xqZ3ImtcZI1PU0ZNroGL71r2aSUPoPt-8OAph9wrOZp1U278KsiYErEWaZ95OespJCjTfkOU8OUT-ttTBuws9dpF0ANHN0vStBeU-G8Xs7OLGKjKX_E3_Z0O8TlMexCbmVStSZOVst-HnrEVG6luNw89e0gVzKYLLTUfvkLUfyG_5NvWIW_xZmYJWyjqYZFFZgcGbqxB-gjzitvY15PoYQFDxwYidq9721FG0ozQ9wJ7z5uJTg62ebcRh3Nk71N9gZnu8dZv-PmqI4fFKAp_fY5BSqqdyerN91JPzECL7h_m2-r3EQl3465tlLYEpS93yfiFPwYseS_pUkOAA&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bkgUwxBuM1TGHN90zP8XEjd3Fl50x2zrku7g70p5p0jjMAKa5kkICtK_CXE_lZZzxvoTopq-4zfovS4ytYcmJ9ef08BEvOcrjSAqbkCH8geIYamQHSqX4KrAKvmUwU0847zwDdy_-JtLu2lJuWyvLQ5JmRrEPIJLLZa2_OZ5-U5rSrdQbIt0bfnhWjr0ppQpZoqdvpujNft3bCSyAx2lmTvod7vIYPDEUloBuRzcM9pQ5KPBTjRTtVUE6bytBVOud3XYfFo3v17yatAUZpfztBkib4QWGRWCLrsY22QA0e3RPp_Czgq4ceG5C8TZOu4sA0IFxCzS16vB-yM93vVATA.iBLeNlv06lcYInd5.2-7VJIWtkLoDf285eXI5deRdbOFcqy2diXhoChwODxJtxyVKKnDI-j4gT2AB0G9in3MazACxvmdK_z8SBIK2LFVT5K67Bu3MV-595KV2ectg2SrQ_V-5wtoCPkrqlS7Tw9vsyADOK4vsFesYsGdpdY5cJHrQp5YvA8OKbHzWyjWDzepEbBi2p8kaKCYqHD6m5OzPqWwEHCf74JxjbhBqk5NOoNE3yz3gfyoWPbNYF4yhfLAI0G1Dm9Ff2iG-PXeUOT7QzWjnyxZk4ossIYnJYrH-3h1Hai20Gugx--oGye1KMacVAoXwddai62OtbVN7INaKivMU73E44HEHEj0SAPH0PW84eKrA2NZXFQvfewtbDaX79DbZH7BiXCE5TLVR5K1ooDSNqcm09-_Y73_hfR5sI3gKgqx84_f4NuSOpaO85e1P7kalBqsPqO5o5bbOl9U5nxnQvy46R5ZBIaMr7sb3WI3-0zle8HAyqXwgGUnsf1e37BQr2m1tHDC2fibKIwu52ZkQWg6LBSnk904XiqT4ZtpclsNudc79s7v5VPGxrTgHZaf3zCVZF97VTdNSCtU-F9TN4hRdsYT7OMG0UOrN0ZmMavkVir32E2s2YYUHkh5AlWXblvZ0wMJPdRgCz21jxpeUnQiuJl6BiGTNEXxwQG5bKf3e8eSVMRbQiu8K2nh64jirYK42TBphqvVgMZ4wOnPlPq8OtWA4NnxkA9Cc49kPQITYEpvjhAlX9oAGKg2eJHR9tuPlk0VcTY2iwQ4J1nwtaOwGpBYFQ5ekzJkNkSReEn200dE3K-E-tigzTeQyI4kBSy9xczq2XPJA9d5pZleR7YTDKDsGMmV9VoxRfrnxtUOqCoSL8dbkTvzmPlqByjyYUh4J3yyhpSyPQBdfaZa0sXzA_faW14Wj5bcfB_ICmidg_fVVgvz01p-eRr43IqrwplLa9yFNkRM5Q6y9TCL8oM8Tw1sdZDYMupunURKAJTVtB9LfwSLSeYlpcaJ5_SRCvc8OCy_wvjM5ugZA-OHKOcJsW52WkE-TArs1a3q6NGnB7YEBOV59aF3dmUPK7qEn7hlU9Lv3WuoctKyhkJ_RwGft9zZaJyJS2Dl2665Zwo7P_jlr1T1dcWQOF4k7QqnurREqizIeyTqSH69hMDTZouNZxhmEXImKI-sq486JcIPw6AEiA9fhhrQVWNXedmjDQZuwRtynVmMRM6L6dWQTIPMPxisVnl4EAZjELTiWM-9OPx3InrckgRSxSvUcUqMXNHTTMcK4FhiROoFhcJV7HpEMvFfMX6h6-Rbn9JUgq51JoRgUfmUZLoEY3SPluHMgc_Yu3rtDI-M.MWrF-8panSXp8baY_0ZEmA&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">## the password format isn&#39;t allowed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.70">
      <div class="step-ref passed">70</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.70">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.74">
      <div class="step-ref passed">74</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserBadPassword = read(&#39;newUser_BadPassword.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.76">
      <div class="step-ref passed">76</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.77">
      <div class="step-ref passed">77</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.78">
      <div class="step-ref passed">78</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.79">
      <div class="step-ref passed">79</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;, variables: &#39;#(newUserBadPassword)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.80">
      <div class="step-ref passed">80</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">506</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.80">00:33:33.107 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOTllMzE1ZS1jZjdjLTQ4MmItODc2NC1mZjM5NGNiMzU1NzkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.vOB6tkNMTcb6PXYfT9tT4s5H3JH_z0ohE_H4milYPIRC1lz2ek1qqlyNOjpzwLeaBNBmp3vodjiGDY9dr2YfDHAYNkzwdgw1Eblvch6aX6Svtf41tAKOPp9MDEWDB6CHG5k2tVwn1belM77CZt-Zpf9oA_4KxtkhNWIbbz8dqxha9iDWXbrau6veJPxE3NASM_Qlda_UZuoo49qGhpsxNk2e6SmT2LeSLDPlpf-mNVfvEMD6CD7MMwKA_q9Ze4wgAzCTrptwDwn9CSjknuYzg0ikzvAiMpREI5klgYe6EZYkSUKEl9zHhOQNfVTZwzbUHCLNkg-6tC-usJlXi-M3Xg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 254
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;userBadPass@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

00:33:33.609 response time in milliseconds: 501
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 155
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:33 GMT
1 &lt; x-amzn-RequestId: b1aacce6-3339-4cc3-8e16-cf585f04125e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpRpGeWDoEFmXg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef3d-2432b3665e3302db5e89c2a3;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 86b86f43445d5446c8b16910b2a9b8f9.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: Hs082kabRUDMf4HDCI-3lE0YS9z4waMVAKlmERvY_o0-Va1pnnSU6A==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;An account with the given email already exists.&quot;}]}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.81">
      <div class="step-ref passed">81</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.82">
      <div class="step-ref passed">82</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4007</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.85">
      <div class="step-ref passed">85</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># The response return an error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.87">
      <div class="step-ref passed">87</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">## the username format isn&#39;t allowed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref passed">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserBadUsername = read(&#39;newUser_BadUsername.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.92">
      <div class="step-ref passed">92</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.93">
      <div class="step-ref passed">93</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.94">
      <div class="step-ref passed">94</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.95">
      <div class="step-ref passed">95</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;, variables: &#39;#(newUserBadUsername)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.96">
      <div class="step-ref passed">96</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">390</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.96">00:33:37.624 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJjOTllMzE1ZS1jZjdjLTQ4MmItODc2NC1mZjM5NGNiMzU1NzkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgxMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQxMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgxMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.vOB6tkNMTcb6PXYfT9tT4s5H3JH_z0ohE_H4milYPIRC1lz2ek1qqlyNOjpzwLeaBNBmp3vodjiGDY9dr2YfDHAYNkzwdgw1Eblvch6aX6Svtf41tAKOPp9MDEWDB6CHG5k2tVwn1belM77CZt-Zpf9oA_4KxtkhNWIbbz8dqxha9iDWXbrau6veJPxE3NASM_Qlda_UZuoo49qGhpsxNk2e6SmT2LeSLDPlpf-mNVfvEMD6CD7MMwKA_q9Ze4wgAzCTrptwDwn9CSjknuYzg0ikzvAiMpREI5klgYe6EZYkSUKEl9zHhOQNfVTZwzbUHCLNkg-6tC-usJlXi-M3Xg
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 250
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user10test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

00:33:38.010 response time in milliseconds: 385
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 137
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 17 May 2021 22:33:38 GMT
2 &lt; x-amzn-RequestId: 73434e73-aa5c-4973-a9c6-b36947228ba8
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: ffpSVFMpDoEF8lA=
2 &lt; X-Amzn-Trace-Id: Root=1-60a2ef42-11cce190103bf50a3b42c54f;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 315f537a0be356b37267f2ae21a5363d.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: f68CpEBqyEnIY_5a_2b4tsiP9wgt-Mg-UjH-PHD3HzPaifb530yNrw==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Invalid email address format.&quot;}]}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.97">
      <div class="step-ref passed">97</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.98">
      <div class="step-ref passed">98</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.101">
      <div class="step-ref passed">101</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># The response return an error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.103">
      <div class="step-ref passed">103</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[4:106]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[4:106]</span>
                <span class="scenario-name">The user admin can list all the users</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>613</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[4:106]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[4:106]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:42.031 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[4:106]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:106]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:106]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">488</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">482</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:42.037 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">480</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:42.039 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:42.516 response time in milliseconds: 476
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:42 GMT
1 &lt; x-amzn-RequestId: 0184f4e4-28ed-4eeb-aa5f-3da263cad0a4
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpTCFb-DoEF-XA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef46-020d4b2f0da557870a9a9d03
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 2ae7e0c53833032779e8c2554653673b.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: -1y_lR7hWhMpfChq807S9UMb5jYGu-7R8tr9qhegVtgS-LtzIJb19w==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlMmY3NDU2Yy1mOTIzLTQ5YTgtYmUwZS03NzY0Mjk0NWZjNjYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.ycqNkRFHhH_Podj10DrN7D29mcANLNLpDHsjtolZOOgVI2a6hMdQVN2NLtbNxYRad_pVVuDopoRbFHplcQfPYrPm5DQ3hHReIDavCUUCDTDgAbWdJ6jwycqbtKU0wklwwhuV_tiD62rRxQw8-Aqz976JsYoYEm1MhGClgZJ6b7hCQCvQ5xzJQNhmmWa2WXcwiPQpmoLbxjno54a8mItmUh81bHnubDwXokmqXbMLdrDsbb_Y1D2D9UW97-c7Gyec1zPkq5ccDSgiKN8q9OruG9CmgzAR5QgdFg-_5dLZqqLYyXJglLeo1JcV2uNFybpNnlzsy61MqJY7hPsdSRSkog&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImUyZjc0NTZjLWY5MjMtNDlhOC1iZTBlLTc3NjQyOTQ1ZmM2NiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MjIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQyMiwiaWF0IjoxNjIxMjkwODIyLCJqdGkiOiI4NGM1NzE1OC05MmU0LTRmYmMtYmVmZi03Zjg5MjIzYjNkZTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.BTlFWwcjv759WmLlgdNFCvy2-Cikq2-NCzpHKtOnmQbAZk6ECRnDKd1m70eF-wPTcEqAP_YXNm9jdrwLU0O4EHsdwWs_JKXa7jnEkRiIzAr3LrPBlPOFc9NXiFKYYdxADXBYhF14XiH4AuEkN4TVxaM03OrehWSh_yPt8OA8TUDPfQiwXNephh0cV6viPq_zpIHij4Pjy67ozQb9dp4ayH17JBAGliMKeUC84SjAT_tmnmIphoCZrHP-fpRXaxEDxtXijE65C1XNd6HQJIu1FRkXQmr9hEJmTZ5JLlzJoVM-NLOuwBSsJVaouJ4AzR8hrSPnHAzlzU8NK5OGvqRSYw&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.CJZg5sIn-wG3OOWtQoTA3KW70txKCbC-vVKIjS915-DXohvR7rzDcxWgdKY7YF_qp7qmOt7xcDSO0m7gR9946f17_lDAiytaCnzUn-qOBv2jK_QF4P1RtCCQy7kMPj0DtQHMCwtk1I80d3FsYxZN1Im0E4LtbqaobvC0AFUZqNIVZQIl2czquSCWFwChdxEnx5smo5pUBHLRtTmWiNoY4uEh5pwxnRur0AxSBALjxRCqOdETcXitNNjMT243yvCdU88DCyVDjHlOgEAmcFnDfwYE5Ij3zSZ213QNZ1DceOYfdwX6dBF5reUDFLjU_jAFij-B8Vik0maGgeztfD621w._f79SVNZH02VrrUT.SNBN2zjqLNDvvUaSAP3ztdLs_8k1dzfJSecO_fNZGskWHAlaUhidsaMOfJEwq9iMDKpxGcXWPnqvbz6Xxm8yIVng-__OGr4nY031J2lZDOJ_SGWLl96-CuBEHC1UQI9wHz1He9MxIflAiqG6ENPLaOCS56QJ4BZjWfnxD1vxlL-BLaEyf9m7BzeOhecAPKIoqQaKHAelv3v2-rBFyc96XsGMFTQWGe5TK7ekeRnI3-WtJ0GDMPxUX93CqhSBBpeR3AGBE9hrGSuSyCl1ZujwYJ3L94Rln-ur3P1XnvFtfSToR8xTN6pkqCTCjlCHOrNkvoz2haq21PoEl5C4aWYMqk--EJQ2toMLXHeIoCPthfaJzjo0_MZ-ISgSSDnlTuOUib9gcqh0iYoO9AJKG0gkNO5AWAWIUSXknECGu4Dg4Tl8xDYp95sRbK6TBsSWm53flbtdXTLecFz2gKfQJfX3HFFioQoBqLibNy6bY-zZfM7pPxAtc3xXk6bH5M9NcmCVXuviRxZFQ4Vi3SJlDJTdVt2F9VBoIWCHYZtpVET2F7uy3O90lrvu5HhTrzKv95Uu2oyYxIdQZ40I6DPMErRSUh0r0eowJYBon1p9j0D93zMmywMuOhGK2ONPW36T5Q7TogNrgHq5SFp8CyDPZLdDwqKk0Rg4tud6QaPGLd7JH9wAoAsjQ1AaNHj4GXFzdELDmwq_71hImwYrlSt7t4kuzDRSpbHRvSoBunRKitDAMGmgVrhq0BkY_X1NbZRVlmXwtZlm_MX3gUYzbP_MIrmIt9saKvQQbAxCoZNA2oyn3EZj4j3L_Heeyr_RKAixOkHYz8n1Rx8BffFEvV-06rs1JngAGYB02XXW90l5NvuvWc9-8YGQwXUwxcyYXUxdayhoaLnkUKIX0VEZ-MAfyzYkWmaiWRSupC03Qm7chivo9XEBkM9y6hDIH1fHAi0DaVNRTg0kOikIf5EOh2FZt8yO2WN-KnrgUmoLDgOqH6ZNKGApV_e_Hds6UVsSXClOJozK8Ds-wagUl8z8evxMi5yEAXPW3unEvl0yLNhWab3WP4GZ8pzkMAYgbO0lROS9gl0-m1EAFu-lbIlNfvDnywfaP9wiyPvqCcn-U2pDplml4gW5YOE8ogXn3-LVsVotx-BfF_mNC1DYGGBZGix6Ck0lfp6RefWzMhpREGZD0gqpSXPI-fvPIGfkAR2vp9XIoieZxoqQnRzVQQstT3bBO_W2fTv4tMXlv-RYd7nIjf94vCrMyCJ0tQtfM2Y2yARcyLur0jGxTFj0joMujCsPLBmC-PSBKrUV1jBScLbTgd9p3Z1duegwLFN4qR1PKTPHa5c.3QQF7hyeL4wenDSVVqD3_Q&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:42.519 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlMmY3NDU2Yy1mOTIzLTQ5YTgtYmUwZS03NzY0Mjk0NWZjNjYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.ycqNkRFHhH_Podj10DrN7D29mcANLNLpDHsjtolZOOgVI2a6hMdQVN2NLtbNxYRad_pVVuDopoRbFHplcQfPYrPm5DQ3hHReIDavCUUCDTDgAbWdJ6jwycqbtKU0wklwwhuV_tiD62rRxQw8-Aqz976JsYoYEm1MhGClgZJ6b7hCQCvQ5xzJQNhmmWa2WXcwiPQpmoLbxjno54a8mItmUh81bHnubDwXokmqXbMLdrDsbb_Y1D2D9UW97-c7Gyec1zPkq5ccDSgiKN8q9OruG9CmgzAR5QgdFg-_5dLZqqLYyXJglLeo1JcV2uNFybpNnlzsy61MqJY7hPsdSRSkog 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[4:106]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:42.521 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlMmY3NDU2Yy1mOTIzLTQ5YTgtYmUwZS03NzY0Mjk0NWZjNjYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.ycqNkRFHhH_Podj10DrN7D29mcANLNLpDHsjtolZOOgVI2a6hMdQVN2NLtbNxYRad_pVVuDopoRbFHplcQfPYrPm5DQ3hHReIDavCUUCDTDgAbWdJ6jwycqbtKU0wklwwhuV_tiD62rRxQw8-Aqz976JsYoYEm1MhGClgZJ6b7hCQCvQ5xzJQNhmmWa2WXcwiPQpmoLbxjno54a8mItmUh81bHnubDwXokmqXbMLdrDsbb_Y1D2D9UW97-c7Gyec1zPkq5ccDSgiKN8q9OruG9CmgzAR5QgdFg-_5dLZqqLYyXJglLeo1JcV2uNFybpNnlzsy61MqJY7hPsdSRSkog&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImUyZjc0NTZjLWY5MjMtNDlhOC1iZTBlLTc3NjQyOTQ1ZmM2NiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MjIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQyMiwiaWF0IjoxNjIxMjkwODIyLCJqdGkiOiI4NGM1NzE1OC05MmU0LTRmYmMtYmVmZi03Zjg5MjIzYjNkZTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.BTlFWwcjv759WmLlgdNFCvy2-Cikq2-NCzpHKtOnmQbAZk6ECRnDKd1m70eF-wPTcEqAP_YXNm9jdrwLU0O4EHsdwWs_JKXa7jnEkRiIzAr3LrPBlPOFc9NXiFKYYdxADXBYhF14XiH4AuEkN4TVxaM03OrehWSh_yPt8OA8TUDPfQiwXNephh0cV6viPq_zpIHij4Pjy67ozQb9dp4ayH17JBAGliMKeUC84SjAT_tmnmIphoCZrHP-fpRXaxEDxtXijE65C1XNd6HQJIu1FRkXQmr9hEJmTZ5JLlzJoVM-NLOuwBSsJVaouJ4AzR8hrSPnHAzlzU8NK5OGvqRSYw&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.CJZg5sIn-wG3OOWtQoTA3KW70txKCbC-vVKIjS915-DXohvR7rzDcxWgdKY7YF_qp7qmOt7xcDSO0m7gR9946f17_lDAiytaCnzUn-qOBv2jK_QF4P1RtCCQy7kMPj0DtQHMCwtk1I80d3FsYxZN1Im0E4LtbqaobvC0AFUZqNIVZQIl2czquSCWFwChdxEnx5smo5pUBHLRtTmWiNoY4uEh5pwxnRur0AxSBALjxRCqOdETcXitNNjMT243yvCdU88DCyVDjHlOgEAmcFnDfwYE5Ij3zSZ213QNZ1DceOYfdwX6dBF5reUDFLjU_jAFij-B8Vik0maGgeztfD621w._f79SVNZH02VrrUT.SNBN2zjqLNDvvUaSAP3ztdLs_8k1dzfJSecO_fNZGskWHAlaUhidsaMOfJEwq9iMDKpxGcXWPnqvbz6Xxm8yIVng-__OGr4nY031J2lZDOJ_SGWLl96-CuBEHC1UQI9wHz1He9MxIflAiqG6ENPLaOCS56QJ4BZjWfnxD1vxlL-BLaEyf9m7BzeOhecAPKIoqQaKHAelv3v2-rBFyc96XsGMFTQWGe5TK7ekeRnI3-WtJ0GDMPxUX93CqhSBBpeR3AGBE9hrGSuSyCl1ZujwYJ3L94Rln-ur3P1XnvFtfSToR8xTN6pkqCTCjlCHOrNkvoz2haq21PoEl5C4aWYMqk--EJQ2toMLXHeIoCPthfaJzjo0_MZ-ISgSSDnlTuOUib9gcqh0iYoO9AJKG0gkNO5AWAWIUSXknECGu4Dg4Tl8xDYp95sRbK6TBsSWm53flbtdXTLecFz2gKfQJfX3HFFioQoBqLibNy6bY-zZfM7pPxAtc3xXk6bH5M9NcmCVXuviRxZFQ4Vi3SJlDJTdVt2F9VBoIWCHYZtpVET2F7uy3O90lrvu5HhTrzKv95Uu2oyYxIdQZ40I6DPMErRSUh0r0eowJYBon1p9j0D93zMmywMuOhGK2ONPW36T5Q7TogNrgHq5SFp8CyDPZLdDwqKk0Rg4tud6QaPGLd7JH9wAoAsjQ1AaNHj4GXFzdELDmwq_71hImwYrlSt7t4kuzDRSpbHRvSoBunRKitDAMGmgVrhq0BkY_X1NbZRVlmXwtZlm_MX3gUYzbP_MIrmIt9saKvQQbAxCoZNA2oyn3EZj4j3L_Heeyr_RKAixOkHYz8n1Rx8BffFEvV-06rs1JngAGYB02XXW90l5NvuvWc9-8YGQwXUwxcyYXUxdayhoaLnkUKIX0VEZ-MAfyzYkWmaiWRSupC03Qm7chivo9XEBkM9y6hDIH1fHAi0DaVNRTg0kOikIf5EOh2FZt8yO2WN-KnrgUmoLDgOqH6ZNKGApV_e_Hds6UVsSXClOJozK8Ds-wagUl8z8evxMi5yEAXPW3unEvl0yLNhWab3WP4GZ8pzkMAYgbO0lROS9gl0-m1EAFu-lbIlNfvDnywfaP9wiyPvqCcn-U2pDplml4gW5YOE8ogXn3-LVsVotx-BfF_mNC1DYGGBZGix6Ck0lfp6RefWzMhpREGZD0gqpSXPI-fvPIGfkAR2vp9XIoieZxoqQnRzVQQstT3bBO_W2fTv4tMXlv-RYd7nIjf94vCrMyCJ0tQtfM2Y2yARcyLur0jGxTFj0joMujCsPLBmC-PSBKrUV1jBScLbTgd9p3Z1duegwLFN4qR1PKTPHa5c.3QQF7hyeL4wenDSVVqD3_Q&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the query from a .feature field</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.108">
      <div class="step-ref passed">108</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.108">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.113">
      <div class="step-ref passed">113</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.114">
      <div class="step-ref passed">114</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.115">
      <div class="step-ref passed">115</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.116">
      <div class="step-ref passed">116</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.117">
      <div class="step-ref passed">117</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">120</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.117">00:33:42.524 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlMmY3NDU2Yy1mOTIzLTQ5YTgtYmUwZS03NzY0Mjk0NWZjNjYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.ycqNkRFHhH_Podj10DrN7D29mcANLNLpDHsjtolZOOgVI2a6hMdQVN2NLtbNxYRad_pVVuDopoRbFHplcQfPYrPm5DQ3hHReIDavCUUCDTDgAbWdJ6jwycqbtKU0wklwwhuV_tiD62rRxQw8-Aqz976JsYoYEm1MhGClgZJ6b7hCQCvQ5xzJQNhmmWa2WXcwiPQpmoLbxjno54a8mItmUh81bHnubDwXokmqXbMLdrDsbb_Y1D2D9UW97-c7Gyec1zPkq5ccDSgiKN8q9OruG9CmgzAR5QgdFg-_5dLZqqLYyXJglLeo1JcV2uNFybpNnlzsy61MqJY7hPsdSRSkog
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 102
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

00:33:42.642 response time in milliseconds: 117
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 68
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:43 GMT
1 &lt; x-amzn-RequestId: 9f4eb69d-62e3-48d5-8022-6ad8dd1c338f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpTGHvbjoEF2Qw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef46-397e70956ed4ff3a1528c38e;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 adaa7e69b304066aa4eaf0d2190ecfd7.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 2qODVhiDMQXxIGoTY3KnKxEsYCC1rc8bTyY85W9SNxDQsoAPD1PCGA==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user30@test.com&quot;}]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.118">
      <div class="step-ref passed">118</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.121">
      <div class="step-ref passed">121</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the list is displayed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.123">
      <div class="step-ref passed">123</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.124">
      <div class="step-ref passed">124</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModels contains { id: &#39;#ignore&#39;, role: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[5:127]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[5:127]</span>
                <span class="scenario-name">The admin user can create customers:</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>8884</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[5:127]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[5:127]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:42.655 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[5:127]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[5:127]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[5:127]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">379</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">369</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:42.664 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">366</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:42.667 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:43.031 response time in milliseconds: 362
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:43 GMT
1 &lt; x-amzn-RequestId: 1976b7ce-b726-4a85-bd8f-8cb37191e9cd
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpTIFfhDoEF1iQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef47-304b150959d758053f983b3c
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 77fcce204f96e329df7227f192690939.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: hhw1fap4H5GxuVTWp33cDZk7QXCuyX_uqpe8oLa8aDWjPRjF-0ZiwQ==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE0MGUyNWFkLTI5NDYtNDU0Ny1hNjBmLWQ4MTg1YTA4ZjhmMyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MjMsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQyMywiaWF0IjoxNjIxMjkwODIzLCJqdGkiOiI5Yzg0YzdkYy1jMGU0LTRkMTYtOGFkYS1jMjE2OTNkYTNjZGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.BPSz23f6QJ7DF-LlAYgI5uNf0-iY9KTOdbml1TIdyYkJ5xvnc3deJhDDzKJO1tcRJuoQoTfXdayzV0FtJPWBdV1Gi4PXZcZ1t1ICTJ3AteAcuM1fATZA96jOZF2c-EaMGomL-kDykhRC8QpjLRF0E8nmcrh6hAe5Tn-1BCEA-qsP9volaYMM9u9LCD2E0udTT5qyPTPHcOhW02dpD7Hdih_iEv7MzekhHLw-vPtKrCmDtl1PKR4rh0Wcm6wFqpDOfjUJ6ymW0LmF2RyT6W8uwtV1cwbFgOYDPG8EoskoedoVsCJ8FdMhjbKNgUNai1G8kAT6euXFnpNhr8gLQFIwFw&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.U3DSMH8586BoznXgLatQWOmkZyy-UecLU73_SnkUOuF6vwi0rUtQX1E6cfHPQVT8tW2NfJ_TU20UePDxyc8kAUEqANZnaCSMwvZpiCxC2zl2dmvx2hDAPywbc5NWln5ZhcRw8rHnAAFWGk2AiqcpqCYuH3w-SJa9l0IndfQwg0EMXZjTKMW-SZjFnX8GuUFmSu52FnVAbOCu79169ZBHyuBJWadxAhbRqd2R-aG_j59VOFp7iG5-FLD1KMChmJv-vzhAfbv6BEleeAk8A0SxDwbrXHnY_q-XP5ErvGhnlB2Udzf68TtOjrcLF9YcOuLFaLY22MK3y942S0Wudrapfw.CV-k5JcpZXvyUdMn.BEbHMU9zAd2rwN_PXLxwkoefse_Qi0dcnZffnpMLbyajcy8_HwgYgVOdV9JFyXBYJJBGA2KJ4TLi84MtV66nDMHkZqpzuSGj9H6mkJRrw_q_Owis1S3u8Ft1o2mbU4utFGYfyi8a3Uj7lafv5IBQdr_8--bEWRPFfClqt9UdqGUTX9NZw3VqIyS68-xocWoAkdi6062vImHB3isJyRit_NadrP7T0JUnhX-09UUR4ozSHRwu5UAzV3qkPZExASjBVpARY0yeG7ERshXVAEeK0-XRDNYv88mojFyWJ6-un1GlcuYORf2tozs95lKiGhSexmTqsaIjPSVTNq3TG4Uube0UITFUFMD8ZsU_wfTHcFlrM8VU8kBGo_g3cbROj7T_-8eJiI98HLKgFOJCLFnAuTfdFXllS9LW11hugUjWdqhm_A6FufWPcsYd6VKDz22vA294Ok0ujl3afpol4Zat7XFhB_-xAFv8s_dKrrqzU4wb3QLHUvz5aFN76VBjTlZM1c_jqDuNFjkZGZUm--w7cQBtDgr3ltN8Qr33O8bQaHfQ2wGOLZ_6ajRYYcf5PzVMCCvQC8S1tERN6FyG7irTgJFHEz7MvfuVl0yUzZPlIBN_cyTwvtyKAEDJ8ItEZB8YNCWZM5xMvPJESSAbNkWZKOWnOfFjzMW0H3gc075jW65nD15a_40nt4T25om4Cd4lUsdH2egZpVbTF08LhLYHipAD8Zcp98E1WN14gm7a1atVwWe04OBZY-eZbuFuScR0xKHtYYWyDyYOV6L5cNtX6zxcDNTfDmiT1_cklJzVXq1GlWELVBpJOEZ6rck9gzj7aXpAb4J7w6Lexh5cfmk6JCsjQclk5l2Qi7HD9ytCnVMinIEqBADTDhJu118Z7LTFiiRLXjEG-fIyN9kGs65ywqpQjulFvcG4s5_zm-2Iwv-Lt8Uwtaka0kxhVIhGCocnIDAaRnTrrpjza7PSzHBWJGC_Bo-Z3-LT4CBBk1lPzSTJjMNaYm6eK3bk6NhvxRMwMPoFbKyN870kswLNlyAwhViX4IX7RvDa-MdxeWcaBCoAyNg-Kvmv-36pgxEwyu0GtjmICK_aCLoCRza6BwOGh1Bkd0yft1qXvX1teeIqFoMdazd05d-zMzsIsEmiykyZOJL0tojhBZB1aBkdbtsFiaOLTyYu3EEaq0JsCdIHXk3VVBRRCJp3553Q6psPgJHHiGSY3DL61kz2QhyEawBHviJHp4eWI5hBS2toHMYYSg8vfLGlG_zvtSO_sv4vw0Ad8LXLsT1Fs4VKi4yymAy_fn8FHrEuQJyvUQpPfbXyGeVYdN8x9Vu9IcdyC8MaFyA.2yfOmddWhj2_n-mbg52WqA&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:43.034 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[5:127]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:43.037 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE0MGUyNWFkLTI5NDYtNDU0Ny1hNjBmLWQ4MTg1YTA4ZjhmMyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MjMsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQyMywiaWF0IjoxNjIxMjkwODIzLCJqdGkiOiI5Yzg0YzdkYy1jMGU0LTRkMTYtOGFkYS1jMjE2OTNkYTNjZGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.BPSz23f6QJ7DF-LlAYgI5uNf0-iY9KTOdbml1TIdyYkJ5xvnc3deJhDDzKJO1tcRJuoQoTfXdayzV0FtJPWBdV1Gi4PXZcZ1t1ICTJ3AteAcuM1fATZA96jOZF2c-EaMGomL-kDykhRC8QpjLRF0E8nmcrh6hAe5Tn-1BCEA-qsP9volaYMM9u9LCD2E0udTT5qyPTPHcOhW02dpD7Hdih_iEv7MzekhHLw-vPtKrCmDtl1PKR4rh0Wcm6wFqpDOfjUJ6ymW0LmF2RyT6W8uwtV1cwbFgOYDPG8EoskoedoVsCJ8FdMhjbKNgUNai1G8kAT6euXFnpNhr8gLQFIwFw&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.U3DSMH8586BoznXgLatQWOmkZyy-UecLU73_SnkUOuF6vwi0rUtQX1E6cfHPQVT8tW2NfJ_TU20UePDxyc8kAUEqANZnaCSMwvZpiCxC2zl2dmvx2hDAPywbc5NWln5ZhcRw8rHnAAFWGk2AiqcpqCYuH3w-SJa9l0IndfQwg0EMXZjTKMW-SZjFnX8GuUFmSu52FnVAbOCu79169ZBHyuBJWadxAhbRqd2R-aG_j59VOFp7iG5-FLD1KMChmJv-vzhAfbv6BEleeAk8A0SxDwbrXHnY_q-XP5ErvGhnlB2Udzf68TtOjrcLF9YcOuLFaLY22MK3y942S0Wudrapfw.CV-k5JcpZXvyUdMn.BEbHMU9zAd2rwN_PXLxwkoefse_Qi0dcnZffnpMLbyajcy8_HwgYgVOdV9JFyXBYJJBGA2KJ4TLi84MtV66nDMHkZqpzuSGj9H6mkJRrw_q_Owis1S3u8Ft1o2mbU4utFGYfyi8a3Uj7lafv5IBQdr_8--bEWRPFfClqt9UdqGUTX9NZw3VqIyS68-xocWoAkdi6062vImHB3isJyRit_NadrP7T0JUnhX-09UUR4ozSHRwu5UAzV3qkPZExASjBVpARY0yeG7ERshXVAEeK0-XRDNYv88mojFyWJ6-un1GlcuYORf2tozs95lKiGhSexmTqsaIjPSVTNq3TG4Uube0UITFUFMD8ZsU_wfTHcFlrM8VU8kBGo_g3cbROj7T_-8eJiI98HLKgFOJCLFnAuTfdFXllS9LW11hugUjWdqhm_A6FufWPcsYd6VKDz22vA294Ok0ujl3afpol4Zat7XFhB_-xAFv8s_dKrrqzU4wb3QLHUvz5aFN76VBjTlZM1c_jqDuNFjkZGZUm--w7cQBtDgr3ltN8Qr33O8bQaHfQ2wGOLZ_6ajRYYcf5PzVMCCvQC8S1tERN6FyG7irTgJFHEz7MvfuVl0yUzZPlIBN_cyTwvtyKAEDJ8ItEZB8YNCWZM5xMvPJESSAbNkWZKOWnOfFjzMW0H3gc075jW65nD15a_40nt4T25om4Cd4lUsdH2egZpVbTF08LhLYHipAD8Zcp98E1WN14gm7a1atVwWe04OBZY-eZbuFuScR0xKHtYYWyDyYOV6L5cNtX6zxcDNTfDmiT1_cklJzVXq1GlWELVBpJOEZ6rck9gzj7aXpAb4J7w6Lexh5cfmk6JCsjQclk5l2Qi7HD9ytCnVMinIEqBADTDhJu118Z7LTFiiRLXjEG-fIyN9kGs65ywqpQjulFvcG4s5_zm-2Iwv-Lt8Uwtaka0kxhVIhGCocnIDAaRnTrrpjza7PSzHBWJGC_Bo-Z3-LT4CBBk1lPzSTJjMNaYm6eK3bk6NhvxRMwMPoFbKyN870kswLNlyAwhViX4IX7RvDa-MdxeWcaBCoAyNg-Kvmv-36pgxEwyu0GtjmICK_aCLoCRza6BwOGh1Bkd0yft1qXvX1teeIqFoMdazd05d-zMzsIsEmiykyZOJL0tojhBZB1aBkdbtsFiaOLTyYu3EEaq0JsCdIHXk3VVBRRCJp3553Q6psPgJHHiGSY3DL61kz2QhyEawBHviJHp4eWI5hBS2toHMYYSg8vfLGlG_zvtSO_sv4vw0Ad8LXLsT1Fs4VKi4yymAy_fn8FHrEuQJyvUQpPfbXyGeVYdN8x9Vu9IcdyC8MaFyA.2yfOmddWhj2_n-mbg52WqA&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">### without photo</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.129">
      <div class="step-ref passed">129</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.129">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># In this case, the photoUrl field isn&#39;t filled</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.135">
      <div class="step-ref passed">135</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def new_customerNoPhoto = read(&#39;NewCustomerNoPhoto.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.137">
      <div class="step-ref passed">137</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.138">
      <div class="step-ref passed">138</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.139">
      <div class="step-ref passed">139</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(new_customerNoPhoto)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.140">
      <div class="step-ref passed">140</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">169</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.140">00:33:43.044 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 284
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;photo&quot;:&quot;&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

00:33:43.210 response time in milliseconds: 165
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:43 GMT
1 &lt; x-amzn-RequestId: ce8bae50-3df7-40e9-91e1-15ee6bc8c9fb
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpTMFvLjoEF8jQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef47-5c18c8a91755a4365a46a03f;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 adaa7e69b304066aa4eaf0d2190ecfd7.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 73Nv9gsVE3esdOVt7xR631qj7u4-80VcE3UagOczeRJXbDa1cQTzEw==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.141">
      <div class="step-ref passed">141</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref passed">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.146">
      <div class="step-ref passed">146</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.148">
      <div class="step-ref passed">148</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">### This time, the field photo is filled</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.151">
      <div class="step-ref passed">151</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def new_customerPhoto = read(&#39;NewCustomerPhoto.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.153">
      <div class="step-ref passed">153</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.154">
      <div class="step-ref passed">154</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">13</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.155">
      <div class="step-ref passed">155</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(new_customerPhoto)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.156">
      <div class="step-ref passed">156</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">136</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.156">00:33:47.240 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 290
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;2100000photo&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

00:33:47.373 response time in milliseconds: 133
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 17 May 2021 22:33:47 GMT
2 &lt; x-amzn-RequestId: 7f6647a8-d6ba-4548-b562-8095740a6842
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: ffpT1F4GjoEFlIw=
2 &lt; X-Amzn-Trace-Id: Root=1-60a2ef4b-3883d55e2c876c742daaa41b;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 d5cf9e2604452e6d04db24c2381f245d.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: 6dUa-yN_hyI_ZmmB8U5rjqgHiZ6oMUH68cIfL-46p7CrOn4KfahImQ==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.157">
      <div class="step-ref passed">157</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.159">
      <div class="step-ref passed">159</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4016</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.162">
      <div class="step-ref passed">162</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.164">
      <div class="step-ref passed">164</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### List all the customers to check that the creation was fine</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.168">
      <div class="step-ref passed">168</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.168">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.173">
      <div class="step-ref passed">173</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.174">
      <div class="step-ref passed">174</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.175">
      <div class="step-ref passed">175</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.176">
      <div class="step-ref passed">176</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">141</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.176">00:33:51.395 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhNDBlMjVhZC0yOTQ2LTQ1NDctYTYwZi1kODE4NWEwOGY4ZjMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgyMywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQyMywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgyMywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.GqGF_OfNr9AjF9Lq3Hp3rvA2V6tLSJj6uU5kyLGBLzm1kCzfbBLzWq4qz4F418qo6IZQT3icT5aDG83FhKHAUx1KdMFHD8uwnsjdxrYzF38BIlu0XceWfIROhn0xPtWlgIqJUd_sbvX4FOtq6ePCrvCNK18v80_LipY_jx4NdJLWqCBCIzDiyf0ZrJxp1UrDwoXjL_Gg7H2vSIlLGgK5QNHR5D42aZ2NWpI5Xx5xm_yoBzGhn6Lr-soSSmlmN-JdRPQYwDU9-3H9dhsg4Afzf8cnzCU787LSsFwXdqaT_NBwmJ_q1vxcqTGss4_i3PP5mTsqXnB2IXZw6hd_VTZMnw
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 167
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

00:33:51.534 response time in milliseconds: 138
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 397
3 &lt; Connection: keep-alive
3 &lt; Date: Mon, 17 May 2021 22:33:51 GMT
3 &lt; x-amzn-RequestId: 157f50d0-e507-46dd-bfa3-90404b5a4915
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: ffpUfHN0joEF8GQ=
3 &lt; X-Amzn-Trace-Id: Root=1-60a2ef4f-5b7d4f532d268b7006d6cd26;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 adaa7e69b304066aa4eaf0d2190ecfd7.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD50-C1
3 &lt; X-Amz-Cf-Id: GIIooix4gvUa7wbPSeu4CyOIPsoypYP5lu-MC5NEDKRoISqzLLh9Ng==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.177">
      <div class="step-ref passed">177</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.180">
      <div class="step-ref passed">180</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.183">
      <div class="step-ref passed">183</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check the customers created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.185">
      <div class="step-ref failed">185</div>
      
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#(new_customerPhoto.id)&#39;, name: &#39;#(new_customerPhoto.name)&#39;, surname: &#39;#(new_customerPhoto.surname)&#39;, photoUrl: &#39;#(new_customerPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell failed">6</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.185">00:33:51.544 classpath:examples/users/TestUserAdminSaveAndRead.feature:185
* match response.data.CustomerReadModels contains {id: &#39;#(new_customerPhoto.id)&#39;, name: &#39;#(new_customerPhoto.name)&#39;, surname: &#39;#(new_customerPhoto.surname)&#39;, photoUrl: &#39;#(new_customerPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }
match failed: CONTAINS
  $ | actual does not contain expected | actual array does not contain expected item - {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;} (LIST:MAP)
  [{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]
  {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}

    $[2] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
    {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
    {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}

      $[2].id | not equal (STRING:STRING)
      &#39;3&#39;
      &#39;2100000photo&#39;

        $[1] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
        {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
        {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}

          $[1].id | not equal (STRING:STRING)
          &#39;23000000nophoto&#39;
          &#39;2100000photo&#39;

            $[0] | not equal | match failed for name: &#39;photoUrl&#39; (MAP:MAP)
            {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
            {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}

              $[0].photoUrl | data types don&#39;t match (STRING:NULL)
              &#39;&#39;
              null

classpath:examples/users/TestUserAdminSaveAndRead.feature:185
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.186">
      <div class="step-ref skipped">186</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#(new_customerNoPhoto.id)&#39;, name: &#39;#(new_customerNoPhoto.name)&#39;, surname: &#39;#(new_customerNoPhoto.surname)&#39;, photoUrl: &#39;#(new_customerNoPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[6:189]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[6:189]</span>
                <span class="scenario-name">The admin user can change the role of an user</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>4909</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[6:189]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[6:189]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:51.551 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[6:189]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[6:189]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[6:189]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">338</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">322</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:51.568 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">316</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:51.571 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:51.885 response time in milliseconds: 313
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:52 GMT
1 &lt; x-amzn-RequestId: 28bc9902-3b5a-4484-a997-d348dbe149ae
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpUhGXZjoEFqaQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef50-4805bfd119ed0f4d64e3f1dc
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a6f1f6a7cb5a93f6f494d1d5945d867c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 1OpRgblpZak-kh1kF-zIu5ee-qpIMzwxUf4ECOGX_Ox5uIDDT_n2-Q==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI0ZTQ3YTI4My0yOTVjLTQwY2YtOGE3ZS1iOGI1ZWE0NjY3YWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.soP3sb2wfuRYHZkT4MtNka-kJvOvfY9MIOX2F1QieVRxjAoh0zaAmvSBK47tLSpnZ1NRNpcBAKhw8gxtpPJq1LwbaSjaP2R1iDhOei2rwZ5qYHgkJiyDLdEgMpwZetaIrKJAo5Q5M55kOzPfMKTyY7ixG4AYkCbymC8FdNs98NRRPab6C3J2SUC6PonBwvL5W67IOVxR7jyGIWp_qneqJRZvNSBjArFsPmPHF4pS7Gs0AruVpwdFguFt7RsahtbKJ71zgUr7ZRuAuKJyXIYhIzutU7bsZZAntQEVdhkGavWfZPi9ZeCWOKT-Hm5ZJFm97tEjBv61Zzj0ukS4N0n8Ig&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjRlNDdhMjgzLTI5NWMtNDBjZi04YTdlLWI4YjVlYTQ2NjdhZiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MzIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQzMiwiaWF0IjoxNjIxMjkwODMyLCJqdGkiOiIyY2ExYTMwNi01ODc5LTQ1NDEtOTc1Yi03ZWUyODIxNDVmZDciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.QWIzV0NOKVG8vi83Y-0rgMAhoRfghuin0c0OL4YRMLPS-imHGEJm1XX29hIuJhCdVecP-LnTIDCg11fACY_E9Wk60zII7wXSvPqPtiFnkn3gcVTvx1v8pMobXi2b-BV_aPiNBCwnim8LMPaM6qZzdQos5DnZAe5p9P3bR-N-oAWSnnFVcyQxkW3o70_wPDKWdwxePVzPzQgYIhcs8PwLZ5nluZkEweS3ppvCAbWhaDWeLLWTDvcuOxOV7TiV7Dp7DVxzDvn2eua0QwVxdM9pvIlRbcgO7iwxy_yzsPAkUitirRodAb3F-DxUgj4CMFYxO3m01akJ9EU4jwev5bZ6Sg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.dp2EM17NHtF1EZ3nRN5-mlegUyoaabRKsdkeOcROnNp-VsWXxdlJjIOS7IvjDyuImbGoFIBQp3LF_lxiUuGr4VvcIL2c9lZkC0bGUIKZTfhYEQRgvLqJev3kVhERA0FSNSehUBJPf6kaYu1-meNB5BIlvowZET1FHP9iID3CJ90Ax8otMSluKWveHxwLvkl_58Ap07wtrFjEUiJDcMjxliys-dZgyIWNGm-wjj0K2gA_0-X98eOa0o7DDG_ajgoSCZHkSGsBrRfOEaNViaVDevywZgBnKtQDG9tXnUPJPrNSYS1ceSsRO7o1v62TJ97tyR7Bot1WikKOO4X88KBJrw.h7ezj_q1ifwUO0Rq.3Ast4cCog6In3lEzP1c1JSftvCWuGKqIewtSwicEsJ9ajUJaeb0A_AiUpBfbnqbhmcqAbyc15lVxvc3QJaSwrNVJqHRk1XifHIRF8d2GC0BQPIddD44lUtyLcsgMf7rQ18E5K-VFJf25lG1UFK9bLRlcacbeAVGRB5MEyHb7G9zjEPqYLsqqkKXvtyTbMDJXmNC0Tl6smCWJHOZpA6VCi-JV0LakFclblpgnVUJFxp2lwCVWGhCQVG5Y0I9T9HVwNeZwUCsZ4_7g6TFP6T1Pw-VAmF0RnyZMqEm34ZkGny4Lyuj6UE5DIkjrQxbpsL9CFjEUC7f02RKu3i1IkkPL3TDT_PGjOghubv1lxpfY4ma7CN7pgAqXBCb_fdR0Yjpf2C8wvalyiPrnyj_htQjSSA6jFwRHh_ZzBU8CiX1WIrWKsx9ubbNqkzQyXZog5W3RVTJfJvA43zmvUWH8ABID05IJFZA5D-aBlpdd9vBi8dZusnK1fOopycucWzXKAWjM0ni-1RC7rf0Z4Sd6kG6NUgtvXM0r4H-4A1il5jMguA1XgXeUxAC8Fje03VPGGXHIFs3roIqaRIFo9rEgRMgJNhjR2T36SIzoB1m69Mt3jpYjm2fv8gxH9Xu69U9Bav1WEtOTHLI8saUypx7Rd0v4scp3p1ehgNkBIBqpJzr5TW0c8NGqWaFm3uBdZMBP9Jrabh3aGg7TsGfzMdesbSZNG7WOq-LwIcwXjL2estYtbLM6RgpIMyyafLlaWEqQovt9-89hwTYEWorRva5zAuxPJEm8E-BU6dH51Gt5IN2zo7xXAHlPmd4_78VJGuPBKCgNEKBwXDsPoWxs3EP2zmXmxqb1QVy9MCezmZE5sG82mOv_s71L8fPHyIGy_d5NEMmju9HNq8NMiXNTrIcNlbkc-G2o1pLIt_jioSBDF3Es0i4QCZ2RiWmAqzs4XOt8Nz1ZGXZUTi-vUBdXr7lBEfp6bGSRW_3wJuKEur3-c-lPsdSBYHBrr0T8elFjNUylXYr5zlYrV_g1CmD1r54wOPJK9kMsf7IUethckR26GatHxsZC9NMqBlC19CnWtNIyggtQJL3e9aEe9HgM4-eQ78k6C1aOX4lX1rGo5TP71wo7FXgAaFf5fWPqAJcipzuq9ktmEf1sttjf9IzDaBCLdKR2TjWHHzWyLgqgvSX4eEgB4QW7TIcAs9xg9LG3YoyfK7z5yK4aHVy1NUW4IcQC48itYji3nMfA9VUyxmb3yvF7RZH-ZAbsl7xwKKLLH8VoUbW15jQzJ5IohvwfVYukRG3NSmqztQUnlfGB1-tqsff3GVAl4hraKXC_oRvcH4S0LBk.NOGfvi9vUzqsEXdpRzKWZw&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:51.889 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI0ZTQ3YTI4My0yOTVjLTQwY2YtOGE3ZS1iOGI1ZWE0NjY3YWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.soP3sb2wfuRYHZkT4MtNka-kJvOvfY9MIOX2F1QieVRxjAoh0zaAmvSBK47tLSpnZ1NRNpcBAKhw8gxtpPJq1LwbaSjaP2R1iDhOei2rwZ5qYHgkJiyDLdEgMpwZetaIrKJAo5Q5M55kOzPfMKTyY7ixG4AYkCbymC8FdNs98NRRPab6C3J2SUC6PonBwvL5W67IOVxR7jyGIWp_qneqJRZvNSBjArFsPmPHF4pS7Gs0AruVpwdFguFt7RsahtbKJ71zgUr7ZRuAuKJyXIYhIzutU7bsZZAntQEVdhkGavWfZPi9ZeCWOKT-Hm5ZJFm97tEjBv61Zzj0ukS4N0n8Ig 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[6:189]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:51.893 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI0ZTQ3YTI4My0yOTVjLTQwY2YtOGE3ZS1iOGI1ZWE0NjY3YWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.soP3sb2wfuRYHZkT4MtNka-kJvOvfY9MIOX2F1QieVRxjAoh0zaAmvSBK47tLSpnZ1NRNpcBAKhw8gxtpPJq1LwbaSjaP2R1iDhOei2rwZ5qYHgkJiyDLdEgMpwZetaIrKJAo5Q5M55kOzPfMKTyY7ixG4AYkCbymC8FdNs98NRRPab6C3J2SUC6PonBwvL5W67IOVxR7jyGIWp_qneqJRZvNSBjArFsPmPHF4pS7Gs0AruVpwdFguFt7RsahtbKJ71zgUr7ZRuAuKJyXIYhIzutU7bsZZAntQEVdhkGavWfZPi9ZeCWOKT-Hm5ZJFm97tEjBv61Zzj0ukS4N0n8Ig&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjRlNDdhMjgzLTI5NWMtNDBjZi04YTdlLWI4YjVlYTQ2NjdhZiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MzIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQzMiwiaWF0IjoxNjIxMjkwODMyLCJqdGkiOiIyY2ExYTMwNi01ODc5LTQ1NDEtOTc1Yi03ZWUyODIxNDVmZDciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.QWIzV0NOKVG8vi83Y-0rgMAhoRfghuin0c0OL4YRMLPS-imHGEJm1XX29hIuJhCdVecP-LnTIDCg11fACY_E9Wk60zII7wXSvPqPtiFnkn3gcVTvx1v8pMobXi2b-BV_aPiNBCwnim8LMPaM6qZzdQos5DnZAe5p9P3bR-N-oAWSnnFVcyQxkW3o70_wPDKWdwxePVzPzQgYIhcs8PwLZ5nluZkEweS3ppvCAbWhaDWeLLWTDvcuOxOV7TiV7Dp7DVxzDvn2eua0QwVxdM9pvIlRbcgO7iwxy_yzsPAkUitirRodAb3F-DxUgj4CMFYxO3m01akJ9EU4jwev5bZ6Sg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.dp2EM17NHtF1EZ3nRN5-mlegUyoaabRKsdkeOcROnNp-VsWXxdlJjIOS7IvjDyuImbGoFIBQp3LF_lxiUuGr4VvcIL2c9lZkC0bGUIKZTfhYEQRgvLqJev3kVhERA0FSNSehUBJPf6kaYu1-meNB5BIlvowZET1FHP9iID3CJ90Ax8otMSluKWveHxwLvkl_58Ap07wtrFjEUiJDcMjxliys-dZgyIWNGm-wjj0K2gA_0-X98eOa0o7DDG_ajgoSCZHkSGsBrRfOEaNViaVDevywZgBnKtQDG9tXnUPJPrNSYS1ceSsRO7o1v62TJ97tyR7Bot1WikKOO4X88KBJrw.h7ezj_q1ifwUO0Rq.3Ast4cCog6In3lEzP1c1JSftvCWuGKqIewtSwicEsJ9ajUJaeb0A_AiUpBfbnqbhmcqAbyc15lVxvc3QJaSwrNVJqHRk1XifHIRF8d2GC0BQPIddD44lUtyLcsgMf7rQ18E5K-VFJf25lG1UFK9bLRlcacbeAVGRB5MEyHb7G9zjEPqYLsqqkKXvtyTbMDJXmNC0Tl6smCWJHOZpA6VCi-JV0LakFclblpgnVUJFxp2lwCVWGhCQVG5Y0I9T9HVwNeZwUCsZ4_7g6TFP6T1Pw-VAmF0RnyZMqEm34ZkGny4Lyuj6UE5DIkjrQxbpsL9CFjEUC7f02RKu3i1IkkPL3TDT_PGjOghubv1lxpfY4ma7CN7pgAqXBCb_fdR0Yjpf2C8wvalyiPrnyj_htQjSSA6jFwRHh_ZzBU8CiX1WIrWKsx9ubbNqkzQyXZog5W3RVTJfJvA43zmvUWH8ABID05IJFZA5D-aBlpdd9vBi8dZusnK1fOopycucWzXKAWjM0ni-1RC7rf0Z4Sd6kG6NUgtvXM0r4H-4A1il5jMguA1XgXeUxAC8Fje03VPGGXHIFs3roIqaRIFo9rEgRMgJNhjR2T36SIzoB1m69Mt3jpYjm2fv8gxH9Xu69U9Bav1WEtOTHLI8saUypx7Rd0v4scp3p1ehgNkBIBqpJzr5TW0c8NGqWaFm3uBdZMBP9Jrabh3aGg7TsGfzMdesbSZNG7WOq-LwIcwXjL2estYtbLM6RgpIMyyafLlaWEqQovt9-89hwTYEWorRva5zAuxPJEm8E-BU6dH51Gt5IN2zo7xXAHlPmd4_78VJGuPBKCgNEKBwXDsPoWxs3EP2zmXmxqb1QVy9MCezmZE5sG82mOv_s71L8fPHyIGy_d5NEMmju9HNq8NMiXNTrIcNlbkc-G2o1pLIt_jioSBDF3Es0i4QCZ2RiWmAqzs4XOt8Nz1ZGXZUTi-vUBdXr7lBEfp6bGSRW_3wJuKEur3-c-lPsdSBYHBrr0T8elFjNUylXYr5zlYrV_g1CmD1r54wOPJK9kMsf7IUethckR26GatHxsZC9NMqBlC19CnWtNIyggtQJL3e9aEe9HgM4-eQ78k6C1aOX4lX1rGo5TP71wo7FXgAaFf5fWPqAJcipzuq9ktmEf1sttjf9IzDaBCLdKR2TjWHHzWyLgqgvSX4eEgB4QW7TIcAs9xg9LG3YoyfK7z5yK4aHVy1NUW4IcQC48itYji3nMfA9VUyxmb3yvF7RZH-ZAbsl7xwKKLLH8VoUbW15jQzJ5IohvwfVYukRG3NSmqztQUnlfGB1-tqsff3GVAl4hraKXC_oRvcH4S0LBk.NOGfvi9vUzqsEXdpRzKWZw&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Change the role of the new user created before &#39;NewUser&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.191">
      <div class="step-ref passed">191</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.191">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user role</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.196">
      <div class="step-ref passed">196</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def NewUserRole = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref passed">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set NewUserRole.role = &quot;role changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.200">
      <div class="step-ref passed">200</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.201">
      <div class="step-ref passed">201</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.202">
      <div class="step-ref passed">202</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryChangeUserRole)&#39;,  variables: &#39;#(NewUserRole)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.203">
      <div class="step-ref passed">203</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">548</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.203">00:33:51.903 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI0ZTQ3YTI4My0yOTVjLTQwY2YtOGE3ZS1iOGI1ZWE0NjY3YWYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzMiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzMiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzMiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.soP3sb2wfuRYHZkT4MtNka-kJvOvfY9MIOX2F1QieVRxjAoh0zaAmvSBK47tLSpnZ1NRNpcBAKhw8gxtpPJq1LwbaSjaP2R1iDhOei2rwZ5qYHgkJiyDLdEgMpwZetaIrKJAo5Q5M55kOzPfMKTyY7ixG4AYkCbymC8FdNs98NRRPab6C3J2SUC6PonBwvL5W67IOVxR7jyGIWp_qneqJRZvNSBjArFsPmPHF4pS7Gs0AruVpwdFguFt7RsahtbKJ71zgUr7ZRuAuKJyXIYhIzutU7bsZZAntQEVdhkGavWfZPi9ZeCWOKT-Hm5ZJFm97tEjBv61Zzj0ukS4N0n8Ig
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 228
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;role changed&quot;,&quot;username&quot;:&quot;user30@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

00:33:52.448 response time in milliseconds: 545
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:52 GMT
1 &lt; x-amzn-RequestId: d3267682-115d-464f-8cd8-24e3422a594c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpUlH8ODoEFobQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef50-68accd223128faf747c82f90;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 52523006e1ee5c08eea6e9267e18fabf.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: HK3pJPNFvs8aRwv5uFDfOvcVSbWTaWfrU-QATbL_vIvh7klECK_bcA==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.204">
      <div class="step-ref passed">204</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.206">
      <div class="step-ref passed">206</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4012</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.209">
      <div class="step-ref passed">209</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the change of the role can&#39;t be done, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.211">
      <div class="step-ref passed">211</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[7:214]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[7:214]</span>
                <span class="scenario-name">Delete an existing user</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>5302</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[7:214]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[7:214]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:33:56.468 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[7:214]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[7:214]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[7:214]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">410</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">405</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:33:56.473 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">402</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:33:56.475 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:33:56.875 response time in milliseconds: 399
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:57 GMT
1 &lt; x-amzn-RequestId: 3c220cc4-819a-4077-bec7-5784afc5dd29
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpVTEhRjoEFUdg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef55-61917d8f5812ee1f26e0f4f7
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e9e9ef2b004f5c4a430ab05e0f919051.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 05A64lSjtG-UbRVJpiHKhuW2VjdlHTiLF-QkgU7lfeQkmwLMU6-KHg==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMGM4ZWI1NS1kMDQyLTRlNTYtYTljNy0xYjk0NTZmN2JhYzMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.RfYqXfajzc5pSUZeoMX6uBDG66Ba8ZFH4qBt82beh8iSF2ZuqPND5JEcQ7_2jbHwL77zvtayJ2X6bdOJuY6rfCLftrkkLEEznE1ftAhxgsIfRD9cnYN9xmczR0yXu6wJJLBdAHhd8BHL7VfNFpTpSRGEfLFSsdFz4-6uilQt9qIQD6AojiWX9EpH5_u8w8xcCG5glRut06KwChBWdKjsUxeSDe-5NAXmJDOVXI5Sm1fHsgBrkb771bRF2ES4pku0lZV2gS6RRncngBxbWXgIiRlVRNjO_kwmmTjTJqH3OHkK1U2cMDBaISgAyh8LCtGvuZYj5q-5GzX1nb6kgcSMiQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIwYzhlYjU1LWQwNDItNGU1Ni1hOWM3LTFiOTQ1NmY3YmFjMyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MzcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQzNywiaWF0IjoxNjIxMjkwODM3LCJqdGkiOiI3MDFiMzkxYS1mYjEzLTQ3NDgtOTA0Mi1iYjJjOTcxNjkxODgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.d2ScrpAzyvU1mAxxbV7zV-VZ8Xxurh476U4hqwDXDmiMg9JU5QOGEX5lNnTzfb3c0eOFvLmGrTIkPeJsoVvaC3iS4QKI_SFe0DxwaeS0-Up1VhG344pAhQiakhqprrFLst9BWM3SONQw9hMnP77ha6T17dFc8mGdyHDTCNaZCb4fuNedNXOFUCnIHpFJVGmOjkFuP2aNCdp2zE1d5-KtEk3HJeQ-Ue5P-kdmmg5SVvtm8iImjkezi8nQFllMRxjHDe1g2YuFv5qN9NMyR5l5UvihsB6eBhJy6U66VH0CmXW6BJZ0HPpIpD9wnVQ-QqEjCDbMWCWfpfgCjYojku5vMg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.dfaeCl3c3AFwqePZ0wj1WQJ7Qc7b9UhsxQ_EdkRIzr2ezzNvhO2CgXawdZMdhAh_TrHVrXjYSiZ8dx2xSj5bi99SuRieu6NMEiIvrEmoO-QSL9LTpCUs3nFd7aEwNtwjau3oIN8WOqaLkyC77quA2ZF1zE1n9siJYJV7LjZsTrKBPl3gFt-7uJlGwT58VhJSNAW0-6M_IdM6LHD9g_TncuHrqaSljs7mZW_jkgRbgqiTfkpMNBaVnZMJjtkNgcqnNvBzdisk2paMsNElJYPOH0qqdgA6pgKXcEZKNL2UIv8W0piR5pdKUFZ6ylLrS-rnlCyPxuG7dYt4F57JOScDPQ.uJaNg5n_VA6WnzPl.MYAiuoqm4uokhI3Ew-2505VURXXH2AyCBU5bdhXVIw09LC06SfdQndT2xUeUMi245Yfj8SWKD9L-krndxeL4rQdSzAYgD1M7osr37OOE3lkb0Yano9Fj1-eHneiLXgzn0n-NEBtrVwWm0FXSEQTaaxSgWg7KSY4nnNttZYG3dNgOXaXdyQa6JxPUuqGogxAeMBYTB3z3RVK5j0q_lqLR_VNP3nLrb2G83KZJilGDIjqNwAH3QkVuRoK7RlIn-aOuFwIZHUTAnDJ3RGncnR3CB7j7aoU5a1tFyJ3pNkhDT98lts4CbMN1QeCGK2YJsZGgzVItSWJNh7Vz9H-7MLlxCGbhoz2JnYLgnTVp1rrHCVOlIH1g_XSkOD4eLmkE4xgch7JfzyYJJZW1hTnY5_Zd_CA-CDxENjyiQil6REGhJOJUOT0WEBYQODyxU-610y56xCRMQGBMZ-tygayBINSNbhrAhVndvee41U2g7kyVt0znTZG2KWnVltdJ5eoI85LRLP3VQ-tkTCo0rVjv0XJRrAglyC75oJJQ3PZs9YEFZoqdDwFBwRfuUSPRaGgftcMx-uHRrZyMqcfx8u-iSo2QdsjPFkW2qKy1fYJsHOl58Zy7litFgilt066xxdyFG1TNwc4pO3UQsaDS_FD-sUlYRELChnO6pul8LTWxt7p55VWnpW-1yQvGVXF0zpIZe6TNMFJWdfAvHPsAiqKedLoIQkKy8vYEehSDCc_UZlSIfExstiLpseaaOLKkwEQoEwu4uZ1Dzvfh_JuPSyoe20L9BxIBxbWxvLeCm__7IhQlnImx0a9yiIsGFVp65GfRx9e9UQ7RfTRR-ihp6NvOQYd2FBP3HmsEP6DuCcUTdmiIOm6AtiAAu8-1mweZ4_b-w7r5fEwF9B8bnuMYsgilq8vUPDTnzOenZoFF5_p3KEn54okjKD1c4_KPKNT0QN05hxeNMkUfPCnGx6WT15S-dNMD1VIVK-YMWlZSV63pQPOSNED3mtT0N9TR8c1eIySzhJj-4_yomPAPPVXZ5C8DmrptILb7usbMmJFxmNtVGs3az1kY02zQOS9ZgRNDL0Dk5PKbO96jwoQ8BxrOPWXIgfy79u7Luefhb507GcMDY6bHlw_pRMIk9-yKCLIL5nlMtIK9-s1GshH18ZyDnrx7M0hqfGVEqIkFTTtGOp6UbfAb5x6WCIB8KxbNcUcs1w9JDFzfl7gH59y1GWf-02BxFVkiDSXwosARbUaKkrsIw8tpklfBe8OMLbRjPtWgO_hVx-btFOLE-ygc__Os0_ZEtfZuItWrQ_5Y0YEo71rA8FOSHNXKYbqz4H5Y1GdCeOZGbYc.67BaFU7WAAM8FVzD26Gg2A&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:33:56.878 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMGM4ZWI1NS1kMDQyLTRlNTYtYTljNy0xYjk0NTZmN2JhYzMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.RfYqXfajzc5pSUZeoMX6uBDG66Ba8ZFH4qBt82beh8iSF2ZuqPND5JEcQ7_2jbHwL77zvtayJ2X6bdOJuY6rfCLftrkkLEEznE1ftAhxgsIfRD9cnYN9xmczR0yXu6wJJLBdAHhd8BHL7VfNFpTpSRGEfLFSsdFz4-6uilQt9qIQD6AojiWX9EpH5_u8w8xcCG5glRut06KwChBWdKjsUxeSDe-5NAXmJDOVXI5Sm1fHsgBrkb771bRF2ES4pku0lZV2gS6RRncngBxbWXgIiRlVRNjO_kwmmTjTJqH3OHkK1U2cMDBaISgAyh8LCtGvuZYj5q-5GzX1nb6kgcSMiQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[7:214]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:33:56.880 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMGM4ZWI1NS1kMDQyLTRlNTYtYTljNy0xYjk0NTZmN2JhYzMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.RfYqXfajzc5pSUZeoMX6uBDG66Ba8ZFH4qBt82beh8iSF2ZuqPND5JEcQ7_2jbHwL77zvtayJ2X6bdOJuY6rfCLftrkkLEEznE1ftAhxgsIfRD9cnYN9xmczR0yXu6wJJLBdAHhd8BHL7VfNFpTpSRGEfLFSsdFz4-6uilQt9qIQD6AojiWX9EpH5_u8w8xcCG5glRut06KwChBWdKjsUxeSDe-5NAXmJDOVXI5Sm1fHsgBrkb771bRF2ES4pku0lZV2gS6RRncngBxbWXgIiRlVRNjO_kwmmTjTJqH3OHkK1U2cMDBaISgAyh8LCtGvuZYj5q-5GzX1nb6kgcSMiQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIwYzhlYjU1LWQwNDItNGU1Ni1hOWM3LTFiOTQ1NmY3YmFjMyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4MzcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQzNywiaWF0IjoxNjIxMjkwODM3LCJqdGkiOiI3MDFiMzkxYS1mYjEzLTQ3NDgtOTA0Mi1iYjJjOTcxNjkxODgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.d2ScrpAzyvU1mAxxbV7zV-VZ8Xxurh476U4hqwDXDmiMg9JU5QOGEX5lNnTzfb3c0eOFvLmGrTIkPeJsoVvaC3iS4QKI_SFe0DxwaeS0-Up1VhG344pAhQiakhqprrFLst9BWM3SONQw9hMnP77ha6T17dFc8mGdyHDTCNaZCb4fuNedNXOFUCnIHpFJVGmOjkFuP2aNCdp2zE1d5-KtEk3HJeQ-Ue5P-kdmmg5SVvtm8iImjkezi8nQFllMRxjHDe1g2YuFv5qN9NMyR5l5UvihsB6eBhJy6U66VH0CmXW6BJZ0HPpIpD9wnVQ-QqEjCDbMWCWfpfgCjYojku5vMg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.dfaeCl3c3AFwqePZ0wj1WQJ7Qc7b9UhsxQ_EdkRIzr2ezzNvhO2CgXawdZMdhAh_TrHVrXjYSiZ8dx2xSj5bi99SuRieu6NMEiIvrEmoO-QSL9LTpCUs3nFd7aEwNtwjau3oIN8WOqaLkyC77quA2ZF1zE1n9siJYJV7LjZsTrKBPl3gFt-7uJlGwT58VhJSNAW0-6M_IdM6LHD9g_TncuHrqaSljs7mZW_jkgRbgqiTfkpMNBaVnZMJjtkNgcqnNvBzdisk2paMsNElJYPOH0qqdgA6pgKXcEZKNL2UIv8W0piR5pdKUFZ6ylLrS-rnlCyPxuG7dYt4F57JOScDPQ.uJaNg5n_VA6WnzPl.MYAiuoqm4uokhI3Ew-2505VURXXH2AyCBU5bdhXVIw09LC06SfdQndT2xUeUMi245Yfj8SWKD9L-krndxeL4rQdSzAYgD1M7osr37OOE3lkb0Yano9Fj1-eHneiLXgzn0n-NEBtrVwWm0FXSEQTaaxSgWg7KSY4nnNttZYG3dNgOXaXdyQa6JxPUuqGogxAeMBYTB3z3RVK5j0q_lqLR_VNP3nLrb2G83KZJilGDIjqNwAH3QkVuRoK7RlIn-aOuFwIZHUTAnDJ3RGncnR3CB7j7aoU5a1tFyJ3pNkhDT98lts4CbMN1QeCGK2YJsZGgzVItSWJNh7Vz9H-7MLlxCGbhoz2JnYLgnTVp1rrHCVOlIH1g_XSkOD4eLmkE4xgch7JfzyYJJZW1hTnY5_Zd_CA-CDxENjyiQil6REGhJOJUOT0WEBYQODyxU-610y56xCRMQGBMZ-tygayBINSNbhrAhVndvee41U2g7kyVt0znTZG2KWnVltdJ5eoI85LRLP3VQ-tkTCo0rVjv0XJRrAglyC75oJJQ3PZs9YEFZoqdDwFBwRfuUSPRaGgftcMx-uHRrZyMqcfx8u-iSo2QdsjPFkW2qKy1fYJsHOl58Zy7litFgilt066xxdyFG1TNwc4pO3UQsaDS_FD-sUlYRELChnO6pul8LTWxt7p55VWnpW-1yQvGVXF0zpIZe6TNMFJWdfAvHPsAiqKedLoIQkKy8vYEehSDCc_UZlSIfExstiLpseaaOLKkwEQoEwu4uZ1Dzvfh_JuPSyoe20L9BxIBxbWxvLeCm__7IhQlnImx0a9yiIsGFVp65GfRx9e9UQ7RfTRR-ihp6NvOQYd2FBP3HmsEP6DuCcUTdmiIOm6AtiAAu8-1mweZ4_b-w7r5fEwF9B8bnuMYsgilq8vUPDTnzOenZoFF5_p3KEn54okjKD1c4_KPKNT0QN05hxeNMkUfPCnGx6WT15S-dNMD1VIVK-YMWlZSV63pQPOSNED3mtT0N9TR8c1eIySzhJj-4_yomPAPPVXZ5C8DmrptILb7usbMmJFxmNtVGs3az1kY02zQOS9ZgRNDL0Dk5PKbO96jwoQ8BxrOPWXIgfy79u7Luefhb507GcMDY6bHlw_pRMIk9-yKCLIL5nlMtIK9-s1GshH18ZyDnrx7M0hqfGVEqIkFTTtGOp6UbfAb5x6WCIB8KxbNcUcs1w9JDFzfl7gH59y1GWf-02BxFVkiDSXwosARbUaKkrsIw8tpklfBe8OMLbRjPtWgO_hVx-btFOLE-ygc__Os0_ZEtfZuItWrQ_5Y0YEo71rA8FOSHNXKYbqz4H5Y1GdCeOZGbYc.67BaFU7WAAM8FVzD26Gg2A&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.216">
      <div class="step-ref passed">216</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.216">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define the user to delete as the &#39;NewUser&#39; created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.221">
      <div class="step-ref passed">221</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def UserDelete = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.222">
      <div class="step-ref passed">222</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def username =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.222">{ 
   &quot;username&quot;: &quot;#(UserDelete.username)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.228">
      <div class="step-ref passed">228</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteUser)&#39;, variables: &#39;#(username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.232">
      <div class="step-ref passed">232</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">584</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.232">00:33:56.884 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMGM4ZWI1NS1kMDQyLTRlNTYtYTljNy0xYjk0NTZmN2JhYzMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.RfYqXfajzc5pSUZeoMX6uBDG66Ba8ZFH4qBt82beh8iSF2ZuqPND5JEcQ7_2jbHwL77zvtayJ2X6bdOJuY6rfCLftrkkLEEznE1ftAhxgsIfRD9cnYN9xmczR0yXu6wJJLBdAHhd8BHL7VfNFpTpSRGEfLFSsdFz4-6uilQt9qIQD6AojiWX9EpH5_u8w8xcCG5glRut06KwChBWdKjsUxeSDe-5NAXmJDOVXI5Sm1fHsgBrkb771bRF2ES4pku0lZV2gS6RRncngBxbWXgIiRlVRNjO_kwmmTjTJqH3OHkK1U2cMDBaISgAyh8LCtGvuZYj5q-5GzX1nb6kgcSMiQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 148
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;username&quot;:&quot;user30@test.com&quot;},&quot;query&quot;:&quot;mutation DeleteUser($username: String) {\r\n    DeleteUser(input: {username: $username})\r\n}&quot;}

00:33:57.466 response time in milliseconds: 581
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 28
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:33:57 GMT
1 &lt; x-amzn-RequestId: 46a63571-2024-4407-9693-9c50b52c97de
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpVWH7SjoEFfug=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef55-6fbbcc8679014eb85ef6e036;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 31a031d42a24d17f209d69933362ff3b.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: GHK57P7iDUeCdaHC7snK11e5D4tRbPPDITXdNBnyBK0fiVVO0IukVg==
{&quot;data&quot;:{&quot;DeleteUser&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.233">
      <div class="step-ref passed">233</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.235">
      <div class="step-ref passed">235</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that there aren&#39;t errors and the user is properly deleted</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.238">
      <div class="step-ref passed">238</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### List all users to check that the user was deleted</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.241">
      <div class="step-ref passed">241</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.241">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.245">
      <div class="step-ref passed">245</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.246">
      <div class="step-ref passed">246</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.247">
      <div class="step-ref passed">247</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.248">
      <div class="step-ref passed">248</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">293</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.248">00:34:01.477 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMGM4ZWI1NS1kMDQyLTRlNTYtYTljNy0xYjk0NTZmN2JhYzMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDgzNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQzNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDgzNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.RfYqXfajzc5pSUZeoMX6uBDG66Ba8ZFH4qBt82beh8iSF2ZuqPND5JEcQ7_2jbHwL77zvtayJ2X6bdOJuY6rfCLftrkkLEEznE1ftAhxgsIfRD9cnYN9xmczR0yXu6wJJLBdAHhd8BHL7VfNFpTpSRGEfLFSsdFz4-6uilQt9qIQD6AojiWX9EpH5_u8w8xcCG5glRut06KwChBWdKjsUxeSDe-5NAXmJDOVXI5Sm1fHsgBrkb771bRF2ES4pku0lZV2gS6RRncngBxbWXgIiRlVRNjO_kwmmTjTJqH3OHkK1U2cMDBaISgAyh8LCtGvuZYj5q-5GzX1nb6kgcSMiQ
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 102
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

00:34:01.768 response time in milliseconds: 291
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 17 May 2021 22:34:02 GMT
2 &lt; x-amzn-RequestId: cdf9339a-2231-4615-88a5-9bf99ab52c9a
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: ffpWFH1tjoEF7hQ=
2 &lt; X-Amzn-Trace-Id: Root=1-60a2ef5a-5edc44b31c45653437d847d0;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 e9e9ef2b004f5c4a430ab05e0f919051.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: TeqsD9tWwGQUB4cTub0tZcJ2oZKYbyrCBdgac6cpza2SA_kdjp3W_A==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.249">
      <div class="step-ref passed">249</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.252">
      <div class="step-ref passed">252</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.255">
      <div class="step-ref passed">255</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModels !contains {id: &#39;#(UserDelete.id)&#39;, role: &#39;#(UserDelete.role)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[8:258]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[8:258]</span>
                <span class="scenario-name">The use admin can delete customers</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>4923</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[8:258]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[8:258]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">00:34:01.780 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[8:258]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[8:258]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[8:258]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">505</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">498</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">00:34:01.787 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">495</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">00:34:01.789 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

00:34:02.281 response time in milliseconds: 491
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:34:02 GMT
1 &lt; x-amzn-RequestId: 69168a7b-1483-46e5-86a2-9b9fcac80f87
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpWIErgDoEFceA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef5a-7928632b600d5f0533d67a06
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 546db6834bf5885f55b5457c969e7ad6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: mQX-MSe4A_k4lX2uzQJnfDLSvMaPgRukVsX8HerSbKuolMPo3kWC6A==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJmOTM2OTJkNS03YjdmLTQ3YTItYjNkYi04MTZiZmJkOGE2YjQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDg0MiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQ0MiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDg0MiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.q3-OXNVKDr1iSVPPvoupuhIj4Aakt7EvGX1fK0A_Ix1SzDGZ9IVt0MMTKBBIl3onFf9Tpqb0ysWPgqSDQixHbWrKYY__YyB1i1LCcWXu5DMRZ6eintXLz1B4pm5idPCf0eetRJHMIwNn9mj4qa9BnPYDxlg2apOXeSxlGPfRKvh2XYdAYvNui3_Ern8GqlQOWaqHOQKA8M_fuxUejm3sugEk4w7Tr0YJwA3lR9dQdXB3RrOwdRvO03CKICpsZ3qpEaZvKg_0pEb3hinlWE7kdP2q1nzplHz6jILd-eDf5cbYzjdR_xjNGgl4FNL7BHVOcQ1AgjS3VvGdYCBHk_sEhQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImY5MzY5MmQ1LTdiN2YtNDdhMi1iM2RiLTgxNmJmYmQ4YTZiNCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4NDIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQ0MiwiaWF0IjoxNjIxMjkwODQyLCJqdGkiOiJkYjZkYjk5Ny03Y2JiLTQ3MWEtOGMyZC02NGQ4NTZiOTVlYmEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.pOMG6-BnUHJR_rmeLRvLWTCzhmMMKpGBDwf3aRQYSXGU_MCs3mcfTeQdmyCU1qvDW8uv6r2fzbymoQsERp_tbkMMEs6KorSrlZjRiEE2xYAxJNfdGl9aMt73DESU1YNIpGf21eKdouG24Ex-ik8jGZsfjElOTiOQyoVtB_jBMaqkKSZJgb4WCellqkvMKhSNeGAj9cKFYGn2vNlNpDOnlh3AZ2hYhRETjqzrsAm_xYQarK9Vx5cLy_V8zNZYiVEZQLE6Lwv-TjCQa15Ou8unRmfmoHbTsPsWXrdT5dswPxkdp14mk6YxPQNg3ePqaY4SUdsoOPPC6GLyqUFCRKyBKA&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.X18YnSYdGH0XeF2LjX7BSWpFTIW11tFuUu4loLkMeq4DN4f24KPORDb33lN9NaxF2aZ4KX7pTXVlgc9oqPYWsmTQ06mNdMzZMscahjbVYJMN8dUpRgyofVNdt1YQIYAfJQHyypcFm5K5xYNN2PnGn5ObxtF4x0e9EqCJDau6nF-ycD8AvTMBkUGzesi83608RanF9hFY8QHq6XjPzOEo1SY045YXR2rLG8oiFAXnW2FRPrnXrlwsTDItkOTnA9ePNy1MJh0Tsk_0wYyMikKgqi0ea54crOYnES9yV43CIZV2jN5ktGi2VQXpKmO8hI7MA-RzyzjPdobkQ_BvNmzu7w.O8nqeXwUgvAL4YsS.DuABVcuZUfHVwITq8t-V4woG_oUa5NNQfCScNT6al6odEFzPULRIxDyXUyn2IE66YV-rxeM37BS9RqKIS-_7RGVfkQJFR2G_7I5DORBXSn1kTiQkq6J5mUKL1JOHi9mnyrbgpEf-OEboAXJT0Kp0pK9ngRAUhu6JAHff0XvAuK1sKxSGnw7Gqhyf9InD0KJq81GY2AL11eG9D9Zc5sHhCz2aom8EYd7yTZPxM2qao6zHjcauYZhsAhqdP-3Tz-IQez5nCONz40-1gaW_fQQlg_VAPvgXnY9C4T3wJCVE_UUmUsOZ8oQLJ4sItsWfB1bH-XuFs7qvV-zaOco3jLx2K44rQl45CGHILGF2fjHLFLDkSENyGeP3QErkjrUsJz81xxgPGhRZ6tOhXfOWlbSfAMvzZwpCR2pH0QGqPye1hSjyMDswidf0YT_b0hPxWzBIPt9FnSisBjaGiUM9jClLdqpZN46Aod_qeSEj8dJubcebDqMRw7tfi8VuWO-l32--XsLobKfs7APLcqHSLHH7GYvNA20XQKwcWcOAiurjbw3IhEvUY6wjbpTCnkLjoAruAcnE0qUsD8-VyijStg9oscbm4QuApQxozH3sUm5c3Mg1rojH_58Euz0IdINy6sZDpLlp7bVo5zQJYpTWSScn8o1EDpmBtljil83Ocm2DNy3Qx3_OGCaOtnsZkU22yrU6alUxESo2yEuSGJC2zmxFAVLjb6QN9mfwPaXQczMkUTaqw5FXcSe9yKkrlXbkIVfwInqoga2ACpx_xydRnL-WMi3NHJNmXYAV4TYXpb_c3evy38JLbwBLz0-0FRDZ2JE75SJr6S_tsjuU7AHoo1TcIiOHbEUHfwQBHSj-WEEUqEmvy9p0ElGH5KhZqQVTrkuaPwN3qh-zbgR1XiiU7YlzpLFuJlLQuj71k0Fha-5bd56YoB667vaX3-_LVkrROiRccJlWq2WCASHzeMuEoer0Qa72OHt-nvF_bMy8vfqLNIjgPwsts4Vp33XhESRV3PSxskE-yam9zEudXwsAXIfAgwbr5Rqe5UnPX5M_4BGCby6TNzbUTrwyQJHgG91lhBfDzUJ-e0CaZVHicnk1CGig8rqJLj_3ggJYXAr74DLbTuBnKBuh_pkKKFUerr10kqMYsWhIqWG8k4m7QGrxKFFpBK5KUpvAXrRWZCJ7uRDCUv3Zquy8iuqJlD46_r5nBaImbJ9WhV31Xijh_JNrkT_6piHpVZuKw61FzHhAbqMw-JBiv8swR6zElT0tl7ecrhtDkvOmRQCfyY6C7GZoJue3xVeCfUPJenD32q7tw5I3gZr7IbzZpGCiCtW_R3GtWNA.UweDaxW7ioHc2f4gBccaAg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">00:34:02.284 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJmOTM2OTJkNS03YjdmLTQ3YTItYjNkYi04MTZiZmJkOGE2YjQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDg0MiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQ0MiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDg0MiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.q3-OXNVKDr1iSVPPvoupuhIj4Aakt7EvGX1fK0A_Ix1SzDGZ9IVt0MMTKBBIl3onFf9Tpqb0ysWPgqSDQixHbWrKYY__YyB1i1LCcWXu5DMRZ6eintXLz1B4pm5idPCf0eetRJHMIwNn9mj4qa9BnPYDxlg2apOXeSxlGPfRKvh2XYdAYvNui3_Ern8GqlQOWaqHOQKA8M_fuxUejm3sugEk4w7Tr0YJwA3lR9dQdXB3RrOwdRvO03CKICpsZ3qpEaZvKg_0pEb3hinlWE7kdP2q1nzplHz6jILd-eDf5cbYzjdR_xjNGgl4FNL7BHVOcQ1AgjS3VvGdYCBHk_sEhQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[8:258]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">00:34:02.287 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJmOTM2OTJkNS03YjdmLTQ3YTItYjNkYi04MTZiZmJkOGE2YjQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDg0MiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQ0MiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDg0MiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.q3-OXNVKDr1iSVPPvoupuhIj4Aakt7EvGX1fK0A_Ix1SzDGZ9IVt0MMTKBBIl3onFf9Tpqb0ysWPgqSDQixHbWrKYY__YyB1i1LCcWXu5DMRZ6eintXLz1B4pm5idPCf0eetRJHMIwNn9mj4qa9BnPYDxlg2apOXeSxlGPfRKvh2XYdAYvNui3_Ern8GqlQOWaqHOQKA8M_fuxUejm3sugEk4w7Tr0YJwA3lR9dQdXB3RrOwdRvO03CKICpsZ3qpEaZvKg_0pEb3hinlWE7kdP2q1nzplHz6jILd-eDf5cbYzjdR_xjNGgl4FNL7BHVOcQ1AgjS3VvGdYCBHk_sEhQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImY5MzY5MmQ1LTdiN2YtNDdhMi1iM2RiLTgxNmJmYmQ4YTZiNCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyOTA4NDIsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI5NDQ0MiwiaWF0IjoxNjIxMjkwODQyLCJqdGkiOiJkYjZkYjk5Ny03Y2JiLTQ3MWEtOGMyZC02NGQ4NTZiOTVlYmEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.pOMG6-BnUHJR_rmeLRvLWTCzhmMMKpGBDwf3aRQYSXGU_MCs3mcfTeQdmyCU1qvDW8uv6r2fzbymoQsERp_tbkMMEs6KorSrlZjRiEE2xYAxJNfdGl9aMt73DESU1YNIpGf21eKdouG24Ex-ik8jGZsfjElOTiOQyoVtB_jBMaqkKSZJgb4WCellqkvMKhSNeGAj9cKFYGn2vNlNpDOnlh3AZ2hYhRETjqzrsAm_xYQarK9Vx5cLy_V8zNZYiVEZQLE6Lwv-TjCQa15Ou8unRmfmoHbTsPsWXrdT5dswPxkdp14mk6YxPQNg3ePqaY4SUdsoOPPC6GLyqUFCRKyBKA&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.X18YnSYdGH0XeF2LjX7BSWpFTIW11tFuUu4loLkMeq4DN4f24KPORDb33lN9NaxF2aZ4KX7pTXVlgc9oqPYWsmTQ06mNdMzZMscahjbVYJMN8dUpRgyofVNdt1YQIYAfJQHyypcFm5K5xYNN2PnGn5ObxtF4x0e9EqCJDau6nF-ycD8AvTMBkUGzesi83608RanF9hFY8QHq6XjPzOEo1SY045YXR2rLG8oiFAXnW2FRPrnXrlwsTDItkOTnA9ePNy1MJh0Tsk_0wYyMikKgqi0ea54crOYnES9yV43CIZV2jN5ktGi2VQXpKmO8hI7MA-RzyzjPdobkQ_BvNmzu7w.O8nqeXwUgvAL4YsS.DuABVcuZUfHVwITq8t-V4woG_oUa5NNQfCScNT6al6odEFzPULRIxDyXUyn2IE66YV-rxeM37BS9RqKIS-_7RGVfkQJFR2G_7I5DORBXSn1kTiQkq6J5mUKL1JOHi9mnyrbgpEf-OEboAXJT0Kp0pK9ngRAUhu6JAHff0XvAuK1sKxSGnw7Gqhyf9InD0KJq81GY2AL11eG9D9Zc5sHhCz2aom8EYd7yTZPxM2qao6zHjcauYZhsAhqdP-3Tz-IQez5nCONz40-1gaW_fQQlg_VAPvgXnY9C4T3wJCVE_UUmUsOZ8oQLJ4sItsWfB1bH-XuFs7qvV-zaOco3jLx2K44rQl45CGHILGF2fjHLFLDkSENyGeP3QErkjrUsJz81xxgPGhRZ6tOhXfOWlbSfAMvzZwpCR2pH0QGqPye1hSjyMDswidf0YT_b0hPxWzBIPt9FnSisBjaGiUM9jClLdqpZN46Aod_qeSEj8dJubcebDqMRw7tfi8VuWO-l32--XsLobKfs7APLcqHSLHH7GYvNA20XQKwcWcOAiurjbw3IhEvUY6wjbpTCnkLjoAruAcnE0qUsD8-VyijStg9oscbm4QuApQxozH3sUm5c3Mg1rojH_58Euz0IdINy6sZDpLlp7bVo5zQJYpTWSScn8o1EDpmBtljil83Ocm2DNy3Qx3_OGCaOtnsZkU22yrU6alUxESo2yEuSGJC2zmxFAVLjb6QN9mfwPaXQczMkUTaqw5FXcSe9yKkrlXbkIVfwInqoga2ACpx_xydRnL-WMi3NHJNmXYAV4TYXpb_c3evy38JLbwBLz0-0FRDZ2JE75SJr6S_tsjuU7AHoo1TcIiOHbEUHfwQBHSj-WEEUqEmvy9p0ElGH5KhZqQVTrkuaPwN3qh-zbgR1XiiU7YlzpLFuJlLQuj71k0Fha-5bd56YoB667vaX3-_LVkrROiRccJlWq2WCASHzeMuEoer0Qa72OHt-nvF_bMy8vfqLNIjgPwsts4Vp33XhESRV3PSxskE-yam9zEudXwsAXIfAgwbr5Rqe5UnPX5M_4BGCby6TNzbUTrwyQJHgG91lhBfDzUJ-e0CaZVHicnk1CGig8rqJLj_3ggJYXAr74DLbTuBnKBuh_pkKKFUerr10kqMYsWhIqWG8k4m7QGrxKFFpBK5KUpvAXrRWZCJ7uRDCUv3Zquy8iuqJlD46_r5nBaImbJ9WhV31Xijh_JNrkT_6piHpVZuKw61FzHhAbqMw-JBiv8swR6zElT0tl7ecrhtDkvOmRQCfyY6C7GZoJue3xVeCfUPJenD32q7tw5I3gZr7IbzZpGCiCtW_R3GtWNA.UweDaxW7ioHc2f4gBccaAg&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### List the customers to select one to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.260">
      <div class="step-ref passed">260</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.260">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.264">
      <div class="step-ref passed">264</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.265">
      <div class="step-ref passed">265</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.266">
      <div class="step-ref passed">266</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.267">
      <div class="step-ref passed">267</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">196</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.267">00:34:02.289 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJmOTM2OTJkNS03YjdmLTQ3YTItYjNkYi04MTZiZmJkOGE2YjQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDg0MiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQ0MiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDg0MiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.q3-OXNVKDr1iSVPPvoupuhIj4Aakt7EvGX1fK0A_Ix1SzDGZ9IVt0MMTKBBIl3onFf9Tpqb0ysWPgqSDQixHbWrKYY__YyB1i1LCcWXu5DMRZ6eintXLz1B4pm5idPCf0eetRJHMIwNn9mj4qa9BnPYDxlg2apOXeSxlGPfRKvh2XYdAYvNui3_Ern8GqlQOWaqHOQKA8M_fuxUejm3sugEk4w7Tr0YJwA3lR9dQdXB3RrOwdRvO03CKICpsZ3qpEaZvKg_0pEb3hinlWE7kdP2q1nzplHz6jILd-eDf5cbYzjdR_xjNGgl4FNL7BHVOcQ1AgjS3VvGdYCBHk_sEhQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

00:34:02.484 response time in milliseconds: 194
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 397
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 22:34:02 GMT
1 &lt; x-amzn-RequestId: 21d9ee96-dd21-4282-9dc6-f9cb37f8d8df
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: ffpWNGNgDoEFWNg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a2ef5a-272abbd82f7bb87922d75100;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 9d2dddf4e5a6eb0fbe872acf3cba5889.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: 2VmiOLUSppv2M5lxd5URCotbMFSrmUFbYEZm6zr3eZHMtNpn3816Qg==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.268">
      <div class="step-ref passed">268</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.271">
      <div class="step-ref passed">271</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.274">
      <div class="step-ref passed">274</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.275">
      <div class="step-ref passed">275</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Save the body of the response and get the first to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.278">
      <div class="step-ref passed">278</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def list_customers = response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.279">
      <div class="step-ref passed">279</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customer_toDelete = list_customers[0]</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Delete the customer</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.282">
      <div class="step-ref passed">282</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.282">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.286">
      <div class="step-ref passed">286</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.287">
      <div class="step-ref passed">287</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.288">
      <div class="step-ref passed">288</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteCustomer)&#39;, variables: &#39;#(customer_toDelete)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.289">
      <div class="step-ref passed">289</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">193</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.289">00:34:02.498 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJmOTM2OTJkNS03YjdmLTQ3YTItYjNkYi04MTZiZmJkOGE2YjQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTI5MDg0MiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTI5NDQ0MiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTI5MDg0MiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.q3-OXNVKDr1iSVPPvoupuhIj4Aakt7EvGX1fK0A_Ix1SzDGZ9IVt0MMTKBBIl3onFf9Tpqb0ysWPgqSDQixHbWrKYY__YyB1i1LCcWXu5DMRZ6eintXLz1B4pm5idPCf0eetRJHMIwNn9mj4qa9BnPYDxlg2apOXeSxlGPfRKvh2XYdAYvNui3_Ern8GqlQOWaqHOQKA8M_fuxUejm3sugEk4w7Tr0YJwA3lR9dQdXB3RrOwdRvO03CKICpsZ3qpEaZvKg_0pEb3hinlWE7kdP2q1nzplHz6jILd-eDf5cbYzjdR_xjNGgl4FNL7BHVOcQ1AgjS3VvGdYCBHk_sEhQ
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 233
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},&quot;query&quot;:&quot;mutation DeleteCustomer($id: ID) {\r\n    DeleteCustomer(input: {id: $id})\r\n} \r\n&quot;}

00:34:02.688 response time in milliseconds: 189
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 32
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 17 May 2021 22:34:03 GMT
2 &lt; x-amzn-RequestId: bef04d92-ec78-45fe-a2a0-83f9ef58040a
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: ffpWOESKDoEFn4g=
2 &lt; X-Amzn-Trace-Id: Root=1-60a2ef5a-0c82879a6b81ac7c31fb1ccd;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 3d894cf86d3eca85fdb4b21f62292766.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: PG2TyW4WxXVkyI3y9rRiiRgpwGM9fdj-YK8L6zkj_IMUJjL4lfZIPQ==
{&quot;data&quot;:{&quot;DeleteCustomer&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.290">
      <div class="step-ref passed">290</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.292">
      <div class="step-ref passed">292</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4014</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.295">
      <div class="step-ref passed">295</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check if the response contains any error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.298">
      <div class="step-ref passed">298</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

