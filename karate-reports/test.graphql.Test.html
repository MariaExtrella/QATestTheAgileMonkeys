<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>test.graphql.Test</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">2</div>
      <div id="nav-fail" class="bg-danger">1</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2021-05-23 02:35:18 a.Â m.</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item passed">
            <a href="#[1:6]"><span>[1:6]</span> <span>Test if the API met the acceptance criteria for users admin</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[2:9]"><span>[2:9]</span> <span>Test if the API met the acceptance criteria for users not admin</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[3:12]"><span>[3:12]</span> <span>Test if the API met the acceptance criteria in wrong cases</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">test/graphql/Test.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Test the graphql API for admin and not admin users</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:6]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:6]</span>
                <span class="scenario-name">Test if the API met the acceptance criteria for users admin</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>50371</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:6]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:6]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">02:33:22.956 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref passed">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def testResuls = call read(&#39;TestAdmin.feature&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">50371</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.7.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.TestAdmin</div>
      </div>
      <div class="time-cell passed">50312</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It is necessary to sign in the API as admin to create a new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Read the admin datas from a *.json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminDatas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">37</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) adminDatas</span>
      </div>
    </div>
    <div class="time-cell passed">812</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.12.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.signin</div>
      </div>
      <div class="time-cell passed">802</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.12.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.12.0.call.0.15">02:33:23.062 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">787</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.12.0.call.0.20">02:33:23.283 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

02:33:23.852 response time in milliseconds: 564
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:24 GMT
1 &lt; x-amzn-RequestId: 43bf9747-128f-4fdb-8b35-2f5004e02112
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZhLE8_joEFmKA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2d4-0c7eed6a7fe5a3391acc3de2
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c0d1739fbc59ff80d4ec6a2a675c8aac.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: -x-kUcGPD4K6n3UtN7j4E3X3MTLw4kmufzFqRLWNm8al2pSvIS6WUQ==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImFkZDVlZDlkLTcyNjgtNDcwMy04YTJkLTEwYjI1MThiZDQyZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwMDQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzYwNCwiaWF0IjoxNjIxNzMwMDA0LCJqdGkiOiIwYzVmMWJlNy0yNWYyLTQxYjgtOTQ3My1lYjIyZjZkMDkzOGMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.pSOF8cqO2PUIKZjt5fty_vNywr6lKYErbISKH-mwVOraNhUmey9YbziG_jCXcG3wbdxRBC1ncMG2md-IV2t-oM_1mlFCG-2kGZKvCSZHvDZu46xHPgNjlWfXGnPd2nkiXyNA3cWwEa5Jyosrukv00IxnUNGIj8vyDgCVjtGaUyAief5WAiD9ijyZXYxLSE_OAFYXYTN1y6LNSUtKEhhA2cyMAYYh2EqsvYNOvQuD5-GkLecAmqwUVMrFelfW3k-LQ44QcbfyEqEKIrMWg2KtsAmcId9Cyp4Gcy1ldXUqECAf_5KSROiAT_ifFjXpQWIDc_jbq6-lg0HkZn2Osjy4nA&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bNwrtC9kM-Zt41xbvemOC7TydG-W_IYfhRjcfHEjw-ucoqbU4sGAxsGEhr_LOyUdj5aS1wpMDF6IKL22R5dfLifDT01gxJYuJbhL2X2pTD8oS846MGmvo5HECvoN6EypjolFrmIdRMyOHTngGuFlrJh5aC09VxYr4Dxz_0SA-b9dtDas5rYuYtHOMgm3AWIiJpvCyq7JcRiGdJbKLMk7dw_44w8vGY1GF6h0n1434_MjLmOSoB7UJh8xH8zv8znRRurdk3SItBVYlLauwBvSUXbzXbuqL9AhFbDlQ7rda5jBajNrt19EK7JjoWxnlmrU4TJ5yTOPD0PCewmSYBs7xA.N5z9PxP8ieAI_x8u.JpWkF1rsz7fraaIWvbURUAE1yh6cGoPrz57f3xwswu4c9nqU0sjdKofoAdjUfAN3Zuo7mdc5zSPvtUevgPd6ycotq1EgL9T8zfCjQzCGFGwvmGpMOAyaPF-4PObVeT3UgjZ1X3sjGHnE48OE92mwNf_xTsR4L3QbVvVc21kr2FcAclyWF_NJx4RJ0H5HyfbRvhvm1_-q-5CeZhBmespHcPskvNrcMqBLLC3wGoMGR6iNTzpd3Tg7cRm4XbY067JUicyFAxeO37jlJCobOyEk2n52tJJsGr3ECYAUS5NzPd2wlva64ssjcokdbdFqX9mvUFAFrqhs0_4cgJqkHyQsLiVFa87np3lR1iXyW4urRszQeynRO3au_vzEADXALcsrRANQ_zyfQg7Pr7X_pXpTIvh-N19kiWgY5lewg27tTM0VLJTUs-a_YNPvgdV_wF5OTOU9XjS-ZXtR09P6Sv_JzN5cSt5W3SwOJv5qKOaGB8KfrH4K_QL3K9MoC88AT_-ByhYcF6sir0ruOxH7DK3hNTZtWRcUhzFJGntwfbC6AgD4wyqyIdfWofON1LdMhNHdx3OWfvYagVNShZc_aox8XZt8EjOdUd1DUB9CLAcu8d6p1JYOFiDoWac5spWWn5Ph3pjSgsRX2ZP_pr0Sfm7rM1Y7i_-UABvtbNKrd0M7brOJ5UK12pSaOvHp5EUjv_mAyn3GtVh7nGKELWpdjxXXxLyiMJQVtyAsLVeuMl3JUuvO0dzulhtyUJnKfBqBfp8QG4byqWqQ1GpDqVb_ZrPpRLkKk5w1fNvdomvGmqKfKCycK_09j5KcHq89ieVe8ouZiVh5Nq5RLkXWYMRqQ1XfLRLhj-9dhdE2r2O_NeCAvHCuyOQ-So0BG8u_N4QAuqpPB3G-gSgI7JxI8mebtrdq0OOm-mjo4Lmp-MEPLn33WhL3oKKympAOipAMYJB40sq7WGakeI9mDLJet6Z8kSfEw59zGSGNQzexHb49L_2VVlyXnpVtvVv4vD9HyroDhDmFleOmqHsf4VojP1N7-Af8p86ktq4THaQEjFxvrKnNlsUnLOTjbnS6hZC4tkATF3KEwVDcgSSLC0kPLiRnRNeKD-htw7HGba4_Skxezc3HpQy6oetEOAzUt9em7SpGoButawWf-Y4S4oWT6WMQDJWYMjF41AwoXUj_FargGCE81doN-6xMLbjMiJMTG5KNx2S6AfsOP6fwJk1_2Zmlf-rAd_INUhFKqZqi4oaKK2ClEcEM8YMX_g0TDYCL7qxpKz7mfMfNcklWTCVWwMwxEa-jyA89lA08bODhi9HTvIE-qqhNA809917x4layXlGlrmA.3RAoKliZJ-fyt2C_0StREg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.12.0.call">
    <div class="step-container" id="0.7.0.call.0.12.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.12.0.call.0.25">02:33:23.857 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.13">02:33:23.860 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImFkZDVlZDlkLTcyNjgtNDcwMy04YTJkLTEwYjI1MThiZDQyZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwMDQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzYwNCwiaWF0IjoxNjIxNzMwMDA0LCJqdGkiOiIwYzVmMWJlNy0yNWYyLTQxYjgtOTQ3My1lYjIyZjZkMDkzOGMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.pSOF8cqO2PUIKZjt5fty_vNywr6lKYErbISKH-mwVOraNhUmey9YbziG_jCXcG3wbdxRBC1ncMG2md-IV2t-oM_1mlFCG-2kGZKvCSZHvDZu46xHPgNjlWfXGnPd2nkiXyNA3cWwEa5Jyosrukv00IxnUNGIj8vyDgCVjtGaUyAief5WAiD9ijyZXYxLSE_OAFYXYTN1y6LNSUtKEhhA2cyMAYYh2EqsvYNOvQuD5-GkLecAmqwUVMrFelfW3k-LQ44QcbfyEqEKIrMWg2KtsAmcId9Cyp4Gcy1ldXUqECAf_5KSROiAT_ifFjXpQWIDc_jbq6-lg0HkZn2Osjy4nA&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bNwrtC9kM-Zt41xbvemOC7TydG-W_IYfhRjcfHEjw-ucoqbU4sGAxsGEhr_LOyUdj5aS1wpMDF6IKL22R5dfLifDT01gxJYuJbhL2X2pTD8oS846MGmvo5HECvoN6EypjolFrmIdRMyOHTngGuFlrJh5aC09VxYr4Dxz_0SA-b9dtDas5rYuYtHOMgm3AWIiJpvCyq7JcRiGdJbKLMk7dw_44w8vGY1GF6h0n1434_MjLmOSoB7UJh8xH8zv8znRRurdk3SItBVYlLauwBvSUXbzXbuqL9AhFbDlQ7rda5jBajNrt19EK7JjoWxnlmrU4TJ5yTOPD0PCewmSYBs7xA.N5z9PxP8ieAI_x8u.JpWkF1rsz7fraaIWvbURUAE1yh6cGoPrz57f3xwswu4c9nqU0sjdKofoAdjUfAN3Zuo7mdc5zSPvtUevgPd6ycotq1EgL9T8zfCjQzCGFGwvmGpMOAyaPF-4PObVeT3UgjZ1X3sjGHnE48OE92mwNf_xTsR4L3QbVvVc21kr2FcAclyWF_NJx4RJ0H5HyfbRvhvm1_-q-5CeZhBmespHcPskvNrcMqBLLC3wGoMGR6iNTzpd3Tg7cRm4XbY067JUicyFAxeO37jlJCobOyEk2n52tJJsGr3ECYAUS5NzPd2wlva64ssjcokdbdFqX9mvUFAFrqhs0_4cgJqkHyQsLiVFa87np3lR1iXyW4urRszQeynRO3au_vzEADXALcsrRANQ_zyfQg7Pr7X_pXpTIvh-N19kiWgY5lewg27tTM0VLJTUs-a_YNPvgdV_wF5OTOU9XjS-ZXtR09P6Sv_JzN5cSt5W3SwOJv5qKOaGB8KfrH4K_QL3K9MoC88AT_-ByhYcF6sir0ruOxH7DK3hNTZtWRcUhzFJGntwfbC6AgD4wyqyIdfWofON1LdMhNHdx3OWfvYagVNShZc_aox8XZt8EjOdUd1DUB9CLAcu8d6p1JYOFiDoWac5spWWn5Ph3pjSgsRX2ZP_pr0Sfm7rM1Y7i_-UABvtbNKrd0M7brOJ5UK12pSaOvHp5EUjv_mAyn3GtVh7nGKELWpdjxXXxLyiMJQVtyAsLVeuMl3JUuvO0dzulhtyUJnKfBqBfp8QG4byqWqQ1GpDqVb_ZrPpRLkKk5w1fNvdomvGmqKfKCycK_09j5KcHq89ieVe8ouZiVh5Nq5RLkXWYMRqQ1XfLRLhj-9dhdE2r2O_NeCAvHCuyOQ-So0BG8u_N4QAuqpPB3G-gSgI7JxI8mebtrdq0OOm-mjo4Lmp-MEPLn33WhL3oKKympAOipAMYJB40sq7WGakeI9mDLJet6Z8kSfEw59zGSGNQzexHb49L_2VVlyXnpVtvVv4vD9HyroDhDmFleOmqHsf4VojP1N7-Af8p86ktq4THaQEjFxvrKnNlsUnLOTjbnS6hZC4tkATF3KEwVDcgSSLC0kPLiRnRNeKD-htw7HGba4_Skxezc3HpQy6oetEOAzUt9em7SpGoButawWf-Y4S4oWT6WMQDJWYMjF41AwoXUj_FargGCE81doN-6xMLbjMiJMTG5KNx2S6AfsOP6fwJk1_2Zmlf-rAd_INUhFKqZqi4oaKK2ClEcEM8YMX_g0TDYCL7qxpKz7mfMfNcklWTCVWwMwxEa-jyA89lA08bODhi9HTvIE-qqhNA809917x4layXlGlrmA.3RAoKliZJ-fyt2C_0StREg&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The token for the admin user is the input parameter for the callable feature where are defined the steps of the tests</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Test that the admin user can save new users</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUsers = call read(&#39;SaveUsers.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">16900</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.19">02:33:40.749 dynamic expression complete at index: 3, not map-like: [type: NULL, value: null]
</div>   

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.19.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUsers</div>
      </div>
      <div class="time-cell passed">16846</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Users</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorUser = function(i){ if (i == 3) return null; return { username: &#39;username&#39; + i + &#39;@test.com&#39;, password: &#39;Password_1&#39;, role: &#39;User&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.1.17">{ 
	&quot;username&quot;: &quot;#(username)&quot;, 
	&quot;password&quot;: &quot;#(password)&quot;, 
	&quot;role&quot;: &quot;#(role)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">2371</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.1.30">02:33:23.914 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 254
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;username0@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:33:26.281 response time in milliseconds: 2366
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:27 GMT
1 &lt; x-amzn-RequestId: 3d9cbe1c-dc49-4fc2-b28f-8748e719eab1
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZhQGGHDoEFVhg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2d4-6e2cc62279e569055917e93f;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 b48ff99ee80d859d9aeaafd9cb93df6f.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: mPthP4PncEFe3Q9jKaF2s_Rkq29WB03TQgRuHZpHLT4YJWzl7CIieA==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.33">
      <div class="step-ref passed">33</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4021</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.1.36">
      <div class="step-ref passed">36</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Users</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorUser = function(i){ if (i == 3) return null; return { username: &#39;username&#39; + i + &#39;@test.com&#39;, password: &#39;Password_1&#39;, role: &#39;User&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.2.17">{ 
	&quot;username&quot;: &quot;#(username)&quot;, 
	&quot;password&quot;: &quot;#(password)&quot;, 
	&quot;role&quot;: &quot;#(role)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1202</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.2.30">02:33:30.315 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 254
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;username1@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:33:31.514 response time in milliseconds: 1198
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 26
2 &lt; Connection: keep-alive
2 &lt; Date: Sun, 23 May 2021 00:33:32 GMT
2 &lt; x-amzn-RequestId: 685225b9-6dff-43a9-8c7a-c8692cf54c52
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fwZiQE64DoEFX6A=
2 &lt; X-Amzn-Trace-Id: Root=1-60a9a2db-62e03076059959a508071c10;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 71a0472adc0e71a3b21b29ba3bec35f2.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD51-C2
2 &lt; X-Amz-Cf-Id: TWKUfpn-YAnIRF59iJvpM_xhkUcx_ePucL_fTtqH8vY0dnA8_DrjoQ==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.33">
      <div class="step-ref passed">33</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4012</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.2.36">
      <div class="step-ref passed">36</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Users</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorUser = function(i){ if (i == 3) return null; return { username: &#39;username&#39; + i + &#39;@test.com&#39;, password: &#39;Password_1&#39;, role: &#39;User&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.3.17">{ 
	&quot;username&quot;: &quot;#(username)&quot;, 
	&quot;password&quot;: &quot;#(password)&quot;, 
	&quot;role&quot;: &quot;#(role)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1203</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.19.0.call.3.30">02:33:35.537 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 254
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;username2@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:33:36.737 response time in milliseconds: 1199
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 26
3 &lt; Connection: keep-alive
3 &lt; Date: Sun, 23 May 2021 00:33:37 GMT
3 &lt; x-amzn-RequestId: a5cc9590-03d2-416d-82fa-69339c7c1849
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: fwZjFENHjoEF1eA=
3 &lt; X-Amzn-Trace-Id: Root=1-60a9a2e0-62e790a2126cf41278c8e873;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 e4b8d81d5f13e1c05d52108e75ecf23c.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD51-C2
3 &lt; X-Amz-Cf-Id: KezWr09siqtIaOq_qDgtSpXa-dgK1xpo1_i2G_5eCKnx_uboRdRfFg==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.33">
      <div class="step-ref passed">33</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.19.0.call">
    <div class="step-container" id="0.7.0.call.0.19.0.call.3.36">
      <div class="step-ref passed">36</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match saveUsers.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">12</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># List all the users of the API</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listUsers = call read(&#39;UserReadModels.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">273</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.24.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.UserReadModels</div>
      </div>
      <div class="time-cell passed">258</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels = read(&#39;UserReadModels.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">255</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.24.0.call.0.14">02:33:40.786 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 102
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

02:33:41.038 response time in milliseconds: 250
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 155
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:41 GMT
1 &lt; x-amzn-RequestId: aa824277-674d-4242-9cbf-2a12b27a3ea7
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZj5HKbDoEFm2w=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2e5-7ea6fcdf6b0c1ab072cff0a5;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e4b8d81d5f13e1c05d52108e75ecf23c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: Mkcvbai2mqGbuyHjY1_khf32kVxWtmqBksbdg-aAOknoO7C2oX_zMA==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;username0@test.com&quot;},{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;username1@test.com&quot;},{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;username2@test.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.24.0.call">
    <div class="step-container" id="0.7.0.call.0.24.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listUsers.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Change the role of one user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Take the first user of the response to change the role</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def first_user = listUsers.response.data.UserReadModels[0]</span>
      </div>
    </div>
    <div class="time-cell passed">5</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_user.role = &quot;role changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userChangeRole =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.32">{
  &quot;username&quot;: &quot;#(first_user.id)&quot;,
  &quot;role&quot;: &quot;#(first_user.role)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def change_role = call read(&#39;ChangeUserRole.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4508</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.39.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.ChangeUserRole</div>
      </div>
      <div class="time-cell passed">4489</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole = read(&#39;ChangeUserRole.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryChangeUserRole)&#39;,  variables: &#39;#(userChangeRole)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">480</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.39.0.call.0.18">02:33:41.073 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 207
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;role&quot;:&quot;role changed&quot;,&quot;username&quot;:&quot;username0@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

02:33:41.550 response time in milliseconds: 476
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:42 GMT
1 &lt; x-amzn-RequestId: 8eaf2cbd-7a9c-4519-8d43-a32a14104929
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZj7GvoDoEFWSQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2e5-6bfc445b5cf48a3654cc74cc;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 fe55d6b634c29e0dbde85630de5f2787.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: Zom_r0XdtB82jCast82VZ85fbxxHd5RBI_Za99m4rzAi-ZyktDHgSA==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.39.0.call">
    <div class="step-container" id="0.7.0.call.0.39.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4006</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match change_role.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List one user by id to check that the role has been changed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the id for the query</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.44">
      <div class="step-ref passed">44</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.44">{
	&quot;id&quot;: &quot;#(first_user.id)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.50">
      <div class="step-ref passed">50</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listUserbyId = call read(&#39;UserReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">306</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.50.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.UserReadModel</div>
      </div>
      <div class="time-cell passed">284</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel = read(&#39;UserReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModel)&#39;, variables: &#39;#(id)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">281</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.50.0.call.0.14">02:33:45.585 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 159
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;username0@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

02:33:45.864 response time in milliseconds: 278
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 76
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:46 GMT
1 &lt; x-amzn-RequestId: a2887134-cebe-4570-92d5-12959762d1db
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZkpF1BjoEFnWg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2ea-0e6806bf2b37430d66e0a88f;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c5c852ebeabe49b08625d425153869fe.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: pDfS8seRWrETLn5v4TQuC3XFvuTzkK57IVaGXvTbesAmGgkPgP-yHw==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;role changed&quot;,&quot;id&quot;:&quot;username0@test.com&quot;}}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.50.0.call">
    <div class="step-container" id="0.7.0.call.0.50.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.51">
      <div class="step-ref passed">51</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listUserbyId.response.data.UserReadModel == {id: &#39;#(first_user.id)&#39;, role: &#39;#(first_user.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Create new customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It is necessary to define the userId as the username of the user who create the customers to be read as id in the feature</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.56">
      <div class="step-ref passed">56</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id = adminDatas.username</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.56">02:33:45.874 over-writing existing variable &#39;id&#39; with new value: adminDatas.username
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.57">
      <div class="step-ref passed">57</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveCustomers = call read(&#39;SaveCustomers.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">12837</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.57">02:33:58.703 dynamic expression complete at index: 3, not map-like: [type: NULL, value: null]
</div>   

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.57.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveCustomers</div>
      </div>
      <div class="time-cell passed">12795</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;Cust&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.1.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">261</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.1.31">02:33:45.898 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 282
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;Cust0&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:33:46.158 response time in milliseconds: 259
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:46 GMT
1 &lt; x-amzn-RequestId: 9b2ffe58-68b3-49f1-b871-bf49c32bf588
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZksGxtjoEFzQw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2ea-27e491a97138232e02ae5f8d;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 32713ef80c317f26bc1691bc0aad3819.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: vJ3-GepIZAM75EigdjLytJ1JXDmrn8xFABjyR9KSwfsQTGyPfVUT1g==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4002</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.1.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;Cust&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.2.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">129</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.2.31">02:33:50.173 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 282
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;Cust1&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:33:50.300 response time in milliseconds: 127
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Sun, 23 May 2021 00:33:51 GMT
2 &lt; x-amzn-RequestId: eed41225-cb04-40fd-94ed-e6a1a3f64d63
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fwZlWEgojoEF9qA=
2 &lt; X-Amzn-Trace-Id: Root=1-60a9a2ee-4c70bc3203a76e056e3e129d;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 83f9969abb9f43b17789799503ae532d.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD51-C2
2 &lt; X-Amz-Cf-Id: 9nCNhnejPdqpdakDuf04Isf4JL6p5SJmOU2dPfY-xahe3F9Uop3A-w==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.2.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;Cust&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.3.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">377</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.57.0.call.3.31">02:33:54.320 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 282
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;Cust2&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:33:54.694 response time in milliseconds: 373
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 30
3 &lt; Connection: keep-alive
3 &lt; Date: Sun, 23 May 2021 00:33:55 GMT
3 &lt; x-amzn-RequestId: 13787136-f3e3-47fc-bb3b-8c9bd64777b8
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: fwZmAHDiDoEF9cA=
3 &lt; X-Amzn-Trace-Id: Root=1-60a9a2f3-03d9a0cb505e618d31b039d8;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 66709b7391664c627ccebe2d9c55dd7f.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD51-C2
3 &lt; X-Amz-Cf-Id: xyvKOhy0y_FMAUGLhvTlEcf6zfkGxiXzyl1l6nuRhA-jAD_SIN3faQ==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4006</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.57.0.call">
    <div class="step-container" id="0.7.0.call.0.57.0.call.3.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List all customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.61">
      <div class="step-ref passed">61</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomers = call read(&#39;CustomerReadModels.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">377</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.61.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModels</div>
      </div>
      <div class="time-cell passed">331</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModels = read(&#39;CustomerReadModels.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">7</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">316</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.61.0.call.0.14">02:33:58.748 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:33:59.062 response time in milliseconds: 313
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 535
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:33:59 GMT
1 &lt; x-amzn-RequestId: 8946b1f7-2b99-47a2-9395-baad55db6166
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZmtHcjjoEFgHw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2f7-542249c61f6235aa451b5990;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 b89214703c5c60a107a07c982809a482.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: ziQJeBhk1EWH3bo7f2YJJr8pDo0H_FKE3HJ0LnfGwTlJAnmEdaNveQ==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;Cust0&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;#(first_customer.surname)&quot;,&quot;name&quot;:&quot;#(first_customer.name)&quot;,&quot;id&quot;:&quot;#(first_customer.id)&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;Cust1&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;Cust2&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.61.0.call.0.24">02:33:59.067 [print] [
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;Cust0&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;#(first_customer.surname)&quot;,
    &quot;name&quot;: &quot;#(first_customer.name)&quot;,
    &quot;id&quot;: &quot;#(first_customer.id)&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;Cust1&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;Cust2&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  }
]
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.61.0.call">
    <div class="step-container" id="0.7.0.call.0.61.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Update customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Take the first customer of the above response to modify</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.66">
      <div class="step-ref passed">66</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def first_customer = listCustomers.response.data.CustomerReadModels[0]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.68">
      <div class="step-ref passed">68</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.name = &quot;name changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.69">
      <div class="step-ref passed">69</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.surname = &quot;surname changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.70">
      <div class="step-ref passed">70</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.photoURL = &quot;newPhoto.jpg&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.73">
      <div class="step-ref passed">73</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def updateCustomer = call read(&#39;SaveCustomer.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4312</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.73.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveCustomer</div>
      </div>
      <div class="time-cell passed">4269</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The body of the graphql request is a JSON with the generated values</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.73.0.call.0.14">{ 
	&quot;id&quot;: &quot;#(first_customer.id)&quot;, 
	&quot;name&quot;: &quot;#(first_customer.name)&quot;, 
	&quot;surname&quot;: &quot;#(first_customer.surname)&quot;,
	&quot;photo&quot;: &quot;#(first_customer.photo)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">248</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.73.0.call.0.28">02:33:59.121 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 274
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;photo&quot;:null,&quot;id&quot;:&quot;Cust0&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:33:59.368 response time in milliseconds: 246
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:00 GMT
1 &lt; x-amzn-RequestId: a4b7cb7b-2f80-421c-a4b1-6daace873720
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZmwGcBjoEFejA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2f7-51dd017e4e9ed02e7e3d2448;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c9966d06baf42da6ee92424751ed7202.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: gTOATU6Hw9RxT2qGlxjTK1oaL1SKXIq0Xddl5BR4p8B10XznoAQOag==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4015</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.73.0.call">
    <div class="step-container" id="0.7.0.call.0.73.0.call.0.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List a customer by id</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check if the customer was updated properly and it has the reference of the last user who modified</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.78">
      <div class="step-ref passed">78</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id_Customer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.78">{
   &quot;id&quot;: &quot;#(first_customer.id)&quot; 
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.84">
      <div class="step-ref passed">84</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomerId = call read(&#39;CustomerReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">289</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.84.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModel</div>
      </div>
      <div class="time-cell passed">253</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModel = read(&#39;CustomerReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModel)&#39;, variables: &#39;#(id_Customer)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">247</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.84.0.call.0.14">02:34:03.424 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 211
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;Cust0&quot;},&quot;query&quot;:&quot;query CustomerReadModel($id: ID!) {\r\n    CustomerReadModel(id: $id) {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:34:03.669 response time in milliseconds: 244
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 146
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:04 GMT
1 &lt; x-amzn-RequestId: 9c5a1ff8-0939-4208-aee7-c9784d4c0686
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZnbHAeDoEFdyQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2fc-1914767378de7a3951b22211;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 911151077fc74374130cb3f3f2d671e8.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: NVaI1butaUfruLcruJMhneK8FuPb5geXa1Rgq3qBYgbzGDTEzQXQJQ==
{&quot;data&quot;:{&quot;CustomerReadModel&quot;:{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;id&quot;:&quot;Cust0&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.84.0.call">
    <div class="step-container" id="0.7.0.call.0.84.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModel</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.84.0.call.0.24">02:34:03.674 [print] {
  &quot;photoUrl&quot;: &quot;&quot;,
  &quot;surname&quot;: &quot;surname changed&quot;,
  &quot;name&quot;: &quot;name changed&quot;,
  &quot;id&quot;: &quot;Cust0&quot;,
  &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">###    * match listCustomerId.response.data.CustomerReadModel == {id: &#39;#(first_customer.id)&#39;, name: &#39;#(first_customer.name)&#39;, surname: &#39;#(first_customer.surname)&#39;, photoUrl: &#39;#(first_customer.photoURL)&#39;, userId: &#39;#(adminDatas.username)&#39; }</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Delete user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the last user from the list obtained before &#39;listUsers&#39; to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.90">
      <div class="step-ref passed">90</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def numUsers = listUsers.response.data.UserReadModels.length - 1</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.91">
      <div class="step-ref passed">91</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToDelete = listUsers.response.data.UserReadModels[numUsers]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.92">
      <div class="step-ref passed">92</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print userToDelete</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.92">02:34:03.698 [print] {
  &quot;role&quot;: &quot;User&quot;,
  &quot;id&quot;: &quot;username2@test.com&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.94">
      <div class="step-ref passed">94</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def usernameDelete =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.94">{
   &quot;username&quot;: &quot;#(userToDelete.id)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.100">
      <div class="step-ref passed">100</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def deleteUser = call read(&#39;DeleteUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4617</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.100.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.DeleteUser</div>
      </div>
      <div class="time-cell passed">4579</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser = read(&#39;DeleteUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteUser)&#39;,  variables: &#39;#(usernameDelete)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">570</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.100.0.call.0.17">02:34:03.717 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 151
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;username&quot;:&quot;username2@test.com&quot;},&quot;query&quot;:&quot;mutation DeleteUser($username: String) {\r\n    DeleteUser(input: {username: $username})\r\n}&quot;}

02:34:04.284 response time in milliseconds: 566
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 28
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:05 GMT
1 &lt; x-amzn-RequestId: 7e318967-f771-4920-b5f4-32f79f555341
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZneGPhDoEFfGQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a2fc-60147e9d2e24ab46722dcc32;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 b2ff803e9122fd0c248b789f729b835e.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: A6otizeio870GwxkJKzBTthXrdiPEcBiL-d1weiocGgjj9LPOq5gBQ==
{&quot;data&quot;:{&quot;DeleteUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be delete before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4007</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.100.0.call">
    <div class="step-container" id="0.7.0.call.0.100.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.101">
      <div class="step-ref passed">101</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match deleteUser.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List the user by id to check if it was properly delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.105">
      <div class="step-ref passed">105</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.105">{
	&quot;id&quot;: &quot;#(userToDelete.id)&quot;
}</div>

  

  <div class="preformatted" data-parent="0.7.0.call.0.105">02:34:08.316 over-writing existing variable &#39;id&#39; with new value: {
	&quot;id&quot;: &quot;#(userToDelete.id)&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.111">
      <div class="step-ref passed">111</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listUserDelete = call read(&#39;UserReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">288</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.111.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.UserReadModel</div>
      </div>
      <div class="time-cell passed">250</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel = read(&#39;UserReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModel)&#39;, variables: &#39;#(id)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">248</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.111.0.call.0.14">02:34:08.337 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 159
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;username2@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

02:34:08.583 response time in milliseconds: 246
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 31
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:09 GMT
1 &lt; x-amzn-RequestId: 6456d2e7-3c41-4557-ba44-135d11f94a64
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZoNGYFjoEFz1g=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a301-6a9d14e70b192fba658fb8c4;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f8fe4f851984f096441277ce2c333733.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: 3xpZ26poFB9nHsNGcmwQsd08lSxe3Fnlaxsa1BoF0X8FCYOzahFAJg==
{&quot;data&quot;:{&quot;UserReadModel&quot;:null}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.111.0.call">
    <div class="step-container" id="0.7.0.call.0.111.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.112">
      <div class="step-ref passed">112</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listUserDelete.response.data.UserReadModel != {id: &#39;#(userToDelete.id)&#39;, role: &#39;#(userToDelete.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Delete a customer</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the last customer from the list obtained before &#39;listCustomers&#39; to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.117">
      <div class="step-ref passed">117</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def numCustomers = listCustomers.response.data.CustomerReadModels.length - 1</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.118">
      <div class="step-ref passed">118</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customerToDelete = listCustomers.response.data.CustomerReadModels[numCustomers]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.120">
      <div class="step-ref passed">120</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customerDelete =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.7.0.call.0.120">{
   &quot;id&quot;: &quot;#(customerToDelete.id)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.126">
      <div class="step-ref passed">126</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def deleteCustomer = call read(&#39;DeleteCustomer.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4424</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.126.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.DeleteCustomer</div>
      </div>
      <div class="time-cell passed">4366</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer = read(&#39;DeleteCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteCustomer)&#39;,  variables: &#39;#(customerDelete)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">348</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.126.0.call.0.17">02:34:08.647 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 123
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;Cust2&quot;},&quot;query&quot;:&quot;mutation DeleteCustomer($id: ID) {\r\n    DeleteCustomer(input: {id: $id})\r\n} \r\n&quot;}

02:34:08.994 response time in milliseconds: 346
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:09 GMT
1 &lt; x-amzn-RequestId: 173dd964-8e62-419d-80c5-bad70c12bf81
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZoQHqjjoEFhqg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a301-7501e98840255dc50ef33d7d;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 911151077fc74374130cb3f3f2d671e8.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: xCkMEyeFbaDltsIbFo0fq4Wdxvb2y2ZEyqXylWGl3kHk2fDGTqaDfg==
{&quot;data&quot;:{&quot;DeleteCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be delete before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4010</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer was delete, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.126.0.call">
    <div class="step-container" id="0.7.0.call.0.126.0.call.0.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List the customer to check that it was properly delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.129">
      <div class="step-ref passed">129</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id_Customer = customerDelete</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.129">02:34:13.032 over-writing existing variable &#39;id_Customer&#39; with new value: customerDelete
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.130">
      <div class="step-ref passed">130</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomerDelete = call read(&#39;CustomerReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">292</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.7.0.call">
      <div class="step-container" id="0.7.0.call.0.130.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModel</div>
      </div>
      <div class="time-cell passed">236</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModel = read(&#39;CustomerReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModel)&#39;, variables: &#39;#(id_Customer)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">231</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.130.0.call.0.14">02:34:13.064 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhZGQ1ZWQ5ZC03MjY4LTQ3MDMtOGEyZC0xMGIyNTE4YmQ0MmUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDAwNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzYwNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDAwNCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.AGq25enGBzYso9myWBVzTpk3407ZoNzL9rHImbLgxgeEd0t6zNosIILPy6HhIBiyvArElypxJ6emDfVElNXvngb2gKtvlJw6EetvrgzoORrJzQrYbjJG3ietr4dMoyF_mVzZh6iWlvW0aXwRQQ-9thDQ0IhRr133WUrQhVNVFvWhxl6qHAtO8TG0GD42vJQiKxv7xSGzowQXdgegK0aT_uCzDXcVRr0nNq95APZUlT_g4xVhvvE9Anb6nUrkFIVGtJ43Q82RXfqVsGbccCYBoqnX_uuUEGIjoc2kp6SSG7vQ_hLcvn_06wvUDL4VgerRRN581CGNA9TuPtZcoDCTPw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 211
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;Cust2&quot;},&quot;query&quot;:&quot;query CustomerReadModel($id: ID!) {\r\n    CustomerReadModel(id: $id) {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:34:13.293 response time in milliseconds: 229
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 35
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:13 GMT
1 &lt; x-amzn-RequestId: 836eb8b0-fdf7-4b7b-abfd-74d3a19057ba
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZo8E-TDoEFefA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a305-280812ca6fb5a846787f444a;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 fe55d6b634c29e0dbde85630de5f2787.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: _QUOuJZIfk6lBoR9OCQzGqdEW2ygk8zwxPAkXbZ5MFgvisWs8OQ49Q==
{&quot;data&quot;:{&quot;CustomerReadModel&quot;:null}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.7.0.call.0.130.0.call">
    <div class="step-container" id="0.7.0.call.0.130.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModel</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.7.0.call.0.130.0.call.0.24">02:34:13.297 [print] null 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.7.0.call">
    <div class="step-container" id="0.7.0.call.0.131">
      <div class="step-ref passed">131</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listCustomerDelete.response.data.CusotmerReadModel == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2:9]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2:9]</span>
                <span class="scenario-name">Test if the API met the acceptance criteria for users not admin</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>41207</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2:9]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2:9]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">02:34:13.358 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.10">
      <div class="step-ref passed">10</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def testResults = call read(&#39;TestNotAdmin.feature&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">41206</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.10.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.TestNotAdmin</div>
      </div>
      <div class="time-cell passed">41162</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It is necessary to sign in the API as admin to create a new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Read the admin datas from a *.json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminDatas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) adminDatas</span>
      </div>
    </div>
    <div class="time-cell passed">345</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.12.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.signin</div>
      </div>
      <div class="time-cell passed">341</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.12.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.12.0.call.0.15">02:34:13.370 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">335</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.12.0.call.0.20">02:34:13.372 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

02:34:13.705 response time in milliseconds: 332
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:14 GMT
1 &lt; x-amzn-RequestId: c2b6d6a5-3c4b-4bc2-999a-ebeac4a9a73f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZo-Gu5DoEFYnw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a306-48b47fac3326d5036e9e338b
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e5bf2c9645151e78d8b35d4b366f79f6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: fanaj4Y5a4evwwTG8cKl8KdDOQ9ivN-OOI0dl7bVz4aD-YnU2DY24Q==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiNTA3MDI5ZS05MGRiLTQ2ZjktOGU1ZC05ODA4NDQyMGJmNmMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA1NCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY1NCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA1NCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.i9AnB0hrNUeaCE2WaKK_4q2GUxu53LEapdn3hRE3Oc2IxZ3rSxOJP64YpvUjRzbRhNC9nDpe7_yDtCm0aAmKDnwUv4BtVjKdRA8QP48kkAoJdh4_3j3g6rB3_m5vo7bFvoL8B8ZE5Ze-ghm4ylpzvB6bf9D575BrjBJJP5HWKSvaglxvnma6FzaRImaptrbGNKioE--27xxwDhDv2Qq7dZgtfJXX5IlxGx2vCU4pvB0hLCTgY98axN4ZKb3SBGQQVrlwesWsCkhZJl-0Lg4PFGIjsXIPV3meCDPMuCJ7V-Gzq1oWX_sLj3NHkwHvPRsaA_lvMrIMwwE4D8D7pmbqUQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImI1MDcwMjllLTkwZGItNDZmOS04ZTVkLTk4MDg0NDIwYmY2YyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwNTQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY1NCwiaWF0IjoxNjIxNzMwMDU0LCJqdGkiOiIzZjJhYjFjYS0xNjE0LTRiNDYtOTg4OS02NDZkYmI4MDVjM2QiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Zk8ob44zfaU-FJ8O6ppxBwQrzTtDwmlxxyQkzKzkgYbMBjHgPSRC5B85kwjnbYWCniGrFLHkGArKUqJRJAloY63ikoI5djEvvchvfVf4I0pgxhQCU3WqD1GBH6NejG0GzgWAwVcem95ScIycVp-jE10X-Mrnu6KkORLAdWIeLJvbGwn3SGYfQjzo6XkD1tssTBOnKpFknaIT0xle9_fPWDqqx7fszftzFrUUVzoD5KSJtYWf61JSQ7Y52gEuZvNzr19Cq-Qa5be2bcvwqDwAruBR3_kc9VA5MafPt9dFLSfaXki8xVzsCkw1YhKjM_hqmKVA3SkZB25IbeZzCiP5xA&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.A_iZ28BlUqP_pwZvoidfg3WJBHtAr6WjGsVRycZq8Yr4_OlBQ5dilQCsqWxEnOZzs0QxCxEqXrIYklFXeNyX5ltkPK8va7_XyiMqOZUoxcnSGklaD7nUspuhVSlWtpbQmbADsGVHTP2mkZ-7M9HwHMYol0TFVTsIi5T-BKBtG2gwMEO9S7wwP2o2Yw5riU15nm5t1ibpfwu5iuZWGvllNhYlL45KRSyRna9yPs1UpLxpB7vaWk3u_RvcQW7KnCQzLO7zkbFEBzgIiTUGgcC62W7HY7EJH8nZ9I9Ya1ZAVqsr3O_RdV9H_q04s7xhv-ApVLZQGGLp50IxdIio-0_F7w.fAOkzus9x26yQju-.ek1ccuVExa8OIICEN8CfNQze6TrDlVswzswpjwWJ55YuQCfvrtcowJdwTEumBB-GcWYWzud1w3xjpdHnUgRyxvcEqBf_zeifodnrALmMxDDDM-iYHpHqHbwlfk7n8acf72I74WDw0c4-Y90kcWjZQIa_mnEEGH7yZvaG-hQssF-UiUsItbb0p9dljn3_uwBhBM0QFPQi3DTWtp9rHOgeiN04eHcZsfeMEbfzhk-K0TY5b2i3eIHBBnsjUanMC_etbjCluBxSRA5vEgrHlm78sfu6urKsB169BQ5JC_2LXjobkUUsIdKCaMp3Ho6ThPqL51LXPkWALm-9Bi54lVSXtvIGmcZUmTiiEyZEb8d6iBNIyE8pvObOik5WpPmRusAHm7CpktzA8zNdq0ukOLBATYkV98isah5Brjzq3j2GAuQMuEJ9iIuYpUMrp_EUpHiGL7IuauMp-tgH4anGerxXBzpokwdwS8GEHw-ltYQJToINAmAas6wRITqJAEPPzXO-2IapQc3UFM1s6nryWMeiR0gdNb5BEjda21JC2nAwDctnCrRd0YMIlgICZUqZ49qAt4dugGMcZZu5CaiF5DrY3WI_8i3rhF8r0Z72weynZUGFQT63aAAIlcMfd9DA1lCBAFjxc6pg8xMk6BYa4HmB4tsyhzX2tK5eYjddtLgbNr5z49NB_gvZX2W6bkA42XeOqoCMspOYCpEIW61ISWGxm0I6AfRCsiNurAr07LcO-w0lW7hPNuQn9tezSUuag_byH5RdFzGQTRviWW0GKQLYqs5GDJNa_VZlP7ksebfthk6Kh_jNepbCXi8FNbLKFyIGA0Fu10cXJUObI4XAWhhaXiXvesylqkrdaO7IuWRg5oksF8B_haghaweS_YVO_8B-FgZ64ks9hoYu6fhQDCvzxaxIa3OMiZeB-iwOhqXW0PFOEceNDBAZEunVou-qaBc9j-oWPt5ffWRGWtqBFp8i9gVkQ7z0fkTpHbf8K9QU6LXeHyTYimN_l33T_9AfhemOrA41Dd6l4k_XjmT2yGBLVJaQR3rwLzPPyugeSZD98GNlp49KZ_re_kZEIvnlq35d8d9MovyTn7sHEukACdOilN09D0nltTLx6Rhe6rdFoUIfHp7ivUGxmOEdZSJihpAc2BAeeNeSgQyakcImafwC4SnSxG2aYWx-gvAZfqHkGOozKs0_an2y20QyWIYs2N0A-ZqYmeLqqUZGCIvZvoVly1TWhQiM13RZg3mjAC2QFU4wa3IASv5m-mUiAKRwu5Q7eDdp52HRFG5xkReIp0Ts-00-CmTbErDePiYZViILFpyRH8oX4TS2hfXunD4y1cs.WS094TXQYuRsotTJg64NfQ&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.12.0.call">
    <div class="step-container" id="0.10.0.call.0.12.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.12.0.call.0.25">02:34:13.710 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiNTA3MDI5ZS05MGRiLTQ2ZjktOGU1ZC05ODA4NDQyMGJmNmMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA1NCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY1NCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA1NCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.i9AnB0hrNUeaCE2WaKK_4q2GUxu53LEapdn3hRE3Oc2IxZ3rSxOJP64YpvUjRzbRhNC9nDpe7_yDtCm0aAmKDnwUv4BtVjKdRA8QP48kkAoJdh4_3j3g6rB3_m5vo7bFvoL8B8ZE5Ze-ghm4ylpzvB6bf9D575BrjBJJP5HWKSvaglxvnma6FzaRImaptrbGNKioE--27xxwDhDv2Qq7dZgtfJXX5IlxGx2vCU4pvB0hLCTgY98axN4ZKb3SBGQQVrlwesWsCkhZJl-0Lg4PFGIjsXIPV3meCDPMuCJ7V-Gzq1oWX_sLj3NHkwHvPRsaA_lvMrIMwwE4D8D7pmbqUQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.13">02:34:13.713 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiNTA3MDI5ZS05MGRiLTQ2ZjktOGU1ZC05ODA4NDQyMGJmNmMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA1NCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY1NCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA1NCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.i9AnB0hrNUeaCE2WaKK_4q2GUxu53LEapdn3hRE3Oc2IxZ3rSxOJP64YpvUjRzbRhNC9nDpe7_yDtCm0aAmKDnwUv4BtVjKdRA8QP48kkAoJdh4_3j3g6rB3_m5vo7bFvoL8B8ZE5Ze-ghm4ylpzvB6bf9D575BrjBJJP5HWKSvaglxvnma6FzaRImaptrbGNKioE--27xxwDhDv2Qq7dZgtfJXX5IlxGx2vCU4pvB0hLCTgY98axN4ZKb3SBGQQVrlwesWsCkhZJl-0Lg4PFGIjsXIPV3meCDPMuCJ7V-Gzq1oWX_sLj3NHkwHvPRsaA_lvMrIMwwE4D8D7pmbqUQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImI1MDcwMjllLTkwZGItNDZmOS04ZTVkLTk4MDg0NDIwYmY2YyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwNTQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY1NCwiaWF0IjoxNjIxNzMwMDU0LCJqdGkiOiIzZjJhYjFjYS0xNjE0LTRiNDYtOTg4OS02NDZkYmI4MDVjM2QiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Zk8ob44zfaU-FJ8O6ppxBwQrzTtDwmlxxyQkzKzkgYbMBjHgPSRC5B85kwjnbYWCniGrFLHkGArKUqJRJAloY63ikoI5djEvvchvfVf4I0pgxhQCU3WqD1GBH6NejG0GzgWAwVcem95ScIycVp-jE10X-Mrnu6KkORLAdWIeLJvbGwn3SGYfQjzo6XkD1tssTBOnKpFknaIT0xle9_fPWDqqx7fszftzFrUUVzoD5KSJtYWf61JSQ7Y52gEuZvNzr19Cq-Qa5be2bcvwqDwAruBR3_kc9VA5MafPt9dFLSfaXki8xVzsCkw1YhKjM_hqmKVA3SkZB25IbeZzCiP5xA&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.A_iZ28BlUqP_pwZvoidfg3WJBHtAr6WjGsVRycZq8Yr4_OlBQ5dilQCsqWxEnOZzs0QxCxEqXrIYklFXeNyX5ltkPK8va7_XyiMqOZUoxcnSGklaD7nUspuhVSlWtpbQmbADsGVHTP2mkZ-7M9HwHMYol0TFVTsIi5T-BKBtG2gwMEO9S7wwP2o2Yw5riU15nm5t1ibpfwu5iuZWGvllNhYlL45KRSyRna9yPs1UpLxpB7vaWk3u_RvcQW7KnCQzLO7zkbFEBzgIiTUGgcC62W7HY7EJH8nZ9I9Ya1ZAVqsr3O_RdV9H_q04s7xhv-ApVLZQGGLp50IxdIio-0_F7w.fAOkzus9x26yQju-.ek1ccuVExa8OIICEN8CfNQze6TrDlVswzswpjwWJ55YuQCfvrtcowJdwTEumBB-GcWYWzud1w3xjpdHnUgRyxvcEqBf_zeifodnrALmMxDDDM-iYHpHqHbwlfk7n8acf72I74WDw0c4-Y90kcWjZQIa_mnEEGH7yZvaG-hQssF-UiUsItbb0p9dljn3_uwBhBM0QFPQi3DTWtp9rHOgeiN04eHcZsfeMEbfzhk-K0TY5b2i3eIHBBnsjUanMC_etbjCluBxSRA5vEgrHlm78sfu6urKsB169BQ5JC_2LXjobkUUsIdKCaMp3Ho6ThPqL51LXPkWALm-9Bi54lVSXtvIGmcZUmTiiEyZEb8d6iBNIyE8pvObOik5WpPmRusAHm7CpktzA8zNdq0ukOLBATYkV98isah5Brjzq3j2GAuQMuEJ9iIuYpUMrp_EUpHiGL7IuauMp-tgH4anGerxXBzpokwdwS8GEHw-ltYQJToINAmAas6wRITqJAEPPzXO-2IapQc3UFM1s6nryWMeiR0gdNb5BEjda21JC2nAwDctnCrRd0YMIlgICZUqZ49qAt4dugGMcZZu5CaiF5DrY3WI_8i3rhF8r0Z72weynZUGFQT63aAAIlcMfd9DA1lCBAFjxc6pg8xMk6BYa4HmB4tsyhzX2tK5eYjddtLgbNr5z49NB_gvZX2W6bkA42XeOqoCMspOYCpEIW61ISWGxm0I6AfRCsiNurAr07LcO-w0lW7hPNuQn9tezSUuag_byH5RdFzGQTRviWW0GKQLYqs5GDJNa_VZlP7ksebfthk6Kh_jNepbCXi8FNbLKFyIGA0Fu10cXJUObI4XAWhhaXiXvesylqkrdaO7IuWRg5oksF8B_haghaweS_YVO_8B-FgZ64ks9hoYu6fhQDCvzxaxIa3OMiZeB-iwOhqXW0PFOEceNDBAZEunVou-qaBc9j-oWPt5ffWRGWtqBFp8i9gVkQ7z0fkTpHbf8K9QU6LXeHyTYimN_l33T_9AfhemOrA41Dd6l4k_XjmT2yGBLVJaQR3rwLzPPyugeSZD98GNlp49KZ_re_kZEIvnlq35d8d9MovyTn7sHEukACdOilN09D0nltTLx6Rhe6rdFoUIfHp7ivUGxmOEdZSJihpAc2BAeeNeSgQyakcImafwC4SnSxG2aYWx-gvAZfqHkGOozKs0_an2y20QyWIYs2N0A-ZqYmeLqqUZGCIvZvoVly1TWhQiM13RZg3mjAC2QFU4wa3IASv5m-mUiAKRwu5Q7eDdp52HRFG5xkReIp0Ts-00-CmTbErDePiYZViILFpyRH8oX4TS2hfXunD4y1cs.WS094TXQYuRsotTJg64NfQ&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The token for the admin user is the input parameter for the callable feature where are defined the steps of the tests</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Create a new user different from admin to sign in the API</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The body of the graphql request is a JSON with the generated values</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.19">{ 
	&quot;username&quot;: &quot;userNotAdmin@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot;, 
	&quot;role&quot;: &quot;user&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">5125</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.28.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUser</div>
      </div>
      <div class="time-cell passed">5119</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1109</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.28.0.call.0.17">02:34:13.722 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiNTA3MDI5ZS05MGRiLTQ2ZjktOGU1ZC05ODA4NDQyMGJmNmMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA1NCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY1NCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA1NCwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.i9AnB0hrNUeaCE2WaKK_4q2GUxu53LEapdn3hRE3Oc2IxZ3rSxOJP64YpvUjRzbRhNC9nDpe7_yDtCm0aAmKDnwUv4BtVjKdRA8QP48kkAoJdh4_3j3g6rB3_m5vo7bFvoL8B8ZE5Ze-ghm4ylpzvB6bf9D575BrjBJJP5HWKSvaglxvnma6FzaRImaptrbGNKioE--27xxwDhDv2Qq7dZgtfJXX5IlxGx2vCU4pvB0hLCTgY98axN4ZKb3SBGQQVrlwesWsCkhZJl-0Lg4PFGIjsXIPV3meCDPMuCJ7V-Gzq1oWX_sLj3NHkwHvPRsaA_lvMrIMwwE4D8D7pmbqUQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 257
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;user&quot;,&quot;username&quot;:&quot;userNotAdmin@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:34:14.829 response time in milliseconds: 1106
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:15 GMT
1 &lt; x-amzn-RequestId: 990112df-1ad5-4503-91be-871929a45fb7
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZpDGj_joEFupQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a306-1cd56ab724137ff90a99ac59;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 4ddf42f206fdf10afe67b89baac28c46.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: cvwSNzVYl0rvfYM9bCgdOP4irXM0YsnyPoP7WfUmb-df5cnlKFo5QA==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4008</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.28.0.call">
    <div class="step-container" id="0.10.0.call.0.28.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match saveUser.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Sign now with the new user to get a new authorization token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># To call the feature it is necessary to over write the sign in values with the new user&#39;s</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.33">
      <div class="step-ref passed">33</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserSign =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.33">{
     &quot;clientId&quot;: &quot;#(adminDatas.clientId)&quot;,
     &quot;username&quot;: &quot;#(newUser.username)&quot;,
     &quot;password&quot;: &quot;#(newUser.password)&quot; 
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.41">
      <div class="step-ref passed">41</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) newUserSign</span>
      </div>
    </div>
    <div class="time-cell passed">398</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.41.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.signin</div>
      </div>
      <div class="time-cell passed">393</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.41.0.call.0.4">02:34:18.842 over-writing existing variable &#39;signIn&#39; with new value: call read(&#39;signin.feature&#39;) newUserSign
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.41.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.41.0.call.0.15">02:34:18.846 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;userNotAdmin@test.com&quot;,
  &quot;password&quot;: &quot;Password_1&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">389</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.41.0.call.0.20">02:34:18.847 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 100
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Password_1&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;userNotAdmin@test.com&quot;}

02:34:19.233 response time in milliseconds: 385
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4003
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:19 GMT
1 &lt; x-amzn-RequestId: c8354040-cdfc-45af-bac8-c3305035bd86
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZp2GAQDoEFX6Q=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a30b-3f086aa850c7fa295d3d6d0e
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c5c852ebeabe49b08625d425153869fe.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: jlnJm75DrtyjTWJ6b_pwjjfrUW0Pr6VcPFTs4SpvqeiQ4ZyK_iwNmQ==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwNTksImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY1OSwiaWF0IjoxNjIxNzMwMDU5LCJqdGkiOiJiNzM4Njk5Ny1kNDljLTRjN2MtYTBhZi1hYjE5ZmEzNzNmYTQiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIn0.DhXaFF1baH81540FzKHsBs2XgdMmnLT3dq_3pczOvuPWWE7e5YWTQORHPZDKVXkNbu7u6XJm9jGIgihiy1-V6DlBsNdjI-wyPrAZa8ru4o66fz-wdsHlN4Gd0QcGnwHbt39TzqaClI1Zz1PV4PxIp-BaeWUThk-Y4BKsYeh26s-Zau9JgdGotpqRFUeEslcrMocdlSTNrneHUFPJmsfgaB4BkYeE0qrJOB_7QT5yRLQRNGVK_q9XCMYgxO_FhMkINA3FOPlDlJ5fSpv0wa3asmtA5de7b0EifOzeFmBC0WG4ctudDqZLSR7LN5rzPxUJGUHE7usUMjZviyx8VCCxtQ&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.DcsStkK1EB_XSi5mrsdrwJhDBzdvxZii64CtggTtmJTSnpuWBQfzfNTe2NshDC4eDaDVx8EWJuQ7lK2m6UlmGtd5ObgzWrRU4Qyh9NStfB_LGIFl7_y7VF0teoBYa-RugWywmGeBneMRC1t1Py7WSj6T3qixCPa-hCv5_dMLAsm5Gw6LLjjP15hsYW_ZBtfrQhDhp9uLaXauXDm6AIuIDBUBJvkN0x0C9l2PVkaOUvPzGa8T8mCHt-qiYxXhiwnyW7iMo41GNWQWHp7YjSiRDGwBYTvViuOJzvYxsPcM44BSQ6AOa_FDBhQ-1EBbaJgbTLjn1OXy9l6c74YIlcpXoA.Z6Jers2rLbq5-CJW.w0Vbvu86n269s-84_UpaITPXPWpsEiKXfqFAX1dpoJoQu9Nmu0ppWnaCwFfWsVPq5f-9XSvlHngyCklWFN90UZMbcnl8apcHmaSFZCxRaT3yQDQxcQR-jGhaX5T7Kpl8fXmCRUJ57nASEwJhMEwW_mUnc6iHocZzb0fx3nCiLPDeB9QQMeKjf4U4Df8NywlrzCCSzv_GXWNUq17uuqLtqN5SGMLyZt-gYYq091OEmKcp0hvNa-sdNg2UPkP-faf18OeFvZsZMmwLduyTNOWr-E_2pNkQpdhO1fWRCKAhssmOFgl2AYSoXhZgf7nUN3hN5oxAY3_IDvX0pJeHWfU6PoXHeDyeA3c3K4XhFTCumUFVS-_lEV9X-2oqyEx0VDnVJXtzb5upPduQ2UIuzpWlmvLBDtmKycvPiV1Rv7MV-nH-pMFL9ePeoBNPTnOgBA1UnuXGIrySQctH8yxE5YD8FDHLdOZwmifdc4DrX5sH1yIsAMw_eY6z3hdzDqFiqJMnVgbxiyyCPRfcz92YRxRgKM9MxoDQeU3ARewavVCXaFSHGHLLOOsIiXEW_33gyx138gMSWpl8f1NNI2axQ0k43FjZy6PNbjwG4E1D-mAmrkn8D050V047venD_GTtsPyf-FtFwJu6hx5fD7Oq1_xR6JBcotBvxj5vm4NSlW0a7UZHV9JhoD5wv_jp-Pv_d8JDDkwhk2GLt90iXsGTQJZ8TUTemHRd0iGUrm290Hajxbpj05EiCjS0EUgXgW5FmdZJu5PpL4EcEspm17ReYpINDGtQdIUE-VIWV_p96e5lLEbmy1b9LYy9__cqpEAseLOhaXIIexDyRNmpNgVk6-mzulX2N7GQAyJ7XCVvBWFko9L62Vk2YfP441I4ZwhO-BhqIG1cx6PnGBD3SbKI8vQTHhCkkJPurs3N5mnSN8v8aYMiLzSFeV4izDFD3Jz0kmXdYjJ13CMAwwrEeVwdu9BY9zoSVwQME9jpwWcTQ4gWBgRBJOyuEkwUrGRQqIx-TBiTR5qdezpK4FsMQJKTBY6Fvw9ITTL3BfZjCpSAnl0uGOMUIg5o78Hv_2dfLqpH4XQ3oBtkwkpscMykJp_B7fUNu5Cyl-N8OomQqbj2w8Jx8KFHTPkdBlTAoLW6qk1IIfOdzjxMPQNP8fwPOVsLYeivWC6ifq0tn__YfXbNZapiawoDB3wBIemJVQpSZ0QgucGWKb_IRliWksbbYLnmSMIpCjcS-81Uv_x2xKP7uW5vwfeGFjt0b7VUP_3bqQL0HJdaqe3aTRiEkbLH_3nCgqT3dvHKiW9WQHYU_m6HIRvofyWc4KMsy4l6mqsuurCRwo8.SzD5Osq1qKEa1Tv5Cy_43w&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.41.0.call">
    <div class="step-container" id="0.10.0.call.0.41.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.41.0.call.0.25">02:34:19.238 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.42">
      <div class="step-ref passed">42</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.42">02:34:19.242 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwNTksImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY1OSwiaWF0IjoxNjIxNzMwMDU5LCJqdGkiOiJiNzM4Njk5Ny1kNDljLTRjN2MtYTBhZi1hYjE5ZmEzNzNmYTQiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIn0.DhXaFF1baH81540FzKHsBs2XgdMmnLT3dq_3pczOvuPWWE7e5YWTQORHPZDKVXkNbu7u6XJm9jGIgihiy1-V6DlBsNdjI-wyPrAZa8ru4o66fz-wdsHlN4Gd0QcGnwHbt39TzqaClI1Zz1PV4PxIp-BaeWUThk-Y4BKsYeh26s-Zau9JgdGotpqRFUeEslcrMocdlSTNrneHUFPJmsfgaB4BkYeE0qrJOB_7QT5yRLQRNGVK_q9XCMYgxO_FhMkINA3FOPlDlJ5fSpv0wa3asmtA5de7b0EifOzeFmBC0WG4ctudDqZLSR7LN5rzPxUJGUHE7usUMjZviyx8VCCxtQ&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.DcsStkK1EB_XSi5mrsdrwJhDBzdvxZii64CtggTtmJTSnpuWBQfzfNTe2NshDC4eDaDVx8EWJuQ7lK2m6UlmGtd5ObgzWrRU4Qyh9NStfB_LGIFl7_y7VF0teoBYa-RugWywmGeBneMRC1t1Py7WSj6T3qixCPa-hCv5_dMLAsm5Gw6LLjjP15hsYW_ZBtfrQhDhp9uLaXauXDm6AIuIDBUBJvkN0x0C9l2PVkaOUvPzGa8T8mCHt-qiYxXhiwnyW7iMo41GNWQWHp7YjSiRDGwBYTvViuOJzvYxsPcM44BSQ6AOa_FDBhQ-1EBbaJgbTLjn1OXy9l6c74YIlcpXoA.Z6Jers2rLbq5-CJW.w0Vbvu86n269s-84_UpaITPXPWpsEiKXfqFAX1dpoJoQu9Nmu0ppWnaCwFfWsVPq5f-9XSvlHngyCklWFN90UZMbcnl8apcHmaSFZCxRaT3yQDQxcQR-jGhaX5T7Kpl8fXmCRUJ57nASEwJhMEwW_mUnc6iHocZzb0fx3nCiLPDeB9QQMeKjf4U4Df8NywlrzCCSzv_GXWNUq17uuqLtqN5SGMLyZt-gYYq091OEmKcp0hvNa-sdNg2UPkP-faf18OeFvZsZMmwLduyTNOWr-E_2pNkQpdhO1fWRCKAhssmOFgl2AYSoXhZgf7nUN3hN5oxAY3_IDvX0pJeHWfU6PoXHeDyeA3c3K4XhFTCumUFVS-_lEV9X-2oqyEx0VDnVJXtzb5upPduQ2UIuzpWlmvLBDtmKycvPiV1Rv7MV-nH-pMFL9ePeoBNPTnOgBA1UnuXGIrySQctH8yxE5YD8FDHLdOZwmifdc4DrX5sH1yIsAMw_eY6z3hdzDqFiqJMnVgbxiyyCPRfcz92YRxRgKM9MxoDQeU3ARewavVCXaFSHGHLLOOsIiXEW_33gyx138gMSWpl8f1NNI2axQ0k43FjZy6PNbjwG4E1D-mAmrkn8D050V047venD_GTtsPyf-FtFwJu6hx5fD7Oq1_xR6JBcotBvxj5vm4NSlW0a7UZHV9JhoD5wv_jp-Pv_d8JDDkwhk2GLt90iXsGTQJZ8TUTemHRd0iGUrm290Hajxbpj05EiCjS0EUgXgW5FmdZJu5PpL4EcEspm17ReYpINDGtQdIUE-VIWV_p96e5lLEbmy1b9LYy9__cqpEAseLOhaXIIexDyRNmpNgVk6-mzulX2N7GQAyJ7XCVvBWFko9L62Vk2YfP441I4ZwhO-BhqIG1cx6PnGBD3SbKI8vQTHhCkkJPurs3N5mnSN8v8aYMiLzSFeV4izDFD3Jz0kmXdYjJ13CMAwwrEeVwdu9BY9zoSVwQME9jpwWcTQ4gWBgRBJOyuEkwUrGRQqIx-TBiTR5qdezpK4FsMQJKTBY6Fvw9ITTL3BfZjCpSAnl0uGOMUIg5o78Hv_2dfLqpH4XQ3oBtkwkpscMykJp_B7fUNu5Cyl-N8OomQqbj2w8Jx8KFHTPkdBlTAoLW6qk1IIfOdzjxMPQNP8fwPOVsLYeivWC6ifq0tn__YfXbNZapiawoDB3wBIemJVQpSZ0QgucGWKb_IRliWksbbYLnmSMIpCjcS-81Uv_x2xKP7uW5vwfeGFjt0b7VUP_3bqQL0HJdaqe3aTRiEkbLH_3nCgqT3dvHKiW9WQHYU_m6HIRvofyWc4KMsy4l6mqsuurCRwo8.SzD5Osq1qKEa1Tv5Cy_43w&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.43">
      <div class="step-ref passed">43</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.43">02:34:19.243 over-writing existing variable &#39;userToken&#39; with new value: signIn.response
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The token for the admin user is the input parameter for the callable feature where are defined the steps of the tests</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.46">
      <div class="step-ref passed">46</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.46">02:34:19.245 over-writing existing variable &#39;userToken&#39; with new value: signIn.response
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Create new customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It is necessary to define the userId as the username of the user who create the customers to be read as id in the feature</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.51">
      <div class="step-ref passed">51</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id = adminDatas.username</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.52">
      <div class="step-ref passed">52</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveCustomers = call read(&#39;SaveCustomersNotAdmin.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">12806</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.52">02:34:32.051 dynamic expression complete at index: 3, not map-like: [type: NULL, value: null]
</div>   

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.52.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveCustomersNotAdmin</div>
      </div>
      <div class="time-cell passed">12788</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers with a different name than the customers created by the admin</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;CustNotAdmin&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.1.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">185</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.1.31">02:34:19.260 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 290
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;CustNotAdmin0&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:34:19.443 response time in milliseconds: 182
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:20 GMT
1 &lt; x-amzn-RequestId: 1474e1e8-34db-49e8-b230-0812ff6f715f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZp6H6zjoEFcHw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a30c-64f8c1950e1b39064a5ec67b;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 1c301b860f1012db2b746c01d3e8617f.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: IsbH_sW8e-rYcnzvf1CL7CrDRulHpk1UlkbPQWo2MWVFMw2P4nOyMg==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4015</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.1.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers with a different name than the customers created by the admin</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;CustNotAdmin&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.2.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">277</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.2.31">02:34:23.465 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 290
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;CustNotAdmin1&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:34:23.740 response time in milliseconds: 275
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Sun, 23 May 2021 00:34:24 GMT
2 &lt; x-amzn-RequestId: 4e7d8f9a-17e8-4f9e-a2b2-9d6e224ccff1
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fwZqkF5njoEFt5w=
2 &lt; X-Amzn-Trace-Id: Root=1-60a9a310-4da6222c2d5d66ed32b0dbfe;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 09e594de40cb3eb83a4bc581fa48d9e2.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD51-C2
2 &lt; X-Amz-Cf-Id: gbPHMQQD2_wgwfDHQom966nGenHcJnG5nWb_50XIOGeE84Ec73H9uQ==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4011</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.2.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to generate Customers with a different name than the customers created by the admin</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def generatorCustomer = function(i){ if (i == 3) return null; return { idCust: &#39;CustNotAdmin&#39; + i, nameCust: &#39;Cutomer Name&#39;, surnameCust: &#39;Customer Surname&#39;, photoCust: &#39;photo.jpg&#39; } }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.3.17">{ 
	&quot;id&quot;: &quot;#(idCust)&quot;, 
	&quot;name&quot;: &quot;#(nameCust)&quot;, 
	&quot;surname&quot;: &quot;#(surnameCust)&quot;,
	&quot;photo&quot;: &quot;#(photoCust)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.30">
      <div class="step-ref passed">30</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">282</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.52.0.call.3.31">02:34:27.759 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 290
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;CustNotAdmin2&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:34:28.039 response time in milliseconds: 280
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 30
3 &lt; Connection: keep-alive
3 &lt; Date: Sun, 23 May 2021 00:34:28 GMT
3 &lt; x-amzn-RequestId: b01bf416-4489-483f-83ff-7c7589a11938
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: fwZrPEz0joEFVLg=
3 &lt; X-Amzn-Trace-Id: Root=1-60a9a314-51c0355658591a540ab0d9fc;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 09a2315feedfb8ccf5e3835ff7abd08a.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD51-C2
3 &lt; X-Amz-Cf-Id: 4TqRkUYT6F2V_Q_SGlrJhJsd6FJ2f8-vDDVdpP_Ox13RJ2yBY1k-cw==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.32">
      <div class="step-ref passed">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4010</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.52.0.call">
    <div class="step-container" id="0.10.0.call.0.52.0.call.3.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List all customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.56">
      <div class="step-ref passed">56</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomers = call read(&#39;CustomerReadModels.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">294</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.56.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModels</div>
      </div>
      <div class="time-cell passed">286</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModels = read(&#39;CustomerReadModels.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">281</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.56.0.call.0.14">02:34:32.063 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:34:32.341 response time in milliseconds: 277
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 780
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:33 GMT
1 &lt; x-amzn-RequestId: d8899c05-279b-4f43-9f58-5fc8f71e1496
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZr6HEODoEFm1Q=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a318-37eb116d0c2ca2470c85a72b;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 7fdd77e84c03b9aa5af58d1d137b5cd0.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: YjFVeoAE5HN95RoEdFtECyJwqSUxbeIUMbtmDmzskQu5DzJfgk0npQ==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;CustNotAdmin2&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;id&quot;:&quot;Cust0&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;#(first_customer.surname)&quot;,&quot;name&quot;:&quot;#(first_customer.name)&quot;,&quot;id&quot;:&quot;#(first_customer.id)&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;Cust1&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;CustNotAdmin1&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;CustNotAdmin0&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.56.0.call.0.24">02:34:32.344 [print] [
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;CustNotAdmin2&quot;,
    &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;surname changed&quot;,
    &quot;name&quot;: &quot;name changed&quot;,
    &quot;id&quot;: &quot;Cust0&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;#(first_customer.surname)&quot;,
    &quot;name&quot;: &quot;#(first_customer.name)&quot;,
    &quot;id&quot;: &quot;#(first_customer.id)&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;Cust1&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;CustNotAdmin1&quot;,
    &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;CustNotAdmin0&quot;,
    &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
  }
]
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.56.0.call">
    <div class="step-container" id="0.10.0.call.0.56.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Update customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Take the first customer of the above response to modify</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.61">
      <div class="step-ref passed">61</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def first_customer = listCustomers.response.data.CustomerReadModels[0]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.63">
      <div class="step-ref passed">63</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.name = &quot;name changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.64">
      <div class="step-ref passed">64</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.surname = &quot;surname changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.65">
      <div class="step-ref passed">65</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set first_customer.photoURL = &quot;newPhoto.jpg&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.67">
      <div class="step-ref passed">67</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def updateCustomer = call read(&#39;SaveCustomer.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4213</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.67.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveCustomer</div>
      </div>
      <div class="time-cell passed">4201</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The body of the graphql request is a JSON with the generated values</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.67.0.call.0.14">{ 
	&quot;id&quot;: &quot;#(first_customer.id)&quot;, 
	&quot;name&quot;: &quot;#(first_customer.name)&quot;, 
	&quot;surname&quot;: &quot;#(first_customer.surname)&quot;,
	&quot;photo&quot;: &quot;#(first_customer.photo)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">185</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.67.0.call.0.28">02:34:32.362 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 282
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;photo&quot;:null,&quot;id&quot;:&quot;CustNotAdmin2&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:34:32.545 response time in milliseconds: 182
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:33 GMT
1 &lt; x-amzn-RequestId: 25f656ad-a390-42ad-9936-5de38e53a5dd
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZr9HCRDoEFupQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a319-0d3ba9136a630ba05d8e333a;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 3a040ac81c3e03a31883d4bf85a17866.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: hhtlK8FCkaTKCQqucReTw53eZ4Ifr5rhtMdRUsyMVs0AiJSmUeJHaw==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.29">
      <div class="step-ref passed">29</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4014</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.67.0.call">
    <div class="step-container" id="0.10.0.call.0.67.0.call.0.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.68">
      <div class="step-ref passed">68</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match updateCustomer.response.erros == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List a customer by id</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check if the customer was updated properly and it has the reference of the last user who modified</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.73">
      <div class="step-ref passed">73</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id_Customer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.73">{
   &quot;id&quot;: &quot;#(first_customer.id)&quot; 
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.79">
      <div class="step-ref passed">79</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomerId = call read(&#39;CustomerReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">297</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.79.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModel</div>
      </div>
      <div class="time-cell passed">283</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModel = read(&#39;CustomerReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModel)&#39;, variables: &#39;#(id_Customer)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">279</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.79.0.call.0.14">02:34:36.577 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 219
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;CustNotAdmin2&quot;},&quot;query&quot;:&quot;query CustomerReadModel($id: ID!) {\r\n    CustomerReadModel(id: $id) {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:34:36.853 response time in milliseconds: 276
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 150
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:37 GMT
1 &lt; x-amzn-RequestId: 517107d9-bc2c-4d54-8153-a9cb5d2e0ad5
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZsnEPVDoEFqVg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a31d-0459ea856dc976b706700ee1;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 158bf65e81ba82d619c73dde6c7796a9.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: JpbShP1IepKYpCi0aEfZdi6jw65LBjvBRZRH8Rzyd9EFRq60yee1Jw==
{&quot;data&quot;:{&quot;CustomerReadModel&quot;:{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;id&quot;:&quot;CustNotAdmin2&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;}}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.79.0.call">
    <div class="step-container" id="0.10.0.call.0.79.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModel</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.79.0.call.0.24">02:34:36.856 [print] {
  &quot;photoUrl&quot;: &quot;&quot;,
  &quot;surname&quot;: &quot;surname changed&quot;,
  &quot;name&quot;: &quot;name changed&quot;,
  &quot;id&quot;: &quot;CustNotAdmin2&quot;,
  &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
}
 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#    * match listCustomerId.response.data.CustomerReadModel == {id: &#39;#(first_customer.id)&#39;, name: &#39;#(first_customer.name)&#39;, surname: &#39;#(first_customer.surname)&#39;, photoUrl: &#39;#(first_customer.photoURL)&#39;, userId: &#39;#(newUser.username)&#39; }</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.81">
      <div class="step-ref passed">81</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listCustomerId.response.data.CustomerReadModel == {id: &#39;#(first_customer.id)&#39;, name: &#39;#(first_customer.name)&#39;, surname: &#39;#(first_customer.surname)&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#(newUser.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Delete a customer</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the last customer from the list obtained before &#39;listCustomers&#39; to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.86">
      <div class="step-ref passed">86</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def numCustomers = listCustomers.response.data.CustomerReadModels.length - 1</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.87">
      <div class="step-ref passed">87</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customerToDelete = listCustomers.response.data.CustomerReadModels[numCustomers]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.89">
      <div class="step-ref passed">89</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customerDelete =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.89">{
   &quot;id&quot;: &quot;#(customerToDelete.id)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.95">
      <div class="step-ref passed">95</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def deleteCustomer = call read(&#39;DeleteCustomer.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4299</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.95.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.DeleteCustomer</div>
      </div>
      <div class="time-cell passed">4287</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer = read(&#39;DeleteCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteCustomer)&#39;,  variables: &#39;#(customerDelete)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">281</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.95.0.call.0.17">02:34:36.873 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 131
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;CustNotAdmin0&quot;},&quot;query&quot;:&quot;mutation DeleteCustomer($id: ID) {\r\n    DeleteCustomer(input: {id: $id})\r\n} \r\n&quot;}

02:34:37.154 response time in milliseconds: 280
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:37 GMT
1 &lt; x-amzn-RequestId: 5a2b79a6-5b83-4e29-b1a9-bc7629ae3b8f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZsqF0njoEFyaw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a31d-2df01237356004627f9414b5;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f6fe5265462508690ff6e0d3e33b6068.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: JhlqCUoxJ-XEyh3n86kCiLUMTtFpH1uNdEqDiE5YaLWRognOV-GDqQ==
{&quot;data&quot;:{&quot;DeleteCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be delete before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer was delete, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.95.0.call">
    <div class="step-container" id="0.10.0.call.0.95.0.call.0.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List the customer to check that it was properly delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.98">
      <div class="step-ref passed">98</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id_Customer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.98">{
   &quot;id&quot;: &quot;#(customerToDelete.id)&quot; 
}</div>

  

  <div class="preformatted" data-parent="0.10.0.call.0.98">02:34:41.163 over-writing existing variable &#39;id_Customer&#39; with new value: {
   &quot;id&quot;: &quot;#(customerToDelete.id)&quot; 
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.104">
      <div class="step-ref passed">104</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomerDelete = call read(&#39;CustomerReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">298</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.104.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModel</div>
      </div>
      <div class="time-cell passed">280</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModel = read(&#39;CustomerReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModel)&#39;, variables: &#39;#(id_Customer)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">277</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.104.0.call.0.14">02:34:41.178 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 219
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;CustNotAdmin0&quot;},&quot;query&quot;:&quot;query CustomerReadModel($id: ID!) {\r\n    CustomerReadModel(id: $id) {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:34:41.454 response time in milliseconds: 276
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 35
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:42 GMT
1 &lt; x-amzn-RequestId: e09c1583-d831-4a47-a78c-a5f1b0997fcb
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZtVF1bjoEFu2A=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a322-524392ee0fac542d32659f59;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 aece96245a5f852367d1447c4953c7e1.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: TiLBSviJQ3Aux4zSH2UM-t4iRPTl6Isa7bBBCembF5vxV18yg7ZlNA==
{&quot;data&quot;:{&quot;CustomerReadModel&quot;:null}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.104.0.call">
    <div class="step-container" id="0.10.0.call.0.104.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModel</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.104.0.call.0.24">02:34:41.457 [print] null 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.105">
      <div class="step-ref passed">105</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listCustomerDelete.response.data.CusotmerReadModel == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Test the features not allowed to a not admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Read user models</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># List all the users of the API, it should fail because it is not an admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.113">
      <div class="step-ref passed">113</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listUsers = call read(&#39;UserReadModels.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">108</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.113.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.UserReadModels</div>
      </div>
      <div class="time-cell passed">92</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels = read(&#39;UserReadModels.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">90</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.113.0.call.0.14">02:34:41.475 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 102
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

02:34:41.564 response time in milliseconds: 88
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 162
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:42 GMT
1 &lt; x-amzn-RequestId: f78778d3-2e1e-4fc8-86e5-863b8d56a62e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZtXHvWjoEF3SQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a322-54540bcf2cdea30647fb81d4;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 32713ef80c317f26bc1691bc0aad3819.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: J9UB5Hv9gdV62JjG0FB8nvuS3qUDCS7XvQ03uvAVZWLgQ6J_A4_j9g==
{&quot;data&quot;:{&quot;UserReadModels&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;UserReadModels&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Access denied for read model UserReadModel&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.113.0.call">
    <div class="step-container" id="0.10.0.call.0.113.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.114">
      <div class="step-ref passed">114</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listUsers.response.errors contains deep { message: &#39;Access denied for read model UserReadModel&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Save new users</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.118">
      <div class="step-ref passed">118</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.118">{ 
	&quot;username&quot;: &quot;user@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot;, 
	&quot;role&quot;: &quot;user&quot;
}</div>

  

  <div class="preformatted" data-parent="0.10.0.call.0.118">02:34:41.572 over-writing existing variable &#39;newUser&#39; with new value: { 
	&quot;username&quot;: &quot;user@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot;, 
	&quot;role&quot;: &quot;user&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.126">
      <div class="step-ref passed">126</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4212</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.126.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUser</div>
      </div>
      <div class="time-cell passed">4185</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.126.0.call.0.4">02:34:41.573 over-writing existing variable &#39;saveUser&#39; with new value: call read(&#39;SaveUser.feature&#39;) userToken
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">171</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.126.0.call.0.17">02:34:41.592 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 249
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;user&quot;,&quot;username&quot;:&quot;user@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:34:41.762 response time in milliseconds: 168
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 144
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:42 GMT
1 &lt; x-amzn-RequestId: 84f20f70-879e-4adf-ae54-08daee567c36
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZtZHgaDoEFjZQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a322-3450043740fe98fa13cb780e;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 960b47175d6cfc9ed048624de2747035.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: 1QZOA7nYr5uYdfYE8l-B34sU8Yv0C3JM2jcsU6lu-FUGt43c-Jk8xA==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Access denied for command &#39;SaveUser&#39;&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4011</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.126.0.call">
    <div class="step-container" id="0.10.0.call.0.126.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.127">
      <div class="step-ref passed">127</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.127">{
   &quot;message&quot;: &quot;Access denied for command &#39;SaveUser&#39;&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.133">
      <div class="step-ref passed">133</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match saveUser.response.errors contains deep expected</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Delete user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It isn&#39;t necessary that the user exist because it should response with a message of &#39;Access denied&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.137">
      <div class="step-ref passed">137</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def usernameDelete =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.137">{
   &quot;username&quot;: &quot;user@test.com&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.143">
      <div class="step-ref passed">143</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def deleteUser = call read(&#39;DeleteUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4217</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.143.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.DeleteUser</div>
      </div>
      <div class="time-cell passed">4188</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser = read(&#39;DeleteUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteUser)&#39;,  variables: &#39;#(usernameDelete)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">182</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.143.0.call.0.17">02:34:45.798 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 146
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;username&quot;:&quot;user@test.com&quot;},&quot;query&quot;:&quot;mutation DeleteUser($username: String) {\r\n    DeleteUser(input: {username: $username})\r\n}&quot;}

02:34:45.978 response time in milliseconds: 180
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 150
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:46 GMT
1 &lt; x-amzn-RequestId: afd81b25-09f6-40cb-b45f-a6154882ba59
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZuDHUKDoEF_NA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a326-61428b5e18f5b1cd308a63f1;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 fe55d6b634c29e0dbde85630de5f2787.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: XnEW0e2zC3HTM1tkfsoZr8WyGjWV7OVbLSqANhwBEbvz_RErjw7AjA==
{&quot;data&quot;:{&quot;DeleteUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;DeleteUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Access denied for command &#39;DeleteUser&#39;&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be delete before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.143.0.call">
    <div class="step-container" id="0.10.0.call.0.143.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.144">
      <div class="step-ref passed">144</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.144">{
   &quot;message&quot;: &quot;Access denied for command &#39;DeleteUser&#39;&quot;
}</div>

  

  <div class="preformatted" data-parent="0.10.0.call.0.144">02:34:50.003 over-writing existing variable &#39;expected&#39; with new value: {
   &quot;message&quot;: &quot;Access denied for command &#39;DeleteUser&#39;&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.150">
      <div class="step-ref passed">150</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match deleteUser.response.errors contains deep expected</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List a user by id</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It isn&#39;t necessary that the user exist because it should response with a message of &#39;Access denied&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.154">
      <div class="step-ref passed">154</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.154">{
	&quot;id&quot;: &quot;user@test.com&quot;
}</div>

  

  <div class="preformatted" data-parent="0.10.0.call.0.154">02:34:50.003 over-writing existing variable &#39;id&#39; with new value: {
	&quot;id&quot;: &quot;user@test.com&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.160">
      <div class="step-ref passed">160</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listUserDelete = call read(&#39;UserReadModel.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">312</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.160.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.UserReadModel</div>
      </div>
      <div class="time-cell passed">273</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel = read(&#39;UserReadModel.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModel)&#39;, variables: &#39;#(id)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">271</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.160.0.call.0.14">02:34:50.022 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 154
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

02:34:50.292 response time in milliseconds: 269
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 160
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:50 GMT
1 &lt; x-amzn-RequestId: 42729872-4886-47e8-92c8-0965dff8d563
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZuuG0KDoEF-vA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a32a-2171173d2013df76747ada7a;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 3a040ac81c3e03a31883d4bf85a17866.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: GOxwVyn7GebaSAxUoFlYFSEwJToE7grtpC6Czia4LQn7GApCTKuuYA==
{&quot;data&quot;:{&quot;UserReadModel&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;UserReadModel&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Access denied for read model UserReadModel&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.160.0.call">
    <div class="step-container" id="0.10.0.call.0.160.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.161">
      <div class="step-ref passed">161</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listUserDelete.response.errors contains deep { message: &#39;Access denied for read model UserReadModel&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Change the role of one user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It isn&#39;t necessary that the user exist because it should response with a message of &#39;Access denied&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.165">
      <div class="step-ref passed">165</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userChangeRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.165">{
  &quot;username&quot;: &quot;user@test.com&quot;,
  &quot;role&quot;: &quot;role&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.172">
      <div class="step-ref passed">172</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def change_role = call read(&#39;ChangeUserRole.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4212</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.10.0.call">
      <div class="step-container" id="0.10.0.call.0.172.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.ChangeUserRole</div>
      </div>
      <div class="time-cell passed">4165</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole = read(&#39;ChangeUserRole.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryChangeUserRole)&#39;,  variables: &#39;#(userChangeRole)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">155</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.10.0.call.0.172.0.call.0.18">02:34:50.339 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJkYmM4Zjg5ZC0xMzRjLTRmOWEtOTRjNS1hZGUyODI1ZWE1M2UiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjFjMTRkMDZkLWM0ZWYtNDhiYi04YzZlLTU4MDM4YzQ3MDE1ZSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxNzMwMDU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiZGJjOGY4OWQtMTM0Yy00ZjlhLTk0YzUtYWRlMjgyNWVhNTNlIiwiZXhwIjoxNjIxNzMzNjU5LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjE3MzAwNTksImVtYWlsIjoidXNlck5vdEFkbWluQHRlc3QuY29tIn0.aMycgOTOzjMieGTGu3beIolDcMimshvBKJDXLD1CbSDQjVnBLFpOb9EtqKVz7WZ8jwIFCb6UcO2i4P4PCKS0C-gXwKyGZDi42cHO6KJ9SnSTi6fJCOwPhk15ItW1wp5IFQ8G908kCcqKhR6BeKoZCisSkgFKT0Y5BzWKV-B1X472Rsu6jnl1LeqDVQKGXY-fAifG6BWOEO6PzsPXhUWeRbW5-Um87bzxEkDMLx1gwCvcIydpQ4oteTmaOt0-sWA_XjNaoY_P6V-UndAb0Pg6E0PUEa7MCMYJG1NLUFYyDrVUPXySNyCteC7TClyTXKeJvbkAg2TrDBxxdvF-DSqhRw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 194
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;role&quot;:&quot;role&quot;,&quot;username&quot;:&quot;user@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

02:34:50.492 response time in milliseconds: 152
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 162
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:51 GMT
1 &lt; x-amzn-RequestId: 493e94e2-6a8f-492e-8f71-95fa608921dc
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZuxEcwDoEFSZw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a32b-7b8358342c44521051d5b29e;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f381783b1a4d3b0a57fef757bbb97dc2.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: gjL8fQLl5sefLTFm1j34QVSV10tnLMNDRuidqn_3SYrA6kCdn_7tYg==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;ChangeUserRole&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:3}],&quot;message&quot;:&quot;Access denied for command &#39;ChangeUserRole&#39;&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.10.0.call.0.172.0.call">
    <div class="step-container" id="0.10.0.call.0.172.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4008</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.173">
      <div class="step-ref passed">173</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.10.0.call.0.173">{
   &quot;message&quot;: &quot;Access denied for command &#39;ChangeUserRole&#39;&quot;
}</div>

  

  <div class="preformatted" data-parent="0.10.0.call.0.173">02:34:54.528 over-writing existing variable &#39;expected&#39; with new value: {
   &quot;message&quot;: &quot;Access denied for command &#39;ChangeUserRole&#39;&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.10.0.call">
    <div class="step-container" id="0.10.0.call.0.179">
      <div class="step-ref passed">179</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match change_role.response.errors contains deep expected</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[3:12]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[3:12]</span>
                <span class="scenario-name">Test if the API met the acceptance criteria in wrong cases</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>23562</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[3:12]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[3:12]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">02:34:54.568 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.13">
      <div class="step-ref failed">13</div>
      
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>def testResults = call read(&#39;TestFailures.feature&#39;)</span>
      </div>
    </div>
    <div class="time-cell failed">23562</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13">02:35:18.131 classpath:test/graphql/Test.feature:13
* def testResults = call read(&#39;TestFailures.feature&#39;)
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:test/graphql/TestFailures.feature:116
classpath:test/graphql/Test.feature:13
</div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.13.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.TestFailures</div>
      </div>
      <div class="time-cell passed">23555</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It is necessary to sign in the API as admin to create a new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Read the admin datas from a *.json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.9">
      <div class="step-ref passed">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminDatas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.12">
      <div class="step-ref passed">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) adminDatas</span>
      </div>
    </div>
    <div class="time-cell passed">431</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.12.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.signin</div>
      </div>
      <div class="time-cell passed">427</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.12.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.12.0.call.0.15">02:34:54.577 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">422</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.12.0.call.0.20">02:34:54.579 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

02:34:55.000 response time in milliseconds: 419
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:55 GMT
1 &lt; x-amzn-RequestId: 916191be-f2ce-43f0-a7bb-07104ca3ab1b
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZvbEaIDoEFvQg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a32f-246d9b2905cfe1794dfd94ce
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 f381783b1a4d3b0a57fef757bbb97dc2.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: J9SmNILuF7SKbRyIBO_-TZVY7LHfZhE6J3zoz920DP3TGWXKB-51LA==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjNmNzhhZjYzLTNlN2ItNGUwZS1iYTBhLTc3Njc5ZDQ1MTBkNCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwOTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY5NSwiaWF0IjoxNjIxNzMwMDk1LCJqdGkiOiIxYjJjMGM0NS1hYjExLTRhN2MtOTU5Mi0yOWNjNTkyOTk5YTQiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GlJnQGXhsMO6XD5hOmfGAKH5Gr2EnSVCQ8oz3PRmsXp1RO8SBTiwe_yS1Y0s8fnwyfXRqT4_qA9lNAexK1svBEot0xK_HkWijfPUPtKWrr6tusD8G4UUm3Yh6KybMIWlbe9CVVcj1x0Y1UFn40-lZJrquXrOYm1IAynOSAm7hw72qjlF4i9rHTjX45xUI7uSdZvF3W_G9nEfz9h-jcZ2VuN0QwaWUzCg5RZ6Qadprejs-8-30Hr_MRPms6QEv2S4GgxvuXeFbRGOW0PPzi4vKEijPK9Op6QhzAjXAsVUO3V_HvfPoBn8yToS2MKp9sh1a9e414H9Ptp0WPgQn6IV2Q&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ZaTJ2sBJQz37Z0R7LvLPAWhsHKAZfOIS7z0e4MU8dBAvA5vjOXpvHmTcgqLpg3FwHHXo8qfceo3zptcoCJVQ5e47z7HdSYc-EBDAD8c_Z9-um6UO7rvh9x_4P7QVRtP8Vak9aNOu0IWf1kSlRqO8aWvSsOrMoBs6idWZr1mTFcxiK7dHfQmLewdVihKymu3XJf3mqe8vNCYPSqE7z1eutx0-5lDqXc8YirrCOsxqb8tQcwuaUk-OnEDbKF5POwqFDWa_9pdpDaPyBG71ssCbgWEpxxAFMJseYDwMB6xxX-pXIunYvFVO3ysYJ-5lu8WSY--p1Yekc6PMbEAWQOO0ZQ.1NYCByrFCtSqMvf7.-NbblHD7CCN2a3ofUIXN1_BskDKqi2x2mBrWxCYAz26m3R2gUEiZJz5xE5nggX1xVtb4a3a0OVhvLWNkUHuUu7fo5oQU4qowBk-RA0lzY13JUd0ZxPMsBA0KSPGdA6SegFEahYXn2kFcqVFeRI-rOY0IE3VCXVdTuSoVIN77HWyigPjc6sNwGMQUqaIFYZvNdcBLeI5jcM82_TTQXMwUOJNrl1q8YO6kUbHaX4fp3CoMUqe7v-fSUmVjzxGS3vWjF8DGFhRtLfih7DJ17f7XWJGXt4dw484uaXTWYmsnIUubQnnqR40y5lXZBtiVtrWa54CitSDP13fS8JKZcgOCQyPVRYRLMfUA9LI2dDwCgZmWPaFrrSg9Nsnhrzj5zPLGxABH30Bma3DKfmhUs1upZIYpvqfWUt7E7RYAuKF98oWE9dXiVC7ffWOPCfah-cbAPm_TwnNy7jTo4s73fLnYEDZGzPPC6neNxLK2-lR118PY7pE4XGoDmP714HZJr8NEviIE6RsXFEeU_Ksi2817Auu7BhIEU3TDJ-dpoOHh6S7K-obnm-0vRnztIHIjVXrLFlQkpZAqOwBspEXICAxDBDX_OnMkA9XgatNhU7FiOpMdqb4Pl5tOp91BcZ578cWnr-TKpsan1wtUgI-_9m77Jtdqbi5hJUNpXlwA1FPDhraqb-2HZgrqi1mF5EeNQlFlkf1LeWvKH4MNOL9-CnjI3mpI2nXkUkWIwJbevB2TlaTASvlcfrK_WTTMt_Y6n-hOiO4cIR6OimHqWhE1ylPwP94iKTqHkU8DcxQHpr-_GD_dnTd6HXBTxblcVchCQuwsXH2KPbvQQ2yZ77Rd9Cq-udgA2J0PA6RULroQLsk4_Cyq69T89VePa3B_8zxNpw-S3vtQVcL3CV20fvUuy0rsKsuFKXp_Nwc_Y9wDonbtklgv-YWeRdfNH5zTZHalM-7ExyvAvasIFrO-tLoaXfje7--uhy6Pc1dms1K7sGpR2gBNMRGATALDujHagtXtSyXYyhnf5OCLTez6XUzc77OoJUEgClNMwegZztnuedoqxJF1N1OCA9Cd66_1BsvY_HTLc8d5LMKkdvqIvUFTgf1DOY3eTxo-DMRVB62zt7JNBtpBRccjuMFnX9ik3v15mdjsRhOcC6doswtY6g7Hrzqt9xhW8q3W6ZldHf6OjMiKYcPtJoPWSvVC7L65-bfhEjPxXS5cWfE4wTBX4jhRgB0tDkpiSV7j0YbnATui80y-tdbOtTw39GiUKenhROnhoJtbXzdujW2SFtQ-R8wCf4ZVXjsJj2NTezY4UflygjXAHQVV687jvZ5HDAvt0aWT5ug.SzRU6IUoq-Kp-L4z2lut8g&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.12.0.call">
    <div class="step-container" id="0.13.0.call.0.12.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.12.0.call.0.25">02:34:55.004 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.13">02:34:55.006 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjNmNzhhZjYzLTNlN2ItNGUwZS1iYTBhLTc3Njc5ZDQ1MTBkNCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjE3MzAwOTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTczMzY5NSwiaWF0IjoxNjIxNzMwMDk1LCJqdGkiOiIxYjJjMGM0NS1hYjExLTRhN2MtOTU5Mi0yOWNjNTkyOTk5YTQiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GlJnQGXhsMO6XD5hOmfGAKH5Gr2EnSVCQ8oz3PRmsXp1RO8SBTiwe_yS1Y0s8fnwyfXRqT4_qA9lNAexK1svBEot0xK_HkWijfPUPtKWrr6tusD8G4UUm3Yh6KybMIWlbe9CVVcj1x0Y1UFn40-lZJrquXrOYm1IAynOSAm7hw72qjlF4i9rHTjX45xUI7uSdZvF3W_G9nEfz9h-jcZ2VuN0QwaWUzCg5RZ6Qadprejs-8-30Hr_MRPms6QEv2S4GgxvuXeFbRGOW0PPzi4vKEijPK9Op6QhzAjXAsVUO3V_HvfPoBn8yToS2MKp9sh1a9e414H9Ptp0WPgQn6IV2Q&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ZaTJ2sBJQz37Z0R7LvLPAWhsHKAZfOIS7z0e4MU8dBAvA5vjOXpvHmTcgqLpg3FwHHXo8qfceo3zptcoCJVQ5e47z7HdSYc-EBDAD8c_Z9-um6UO7rvh9x_4P7QVRtP8Vak9aNOu0IWf1kSlRqO8aWvSsOrMoBs6idWZr1mTFcxiK7dHfQmLewdVihKymu3XJf3mqe8vNCYPSqE7z1eutx0-5lDqXc8YirrCOsxqb8tQcwuaUk-OnEDbKF5POwqFDWa_9pdpDaPyBG71ssCbgWEpxxAFMJseYDwMB6xxX-pXIunYvFVO3ysYJ-5lu8WSY--p1Yekc6PMbEAWQOO0ZQ.1NYCByrFCtSqMvf7.-NbblHD7CCN2a3ofUIXN1_BskDKqi2x2mBrWxCYAz26m3R2gUEiZJz5xE5nggX1xVtb4a3a0OVhvLWNkUHuUu7fo5oQU4qowBk-RA0lzY13JUd0ZxPMsBA0KSPGdA6SegFEahYXn2kFcqVFeRI-rOY0IE3VCXVdTuSoVIN77HWyigPjc6sNwGMQUqaIFYZvNdcBLeI5jcM82_TTQXMwUOJNrl1q8YO6kUbHaX4fp3CoMUqe7v-fSUmVjzxGS3vWjF8DGFhRtLfih7DJ17f7XWJGXt4dw484uaXTWYmsnIUubQnnqR40y5lXZBtiVtrWa54CitSDP13fS8JKZcgOCQyPVRYRLMfUA9LI2dDwCgZmWPaFrrSg9Nsnhrzj5zPLGxABH30Bma3DKfmhUs1upZIYpvqfWUt7E7RYAuKF98oWE9dXiVC7ffWOPCfah-cbAPm_TwnNy7jTo4s73fLnYEDZGzPPC6neNxLK2-lR118PY7pE4XGoDmP714HZJr8NEviIE6RsXFEeU_Ksi2817Auu7BhIEU3TDJ-dpoOHh6S7K-obnm-0vRnztIHIjVXrLFlQkpZAqOwBspEXICAxDBDX_OnMkA9XgatNhU7FiOpMdqb4Pl5tOp91BcZ578cWnr-TKpsan1wtUgI-_9m77Jtdqbi5hJUNpXlwA1FPDhraqb-2HZgrqi1mF5EeNQlFlkf1LeWvKH4MNOL9-CnjI3mpI2nXkUkWIwJbevB2TlaTASvlcfrK_WTTMt_Y6n-hOiO4cIR6OimHqWhE1ylPwP94iKTqHkU8DcxQHpr-_GD_dnTd6HXBTxblcVchCQuwsXH2KPbvQQ2yZ77Rd9Cq-udgA2J0PA6RULroQLsk4_Cyq69T89VePa3B_8zxNpw-S3vtQVcL3CV20fvUuy0rsKsuFKXp_Nwc_Y9wDonbtklgv-YWeRdfNH5zTZHalM-7ExyvAvasIFrO-tLoaXfje7--uhy6Pc1dms1K7sGpR2gBNMRGATALDujHagtXtSyXYyhnf5OCLTez6XUzc77OoJUEgClNMwegZztnuedoqxJF1N1OCA9Cd66_1BsvY_HTLc8d5LMKkdvqIvUFTgf1DOY3eTxo-DMRVB62zt7JNBtpBRccjuMFnX9ik3v15mdjsRhOcC6doswtY6g7Hrzqt9xhW8q3W6ZldHf6OjMiKYcPtJoPWSvVC7L65-bfhEjPxXS5cWfE4wTBX4jhRgB0tDkpiSV7j0YbnATui80y-tdbOtTw39GiUKenhROnhoJtbXzdujW2SFtQ-R8wCf4ZVXjsJj2NTezY4UflygjXAHQVV687jvZ5HDAvt0aWT5ug.SzRU6IUoq-Kp-L4z2lut8g&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The token for the admin user is the input parameter for the callable feature where are defined the steps of the tests</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def userToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Test to create a user with a wrong password</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.18">{ 
	&quot;username&quot;: &quot;userNotAdmin@test.com&quot;, 
	&quot;password&quot;: &quot;Pass&quot;, 
	&quot;role&quot;: &quot;user&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#    * def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query fail because the password is too short</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.28">{
   &quot;message&quot;: &quot;Password does not conform to policy: Password not long enough&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#     * match saveUser.response.errors contains deep expected</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Try to create again but with another wrong password</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.37">
      <div class="step-ref passed">37</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.37">{ 
	&quot;username&quot;: &quot;userNotAdmin@test.com&quot;, 
	&quot;password&quot;: &quot;Password111&quot;, 
	&quot;role&quot;: &quot;User&quot;
}</div>

  

  <div class="preformatted" data-parent="0.13.0.call.0.37">02:34:55.009 over-writing existing variable &#39;newUser&#39; with new value: { 
	&quot;username&quot;: &quot;userNotAdmin@test.com&quot;, 
	&quot;password&quot;: &quot;Password111&quot;, 
	&quot;role&quot;: &quot;User&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.45">
      <div class="step-ref passed">45</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4492</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.45.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUser</div>
      </div>
      <div class="time-cell passed">4484</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">465</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.45.0.call.0.17">02:34:55.020 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 258
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password111&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;userNotAdmin@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:34:55.483 response time in milliseconds: 463
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 155
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:34:56 GMT
1 &lt; x-amzn-RequestId: 33156f58-58f0-4524-80bf-1b6b56033e2e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZvfFIejoEF-aQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a32f-79268ba4101c8c2f450b4a4d;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 0250a97a9fe8f37b6e3c4270db2dc8af.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: A9K8IkgEZQsHdV2EQ4ZuupLUvO52nG4jBZrd5zNTbiaZ0QIcm4FJ0Q==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;An account with the given email already exists.&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4016</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.45.0.call">
    <div class="step-container" id="0.13.0.call.0.45.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query fail because the password is too short</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.47">
      <div class="step-ref passed">47</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.47">{
   &quot;message&quot;: &quot;Password does not conform to policy: Password must have symbol characters&quot;
}</div>

  

  <div class="preformatted" data-parent="0.13.0.call.0.47">02:34:59.501 over-writing existing variable &#39;expected&#39; with new value: {
   &quot;message&quot;: &quot;Password does not conform to policy: Password must have symbol characters&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#     * match saveUser.response.errors contains deep expected</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Try to create a new user with the role empty</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.57">
      <div class="step-ref passed">57</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.57">{ 
	&quot;username&quot;: &quot;userNotAdmin2@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot; 
}</div>

  

  <div class="preformatted" data-parent="0.13.0.call.0.57">02:34:59.502 over-writing existing variable &#39;newUser&#39; with new value: { 
	&quot;username&quot;: &quot;userNotAdmin2@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot; 
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.64">
      <div class="step-ref passed">64</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">5324</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.64.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUser</div>
      </div>
      <div class="time-cell passed">5319</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.64.0.call.0.4">02:34:59.502 over-writing existing variable &#39;saveUser&#39; with new value: call read(&#39;SaveUser.feature&#39;) userToken
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1302</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.64.0.call.0.17">02:34:59.507 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 244
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;username&quot;:&quot;userNotAdmin2@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:35:00.808 response time in milliseconds: 1301
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:35:01 GMT
1 &lt; x-amzn-RequestId: 85ffea2b-e353-4028-a6ad-5467eb3f188a
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZwMFUFjoEFZew=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a334-0326fa8071fd6e4078efdfbd;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 5bbe14a8b2c5fa4323fe2881d040833c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: btfpaakZqzKoOJ5YHD0Pls0l0YMcSoR8jswQDGQy9swDPk3hbifIJw==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4016</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.64.0.call">
    <div class="step-container" id="0.13.0.call.0.64.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user is created and the default value fo the role is &#39;User&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.66">
      <div class="step-ref passed">66</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match saveUser.response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Try to create a new user whith a username that already exist</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.70">
      <div class="step-ref passed">70</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.70">{ 
	&quot;username&quot;: &quot;userNotAdmin2@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot;,
	&quot;role&quot;: &quot;User&quot;
}</div>

  

  <div class="preformatted" data-parent="0.13.0.call.0.70">02:35:04.828 over-writing existing variable &#39;newUser&#39; with new value: { 
	&quot;username&quot;: &quot;userNotAdmin2@test.com&quot;, 
	&quot;password&quot;: &quot;Password_1&quot;,
	&quot;role&quot;: &quot;User&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.78">
      <div class="step-ref passed">78</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveUser = call read(&#39;SaveUser.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4493</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.78.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveUser</div>
      </div>
      <div class="time-cell passed">4488</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.78.0.call.0.4">02:35:04.828 over-writing existing variable &#39;saveUser&#39; with new value: call read(&#39;SaveUser.feature&#39;) userToken
</div>   

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser = read(&#39;SaveUser.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(newUser)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">482</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.78.0.call.0.17">02:35:04.833 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 258
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;userNotAdmin2@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

02:35:05.313 response time in milliseconds: 480
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 155
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:35:05 GMT
1 &lt; x-amzn-RequestId: 07df9050-1956-41b0-a53c-edd8ea2a2c8c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZxCGRCjoEF7pQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a339-66cab2b7615b6a2e5f372e02;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 09e594de40cb3eb83a4bc581fa48d9e2.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: 8OSMGe-5eCKW8mIUXug3BBAU2EpyRnfrJyvecA6eQ197H5BR-64ngw==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;An account with the given email already exists.&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4006</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.78.0.call">
    <div class="step-container" id="0.13.0.call.0.78.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the default value is &#39;User&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.80">
      <div class="step-ref passed">80</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def expected =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.80">{
   &quot;message&quot;:&quot;An account with the given email already exists.&quot;
}</div>

  

  <div class="preformatted" data-parent="0.13.0.call.0.80">02:35:09.321 over-writing existing variable &#39;expected&#39; with new value: {
   &quot;message&quot;:&quot;An account with the given email already exists.&quot;
}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.87">
      <div class="step-ref passed">87</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match saveUser.response.errors contains deep expected</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Create a new customers without name and surname</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># It should fail because they are mandatory fields</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.93">
      <div class="step-ref passed">93</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.93">{
   &quot;id&quot;: &quot;Customer_id&quot;
}
&quot;</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.99">
      <div class="step-ref passed">99</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def saveCustomer = call read(&#39;SaveCustomerWrong.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4203</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.99.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.SaveCustomerWrong</div>
      </div>
      <div class="time-cell passed">4193</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer = read(&#39;SaveCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The body of the graphql request is a JSON with the generated values</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newCust =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.99.0.call.0.14">{ 
	&quot;id&quot;: &quot;#(newCustomer.id)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.22">
      <div class="step-ref passed">22</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(newCust)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">188</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.99.0.call.0.25">02:35:09.333 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 217
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;Customer_id&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

02:35:09.519 response time in milliseconds: 185
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:35:10 GMT
1 &lt; x-amzn-RequestId: dd7093b1-5e42-4b88-afa0-bd732ccdfaf5
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZxuGixjoEFpJw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a33e-1d9e5fb95a41d6bc67c958e4;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 56eff4217adb539e7a42fbab3eee2d4d.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: MMPAOs1iTf7E0Mmh9gydFhR8_8DcGYTB7-MQeSKo7qHS5VCXwwYlOQ==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4003</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.99.0.call">
    <div class="step-container" id="0.13.0.call.0.99.0.call.0.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#    * match saveCustomer.response.errors != &#39;#notpresent&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### List a customer by id</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check if the customer was updated properly and it has the reference of the last user who modified</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.105">
      <div class="step-ref passed">105</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def listCustomerId = call read(&#39;CustomerReadModels.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">297</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.105.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.CustomerReadModels</div>
      </div>
      <div class="time-cell passed">289</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustomerReadModels = read(&#39;CustomerReadModels.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.10">
      <div class="step-ref passed">10</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustomerReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">283</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.105.0.call.0.14">02:35:13.532 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

02:35:13.814 response time in milliseconds: 281
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 757
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:35:14 GMT
1 &lt; x-amzn-RequestId: 62def882-5a9b-4b2a-9ab9-0ca4da0d5649
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZyYHyYDoEF85Q=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a342-031dde9141510c682aa9ac52;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 9809ca806cde9d8f9a57379e55ece5b7.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: XJwxculYuZxGwPI4LRA88TvZa1yHtf963XI2Ctfsli5UtfdeSlkBWw==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;id&quot;:&quot;CustNotAdmin2&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;surname changed&quot;,&quot;name&quot;:&quot;name changed&quot;,&quot;id&quot;:&quot;Cust0&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;#(first_customer.surname)&quot;,&quot;name&quot;:&quot;#(first_customer.name)&quot;,&quot;id&quot;:&quot;#(first_customer.id)&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;Cust1&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:null,&quot;name&quot;:null,&quot;id&quot;:&quot;Customer_id&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer Surname&quot;,&quot;name&quot;:&quot;Cutomer Name&quot;,&quot;id&quot;:&quot;CustNotAdmin1&quot;,&quot;userId&quot;:&quot;userNotAdmin@test.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the query doesn&#39;t fail</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Print the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.105.0.call.0.24">02:35:13.818 [print] [
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;surname changed&quot;,
    &quot;name&quot;: &quot;name changed&quot;,
    &quot;id&quot;: &quot;CustNotAdmin2&quot;,
    &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;surname changed&quot;,
    &quot;name&quot;: &quot;name changed&quot;,
    &quot;id&quot;: &quot;Cust0&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;#(first_customer.surname)&quot;,
    &quot;name&quot;: &quot;#(first_customer.name)&quot;,
    &quot;id&quot;: &quot;#(first_customer.id)&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;Cust1&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: null,
    &quot;name&quot;: null,
    &quot;id&quot;: &quot;Customer_id&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer Surname&quot;,
    &quot;name&quot;: &quot;Cutomer Name&quot;,
    &quot;id&quot;: &quot;CustNotAdmin1&quot;,
    &quot;userId&quot;: &quot;userNotAdmin@test.com&quot;
  }
]
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.105.0.call">
    <div class="step-container" id="0.13.0.call.0.105.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.106">
      <div class="step-ref passed">106</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match listCustomerId.response.data.CustomerReadModels != {id: &#39;#(first_customer.id)&#39;, name: &#39;#(newCustomer)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">10</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### Delete a customer that doesn&#39;t exist</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.109">
      <div class="step-ref passed">109</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customerDelete =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.13.0.call.0.109">{
   &quot;id&quot;: &quot;customerNotExist&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.115">
      <div class="step-ref passed">115</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def deleteCustomer = call read(&#39;DeleteCustomer.feature&#39;) userToken</span>
      </div>
    </div>
    <div class="time-cell passed">4296</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.13.0.call">
      <div class="step-container" id="0.13.0.call.0.115.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">test.graphql.DeleteCustomer</div>
      </div>
      <div class="time-cell passed">4286</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The query is read from a *.graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer = read(&#39;DeleteCustomer.graphql&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.13">
      <div class="step-ref passed">13</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.14">
      <div class="step-ref passed">14</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = userToken.tokenType + &#39; &#39; + userToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteCustomer)&#39;,  variables: &#39;#(customerDelete)&#39;  }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">280</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.115.0.call.0.17">02:35:13.842 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIzZjc4YWY2My0zZTdiLTRlMGUtYmEwYS03NzY3OWQ0NTEwZDQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTczMDA5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTczMzY5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTczMDA5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.sjzx2QWw01RI6QfJ9aKf1PwYbsL1tGPhvZMx1EXvQnDiQuWdneQEBzhPnn6iG98tR4aVqGq0EHU0aJP31OqbVHvZDJ454hKzdcGDwlyPEEVv46Sgj6Q0TcxBBc51EWw8MiRK6JAxAKg5yhsQLRZ1xkru9R9iXgYqwjEFqdQ8B0bCxP5WuZaV-wvNlm497B9OvqR28dqaKZEqsSGMF-lWT4RDOmBUyUnYtQ2s2TauSbcsqcng6VHfk7WFvbJDTreA3ejA0koOj4bfx47WDVgwcHARVPaxSGw9n9YqoPq2SFX6w6hRJXytOBqLNwLo1U6aOxgXdfnc2hn4x_Sgzt_a0g
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 134
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;customerNotExist&quot;},&quot;query&quot;:&quot;mutation DeleteCustomer($id: ID) {\r\n    DeleteCustomer(input: {id: $id})\r\n} \r\n&quot;}

02:35:14.121 response time in milliseconds: 279
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 23 May 2021 00:35:14 GMT
1 &lt; x-amzn-RequestId: 0bd141b0-82fe-44fc-8ed8-35264a61afba
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fwZycHAKDoEFtYQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a9a342-0c92be2f6d5471e85dc917e0;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 18d8826259eea2f8aa83b2a4ea085086.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: ZE1ESD81gNF0V0_-ZbTAxzo93TLoM8VbA1hDU4rJqisU8-qrrz5vrQ==
{&quot;data&quot;:{&quot;DeleteCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the customer can be delete before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer was delete, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.13.0.call.0.115.0.call">
    <div class="step-container" id="0.13.0.call.0.115.0.call.0.26">
      <div class="step-ref passed">26</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.13.0.call">
    <div class="step-container" id="0.13.0.call.0.116">
      <div class="step-ref failed">116</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match deleteCustomer.response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.13.0.call.0.116">02:35:18.130 classpath:test/graphql/TestFailures.feature:116
* match deleteCustomer.response.errors != &#39;#notpresent&#39;
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:test/graphql/TestFailures.feature:116
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

