{"failedCount":0,"prefixedPath":"classpath:examples\/users\/TestUserNoAdminUpdateCust.feature","packageQualifiedName":"examples.users.TestUserNoAdminUpdateCust","loopIndex":-1,"relativePath":"examples\/users\/TestUserNoAdminUpdateCust.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1913000,"millis":1.913,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"18:10:24.088 karate.env system property was: prod \n"},{"result":{"nanos":45900,"millis":0.0459,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":33116400,"millis":33.1164,"status":"passed"},"step":{"comments":["#### Get the idToken for one of the user created by the admin. Datas are read from a JSON file"],"line":13,"prefix":"*","index":0,"text":"def datas = read('signinDatasUserNoAdmin.json')"}},{"result":{"nanos":888814700,"millis":888.8147,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the user's datas"],"line":16,"prefix":"*","index":1,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-17 06:10:30 p. m.","durationMillis":863.6835,"callArg":{"password":"Password_1","clientId":"799hogucm363v55l7dk2n1l5u0","username":"user@test.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":37300,"millis":0.0373,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":2294500,"millis":2.2945,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":3225800,"millis":3.2258,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"18:10:24.177 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"user@test.com\",\n  \"password\": \"Password_1\"\n}\n \n"},{"result":{"nanos":4384100,"millis":4.3841,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":20700,"millis":0.0207,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":635000,"millis":0.635,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":851015200,"millis":851.0152,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"18:10:24.385 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 92\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Password_1\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"user@test.com\"}\n\n18:10:25.033 response time in milliseconds: 644\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 3992\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 16:10:25 GMT\n1 < x-amzn-RequestId: e422da47-bc25-4ab5-914b-9118bb8977a3\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fexJsEvRjoEFj9A=\n1 < X-Amzn-Trace-Id: Root=1-60a29571-5f57cff75ff14fff499e7e28\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 c317421ad77a6a1c3629f150c353ffe5.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: jehOsjIUyG02g3mcw0TjFyn83cn6bWhWRaUm8rfU8UMoClf1prJfdA==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNjc4MjUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI3MTQyNSwiaWF0IjoxNjIxMjY3ODI1LCJqdGkiOiIzZGFkMzgyZi1mZDY3LTRiZTAtYTQ4YS1jNGUwZDQyMzc4MGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.ICwV_tGQiRPzcTaZK1TOmcTs-rC_Sn7sXpjTzUI3yMOiftzSCYXYPK0x5OVyJWlcQBbSNWY1fxzMMiQadOmUgozHd6q7Vt16rGO60lcoNRw6DVnxoXe8f85cmxu1bK1uYpcMMg6NczzwBdofFvRNGPdymqwNihZLPSYCXVdGH9CoZTxiLydTVaAGO5DooRGAO-i8ip0Yj984PHQFl90pDBDbJj7ZQTG7xJUYQ7d8hbiiLXDYsWgTn8UZRV5K7bqUol9X9R1F-Gb6V515hXJxod7Ye0CGYYcvkHT1uQExJS1pfgQ8laS4RYjmKrcQuQns92S46DLGs3emHo6TgIwlqw\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.WgDlQcD9ytO4eCtIiSp_Gc-TdOnPoF8mujmqVICbDqnyTSQ070uv1oixGIbc2h8CNF-ivDgoTzT8vXODWEkpUJDILBDiHQzn66qZsqHwY0BbxD_rLiY5JqjcmcLUbzaetZsf5CM_AGpQnCaaEkIAB5cqYV8p9OyJqVSLOZs0LVgjzZWcjklWcJRTl60eh4-RLER0R12ZOBtTFQUv7Kqz5f7ZOePzgi_S9oniSvOQM8sUux4AjNxfWtyW_Jibd8Q4rFJ8aR2WgeHikyOCk_jx4MckPuef2MaQpl0n3qKmdoWuklYOEJqAe-h8sydSdn0K_5vonqqRsaxNrwIMtXtYmg.724pbnSdxPiPVWMh.xSAl_ZRCaa_GDUikvTlF2aFg1MvPmWU5eGM3mAupGws-xt9s3Y1DRCDOlXGXcssBo-eiSCnNxguuk5mIsa0zEJMRrd-MT8sjcQrNeUJljYV4I8Oec6O50QlOgXZh1QAis6TTNtBMdsWRVSDexF4xWu38ZGGtgXpdOyFyYLWWGJu3kTqx_lwTL3K2VmJZLhhYnDlDKdrVYYIBn9fKuzT02MBFCMVaSd5s5IFghJ1_d_Ke-PGleEJc7HMV-TqX2pRhzBOcRKj2wKq64or3xUVUzuCkWEZWu1n_90CJbhMb0y2m_a-Igb0fnXILJwYUih6MCX-064Xq9l9PNFkcHz5UL6-y8hv53PJLGpOhE9jySqpP3ReQKi6Quj4RMPkQbTUhPNAsH_og-UVLZPBPqZthgfaneq-6h0Y41ors0d20XoKoDnFuy5tkUt95fY_ogWQkQgojPyq35ZUipa3oxMRcQ_AhQI7ose3W85vnuvJp7-VeHnslVDFtnufHD7mdJDK2JX7z3lpeD-YV5DN5Ytpy1UVObaYpVZwfIfr-Lez-U9WwRKDDbECyHKgl4dmDd389MfSrZ0y3st_VoBEYPOqG_YP3_avdbr426OSqQj-xeLgPKbC9T0Cajz3GKA3xchcydcMlUwFJ5Hqpfp0E4zGleUmYPtOz9e0GQfvZnakHiqQ6DCc5meDnmqRLYcDsfyESW-AVjbL4r2bChY1oLSxFsqmFGIPW9pIsX_IiNqtjcwhruwLeFgal7KwDbntngre8sRo-PXtTZ_sL_Tg6wfwRiedIZOHCFDeSyvRKx2NDdszcS1VsXVFln5vKgS_l5aW4sKb9VZkdrNCRJhP-fdwZouAPHs12umE449YPAWAI0jFmfR7teJYGgdR9IiixoQ42hxAv-5qXKHYOLNFVom2AgJvjr5BdAEVHkl5jT5KxYIgGrmqMh32tyHu9ChjCugmSOMBrMxhxha_NY1X6v_FvjvbDxniN8Wb7l8FrIRUK_JLpzeTiKW80ZzEcHo0-K6nINFNdmCoNqGUHCZIzPbCkiUvI8Vs8fdSCuTenPa-STLZOEWOth-B24BSimiGDKElVQuwQ7PKNIccQcPu6xwGO33LZCQZBtJu9949qywut8m4oE78vz52i1PC2BB7bpBzSoftwSK5ujFS4saZvisPE2Jvq_d4ld7YMFZaTpaCmEwIcrFqFlILAXhqc4CXev3DmcIZF919sr4iyWYi99y1--wTMN05cJDOFr86sn7fFJeK1sEJOLPnQWf2JoqE8CAFa7StxQqAPKap9xtqPCShbDL45FK9bVimQF3Y9PuMTO7XaX5VPfRIzNByypQOTTzc.ln2qR9V_hK7HLDeQrPWIGA\"}\n"},{"result":{"nanos":21900,"millis":0.0219,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":1058400,"millis":1.0584,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":990600,"millis":0.9906,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"18:10:25.037 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":863.6835,"startTime":1621267824171,"failed":false,"refId":"[1:6]","endTime":1621267825037,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":1929800,"millis":1.9298,"status":"passed"},"step":{"line":17,"prefix":"*","index":2,"text":"print signIn.response"},"stepLog":"18:10:25.041 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNjc4MjUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI3MTQyNSwiaWF0IjoxNjIxMjY3ODI1LCJqdGkiOiIzZGFkMzgyZi1mZDY3LTRiZTAtYTQ4YS1jNGUwZDQyMzc4MGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.ICwV_tGQiRPzcTaZK1TOmcTs-rC_Sn7sXpjTzUI3yMOiftzSCYXYPK0x5OVyJWlcQBbSNWY1fxzMMiQadOmUgozHd6q7Vt16rGO60lcoNRw6DVnxoXe8f85cmxu1bK1uYpcMMg6NczzwBdofFvRNGPdymqwNihZLPSYCXVdGH9CoZTxiLydTVaAGO5DooRGAO-i8ip0Yj984PHQFl90pDBDbJj7ZQTG7xJUYQ7d8hbiiLXDYsWgTn8UZRV5K7bqUol9X9R1F-Gb6V515hXJxod7Ye0CGYYcvkHT1uQExJS1pfgQ8laS4RYjmKrcQuQns92S46DLGs3emHo6TgIwlqw\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.WgDlQcD9ytO4eCtIiSp_Gc-TdOnPoF8mujmqVICbDqnyTSQ070uv1oixGIbc2h8CNF-ivDgoTzT8vXODWEkpUJDILBDiHQzn66qZsqHwY0BbxD_rLiY5JqjcmcLUbzaetZsf5CM_AGpQnCaaEkIAB5cqYV8p9OyJqVSLOZs0LVgjzZWcjklWcJRTl60eh4-RLER0R12ZOBtTFQUv7Kqz5f7ZOePzgi_S9oniSvOQM8sUux4AjNxfWtyW_Jibd8Q4rFJ8aR2WgeHikyOCk_jx4MckPuef2MaQpl0n3qKmdoWuklYOEJqAe-h8sydSdn0K_5vonqqRsaxNrwIMtXtYmg.724pbnSdxPiPVWMh.xSAl_ZRCaa_GDUikvTlF2aFg1MvPmWU5eGM3mAupGws-xt9s3Y1DRCDOlXGXcssBo-eiSCnNxguuk5mIsa0zEJMRrd-MT8sjcQrNeUJljYV4I8Oec6O50QlOgXZh1QAis6TTNtBMdsWRVSDexF4xWu38ZGGtgXpdOyFyYLWWGJu3kTqx_lwTL3K2VmJZLhhYnDlDKdrVYYIBn9fKuzT02MBFCMVaSd5s5IFghJ1_d_Ke-PGleEJc7HMV-TqX2pRhzBOcRKj2wKq64or3xUVUzuCkWEZWu1n_90CJbhMb0y2m_a-Igb0fnXILJwYUih6MCX-064Xq9l9PNFkcHz5UL6-y8hv53PJLGpOhE9jySqpP3ReQKi6Quj4RMPkQbTUhPNAsH_og-UVLZPBPqZthgfaneq-6h0Y41ors0d20XoKoDnFuy5tkUt95fY_ogWQkQgojPyq35ZUipa3oxMRcQ_AhQI7ose3W85vnuvJp7-VeHnslVDFtnufHD7mdJDK2JX7z3lpeD-YV5DN5Ytpy1UVObaYpVZwfIfr-Lez-U9WwRKDDbECyHKgl4dmDd389MfSrZ0y3st_VoBEYPOqG_YP3_avdbr426OSqQj-xeLgPKbC9T0Cajz3GKA3xchcydcMlUwFJ5Hqpfp0E4zGleUmYPtOz9e0GQfvZnakHiqQ6DCc5meDnmqRLYcDsfyESW-AVjbL4r2bChY1oLSxFsqmFGIPW9pIsX_IiNqtjcwhruwLeFgal7KwDbntngre8sRo-PXtTZ_sL_Tg6wfwRiedIZOHCFDeSyvRKx2NDdszcS1VsXVFln5vKgS_l5aW4sKb9VZkdrNCRJhP-fdwZouAPHs12umE449YPAWAI0jFmfR7teJYGgdR9IiixoQ42hxAv-5qXKHYOLNFVom2AgJvjr5BdAEVHkl5jT5KxYIgGrmqMh32tyHu9ChjCugmSOMBrMxhxha_NY1X6v_FvjvbDxniN8Wb7l8FrIRUK_JLpzeTiKW80ZzEcHo0-K6nINFNdmCoNqGUHCZIzPbCkiUvI8Vs8fdSCuTenPa-STLZOEWOth-B24BSimiGDKElVQuwQ7PKNIccQcPu6xwGO33LZCQZBtJu9949qywut8m4oE78vz52i1PC2BB7bpBzSoftwSK5ujFS4saZvisPE2Jvq_d4ld7YMFZaTpaCmEwIcrFqFlILAXhqc4CXev3DmcIZF919sr4iyWYi99y1--wTMN05cJDOFr86sn7fFJeK1sEJOLPnQWf2JoqE8CAFa7StxQqAPKap9xtqPCShbDL45FK9bVimQF3Y9PuMTO7XaX5VPfRIzNByypQOTTzc.ln2qR9V_hK7HLDeQrPWIGA\"\n}\n \n"},{"result":{"nanos":874400,"millis":0.8744,"status":"passed"},"step":{"comments":["#### Create the Authorization header"],"line":20,"prefix":"*","index":3,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":6222300,"millis":6.2223,"status":"passed"},"step":{"line":21,"prefix":"*","index":4,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":1072500,"millis":1.0725,"status":"passed"},"step":{"endLine":28,"comments":["#### Users can list all the customers"],"line":25,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":5,"text":"def queryCustReadModels ="}},{"result":{"nanos":747200,"millis":0.7472,"status":"passed"},"step":{"line":30,"prefix":"Given","index":6,"text":"path 'graphql'"}},{"result":{"nanos":2166900,"millis":2.1669,"status":"passed"},"step":{"line":31,"prefix":"And","index":7,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":658000,"millis":0.658,"status":"passed"},"step":{"line":32,"prefix":"And","index":8,"text":"request { query: '#(queryCustReadModels)'}"}},{"result":{"nanos":365749900,"millis":365.7499,"status":"passed"},"step":{"line":33,"prefix":"When","index":9,"text":"method post"},"stepLog":"18:10:25.054 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 167\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query CustomerReadModels {\\r\\n    CustomerReadModels {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n18:10:25.416 response time in milliseconds: 361\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 1150\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 16:10:25 GMT\n1 < x-amzn-RequestId: dc7edf48-7bd5-43c2-b1c6-f4cd3d64950e\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fexJxGuBjoEF7iA=\n1 < X-Amzn-Trace-Id: Root=1-60a29571-01af06853500429d5193b740;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 c81fed03bcdba8d8bb72a1d12196c83d.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: gIHjMRjRiTIXe8aMqzrzMTkQlESJa0823CuhxOVg-X6mFXfcqqWTrg==\n{\"data\":{\"CustomerReadModels\":[{\"photoUrl\":\"\",\"surname\":\"Surname Updated\",\"name\":\"Name Updated\",\"id\":\"2000000011a\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer2 Surname\",\"name\":\"Name Updated\",\"id\":\"2\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Surname Updated\",\"name\":\"Name Updated\",\"id\":\"0000aaaa\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Name Updated\",\"id\":\"20000000aa\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer4 surname\",\"name\":\"Customer4 name\",\"id\":\"20000000bb\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2000000012a\",\"userId\":\"user8@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Surname Updated\",\"name\":\"Name Updated\",\"id\":\"0000aaa11\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2000000photo\",\"userId\":\"user8@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"20000000nophoto\",\"userId\":\"user8@test.com\"}]}}\n"},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":34,"prefix":"Then","index":10,"text":"status 200"}},{"result":{"nanos":6426300,"millis":6.4263,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":37,"prefix":"*","index":11,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":10558800,"millis":10.5588,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":40,"prefix":"*","index":12,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":398400,"millis":0.3984,"status":"passed"},"step":{"line":41,"prefix":"*","index":13,"text":"match response.data.CustomerReadModels contains {id: '#ignore', name: '#ignore', surname: '#ignore', photoUrl: '#ignore', userId: '#ignore' }"}},{"result":{"nanos":1009100,"millis":1.0091,"status":"passed"},"step":{"comments":["# Save the body of the response"],"line":44,"prefix":"*","index":14,"text":"def list_customers = response.data.CustomerReadModels"}},{"result":{"nanos":1277200,"millis":1.2772,"status":"passed"},"step":{"line":45,"prefix":"*","index":15,"text":"print list_customers"},"stepLog":"18:10:25.439 [print] [\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Surname Updated\",\n    \"name\": \"Name Updated\",\n    \"id\": \"2000000011a\",\n    \"userId\": \"user@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer2 Surname\",\n    \"name\": \"Name Updated\",\n    \"id\": \"2\",\n    \"userId\": \"user@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Surname Updated\",\n    \"name\": \"Name Updated\",\n    \"id\": \"0000aaaa\",\n    \"userId\": \"user@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer surname\",\n    \"name\": \"Name Updated\",\n    \"id\": \"20000000aa\",\n    \"userId\": \"user@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer4 surname\",\n    \"name\": \"Customer4 name\",\n    \"id\": \"20000000bb\",\n    \"userId\": \"admin@theagilemonkeys.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer surname\",\n    \"name\": \"Customer name\",\n    \"id\": \"2000000012a\",\n    \"userId\": \"user8@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Surname Updated\",\n    \"name\": \"Name Updated\",\n    \"id\": \"0000aaa11\",\n    \"userId\": \"user@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer surname\",\n    \"name\": \"Customer name\",\n    \"id\": \"2000000photo\",\n    \"userId\": \"user8@test.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer3 Surname\",\n    \"name\": \"Customer3\",\n    \"id\": \"3\",\n    \"userId\": \"admin@theagilemonkeys.com\"\n  },\n  {\n    \"photoUrl\": \"\",\n    \"surname\": \"Customer surname\",\n    \"name\": \"Customer name\",\n    \"id\": \"20000000nophoto\",\n    \"userId\": \"user8@test.com\"\n  }\n]\n \n"},{"result":{"nanos":816300,"millis":0.8163,"status":"passed"},"step":{"endLine":52,"comments":["#### List a customers by Id that doesn't exist"],"line":49,"prefix":"*","docString":"read('CustomerReadModel.graphql')","index":16,"text":"def queryCustReadModel ="}},{"result":{"nanos":975200,"millis":0.9752,"status":"passed"},"step":{"comments":["# Define the id of a customer to list"],"line":54,"prefix":"*","index":17,"text":"def customer_no_exist = read('CustomerReadModelNoExist.json')"}},{"result":{"nanos":645300,"millis":0.6453,"status":"passed"},"step":{"endLine":60,"line":55,"prefix":"*","docString":"{ \n   \"id\": \"#(customer_no_exist.id)\"\n}","index":18,"text":"def id ="}},{"result":{"nanos":356100,"millis":0.3561,"status":"passed"},"step":{"line":61,"prefix":"Given","index":19,"text":"path 'graphql'"}},{"result":{"nanos":617500,"millis":0.6175,"status":"passed"},"step":{"line":62,"prefix":"And","index":20,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":563800,"millis":0.5638,"status":"passed"},"step":{"line":63,"prefix":"And","index":21,"text":"request { query: '#(queryCustReadModel)', variables: '#(id)'}"}},{"result":{"nanos":128937400,"millis":128.9374,"status":"passed"},"step":{"line":64,"prefix":"When","index":22,"text":"method post"},"stepLog":"18:10:25.445 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 219\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"20aassadfasfd\"},\"query\":\"query CustomerReadModel($id: ID!) {\\r\\n    CustomerReadModel(id: $id) {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n18:10:25.570 response time in milliseconds: 124\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 35\n2 < Connection: keep-alive\n2 < Date: Mon, 17 May 2021 16:10:26 GMT\n2 < x-amzn-RequestId: 8a740f52-eb01-4d05-9079-5cbf20797cc1\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fexJ0HnPDoEFnag=\n2 < X-Amzn-Trace-Id: Root=1-60a29571-1190833d457d31ae524e1aef;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 911151077fc74374130cb3f3f2d671e8.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD51-C2\n2 < X-Amz-Cf-Id: XDnyaeshFXOY-4QJXL3KE0ddE1fdyhKq8GsMo7bFAy2Q-kYT-N8RUg==\n{\"data\":{\"CustomerReadModel\":null}}\n"},{"result":{"nanos":13400,"millis":0.0134,"status":"passed"},"step":{"line":65,"prefix":"Then","index":23,"text":"status 200"}},{"result":{"nanos":363600,"millis":0.3636,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":68,"prefix":"*","index":24,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":1011900,"millis":1.0119,"status":"passed"},"step":{"comments":["# Check that the response contains an error"],"line":71,"prefix":"*","index":25,"text":"match response.data.CustomerReadModel != {id: '#(customer_no_exist.id)', name: '#ignore', surname: '#ignore', photoUrl: '', userId: '#ignore' }"}},{"result":{"nanos":4279600,"millis":4.2796,"status":"passed"},"step":{"comments":["#### Users can update a customer","# Get the customer in first position of the list of customers 'list_customers' to update"],"line":77,"prefix":"*","index":26,"text":"def customer_inList = list_customers[0]"}},{"result":{"nanos":1862800,"millis":1.8628,"status":"passed"},"step":{"line":78,"prefix":"*","index":27,"text":"print customer_inList"},"stepLog":"18:10:25.580 [print] {\n  \"photoUrl\": \"\",\n  \"surname\": \"Surname Updated\",\n  \"name\": \"Name Updated\",\n  \"id\": \"2000000011a\",\n  \"userId\": \"user@test.com\"\n}\n \n"},{"result":{"nanos":1463500,"millis":1.4635,"status":"passed"},"step":{"endLine":83,"line":80,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":28,"text":"def queryUpdateCustomer ="}},{"result":{"nanos":1004500,"millis":1.0045,"status":"passed"},"step":{"line":86,"prefix":"*","index":29,"text":"set customer_inList.name = \"Name Updated again\""}},{"result":{"nanos":667400,"millis":0.6674,"status":"passed"},"step":{"line":87,"prefix":"*","index":30,"text":"set customer_inList.surname = \"Surname Updated again\""}},{"result":{"nanos":522900,"millis":0.5229,"status":"passed"},"step":{"line":88,"prefix":"*","index":31,"text":"set customer_inList.id = \"2000000011a\""}},{"result":{"nanos":240500,"millis":0.2405,"status":"passed"},"step":{"comments":["######  * set customer_inList.photoUrl = \"photoUpdated.jpg\"  --- FAIL"],"line":91,"prefix":"Given","index":32,"text":"path 'graphql'"}},{"result":{"nanos":345000,"millis":0.345,"status":"passed"},"step":{"line":92,"prefix":"And","index":33,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":835400,"millis":0.8354,"status":"passed"},"step":{"line":93,"prefix":"And","index":34,"text":"request { query: '#(queryUpdateCustomer)', variables: '#(customer_inList)'}"}},{"result":{"nanos":136450600,"millis":136.4506,"status":"passed"},"step":{"line":94,"prefix":"When","index":35,"text":"method post"},"stepLog":"18:10:25.588 request:\n3 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n3 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 318\n3 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n3 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"photoUrl\":\"\",\"surname\":\"Surname Updated again\",\"name\":\"Name Updated again\",\"id\":\"2000000011a\",\"userId\":\"user@test.com\"},\"query\":\"mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\\r\\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\\r\\n} \"}\n\n18:10:25.722 response time in milliseconds: 133\n3 < 200\n3 < Content-Type: application\/json\n3 < Content-Length: 30\n3 < Connection: keep-alive\n3 < Date: Mon, 17 May 2021 16:10:26 GMT\n3 < x-amzn-RequestId: 0d71400f-6adb-4431-a06b-d916003c5d70\n3 < Access-Control-Allow-Origin: *\n3 < x-amz-apigw-id: fexJ2HJ0DoEFg-g=\n3 < X-Amzn-Trace-Id: Root=1-60a29572-4a09afa012618fe45e412468;Sampled=0\n3 < X-Cache: Miss from cloudfront\n3 < Via: 1.1 0250a97a9fe8f37b6e3c4270db2dc8af.cloudfront.net (CloudFront)\n3 < X-Amz-Cf-Pop: MAD51-C2\n3 < X-Amz-Cf-Id: kxCUz8bA7N4pEZB30ZQ0zckd_XmndLfHb3KfMxhObf9ncr5gHSENAw==\n{\"data\":{\"SaveCustomer\":true}}\n"},{"result":{"nanos":14100,"millis":0.0141,"status":"passed"},"step":{"line":95,"prefix":"Then","index":36,"text":"status 200"}},{"result":{"nanos":4030160100,"millis":4030.1601,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":97,"prefix":"*","index":37,"text":"wait(4000)"}},{"result":{"nanos":353900,"millis":0.3539,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":100,"prefix":"*","index":38,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":581100,"millis":0.5811,"status":"passed"},"step":{"comments":["# Check if the response contains any error"],"line":103,"prefix":"*","index":39,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":343100,"millis":0.3431,"status":"passed"},"step":{"comments":["### Check that the update was fine and the customer has the id of the last user who updated it"],"line":106,"prefix":"Given","index":40,"text":"path 'graphql'"}},{"result":{"nanos":513200,"millis":0.5132,"status":"passed"},"step":{"line":107,"prefix":"And","index":41,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":953100,"millis":0.9531,"status":"passed"},"step":{"line":108,"prefix":"And","index":42,"text":"request { query: '#(queryCustReadModels)'}"}},{"result":{"nanos":295825600,"millis":295.8256,"status":"passed"},"step":{"line":109,"prefix":"When","index":43,"text":"method post"},"stepLog":"18:10:29.758 request:\n4 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n4 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA\n4 > Content-Type: application\/json; charset=UTF-8\n4 > Content-Length: 167\n4 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n4 > Accept-Encoding: gzip,deflate\n{\"query\":\"query CustomerReadModels {\\r\\n    CustomerReadModels {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n18:10:30.051 response time in milliseconds: 292\n4 < 200\n4 < Content-Type: application\/json\n4 < Content-Length: 1162\n4 < Connection: keep-alive\n4 < Date: Mon, 17 May 2021 16:10:30 GMT\n4 < x-amzn-RequestId: f3befcbd-4dcc-4f77-acea-e8f2bc7c69b9\n4 < Access-Control-Allow-Origin: *\n4 < x-amz-apigw-id: fexKgFtBjoEFqAg=\n4 < X-Amzn-Trace-Id: Root=1-60a29576-028422632602a3aa439c069c;Sampled=0\n4 < X-Cache: Miss from cloudfront\n4 < Via: 1.1 b57cfda43c76a33a7043dd5bcd943c1c.cloudfront.net (CloudFront)\n4 < X-Amz-Cf-Pop: MAD51-C2\n4 < X-Amz-Cf-Id: -Z_Mtz1WCgVmBOxzjIfq6vb_fe5G9h44_QA0gaWhOcnlgvbJhT55jw==\n{\"data\":{\"CustomerReadModels\":[{\"photoUrl\":\"\",\"surname\":\"Surname Updated again\",\"name\":\"Name Updated again\",\"id\":\"2000000011a\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer2 Surname\",\"name\":\"Name Updated\",\"id\":\"2\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Surname Updated\",\"name\":\"Name Updated\",\"id\":\"0000aaaa\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Name Updated\",\"id\":\"20000000aa\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer4 surname\",\"name\":\"Customer4 name\",\"id\":\"20000000bb\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2000000012a\",\"userId\":\"user8@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Surname Updated\",\"name\":\"Name Updated\",\"id\":\"0000aaa11\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2000000photo\",\"userId\":\"user8@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"20000000nophoto\",\"userId\":\"user8@test.com\"}]}}\n"},{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"line":110,"prefix":"Then","index":44,"text":"status 200"}},{"result":{"nanos":282100,"millis":0.2821,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":113,"prefix":"*","index":45,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":584700,"millis":0.5847,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":116,"prefix":"*","index":46,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":6802000,"millis":6.802,"status":"passed"},"step":{"line":117,"prefix":"*","index":47,"text":"match response.data.CustomerReadModels contains {id: '#(customer_inList.id)', name: '#(customer_inList.name)', surname: '#(customer_inList.surname)', photoUrl: '#(customer_inList.photoUrl)', userId: '#(datas.username)' }"}}],"executorName":"main","line":10,"name":"Update and list customers by an user not admin","description":"","durationMillis":5941.398,"startTime":1621267823970,"failed":false,"refId":"[1:10]","endTime":1621267830060,"exampleIndex":-1}],"callDepth":0,"name":"Test the query SaveCustomer, CustomerReadModel and CustomerReadModels that an user not admin is allowed to do in the environment set from the java class","description":"","resultDate":"2021-05-17 06:10:30 p. m.","durationMillis":5941.398,"passedCount":1}