{"failedCount":2,"prefixedPath":"classpath:examples\/users\/TestUserChange.feature","packageQualifiedName":"examples.users.TestUserChange","loopIndex":-1,"relativePath":"examples\/users\/TestUserChange.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1671700,"millis":1.6717,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:34.288 karate.env system property was: prod \n"},{"result":{"nanos":57300,"millis":0.0573,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":35809800,"millis":35.8098,"status":"passed"},"step":{"comments":["# Is necessary to sign in the API as admin to create a new user","# Get the idToken for the admin user"],"background":true,"line":12,"prefix":"*","index":2,"text":"def adminDatas = read('signinDatasUser.json')"}},{"result":{"nanos":726954200,"millis":726.9542,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":15,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') adminDatas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":703.7641,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":21200,"millis":0.0212,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":1870400,"millis":1.8704,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":3623300,"millis":3.6233,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"13:31:34.378 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":3911100,"millis":3.9111,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":25500,"millis":0.0255,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":602100,"millis":0.6021,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":691630500,"millis":691.6305,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:31:34.587 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n13:31:35.072 response time in milliseconds: 480\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:35 GMT\n1 < x-amzn-RequestId: 2a7dfa15-165e-44e3-a4cb-d9de455dacf5\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbPtGC_joEFYKA=\n1 < X-Amzn-Trace-Id: Root=1-60a3a597-4a662ad76320343c42a4273e\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 b7f1ef8baa42cd103b00928d6f7d73b6.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: aHgxZuJcRhljkDJQVOaaaFZ-tE_QRG69_vgmz7w22MqCCkq44bWimw==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6Ijc5NGJlMjE1LWRiNTAtNDJmNi04MjMxLWVlMmZjMmI5MzlhNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc0OTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTA5NSwiaWF0IjoxNjIxMzM3NDk1LCJqdGkiOiI5NTU5YWExNC0xZGZjLTQyNDctYjk4Ny0xMDcxNDk4MTJkMzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GsQShvNM8SNJajTiXoRwr6SOK3LpYzjKjQeH-SA9TbFU9z4I6W7pBMZ94E7UWXIVzwa5WpspFC-CUr0GXEovDxlMyRrSMTc4dvCIA3eLy-EJx9H-75mkFhyicGCEe5T63Q4zL-OK0kJtAHd6BA--oe9MJrGK-T5jMnoEUbsrCtuSrBQe_2NYrUB2F14TjxxWBotgLz6qWcJOnLqiAuIBNeTwJUFIh9IbWvv9_s9Moc4dpegJpq6Kp6YIWfWaP9uXSEEwXDNzTSRC8PVOAVOenQMIZCRnBAPJEkCJP13CpAeck3h7qI6xLb46bzELT1YdFzWOKb4GFdAwKoLkB3fK8A\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ABR7JPFGfEDxaswy6Mc15BAo8TecmKwY9yoPQw7QDE9OQSzjv2egPT3oLJrJ0821oxJSyaRcwQPTe5A4ba55hYrvOphCuXn6ogigo18b-dKKF-6T9xBobkbe5i1nllAj5lypvUkrvzLyEYkdbL0w44_giKvXecs8CsFrrECMufJJXgUKrCWPSeSCHrU0V8xEKqKcQyhx_2kJ8JZBIkAkApLK8G7GkMSlCjPGz2zSTQSG5rlw09-6GIGWJyC0YH429K1pNbXmYKfOOw6kjnklcPtp9zX-hEMFwX0zC_-uze5RHsuqs6JFkc3gGbR1pX3Jm0BnPC-RI7UflI_rbakJNQ.ztWfAYehw0I6wKoI.DzpI4WdyblfjF4dJ4-Hs4xfsDcAt01Zuk844bStZKw538PfnYAVaNhDADJO3eyqoWRJDlBw8QnX3yC7ngj_7pLrUSYlpWEk8WWSYyU5ikkj92ShY2iDud9wVrWOtvUAsOiK8mBftMXWHRGRyTBJbglUxt16H1zPaQ0EIajCNzltfMhr1I-0Wjl7Rv0xmXXC2jG8GwBdrO8BDkIp5PUIcYK_CJexVvHcwCsYOsFefoVILZTm16zGDn6EFivkS3IpI6tQrkOkH94AeEoSghtSs0w-_NGaDmjDVd9Xquwhc0p2PdxU124kt9AhLiVvf2EUuK3tISYazv3FXcGe5wJ4ZLc2ZDHsL_7ooqmN24_40flW_XK6qruoGsw7-Z8UXhdaqBvpQZxFikWWpfwVP8HQDeXuUZ3nebdMpr4o_z4HYl2X3pO8vwb5cRpX_ZDpSde0tCQklc2Hqb50mXCuRTD6pVz3dMM7MkYbXB4cNJfcOIMrlT9ZXYX1-XhHJS1oVafvYA5mFjMuCCnO05emhUrFxHHCpz13CFK1Uj41PzQmff0XLlKCHxd31H0jd6gnch1syJZojjRXEr3UXmPfTDvwAQGvAUz7Z-hLRvyIiTD_1m-SS0BllU6LVznL0rWhUlHKu6wrzPCRY-cT_8zVLwwG5R6lSwuTjp1NzIOVYkAU4DLTxE8kOYhxBnxkdOzP8-6MC45t2GKPr7RBgiHEJBBpOy4cLpOOp4KNAMNm2xrRqLDMBTcmjfopJbxgg0BSceSjBz0MuTx5qddvCt34KzuAXweUotypwL-7bWqOKJ5l9A9egMoow2JPShQogfVFArsjzy7ztH0sjZ5BBAM7tkQZOaVqBIhQmSv6hSJmnniMIiXFP7v_AZ-CtEd1B2_eXW4dPjQ3ZaWwsxZ5Z7nAhW-HfGqw7xRTDa1Xe0rdJP90h7Asb0LZnZ4Q227F2FTwaqIQ662CT9fFIRuW4VodO3GSNkznpA-Djbx52cGhU7fUv_Laj0UGCfvv6AJyeal0UdvrAQZGLKmgE__7EBGX-FXzyyRxqSKBu3FxDjT0kC6iicP5SEVyxWSj5gHRo6G2NwbA_qJC3PabfUX_q-qsgw-6BmK7f9EHZShan7VvzJ6BtW1r6aOLDrB7h-3JTnQT3lgPx924ND5NPqGkRkZ7JnJ4faNQSQExbxWSMvAjmCfxJ1uOhckUTKsEiwWoztZg-WsYt3UsqAA2iwOrqNMDv5o9ZjxFANfukbzwBJhnJ0kop_F777elycs9-QvOXPNxPkoPVO87OVgMwjzhghkPJXhjY6dngG_Jtep-hy7_HQuaglIeIDJig6PHsyjZek5LXxlY.3Z1ebTtkwHz9B2Qw0Z7mkQ\"}\n"},{"result":{"nanos":24600,"millis":0.0246,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":938200,"millis":0.9382,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1117200,"millis":1.1172,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"13:31:35.077 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":703.7641,"startTime":1621337494373,"failed":false,"refId":"[1:6]","endTime":1621337495077,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":1996900,"millis":1.9969,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"13:31:35.081 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6Ijc5NGJlMjE1LWRiNTAtNDJmNi04MjMxLWVlMmZjMmI5MzlhNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc0OTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTA5NSwiaWF0IjoxNjIxMzM3NDk1LCJqdGkiOiI5NTU5YWExNC0xZGZjLTQyNDctYjk4Ny0xMDcxNDk4MTJkMzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GsQShvNM8SNJajTiXoRwr6SOK3LpYzjKjQeH-SA9TbFU9z4I6W7pBMZ94E7UWXIVzwa5WpspFC-CUr0GXEovDxlMyRrSMTc4dvCIA3eLy-EJx9H-75mkFhyicGCEe5T63Q4zL-OK0kJtAHd6BA--oe9MJrGK-T5jMnoEUbsrCtuSrBQe_2NYrUB2F14TjxxWBotgLz6qWcJOnLqiAuIBNeTwJUFIh9IbWvv9_s9Moc4dpegJpq6Kp6YIWfWaP9uXSEEwXDNzTSRC8PVOAVOenQMIZCRnBAPJEkCJP13CpAeck3h7qI6xLb46bzELT1YdFzWOKb4GFdAwKoLkB3fK8A\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ABR7JPFGfEDxaswy6Mc15BAo8TecmKwY9yoPQw7QDE9OQSzjv2egPT3oLJrJ0821oxJSyaRcwQPTe5A4ba55hYrvOphCuXn6ogigo18b-dKKF-6T9xBobkbe5i1nllAj5lypvUkrvzLyEYkdbL0w44_giKvXecs8CsFrrECMufJJXgUKrCWPSeSCHrU0V8xEKqKcQyhx_2kJ8JZBIkAkApLK8G7GkMSlCjPGz2zSTQSG5rlw09-6GIGWJyC0YH429K1pNbXmYKfOOw6kjnklcPtp9zX-hEMFwX0zC_-uze5RHsuqs6JFkc3gGbR1pX3Jm0BnPC-RI7UflI_rbakJNQ.ztWfAYehw0I6wKoI.DzpI4WdyblfjF4dJ4-Hs4xfsDcAt01Zuk844bStZKw538PfnYAVaNhDADJO3eyqoWRJDlBw8QnX3yC7ngj_7pLrUSYlpWEk8WWSYyU5ikkj92ShY2iDud9wVrWOtvUAsOiK8mBftMXWHRGRyTBJbglUxt16H1zPaQ0EIajCNzltfMhr1I-0Wjl7Rv0xmXXC2jG8GwBdrO8BDkIp5PUIcYK_CJexVvHcwCsYOsFefoVILZTm16zGDn6EFivkS3IpI6tQrkOkH94AeEoSghtSs0w-_NGaDmjDVd9Xquwhc0p2PdxU124kt9AhLiVvf2EUuK3tISYazv3FXcGe5wJ4ZLc2ZDHsL_7ooqmN24_40flW_XK6qruoGsw7-Z8UXhdaqBvpQZxFikWWpfwVP8HQDeXuUZ3nebdMpr4o_z4HYl2X3pO8vwb5cRpX_ZDpSde0tCQklc2Hqb50mXCuRTD6pVz3dMM7MkYbXB4cNJfcOIMrlT9ZXYX1-XhHJS1oVafvYA5mFjMuCCnO05emhUrFxHHCpz13CFK1Uj41PzQmff0XLlKCHxd31H0jd6gnch1syJZojjRXEr3UXmPfTDvwAQGvAUz7Z-hLRvyIiTD_1m-SS0BllU6LVznL0rWhUlHKu6wrzPCRY-cT_8zVLwwG5R6lSwuTjp1NzIOVYkAU4DLTxE8kOYhxBnxkdOzP8-6MC45t2GKPr7RBgiHEJBBpOy4cLpOOp4KNAMNm2xrRqLDMBTcmjfopJbxgg0BSceSjBz0MuTx5qddvCt34KzuAXweUotypwL-7bWqOKJ5l9A9egMoow2JPShQogfVFArsjzy7ztH0sjZ5BBAM7tkQZOaVqBIhQmSv6hSJmnniMIiXFP7v_AZ-CtEd1B2_eXW4dPjQ3ZaWwsxZ5Z7nAhW-HfGqw7xRTDa1Xe0rdJP90h7Asb0LZnZ4Q227F2FTwaqIQ662CT9fFIRuW4VodO3GSNkznpA-Djbx52cGhU7fUv_Laj0UGCfvv6AJyeal0UdvrAQZGLKmgE__7EBGX-FXzyyRxqSKBu3FxDjT0kC6iicP5SEVyxWSj5gHRo6G2NwbA_qJC3PabfUX_q-qsgw-6BmK7f9EHZShan7VvzJ6BtW1r6aOLDrB7h-3JTnQT3lgPx924ND5NPqGkRkZ7JnJ4faNQSQExbxWSMvAjmCfxJ1uOhckUTKsEiwWoztZg-WsYt3UsqAA2iwOrqNMDv5o9ZjxFANfukbzwBJhnJ0kop_F777elycs9-QvOXPNxPkoPVO87OVgMwjzhghkPJXhjY6dngG_Jtep-hy7_HQuaglIeIDJig6PHsyjZek5LXxlY.3Z1ebTtkwHz9B2Qw0Z7mkQ\"\n}\n \n"},{"result":{"nanos":822800,"millis":0.8228,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":5,"text":"def adminToken = signIn.response"}},{"result":{"nanos":38696571000,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190\nclasspath:examples\/users\/TestUserChange.feature:21","millis":38696.571,"status":"failed"},"step":{"line":21,"prefix":"*","index":0,"text":"def testAdmin = call read('TestUserAdmin.feature') adminToken"},"stepLog":"13:32:13.779 classpath:examples\/users\/TestUserChange.feature:21\n* def testAdmin = call read('TestUserAdmin.feature') adminToken\nmatch failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190\nclasspath:examples\/users\/TestUserChange.feature:21\n","callResults":[{"prefixedPath":"classpath:examples\/users\/TestUserAdmin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":38597.4659,"callArg":{"expiresIn":"3600","idToken":"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg","accessToken":"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6Ijc5NGJlMjE1LWRiNTAtNDJmNi04MjMxLWVlMmZjMmI5MzlhNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc0OTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTA5NSwiaWF0IjoxNjIxMzM3NDk1LCJqdGkiOiI5NTU5YWExNC0xZGZjLTQyNDctYjk4Ny0xMDcxNDk4MTJkMzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GsQShvNM8SNJajTiXoRwr6SOK3LpYzjKjQeH-SA9TbFU9z4I6W7pBMZ94E7UWXIVzwa5WpspFC-CUr0GXEovDxlMyRrSMTc4dvCIA3eLy-EJx9H-75mkFhyicGCEe5T63Q4zL-OK0kJtAHd6BA--oe9MJrGK-T5jMnoEUbsrCtuSrBQe_2NYrUB2F14TjxxWBotgLz6qWcJOnLqiAuIBNeTwJUFIh9IbWvv9_s9Moc4dpegJpq6Kp6YIWfWaP9uXSEEwXDNzTSRC8PVOAVOenQMIZCRnBAPJEkCJP13CpAeck3h7qI6xLb46bzELT1YdFzWOKb4GFdAwKoLkB3fK8A","tokenType":"Bearer","refreshToken":"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ABR7JPFGfEDxaswy6Mc15BAo8TecmKwY9yoPQw7QDE9OQSzjv2egPT3oLJrJ0821oxJSyaRcwQPTe5A4ba55hYrvOphCuXn6ogigo18b-dKKF-6T9xBobkbe5i1nllAj5lypvUkrvzLyEYkdbL0w44_giKvXecs8CsFrrECMufJJXgUKrCWPSeSCHrU0V8xEKqKcQyhx_2kJ8JZBIkAkApLK8G7GkMSlCjPGz2zSTQSG5rlw09-6GIGWJyC0YH429K1pNbXmYKfOOw6kjnklcPtp9zX-hEMFwX0zC_-uze5RHsuqs6JFkc3gGbR1pX3Jm0BnPC-RI7UflI_rbakJNQ.ztWfAYehw0I6wKoI.DzpI4WdyblfjF4dJ4-Hs4xfsDcAt01Zuk844bStZKw538PfnYAVaNhDADJO3eyqoWRJDlBw8QnX3yC7ngj_7pLrUSYlpWEk8WWSYyU5ikkj92ShY2iDud9wVrWOtvUAsOiK8mBftMXWHRGRyTBJbglUxt16H1zPaQ0EIajCNzltfMhr1I-0Wjl7Rv0xmXXC2jG8GwBdrO8BDkIp5PUIcYK_CJexVvHcwCsYOsFefoVILZTm16zGDn6EFivkS3IpI6tQrkOkH94AeEoSghtSs0w-_NGaDmjDVd9Xquwhc0p2PdxU124kt9AhLiVvf2EUuK3tISYazv3FXcGe5wJ4ZLc2ZDHsL_7ooqmN24_40flW_XK6qruoGsw7-Z8UXhdaqBvpQZxFikWWpfwVP8HQDeXuUZ3nebdMpr4o_z4HYl2X3pO8vwb5cRpX_ZDpSde0tCQklc2Hqb50mXCuRTD6pVz3dMM7MkYbXB4cNJfcOIMrlT9ZXYX1-XhHJS1oVafvYA5mFjMuCCnO05emhUrFxHHCpz13CFK1Uj41PzQmff0XLlKCHxd31H0jd6gnch1syJZojjRXEr3UXmPfTDvwAQGvAUz7Z-hLRvyIiTD_1m-SS0BllU6LVznL0rWhUlHKu6wrzPCRY-cT_8zVLwwG5R6lSwuTjp1NzIOVYkAU4DLTxE8kOYhxBnxkdOzP8-6MC45t2GKPr7RBgiHEJBBpOy4cLpOOp4KNAMNm2xrRqLDMBTcmjfopJbxgg0BSceSjBz0MuTx5qddvCt34KzuAXweUotypwL-7bWqOKJ5l9A9egMoow2JPShQogfVFArsjzy7ztH0sjZ5BBAM7tkQZOaVqBIhQmSv6hSJmnniMIiXFP7v_AZ-CtEd1B2_eXW4dPjQ3ZaWwsxZ5Z7nAhW-HfGqw7xRTDa1Xe0rdJP90h7Asb0LZnZ4Q227F2FTwaqIQ662CT9fFIRuW4VodO3GSNkznpA-Djbx52cGhU7fUv_Laj0UGCfvv6AJyeal0UdvrAQZGLKmgE__7EBGX-FXzyyRxqSKBu3FxDjT0kC6iicP5SEVyxWSj5gHRo6G2NwbA_qJC3PabfUX_q-qsgw-6BmK7f9EHZShan7VvzJ6BtW1r6aOLDrB7h-3JTnQT3lgPx924ND5NPqGkRkZ7JnJ4faNQSQExbxWSMvAjmCfxJ1uOhckUTKsEiwWoztZg-WsYt3UsqAA2iwOrqNMDv5o9ZjxFANfukbzwBJhnJ0kop_F777elycs9-QvOXPNxPkoPVO87OVgMwjzhghkPJXhjY6dngG_Jtep-hy7_HQuaglIeIDJig6PHsyjZek5LXxlY.3Z1ebTtkwHz9B2Qw0Z7mkQ"},"failedCount":1,"packageQualifiedName":"examples.users.TestUserAdmin","relativePath":"examples\/users\/TestUserAdmin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1112800,"millis":1.1128,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:35.106 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":10400,"millis":0.0104,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":1005700,"millis":1.0057,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":868300,"millis":0.8683,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":636300,"millis":0.6363,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":690300,"millis":0.6903,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":697700,"millis":0.6977,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":607000,"millis":0.607,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":586700,"millis":0.5867,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":466100,"millis":0.4661,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":721500,"millis":0.7215,"status":"passed"},"step":{"comments":["# JSON file with the new user's datas"],"line":48,"prefix":"*","index":0,"text":"def NewUser = read('NewUser.json')"}},{"result":{"nanos":392700,"millis":0.3927,"status":"passed"},"step":{"line":50,"prefix":"Given","index":1,"text":"path 'graphql'"}},{"result":{"nanos":10257500,"millis":10.2575,"status":"passed"},"step":{"line":51,"prefix":"And","index":2,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":1085700,"millis":1.0857,"status":"passed"},"step":{"line":52,"prefix":"And","index":3,"text":"request { query: '#(querySaveUser)',  variables: '#(NewUser)'}"}},{"result":{"nanos":2387272800,"millis":2387.2728,"status":"passed"},"step":{"line":53,"prefix":"When","index":4,"text":"method post"},"stepLog":"13:31:35.128 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 250\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_2\",\"role\":\"User\",\"username\":\"user3@test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n13:31:37.512 response time in milliseconds: 2382\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 26\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:38 GMT\n1 < x-amzn-RequestId: 2df09ada-fcec-4eef-b322-03ab9429c3eb\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbPxHJljoEFSLw=\n1 < X-Amzn-Trace-Id: Root=1-60a3a598-28a602d80c3f805c0735ec0f;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 77fcce204f96e329df7227f192690939.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: RjRK9rnocmc_jTT4nv2W59kd4kO5e45zmfxM4SpHMl9mx5EaskcVOA==\n{\"data\":{\"SaveUser\":true}}\n"},{"result":{"nanos":19000,"millis":0.019,"status":"passed"},"step":{"line":54,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":4033567600,"millis":4033.5676,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":57,"prefix":"*","index":6,"text":"wait(4000)"}},{"result":{"nanos":2225500,"millis":2.2255,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":59,"prefix":"*","index":7,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":15413500,"millis":15.4135,"status":"passed"},"step":{"comments":["# if the user can't be created, the response contains a field \"error\""],"line":61,"prefix":"*","index":8,"text":"match response.errors == '#notpresent'"}}],"executorName":"main","line":45,"name":"The user admin save a new user","description":"","durationMillis":6457.6371,"startTime":1621337495106,"failed":false,"refId":"[1:45]","endTime":1621337501565,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":544700,"millis":0.5447,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:41.573 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":9700,"millis":0.0097,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":946500,"millis":0.9465,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":705000,"millis":0.705,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":678200,"millis":0.6782,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":587000,"millis":0.587,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":546900,"millis":0.5469,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":543100,"millis":0.5431,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":904100,"millis":0.9041,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":492500,"millis":0.4925,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":710900,"millis":0.7109,"status":"passed"},"step":{"comments":["#### Check the new user created before","# Define the username of the user to list"],"line":67,"prefix":"*","index":0,"text":"def newUser = read('NewUser.json')"}},{"result":{"nanos":680100,"millis":0.6801,"status":"passed"},"step":{"endLine":73,"line":68,"prefix":"*","docString":"{ \n   \"id\": \"#(newUser.username)\"\n}","index":1,"text":"def id ="}},{"result":{"nanos":1203800,"millis":1.2038,"status":"passed"},"step":{"line":74,"prefix":"*","index":2,"text":"print id"},"stepLog":"13:31:41.582 [print] {\n  \"id\": \"user3@test.com\"\n}\n \n"},{"result":{"nanos":431800,"millis":0.4318,"status":"passed"},"step":{"line":76,"prefix":"Given","index":3,"text":"path 'graphql'"}},{"result":{"nanos":565200,"millis":0.5652,"status":"passed"},"step":{"line":77,"prefix":"And","index":4,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":228400,"millis":0.2284,"status":"passed"},"step":{"line":78,"prefix":"And","index":5,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":605000,"millis":0.605,"status":"passed"},"step":{"line":79,"prefix":"And","index":6,"text":"request { query: '#(queryUserReadModel)', variables: '#(id)' }"}},{"result":{"nanos":266768700,"millis":266.7687,"status":"passed"},"step":{"line":80,"prefix":"When","index":7,"text":"method post"},"stepLog":"13:31:41.586 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 155\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"user3@test.com\"},\"query\":\"query UserReadModel($id: ID!) {\\r\\n    UserReadModel(id: $id) {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n13:31:41.849 response time in milliseconds: 262\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 64\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:42 GMT\n1 < x-amzn-RequestId: 616533e6-2e93-413f-83d7-2955f918fbb3\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbQzE8LjoEFvaw=\n1 < X-Amzn-Trace-Id: Root=1-60a3a59e-3216e87d6cdcaad859377933;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 803bb8de3c7a92b10030fcaaf02a53d3.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: bUoPhwk89XEPi5BAYd8fyWTg-SNQZkTbxqL8owRJgCcuTy5DtGYKFA==\n{\"data\":{\"UserReadModel\":{\"role\":\"User\",\"id\":\"user3@test.com\"}}}\n"},{"result":{"nanos":15200,"millis":0.0152,"status":"passed"},"step":{"line":81,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":447300,"millis":0.4473,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":84,"prefix":"*","index":9,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":2099100,"millis":2.0991,"status":"passed"},"step":{"comments":["# If the new user was created, the response of the query must contain the datas of the user"],"line":86,"prefix":"*","index":10,"text":"match response.data.UserReadModel == {id: '#(newUser.username)', role: '#(newUser.role)' }"}}],"executorName":"main","line":64,"name":"List the new user by id","description":"","durationMillis":279.7132,"startTime":1621337501573,"failed":false,"refId":"[2:64]","endTime":1621337501854,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":741100,"millis":0.7411,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:41.868 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":706100,"millis":0.7061,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":535900,"millis":0.5359,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":477200,"millis":0.4772,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":333400,"millis":0.3334,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":382800,"millis":0.3828,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":292000,"millis":0.292,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":337400,"millis":0.3374,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":298500,"millis":0.2985,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":1171200,"millis":1.1712,"status":"passed"},"step":{"comments":["## the password format isn't allowed"],"line":90,"prefix":"*","index":0,"text":"def newUserBadPassword = read('newUser_BadPassword.json')"}},{"result":{"nanos":163700,"millis":0.1637,"status":"passed"},"step":{"line":92,"prefix":"Given","index":1,"text":"path 'graphql'"}},{"result":{"nanos":194100,"millis":0.1941,"status":"passed"},"step":{"line":93,"prefix":"And","index":2,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":63300,"millis":0.0633,"status":"passed"},"step":{"line":94,"prefix":"And","index":3,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":736400,"millis":0.7364,"status":"passed"},"step":{"line":95,"prefix":"And","index":4,"text":"request { query: '#(querySaveUser)', variables: '#(newUserBadPassword)' }"}},{"result":{"nanos":450946800,"millis":450.9468,"status":"passed"},"step":{"line":96,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:31:41.876 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 254\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password\",\"role\":\"User\",\"username\":\"userBadPass@test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n13:31:42.323 response time in milliseconds: 445\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 155\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:43 GMT\n1 < x-amzn-RequestId: c3381013-b301-49ce-9895-881f9c04f145\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbQ2H3rjoEF1ew=\n1 < X-Amzn-Trace-Id: Root=1-60a3a59e-11bf968b7c940d9e107d80c7;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 546db6834bf5885f55b5457c969e7ad6.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: hpmmKCcypQT_I9-IrjXj_nF3wjztlO2nCev1Eo9X7u5pjpXR0l2C6Q==\n{\"data\":{\"SaveUser\":null},\"errors\":[{\"path\":[\"SaveUser\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"An account with the given email already exists.\"}]}\n"},{"result":{"nanos":22300,"millis":0.0223,"status":"passed"},"step":{"line":97,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":4013436100,"millis":4013.4361,"status":"passed"},"step":{"line":98,"prefix":"*","index":7,"text":"wait(4000)"}},{"result":{"nanos":423100,"millis":0.4231,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":101,"prefix":"*","index":8,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":512600,"millis":0.5126,"status":"passed"},"step":{"comments":["# The response return an error"],"line":103,"prefix":"*","index":9,"text":"match response.errors != '#notpresent'"}},{"result":{"nanos":1949800,"millis":1.9498,"status":"passed"},"step":{"comments":["## the username format isn't allowed"],"line":106,"prefix":"*","index":10,"text":"def newUserBadUsername = read('newUser_BadUsername.json')"}},{"result":{"nanos":332600,"millis":0.3326,"status":"passed"},"step":{"line":108,"prefix":"Given","index":11,"text":"path 'graphql'"}},{"result":{"nanos":410500,"millis":0.4105,"status":"passed"},"step":{"line":109,"prefix":"And","index":12,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":231900,"millis":0.2319,"status":"passed"},"step":{"line":110,"prefix":"And","index":13,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":632300,"millis":0.6323,"status":"passed"},"step":{"line":111,"prefix":"And","index":14,"text":"request { query: '#(querySaveUser)', variables: '#(newUserBadUsername)' }"}},{"result":{"nanos":487273100,"millis":487.2731,"status":"passed"},"step":{"line":112,"prefix":"When","index":15,"text":"method post"},"stepLog":"13:31:46.346 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 250\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_1\",\"role\":\"User\",\"username\":\"user10test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n13:31:46.829 response time in milliseconds: 482\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 137\n2 < Connection: keep-alive\n2 < Date: Tue, 18 May 2021 11:31:47 GMT\n2 < x-amzn-RequestId: 52e0adc3-b33f-47b8-aa32-c99a08213c9d\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fhbRiEmsDoEFYwQ=\n2 < X-Amzn-Trace-Id: Root=1-60a3a5a3-5aab27c43b5d4fa53cbd6633;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 86b86f43445d5446c8b16910b2a9b8f9.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD50-C1\n2 < X-Amz-Cf-Id: 93eM9BBYpRP6zKInOWLx1fSXS3rbTQ8H_NjmKhgUq1bsVpRuzeaTAQ==\n{\"data\":{\"SaveUser\":null},\"errors\":[{\"path\":[\"SaveUser\"],\"locations\":[{\"line\":2,\"column\":5}],\"message\":\"Invalid email address format.\"}]}\n"},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":113,"prefix":"Then","index":16,"text":"status 200"}},{"result":{"nanos":4004355900,"millis":4004.3559,"status":"passed"},"step":{"line":114,"prefix":"*","index":17,"text":"wait(4000)"}},{"result":{"nanos":375400,"millis":0.3754,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":117,"prefix":"*","index":18,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":551300,"millis":0.5513,"status":"passed"},"step":{"comments":["# The response return an error"],"line":119,"prefix":"*","index":19,"text":"match response.errors != '#notpresent'"}}],"executorName":"main","line":88,"name":"Test that datas must be correct to create a new user","description":"","durationMillis":8967.9213,"startTime":1621337501868,"failed":false,"refId":"[3:88]","endTime":1621337510838,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":379700,"millis":0.3797,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:50.847 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":344300,"millis":0.3443,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":255300,"millis":0.2553,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":202600,"millis":0.2026,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":183200,"millis":0.1832,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":181000,"millis":0.181,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":178400,"millis":0.1784,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":212900,"millis":0.2129,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":171700,"millis":0.1717,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":123000,"millis":0.123,"status":"passed"},"step":{"comments":["# Get the query from a .feature field"],"line":125,"prefix":"Given","index":0,"text":"path 'graphql'"}},{"result":{"nanos":171500,"millis":0.1715,"status":"passed"},"step":{"line":126,"prefix":"And","index":1,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":47900,"millis":0.0479,"status":"passed"},"step":{"line":127,"prefix":"And","index":2,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":401600,"millis":0.4016,"status":"passed"},"step":{"line":128,"prefix":"And","index":3,"text":"request { query: '#(queryUserReadModels)' }"}},{"result":{"nanos":136475000,"millis":136.475,"status":"passed"},"step":{"line":129,"prefix":"When","index":4,"text":"method post"},"stepLog":"13:31:50.851 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 102\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query UserReadModels {\\r\\n    UserReadModels {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n13:31:50.985 response time in milliseconds: 133\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 67\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:51 GMT\n1 < x-amzn-RequestId: 24fdf896-db2a-4ac6-8cea-059786273350\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbSOHm4joEFlLA=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5a7-312544025cc74a4048952774;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 3d894cf86d3eca85fdb4b21f62292766.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: eUPd32PMW5_yPwKKhGS9j0F622xkcakPzTIwGlWgMMpzh-UVPicJXA==\n{\"data\":{\"UserReadModels\":[{\"role\":\"User\",\"id\":\"user3@test.com\"}]}}\n"},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":130,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":375900,"millis":0.3759,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":133,"prefix":"*","index":6,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":580500,"millis":0.5805,"status":"passed"},"step":{"comments":["# Check that the list is displayed"],"line":135,"prefix":"*","index":7,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":684700,"millis":0.6847,"status":"passed"},"step":{"line":136,"prefix":"*","index":8,"text":"match response.data.UserReadModels contains { id: '#ignore', role: '#ignore' }"}}],"executorName":"main","line":122,"name":"The user admin can list all the users","description":"","durationMillis":140.9928,"startTime":1621337510847,"failed":false,"refId":"[4:122]","endTime":1621337510988,"exampleIndex":-1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":628700,"millis":0.6287,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:50.998 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":552100,"millis":0.5521,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":378400,"millis":0.3784,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":375600,"millis":0.3756,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":331200,"millis":0.3312,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":326400,"millis":0.3264,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":317100,"millis":0.3171,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":308500,"millis":0.3085,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":343300,"millis":0.3433,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":1711200,"millis":1.7112,"status":"passed"},"step":{"comments":["### without photo","# JSON file with the new user's datas","# In this case, the photoUrl field isn't filled"],"line":144,"prefix":"*","index":0,"text":"def new_customerNoPhoto = read('NewCustomerNoPhoto.json')"}},{"result":{"nanos":239600,"millis":0.2396,"status":"passed"},"step":{"line":146,"prefix":"Given","index":1,"text":"path 'graphql'"}},{"result":{"nanos":332600,"millis":0.3326,"status":"passed"},"step":{"line":147,"prefix":"And","index":2,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":1143400,"millis":1.1434,"status":"passed"},"step":{"line":148,"prefix":"And","index":3,"text":"request { query: '#(querySaveCustomer)',  variables: '#(new_customerNoPhoto)'}"}},{"result":{"nanos":228165100,"millis":228.1651,"status":"passed"},"step":{"line":149,"prefix":"When","index":4,"text":"method post"},"stepLog":"13:31:51.007 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 284\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"photo\":\"\",\"id\":\"23000000nophoto\"},\"query\":\"mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\\r\\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\\r\\n} \"}\n\n13:31:51.232 response time in milliseconds: 224\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 30\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:31:52 GMT\n1 < x-amzn-RequestId: 63ec105c-f02f-4f2e-bdff-6cbede740d8f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbSQGvxDoEFVZw=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5a7-335999883ec1cfdc3976f61c;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 6e828213221a8cbea0c54b35955f0008.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: dGj55rLY7bsV-ilKKAh77rsYDpyouI1LnODuTrNUvwjRU32mBrU7ew==\n{\"data\":{\"SaveCustomer\":true}}\n"},{"result":{"nanos":16400,"millis":0.0164,"status":"passed"},"step":{"line":150,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":4009860400,"millis":4009.8604,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":152,"prefix":"*","index":6,"text":"wait(4000)"}},{"result":{"nanos":8662100,"millis":8.6621,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":155,"prefix":"*","index":7,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":850200,"millis":0.8502,"status":"passed"},"step":{"comments":["# If the customer is saved, the response shouldn't contain a field \"error\""],"line":157,"prefix":"*","index":8,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":2384200,"millis":2.3842,"status":"passed"},"step":{"comments":["### This time, the field photo is filled"],"line":160,"prefix":"*","index":9,"text":"def new_customerPhoto = read('NewCustomerPhoto.json')"}},{"result":{"nanos":164100,"millis":0.1641,"status":"passed"},"step":{"line":162,"prefix":"Given","index":10,"text":"path 'graphql'"}},{"result":{"nanos":276800,"millis":0.2768,"status":"passed"},"step":{"line":163,"prefix":"And","index":11,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":501000,"millis":0.501,"status":"passed"},"step":{"line":164,"prefix":"And","index":12,"text":"request { query: '#(querySaveCustomer)',  variables: '#(new_customerPhoto)'}"}},{"result":{"nanos":277166300,"millis":277.1663,"status":"passed"},"step":{"line":165,"prefix":"When","index":13,"text":"method post"},"stepLog":"13:31:55.258 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 290\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"photo\":\"photo.jpg\",\"id\":\"2100000photo\"},\"query\":\"mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\\r\\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\\r\\n} \"}\n\n13:31:55.533 response time in milliseconds: 274\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 30\n2 < Connection: keep-alive\n2 < Date: Tue, 18 May 2021 11:31:56 GMT\n2 < x-amzn-RequestId: ecbcfa81-3a11-4b94-88a3-8669b300a5f3\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fhbS7GfkjoEFz8Q=\n2 < X-Amzn-Trace-Id: Root=1-60a3a5ac-2ea0b03c389fd967583ebf8a;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 713e5c81a0f7ad564b97cf451e92aaac.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD50-C1\n2 < X-Amz-Cf-Id: iwaTHRdRfZRuQTdbLGfH6xb9OzUVPgucGyN08sho0Ki2ut1SGYKVyw==\n{\"data\":{\"SaveCustomer\":true}}\n"},{"result":{"nanos":20200,"millis":0.0202,"status":"passed"},"step":{"line":166,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":4014955900,"millis":4014.9559,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":168,"prefix":"*","index":15,"text":"wait(4000)"}},{"result":{"nanos":367800,"millis":0.3678,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":171,"prefix":"*","index":16,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":607800,"millis":0.6078,"status":"passed"},"step":{"comments":["# If the customer is saved, the response shouldn't contain a field \"error\""],"line":173,"prefix":"*","index":17,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":277900,"millis":0.2779,"status":"passed"},"step":{"comments":["#### List all the customers to check that the creation was fine"],"line":178,"prefix":"Given","index":18,"text":"path 'graphql'"}},{"result":{"nanos":385000,"millis":0.385,"status":"passed"},"step":{"line":179,"prefix":"And","index":19,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":885500,"millis":0.8855,"status":"passed"},"step":{"line":180,"prefix":"And","index":20,"text":"request { query: '#(queryCustReadModels)'}"}},{"result":{"nanos":283259900,"millis":283.2599,"status":"passed"},"step":{"line":181,"prefix":"When","index":21,"text":"method post"},"stepLog":"13:31:59.554 request:\n3 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n3 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 167\n3 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n3 > Accept-Encoding: gzip,deflate\n{\"query\":\"query CustomerReadModels {\\r\\n    CustomerReadModels {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n13:31:59.834 response time in milliseconds: 279\n3 < 200\n3 < Content-Type: application\/json\n3 < Content-Length: 397\n3 < Connection: keep-alive\n3 < Date: Tue, 18 May 2021 11:32:00 GMT\n3 < x-amzn-RequestId: f8d99be7-031c-4c9d-bb93-9f0f31b1f7d9\n3 < Access-Control-Allow-Origin: *\n3 < x-amz-apigw-id: fhbTmEmpjoEF8oQ=\n3 < X-Amzn-Trace-Id: Root=1-60a3a5b0-39fbbf934d395acc4968b084;Sampled=0\n3 < X-Cache: Miss from cloudfront\n3 < Via: 1.1 b7f1ef8baa42cd103b00928d6f7d73b6.cloudfront.net (CloudFront)\n3 < X-Amz-Cf-Pop: MAD50-C1\n3 < X-Amz-Cf-Id: G_ztc6ocSHMKnLbwnVQTBtFH7ycrCS1gO0XjPaJd1TAArJeC4HQnTw==\n{\"data\":{\"CustomerReadModels\":[{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]}}\n"},{"result":{"nanos":19700,"millis":0.0197,"status":"passed"},"step":{"line":182,"prefix":"Then","index":22,"text":"status 200"}},{"result":{"nanos":368200,"millis":0.3682,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":185,"prefix":"*","index":23,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":736800,"millis":0.7368,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":188,"prefix":"*","index":24,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":15688300,"errorMessage":"match failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190","millis":15.6883,"status":"failed"},"step":{"comments":["# Check the customers created before"],"line":190,"prefix":"*","index":25,"text":"match response.data.CustomerReadModels contains {id: '#(new_customerPhoto.id)', name: '#(new_customerPhoto.name)', surname: '#(new_customerPhoto.surname)', photoUrl: '#(new_customerPhoto.photoUrl)', userId: '#(datas.username)' }"},"stepLog":"13:31:59.853 classpath:examples\/users\/TestUserAdmin.feature:190\n* match response.data.CustomerReadModels contains {id: '#(new_customerPhoto.id)', name: '#(new_customerPhoto.name)', surname: '#(new_customerPhoto.surname)', photoUrl: '#(new_customerPhoto.photoUrl)', userId: '#(datas.username)' }\nmatch failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":191,"prefix":"*","index":26,"text":"match response.data.CustomerReadModels contains {id: '#(new_customerNoPhoto.id)', name: '#(new_customerNoPhoto.name)', surname: '#(new_customerNoPhoto.surname)', photoUrl: '#(new_customerNoPhoto.photoUrl)', userId: '#(datas.username)' }"}}],"line":139,"description":"","durationMillis":8852.6203,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190","executorName":"main","name":"The admin user can create customers:","startTime":1621337510998,"refId":"[5:139]","endTime":1621337519853,"exampleIndex":-1},{"sectionIndex":5,"stepResults":[{"result":{"nanos":494400,"millis":0.4944,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:31:59.862 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":13500,"millis":0.0135,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":506400,"millis":0.5064,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":511000,"millis":0.511,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":308900,"millis":0.3089,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":568300,"millis":0.5683,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":296900,"millis":0.2969,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":247600,"millis":0.2476,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":248900,"millis":0.2489,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":208900,"millis":0.2089,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":290100,"millis":0.2901,"status":"passed"},"step":{"comments":["# Change the role of the new user created before 'NewUser'","# JSON file with the new user role"],"line":198,"prefix":"*","index":0,"text":"def NewUserRole = read('NewUser.json')"}},{"result":{"nanos":637900,"millis":0.6379,"status":"passed"},"step":{"line":200,"prefix":"*","index":1,"text":"set NewUserRole.role = \"role changed\""}},{"result":{"nanos":148100,"millis":0.1481,"status":"passed"},"step":{"line":202,"prefix":"Given","index":2,"text":"path 'graphql'"}},{"result":{"nanos":223500,"millis":0.2235,"status":"passed"},"step":{"line":203,"prefix":"And","index":3,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":657700,"millis":0.6577,"status":"passed"},"step":{"line":204,"prefix":"And","index":4,"text":"request { query: '#(queryChangeUserRole)',  variables: '#(NewUserRole)'}"}},{"result":{"nanos":479827000,"millis":479.827,"status":"passed"},"step":{"line":205,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:31:59.869 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 227\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_2\",\"role\":\"role changed\",\"username\":\"user3@test.com\"},\"query\":\"mutation ChangeUserRole($username: String, $role: String) {\\r\\n  ChangeUserRole(input: {username: $username, role: $role})\\r\\n}\"}\n\n13:32:00.346 response time in milliseconds: 476\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 32\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:01 GMT\n1 < x-amzn-RequestId: 58a0d788-0244-48df-90ab-2cd27bcfe171\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbTpH1oDoEFQiQ=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5b0-41a296c26d075dd55d018618;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 17a71b4bf5d35b398b0fd90a5cd154a7.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: J-DMA81Kmg8_4nAbfuzuBSNeYsxfYoNnRbgJLCZg4qv8HP8jl_GXkA==\n{\"data\":{\"ChangeUserRole\":true}}\n"},{"result":{"nanos":18600,"millis":0.0186,"status":"passed"},"step":{"line":206,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":4006033700,"millis":4006.0337,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":208,"prefix":"*","index":7,"text":"wait(4000)"}},{"result":{"nanos":355800,"millis":0.3558,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":211,"prefix":"*","index":8,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":535400,"millis":0.5354,"status":"passed"},"step":{"comments":["# if the change of the role can't be done, the response contains a field \"error\""],"line":213,"prefix":"*","index":9,"text":"match response.errors == '#notpresent'"}}],"executorName":"main","line":194,"name":"The admin user can change the role of an user","description":"","durationMillis":4492.1326,"startTime":1621337519862,"failed":false,"refId":"[6:194]","endTime":1621337524355,"exampleIndex":-1},{"sectionIndex":6,"stepResults":[{"result":{"nanos":314400,"millis":0.3144,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:04.361 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":317400,"millis":0.3174,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":197500,"millis":0.1975,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":163700,"millis":0.1637,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":179400,"millis":0.1794,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":152100,"millis":0.1521,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":141800,"millis":0.1418,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":142900,"millis":0.1429,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":138300,"millis":0.1383,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":237800,"millis":0.2378,"status":"passed"},"step":{"comments":["# Define the user to delete as the 'NewUser' created before"],"line":219,"prefix":"*","index":0,"text":"def UserDelete = read('NewUser.json')"}},{"result":{"nanos":484100,"millis":0.4841,"status":"passed"},"step":{"endLine":225,"line":220,"prefix":"*","docString":"{ \n   \"username\": \"#(UserDelete.username)\"\n}","index":1,"text":"def username ="}},{"result":{"nanos":106200,"millis":0.1062,"status":"passed"},"step":{"line":226,"prefix":"Given","index":2,"text":"path 'graphql'"}},{"result":{"nanos":134300,"millis":0.1343,"status":"passed"},"step":{"line":227,"prefix":"And","index":3,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":449300,"millis":0.4493,"status":"passed"},"step":{"line":228,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":512900,"millis":0.5129,"status":"passed"},"step":{"line":229,"prefix":"And","index":5,"text":"request { query: '#(queryDeleteUser)', variables: '#(username)' }"}},{"result":{"nanos":592866900,"millis":592.8669,"status":"passed"},"step":{"line":230,"prefix":"When","index":6,"text":"method post"},"stepLog":"13:32:04.366 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 147\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"username\":\"user3@test.com\"},\"query\":\"mutation DeleteUser($username: String) {\\r\\n    DeleteUser(input: {username: $username})\\r\\n}\"}\n\n13:32:04.956 response time in milliseconds: 590\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 28\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:05 GMT\n1 < x-amzn-RequestId: 6600f0d0-6be8-433a-90b7-4ad73e1c08c0\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbUVE4CjoEFbBg=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5b5-5fae45fe23973c5b164c7293;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 86b86f43445d5446c8b16910b2a9b8f9.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: MZEhxIlqGeEVG2kB5BoPjfqXvECADH-EIR7kfP3j3Ol1U4v8-NoD7A==\n{\"data\":{\"DeleteUser\":true}}\n"},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":231,"prefix":"Then","index":7,"text":"status 200"}},{"result":{"nanos":4004494000,"millis":4004.494,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":233,"prefix":"*","index":8,"text":"wait(4000)"}},{"result":{"nanos":670200,"millis":0.6702,"status":"passed"},"step":{"comments":["# Check that there aren't errors and the user is properly deleted"],"line":236,"prefix":"*","index":9,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":256800,"millis":0.2568,"status":"passed"},"step":{"comments":["#### List all users to check that the user was deleted"],"line":240,"prefix":"Given","index":10,"text":"path 'graphql'"}},{"result":{"nanos":466200,"millis":0.4662,"status":"passed"},"step":{"line":241,"prefix":"And","index":11,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":288900,"millis":0.2889,"status":"passed"},"step":{"line":242,"prefix":"And","index":12,"text":"request { query: '#(queryUserReadModels)'}"}},{"result":{"nanos":290651200,"millis":290.6512,"status":"passed"},"step":{"line":243,"prefix":"When","index":13,"text":"method post"},"stepLog":"13:32:08.967 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 102\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"query\":\"query UserReadModels {\\r\\n    UserReadModels {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n13:32:09.254 response time in milliseconds: 287\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 30\n2 < Connection: keep-alive\n2 < Date: Tue, 18 May 2021 11:32:10 GMT\n2 < x-amzn-RequestId: 4e945f26-91c4-4df2-ad2b-6e9b7fdff231\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fhbVEHwKjoEFWEw=\n2 < X-Amzn-Trace-Id: Root=1-60a3a5b9-276b580f7d3d49407f5ca3c9;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 89229acad212ad74c20ccd0ac96a8cbe.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD50-C1\n2 < X-Amz-Cf-Id: usecmwxJrnvAm5f2iXzSJWXq7xfFi90K17_FJCm4f7JPJYOUhkFZvQ==\n{\"data\":{\"UserReadModels\":[]}}\n"},{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"line":244,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":360800,"millis":0.3608,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":247,"prefix":"*","index":15,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":535800,"millis":0.5358,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":249,"prefix":"*","index":16,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":2100700,"millis":2.1007,"status":"passed"},"step":{"line":250,"prefix":"*","index":17,"text":"match response.data.UserReadModels !contains {id: '#(UserDelete.id)', role: '#(UserDelete.role)'}"}}],"executorName":"main","line":216,"name":"Delete an existing user","description":"","durationMillis":4896.4088,"startTime":1621337524361,"failed":false,"refId":"[7:216]","endTime":1621337529259,"exampleIndex":-1},{"sectionIndex":7,"stepResults":[{"result":{"nanos":672900,"millis":0.6729,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:09.268 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":609700,"millis":0.6097,"status":"passed"},"step":{"endLine":14,"comments":["# Define the querys so they can be used in all Scenarios"],"background":true,"line":11,"prefix":"*","docString":"read('SaveUser.graphql')","index":2,"text":"def querySaveUser ="}},{"result":{"nanos":487500,"millis":0.4875,"status":"passed"},"step":{"endLine":18,"background":true,"line":15,"prefix":"*","docString":"read('UserReadModel.graphql')","index":3,"text":"def queryUserReadModel ="}},{"result":{"nanos":445100,"millis":0.4451,"status":"passed"},"step":{"endLine":22,"background":true,"line":19,"prefix":"*","docString":"read('UserReadModels.graphql')","index":4,"text":"def queryUserReadModels ="}},{"result":{"nanos":438600,"millis":0.4386,"status":"passed"},"step":{"endLine":26,"background":true,"line":23,"prefix":"*","docString":"read('SaveCustomer.graphql')","index":5,"text":"def querySaveCustomer ="}},{"result":{"nanos":488000,"millis":0.488,"status":"passed"},"step":{"endLine":30,"background":true,"line":27,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":445000,"millis":0.445,"status":"passed"},"step":{"endLine":34,"background":true,"line":31,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":7,"text":"def queryChangeUserRole ="}},{"result":{"nanos":348600,"millis":0.3486,"status":"passed"},"step":{"endLine":38,"background":true,"line":35,"prefix":"*","docString":"read('DeleteUser.graphql')","index":8,"text":"def queryDeleteUser ="}},{"result":{"nanos":341900,"millis":0.3419,"status":"passed"},"step":{"endLine":42,"background":true,"line":39,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":9,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":218900,"millis":0.2189,"status":"passed"},"step":{"comments":["#### List the customers to select one to delete"],"line":256,"prefix":"Given","index":0,"text":"path 'graphql'"}},{"result":{"nanos":371100,"millis":0.3711,"status":"passed"},"step":{"line":257,"prefix":"And","index":1,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":294900,"millis":0.2949,"status":"passed"},"step":{"line":258,"prefix":"And","index":2,"text":"request { query: '#(queryCustReadModels)'}"}},{"result":{"nanos":290296000,"millis":290.296,"status":"passed"},"step":{"line":259,"prefix":"When","index":3,"text":"method post"},"stepLog":"13:32:09.275 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 167\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query CustomerReadModels {\\r\\n    CustomerReadModels {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n13:32:09.562 response time in milliseconds: 286\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 397\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:10 GMT\n1 < x-amzn-RequestId: 54823f7e-cfb1-4c93-b758-22451a2d2965\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbVHGa1DoEFnPQ=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5ba-760952d9457d63845b12877d;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 546db6834bf5885f55b5457c969e7ad6.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: wcTZej7EvNpR3bZY-Vx25rn7p7TBD_wm56nv3CFQCkQBCdSNxFzwbg==\n{\"data\":{\"CustomerReadModels\":[{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]}}\n"},{"result":{"nanos":20900,"millis":0.0209,"status":"passed"},"step":{"line":260,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":425300,"millis":0.4253,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":263,"prefix":"*","index":5,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":353100,"millis":0.3531,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":266,"prefix":"*","index":6,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":608400,"millis":0.6084,"status":"passed"},"step":{"line":267,"prefix":"*","index":7,"text":"match response.data.CustomerReadModels contains {id: '#ignore', name: '#ignore', surname: '#ignore', photoUrl: '#ignore', userId: '#ignore' }"}},{"result":{"nanos":849700,"millis":0.8497,"status":"passed"},"step":{"comments":["# Save the body of the response and get the first to delete"],"line":270,"prefix":"*","index":8,"text":"def list_customers = response.data.CustomerReadModels"}},{"result":{"nanos":2890700,"millis":2.8907,"status":"passed"},"step":{"line":271,"prefix":"*","index":9,"text":"def customer_toDelete = list_customers[0]"}},{"result":{"nanos":200500,"millis":0.2005,"status":"passed"},"step":{"comments":["#### Delete the customer"],"line":275,"prefix":"Given","index":10,"text":"path 'graphql'"}},{"result":{"nanos":434000,"millis":0.434,"status":"passed"},"step":{"line":276,"prefix":"And","index":11,"text":"header Authorization = adminToken.tokenType + ' ' + adminToken.idToken"}},{"result":{"nanos":598300,"millis":0.5983,"status":"passed"},"step":{"line":277,"prefix":"And","index":12,"text":"request { query: '#(queryDeleteCustomer)', variables: '#(customer_toDelete)'}"}},{"result":{"nanos":196818200,"millis":196.8182,"status":"passed"},"step":{"line":278,"prefix":"When","index":13,"text":"method post"},"stepLog":"13:32:09.572 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 233\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},\"query\":\"mutation DeleteCustomer($id: ID) {\\r\\n    DeleteCustomer(input: {id: $id})\\r\\n} \\r\\n\"}\n\n13:32:09.767 response time in milliseconds: 194\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 32\n2 < Connection: keep-alive\n2 < Date: Tue, 18 May 2021 11:32:10 GMT\n2 < x-amzn-RequestId: 278b2312-d20f-4296-8b78-7f605aa3ebab\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: fhbVKGqqDoEFVqw=\n2 < X-Amzn-Trace-Id: Root=1-60a3a5ba-3e86d9ff0b8da9577b59a803;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 0645caa18be2b3be5e4612d40f45a0ba.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD50-C1\n2 < X-Amz-Cf-Id: Svh09xxGPAVycX9CMmo87rVzCyy6ZnRPNGXftFAdOgNkSb2ud0hRug==\n{\"data\":{\"DeleteCustomer\":true}}\n"},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":279,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":4009949000,"millis":4009.949,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":281,"prefix":"*","index":15,"text":"wait(4000)"}},{"result":{"nanos":792800,"millis":0.7928,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":284,"prefix":"*","index":16,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":606500,"millis":0.6065,"status":"passed"},"step":{"comments":["# Check if the response contains any error"],"line":287,"prefix":"*","index":17,"text":"match response.errors == '#notpresent'"}}],"executorName":"main","line":253,"name":"The use admin can delete customers","description":"","durationMillis":4510.0398,"startTime":1621337529267,"failed":false,"refId":"[8:253]","endTime":1621337533778,"exampleIndex":-1}],"name":"Test the API for an admin user in the environment set from the java class","passedCount":7}]}],"line":19,"description":"","durationMillis":39463.8837,"failed":true,"error":"match failed: CONTAINS\n  $ | actual does not contain expected | actual array does not contain expected item - {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"} (LIST:MAP)\n  [{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}]\n  {\"id\":\"2100000photo\",\"name\":\"Customer name\",\"surname\":\"Customer surname\",\"photoUrl\":null,\"userId\":\"#(datas.username)\"}\n\n    $[2] | not equal | match failed for name: 'id' (MAP:MAP)\n    {\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"}\n    {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n      $[2].id | not equal (STRING:STRING)\n      '3'\n      '2100000photo'\n\n        $[1] | not equal | match failed for name: 'id' (MAP:MAP)\n        {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"23000000nophoto\",\"userId\":\"admin@theagilemonkeys.com\"}\n        {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n          $[1].id | not equal (STRING:STRING)\n          '23000000nophoto'\n          '2100000photo'\n\n            $[0] | not equal | match failed for name: 'photoUrl' (MAP:MAP)\n            {\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"admin@theagilemonkeys.com\"}\n            {\"photoUrl\":null,\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2100000photo\",\"userId\":\"#(datas.username)\"}\n\n              $[0].photoUrl | data types don't match (STRING:NULL)\n              ''\n              null\n\nclasspath:examples\/users\/TestUserAdmin.feature:190\nclasspath:examples\/users\/TestUserChange.feature:21","executorName":"main","name":"Test if the API met the aceptance criteria","startTime":1621337494164,"refId":"[1:19]","endTime":1621337533779,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":463800,"millis":0.4638,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:13.796 karate.env system property was: prod \n"},{"result":{"nanos":8400,"millis":0.0084,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":613800,"millis":0.6138,"status":"passed"},"step":{"comments":["# Is necessary to sign in the API as admin to create a new user","# Get the idToken for the admin user"],"background":true,"line":12,"prefix":"*","index":2,"text":"def adminDatas = read('signinDatasUser.json')"}},{"result":{"nanos":383343900,"millis":383.3439,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":15,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') adminDatas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":376.435,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":18200,"millis":0.0182,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":1340600,"millis":1.3406,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":1223600,"millis":1.2236,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"13:32:13.805 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":495900,"millis":0.4959,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":8700,"millis":0.0087,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":228800,"millis":0.2288,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":370224400,"millis":370.2244,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:32:13.807 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n13:32:14.175 response time in milliseconds: 367\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:15 GMT\n1 < x-amzn-RequestId: 04162efd-1fe1-41c2-88ba-34af999cea22\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbV0HR6DoEFkuA=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5be-450b9917684d42ce100343df\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 a72068a5d77ecba7daccda339a668499.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: pneYtOlARLWNwWWYYTBNUW2zv5Shb-0O1w9JljihLm0PpcpQfv5RTA==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImU3NDA0ZDAzLWIzNTMtNGU0ZC04N2FmLTM2ZDFhY2M3ZmVjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1MzQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTEzNCwiaWF0IjoxNjIxMzM3NTM1LCJqdGkiOiIxY2U1OTE5Mi1mZTE0LTRkODItOGE4NC1kYjYwYWIwNmM3NzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Mhji8aor-kqgm47EY10cXB1DzHrY-wttp4UIte5Eacb59VjLoCZN3Nv-QPRNHmSuHcS1truGj7yGcB5DbQE-K79C77pW0I9IhQ8P9oK8auAHBACF6qYtYp2Ti38NKz9QN8OZM-obf2dLFFFjdX6LfjcCli5eZ5mcLv3IwUHk_tdVSI_8_-rmjQdjwp_dl-mtJF5F3fmC9eMw23uxFHsxrefQs4Zn2yNjpSakYOFmssJC3xxBGMha0G0pLcdQZ26wtt7iyJZu_aMri4jLXjZZ_NDnn1Veflvydfw_xOEegwo192fF8gzjmQF51YySva6HDH58PiJ4nNOq2kJtQ73RCg\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.PxyfwH7qKVI3KHh112PN9lS57rQ0X_AajSqWLPyPi7bu6fc1sUqIi9qO4lxzBzgOrLXvNOQGVZ7Ifu0pASCSYB1pp6FduvOfL52D-qOEd1ghlZ8J7EbBnVPNVDoqBEUKW3j0abIKv3hF3SLWSQuo2ZCrNhxvQOtztMpA_6LbSoENjmdDwwRvXpC-kS87uuUkHQgsmPVb8Baar_dmjBkEY7Yf2t7kX8k9iFX4N5Hcy2rCgpQI5gez8-pFzaK7mDeqYYDxoJhOW5kcB4xdO0j3-Qm0S2cqnK0jmch9Ua60jwp8nAvBXKu_5X4c5-gWhvojPN3dG_eTETe4c7du5bwY7w.2eP_SPwjh3d8m1tR.M6UsCIEcHiwVFgHp5jtxSGHEXaNQzryu_zOo3pAYWuJR8s9GNpY6eCWen1k7BrCFSIIGtb0Bs3u_HiQwVLKS_kBneFZpvZbwYriAWPbkxTydz0FiduHoxHXdYM761nNE8nuHpzh6oIRvGL5YdW-634Y-ZXHHBbBManMJF2L65ESN8oWElrEbDWdGnlm-d0C1XQR7zfz7mvO1IXLYR44mclimhg80QF3nNuimifFyqvdpKPWAnJsmpSamRiktcnXCsncNpcpyXh8QqXB4yc7Vi-u_l9_sJR3K18wHedH1eX0G-x7w_G5H2gHjT8F3gmHzJZtxPY6vIdPgPKbE10spJKfRyGIMLV9iqrriqo9p0e0FPO6Xqm-bw5lMFRwFKKs12vDm1qADKXtdT_AAT9QVlJfW6sTtXdWEjoMGbMqvHZJZXM0McyKc9flwD89z7f3dV1tAEXx1TRFtxImYabGR1_DWZ5_KKKgpwrcwcPtee2hEQBsxqcAw_WJCXLXQlX7x7OJuqh9Nmhff48XdZmAzyts73aUi-IiqZlzMp7gbsq_LFN89A28jhPAaLiH2ICSY0Y2Lu7u-IfrnJ9iv_X4BqiYefYOo7daHIUJ894JohqobPZdaRd5MbRL73Q3kHANgTTm2lMNaH_6P2M6ZM8Con4UHutbiv7WG67PThGtZmJtLrfLVPOQhovW12z8Oj-UN9VTfV9T_MRgmLIgDZcFePrRrdFUuJ3yeeuKZANTxrTsoBVxqNg2WRsA9p5VB6GOgReD1kBlWBroVYzY3wScpVNNPeQA8qozE3KnR0LuzwGfsBZA2uVH3F0fsn6AWaiy9igngVgUcwHQflxwdyrL7bgHgcOffRQn18OBn91tLLCzCOEux6UwF3lMlmuRBLxuqfTlZ1ZfkiHWpL6EqMI5NvlkgUvcWleVLpnjFHpKXm549YsFHsm4m8LAF6DTEkd2HoT22VMRmEvi4nPeT3d-mJN-6Vaa19pnC88P7D99n9afhRtw2YrQ5ahORbBv0Nr9EW2OT82CzIUtBVERBJpFBIlniWgFnuJYhlEeOzfNkwOOOYXiWMc0r749CwkO6kib86L9Y8cslpBM9q_VAoCNDrZ8lUJrZLhES5YJId7wbmQxSAsqlVX2m4t2GG3TFjxmoZyLGQo4qR08gWv2k7oZIjeP9WxNk2vL8afVf4k01pHf81OqM-ag0HohZmSI2VZmWgVuZtQ1iyHfgjB9s4ScXK7dlNehB-wJZfuWSja7q9CcrO52VMX9gEzbz6ptJYp9sWSVT_mDpZ9SsZys8_TQAclY7H8CRVsCXkcOxKdyY4NRTIl3NbEJp2GAjacIu5so.Q6D08IRGIA6T4I5ZL3QRkg\"}\n"},{"result":{"nanos":17900,"millis":0.0179,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":1164900,"millis":1.1649,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1712000,"millis":1.712,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"13:32:14.179 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":376.435,"startTime":1621337533802,"failed":false,"refId":"[1:6]","endTime":1621337534179,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":1718800,"millis":1.7188,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"13:32:14.182 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImU3NDA0ZDAzLWIzNTMtNGU0ZC04N2FmLTM2ZDFhY2M3ZmVjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1MzQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTEzNCwiaWF0IjoxNjIxMzM3NTM1LCJqdGkiOiIxY2U1OTE5Mi1mZTE0LTRkODItOGE4NC1kYjYwYWIwNmM3NzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Mhji8aor-kqgm47EY10cXB1DzHrY-wttp4UIte5Eacb59VjLoCZN3Nv-QPRNHmSuHcS1truGj7yGcB5DbQE-K79C77pW0I9IhQ8P9oK8auAHBACF6qYtYp2Ti38NKz9QN8OZM-obf2dLFFFjdX6LfjcCli5eZ5mcLv3IwUHk_tdVSI_8_-rmjQdjwp_dl-mtJF5F3fmC9eMw23uxFHsxrefQs4Zn2yNjpSakYOFmssJC3xxBGMha0G0pLcdQZ26wtt7iyJZu_aMri4jLXjZZ_NDnn1Veflvydfw_xOEegwo192fF8gzjmQF51YySva6HDH58PiJ4nNOq2kJtQ73RCg\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.PxyfwH7qKVI3KHh112PN9lS57rQ0X_AajSqWLPyPi7bu6fc1sUqIi9qO4lxzBzgOrLXvNOQGVZ7Ifu0pASCSYB1pp6FduvOfL52D-qOEd1ghlZ8J7EbBnVPNVDoqBEUKW3j0abIKv3hF3SLWSQuo2ZCrNhxvQOtztMpA_6LbSoENjmdDwwRvXpC-kS87uuUkHQgsmPVb8Baar_dmjBkEY7Yf2t7kX8k9iFX4N5Hcy2rCgpQI5gez8-pFzaK7mDeqYYDxoJhOW5kcB4xdO0j3-Qm0S2cqnK0jmch9Ua60jwp8nAvBXKu_5X4c5-gWhvojPN3dG_eTETe4c7du5bwY7w.2eP_SPwjh3d8m1tR.M6UsCIEcHiwVFgHp5jtxSGHEXaNQzryu_zOo3pAYWuJR8s9GNpY6eCWen1k7BrCFSIIGtb0Bs3u_HiQwVLKS_kBneFZpvZbwYriAWPbkxTydz0FiduHoxHXdYM761nNE8nuHpzh6oIRvGL5YdW-634Y-ZXHHBbBManMJF2L65ESN8oWElrEbDWdGnlm-d0C1XQR7zfz7mvO1IXLYR44mclimhg80QF3nNuimifFyqvdpKPWAnJsmpSamRiktcnXCsncNpcpyXh8QqXB4yc7Vi-u_l9_sJR3K18wHedH1eX0G-x7w_G5H2gHjT8F3gmHzJZtxPY6vIdPgPKbE10spJKfRyGIMLV9iqrriqo9p0e0FPO6Xqm-bw5lMFRwFKKs12vDm1qADKXtdT_AAT9QVlJfW6sTtXdWEjoMGbMqvHZJZXM0McyKc9flwD89z7f3dV1tAEXx1TRFtxImYabGR1_DWZ5_KKKgpwrcwcPtee2hEQBsxqcAw_WJCXLXQlX7x7OJuqh9Nmhff48XdZmAzyts73aUi-IiqZlzMp7gbsq_LFN89A28jhPAaLiH2ICSY0Y2Lu7u-IfrnJ9iv_X4BqiYefYOo7daHIUJ894JohqobPZdaRd5MbRL73Q3kHANgTTm2lMNaH_6P2M6ZM8Con4UHutbiv7WG67PThGtZmJtLrfLVPOQhovW12z8Oj-UN9VTfV9T_MRgmLIgDZcFePrRrdFUuJ3yeeuKZANTxrTsoBVxqNg2WRsA9p5VB6GOgReD1kBlWBroVYzY3wScpVNNPeQA8qozE3KnR0LuzwGfsBZA2uVH3F0fsn6AWaiy9igngVgUcwHQflxwdyrL7bgHgcOffRQn18OBn91tLLCzCOEux6UwF3lMlmuRBLxuqfTlZ1ZfkiHWpL6EqMI5NvlkgUvcWleVLpnjFHpKXm549YsFHsm4m8LAF6DTEkd2HoT22VMRmEvi4nPeT3d-mJN-6Vaa19pnC88P7D99n9afhRtw2YrQ5ahORbBv0Nr9EW2OT82CzIUtBVERBJpFBIlniWgFnuJYhlEeOzfNkwOOOYXiWMc0r749CwkO6kib86L9Y8cslpBM9q_VAoCNDrZ8lUJrZLhES5YJId7wbmQxSAsqlVX2m4t2GG3TFjxmoZyLGQo4qR08gWv2k7oZIjeP9WxNk2vL8afVf4k01pHf81OqM-ag0HohZmSI2VZmWgVuZtQ1iyHfgjB9s4ScXK7dlNehB-wJZfuWSja7q9CcrO52VMX9gEzbz6ptJYp9sWSVT_mDpZ9SsZys8_TQAclY7H8CRVsCXkcOxKdyY4NRTIl3NbEJp2GAjacIu5so.Q6D08IRGIA6T4I5ZL3QRkg\"\n}\n \n"},{"result":{"nanos":721200,"millis":0.7212,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":5,"text":"def adminToken = signIn.response"}},{"result":{"nanos":958500,"millis":0.9585,"status":"passed"},"step":{"endLine":27,"line":24,"prefix":"*","docString":"read('SaveUser.graphql')","index":0,"text":"def querySaveUser ="}},{"result":{"nanos":721800,"millis":0.7218,"status":"passed"},"step":{"comments":["# JSON file with the new user's datas"],"line":29,"prefix":"*","index":1,"text":"def NewUser = read('UserToChange.json')"}},{"result":{"nanos":547400,"millis":0.5474,"status":"passed"},"step":{"line":31,"prefix":"Given","index":2,"text":"path 'graphql'"}},{"result":{"nanos":696400,"millis":0.6964,"status":"passed"},"step":{"line":32,"prefix":"And","index":3,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":948000,"millis":0.948,"status":"passed"},"step":{"line":33,"prefix":"And","index":4,"text":"request { query: '#(querySaveUser)',  variables: '#(NewUser)'}"}},{"result":{"nanos":1115431600,"millis":1115.4316,"status":"passed"},"step":{"line":34,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:32:14.189 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 251\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_2\",\"role\":\"User\",\"username\":\"user31@test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n13:32:15.302 response time in milliseconds: 1113\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 26\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:16 GMT\n1 < x-amzn-RequestId: 43e4f6e3-cf34-4770-a3a0-1e766cc8acae\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbV4EjljoEFaYg=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5bf-7f96152e539a0bdb0d156287;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 77fcce204f96e329df7227f192690939.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: icbmT0Lyp9ipc1m0RRaksRwMQCmRe3WkPM2-QuNSbdxd6_5V0LoWrw==\n{\"data\":{\"SaveUser\":true}}\n"},{"result":{"nanos":619000,"millis":0.619,"status":"passed"},"step":{"line":35,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":4007669500,"millis":4007.6695,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":38,"prefix":"*","index":7,"text":"wait(4000)"}},{"result":{"nanos":319000,"millis":0.319,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":40,"prefix":"*","index":8,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":525400,"millis":0.5254,"status":"passed"},"step":{"comments":["# if the user can't be created, the response contains a field \"error\""],"line":42,"prefix":"*","index":9,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":1099000,"millis":1.099,"status":"passed"},"step":{"comments":["# The new user need to obtain a token"],"line":45,"prefix":"*","index":10,"text":"def clientId = adminDatas.clientId"}},{"result":{"nanos":780600,"millis":0.7806,"status":"passed"},"step":{"line":46,"prefix":"*","index":11,"text":"def username = NewUser.username"}},{"result":{"nanos":748900,"millis":0.7489,"status":"passed"},"step":{"line":47,"prefix":"*","index":12,"text":"def password = NewUser.password"}},{"result":{"nanos":696800,"millis":0.6968,"status":"passed"},"step":{"endLine":55,"line":48,"prefix":"*","docString":"{\n  \"clientId\": \"#(clientId)\",\n \"username\": \"#(username)\",\n \"password\": \"#(password)\"\n}","index":13,"text":"def newSignUser ="}},{"result":{"nanos":526032600,"millis":526.0326,"status":"passed"},"step":{"line":56,"prefix":"*","index":14,"text":"def newSignIn = call read('signin.feature') newSignUser"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":517.6695,"callArg":{"password":"Password_2","clientId":"799hogucm363v55l7dk2n1l5u0","username":"user31@test.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":11100,"millis":0.0111,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":528700,"millis":0.5287,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":1090500,"millis":1.0905,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"13:32:19.322 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"user31@test.com\",\n  \"password\": \"Password_2\"\n}\n \n"},{"result":{"nanos":268900,"millis":0.2689,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":19300,"millis":0.0193,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":115600,"millis":0.1156,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":513221300,"millis":513.2213,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:32:19.325 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 94\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Password_2\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"user31@test.com\"}\n\n13:32:19.836 response time in milliseconds: 510\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 3995\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:20 GMT\n1 < x-amzn-RequestId: bd271945-72e5-493a-a948-6ee71db50071\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbWsH4QDoEFcXQ=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5c4-7f3007411be5648f12ff096d\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 803bb8de3c7a92b10030fcaaf02a53d3.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: a7rS0gy4-Y1FBPQFoWms7VwThQTR9XUYzQD3RMLRT-AZWWvWiva7jQ==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1NDAsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTE0MCwiaWF0IjoxNjIxMzM3NTQwLCJqdGkiOiI0NWNlMzZkNC0yNzI3LTQyNWItYjA5ZS02ZmM2YzM2NGVmNTkiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2In0.JAjWj8BpGHq4Cs5Ak0ICx9FmuJkwy1b-pfk2Cpvl3LkP3i3HdgFb22CU2ooMDE1xaSa0LUNiDlAlcAZ4s-ssJO815BTEQzPKwA_uhXIyPKPlSWAwPbtwdMK8M46KhC0ahE28ZHDQkRpj3iQvefKoGkrF7Am3iuvogWLv1XcitdHoKiiSw4jsS_9Y_oYN49EAPHPuJo1boFIDzDf-MxbjOrM5lLC3eDqR__QRZJ1TlbrWvLm99M9HrYYSU4ZTNuvgQLYdyXzmT8BS8wqA1ppx4jliMP1XBN1NVFgPTR6Cq4KI64oJFuLPfdB8A4Va3oe1iuegsTNf3o1uVuBm5X7wyw\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ndYp09cJ5M8qPfypXRgADIAZ9pCbdLduIF73cpoEtzYJY5UC_m8HAudBw7OQgwLyQPKI6mQ00yNKFFPNzoKHo7yLn2hxsSabqB71vrxmkC-GIkoUo_PFy3aiJYO_lYqRTg2EcftvGZDiRjWHVoEXs7E_Naj0LYssgpDRyHwL-wRZ63OQxKCjDdXAz1_LosF4YbT9-KhrkSWFzPFUJPf_kJCPUJhZU_wEm9AOR6MwZ5g35Xptm9nFAQTVYpOOSAFPN3n0fXI70Ngsa4QgZiH-Qbobh5iNXPzBjGuNbKyKu-AGILntSv_Fft9J42E_UvkSFxL2lr8bf6TFbbiGzhnHXQ.uy0bhxPj74zgXWoJ.re2CuZ3IZJY2Ak5HC3CvirfAVw1YOZHnnnIvQEFCCY7F0SPkU-LalVt7FXFgLP6txSGkr6gpaNjH5MXV1GfDpuKUVHKbzYgV9nylk2Qed-9qsdgihHMEqHeT5YkP1nfUycrKWeFvwoxRe6QvmECjRctQsMfHb9gsl15W76sDRAYBkYv1UGJxeRHH46l7JxR0u5GKX59ah4spo_jYQ0hNReLtu3AJIas96WhoXjR6DxmukJD5RWK4tGj2BA5BtyeWJ04rcThDFxsxQWJ3mmpAm6srmohzAXwMxrXigTyr4mIw1SLxwDRAKsmANiF5okZZCspSkgxYoyeeU5pItuNq0DEJmj0GgPoi5IISyjdoMQO-Htv1_wJgFEn4c4iFCaMEoyW_hGFDjkcWb3wJcAZ0V8SyvO4Grs-bVYafdb6572U2RHiPcK0uXoE4kjyvvbBoxcz5puhe6ejkM_d9jpP8wRu3x7mYldAiazKQQ9kFsjJCl_AtY0wQ7ctH17L_wr6rhYj_hj7KL3oUQEvBA5-koCw6Fe55SGchRkGcC4WxgLQlPB-k8FuZujQ_PCIGpMRHmCv8h1Hih1nnx0J9FbQYGvm21vYFmwStmu2BbD68A_LenkDGgtBjYvJTWKo0Zty-LzKIZO3DSM8mrg0lpTEmpf1vJYQLjy_R8AP4jJkA5-Ks0A_YXYnXHoa4ReQiFC4xEg2tNK0F9MLeyro0Pg6WMYL3tPbx20jX-xjd0LOBed57Hs3P8-sSlHGMPI55anJ2Puwj-dXi20rT9WzPB_AmuVf0CrFkpqxHDXmuzQtc7A2lzly3a_DL4qPRxeY5GqMeDfz1PNbjcMUqRQU0d7LKwY0hNMCYKCVPa48xA-gE7JxmdtyZ9bDma_TlorymM8Cul7LktedQX60q5dByV_MhPuAN4qKKRNpw1G2XrR_lhIv6Gt1fFBwxSrOd5QX9F7PX793WClKDvdx-Fyn_4gYYz7UtjDqDf-GvR5W-GqXZAHGO5zmMovhJq4jRkkYu6-XBbJ1xA2bgUfmbNwfOARM0GdDwH8xCxzbZR0PddSP2Zf5Cg8m97u0MBo8MH0AlS5A-rkuiiaMi97Y2uBpkDyb3WwpWLIsIojMjaImKTLfJaId1rEvJ0GEuU7vvAM1jNriWrYFOPGbGrmgBxNp0Xb9E4SQTUqwQSShjrQnDEeS1USg9QVKdR3NnKJLvspX0X8gdCDNd4AtJ7wyWQY-1oRIMS4nXma4BOEcvzlovMKOiVxGJ0MFe4usMvX0PSucCAbvkDqHHmpV7pQBpQ0AUTswD1WjuaAoz9ny2utwpoylSqcqAsTn7GLQfY_mKGALJSqA.g2BisWWxB_9J1cWAFjypMQ\"}\n"},{"result":{"nanos":48300,"millis":0.0483,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":988500,"millis":0.9885,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1377300,"millis":1.3773,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"13:32:19.840 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":517.6695,"startTime":1621337539321,"failed":false,"refId":"[1:6]","endTime":1621337539840,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":605000,"millis":0.605,"status":"passed"},"step":{"line":57,"prefix":"*","index":15,"text":"def newToken = newSignIn.response"}},{"result":{"nanos":10814884500,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50\nmatch failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123\nclasspath:examples\/users\/TestUserChange.feature:63","millis":10814.8845,"status":"failed"},"step":{"comments":["# create the authorization header for the new user","# Now test the API by the user"],"line":63,"prefix":"*","index":16,"text":"def newUserTest = call read('TestUserNoAdminCannotDo.feature') newToken"},"stepLog":"13:32:30.658 classpath:examples\/users\/TestUserChange.feature:63\n* def newUserTest = call read('TestUserNoAdminCannotDo.feature') newToken\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50\nmatch failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123\nclasspath:examples\/users\/TestUserChange.feature:63\n","callResults":[{"prefixedPath":"classpath:examples\/users\/TestUserNoAdminCannotDo.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":10757.8194,"callArg":{"expiresIn":"3600","idToken":"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ","accessToken":"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1NDAsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTE0MCwiaWF0IjoxNjIxMzM3NTQwLCJqdGkiOiI0NWNlMzZkNC0yNzI3LTQyNWItYjA5ZS02ZmM2YzM2NGVmNTkiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2In0.JAjWj8BpGHq4Cs5Ak0ICx9FmuJkwy1b-pfk2Cpvl3LkP3i3HdgFb22CU2ooMDE1xaSa0LUNiDlAlcAZ4s-ssJO815BTEQzPKwA_uhXIyPKPlSWAwPbtwdMK8M46KhC0ahE28ZHDQkRpj3iQvefKoGkrF7Am3iuvogWLv1XcitdHoKiiSw4jsS_9Y_oYN49EAPHPuJo1boFIDzDf-MxbjOrM5lLC3eDqR__QRZJ1TlbrWvLm99M9HrYYSU4ZTNuvgQLYdyXzmT8BS8wqA1ppx4jliMP1XBN1NVFgPTR6Cq4KI64oJFuLPfdB8A4Va3oe1iuegsTNf3o1uVuBm5X7wyw","tokenType":"Bearer","refreshToken":"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ndYp09cJ5M8qPfypXRgADIAZ9pCbdLduIF73cpoEtzYJY5UC_m8HAudBw7OQgwLyQPKI6mQ00yNKFFPNzoKHo7yLn2hxsSabqB71vrxmkC-GIkoUo_PFy3aiJYO_lYqRTg2EcftvGZDiRjWHVoEXs7E_Naj0LYssgpDRyHwL-wRZ63OQxKCjDdXAz1_LosF4YbT9-KhrkSWFzPFUJPf_kJCPUJhZU_wEm9AOR6MwZ5g35Xptm9nFAQTVYpOOSAFPN3n0fXI70Ngsa4QgZiH-Qbobh5iNXPzBjGuNbKyKu-AGILntSv_Fft9J42E_UvkSFxL2lr8bf6TFbbiGzhnHXQ.uy0bhxPj74zgXWoJ.re2CuZ3IZJY2Ak5HC3CvirfAVw1YOZHnnnIvQEFCCY7F0SPkU-LalVt7FXFgLP6txSGkr6gpaNjH5MXV1GfDpuKUVHKbzYgV9nylk2Qed-9qsdgihHMEqHeT5YkP1nfUycrKWeFvwoxRe6QvmECjRctQsMfHb9gsl15W76sDRAYBkYv1UGJxeRHH46l7JxR0u5GKX59ah4spo_jYQ0hNReLtu3AJIas96WhoXjR6DxmukJD5RWK4tGj2BA5BtyeWJ04rcThDFxsxQWJ3mmpAm6srmohzAXwMxrXigTyr4mIw1SLxwDRAKsmANiF5okZZCspSkgxYoyeeU5pItuNq0DEJmj0GgPoi5IISyjdoMQO-Htv1_wJgFEn4c4iFCaMEoyW_hGFDjkcWb3wJcAZ0V8SyvO4Grs-bVYafdb6572U2RHiPcK0uXoE4kjyvvbBoxcz5puhe6ejkM_d9jpP8wRu3x7mYldAiazKQQ9kFsjJCl_AtY0wQ7ctH17L_wr6rhYj_hj7KL3oUQEvBA5-koCw6Fe55SGchRkGcC4WxgLQlPB-k8FuZujQ_PCIGpMRHmCv8h1Hih1nnx0J9FbQYGvm21vYFmwStmu2BbD68A_LenkDGgtBjYvJTWKo0Zty-LzKIZO3DSM8mrg0lpTEmpf1vJYQLjy_R8AP4jJkA5-Ks0A_YXYnXHoa4ReQiFC4xEg2tNK0F9MLeyro0Pg6WMYL3tPbx20jX-xjd0LOBed57Hs3P8-sSlHGMPI55anJ2Puwj-dXi20rT9WzPB_AmuVf0CrFkpqxHDXmuzQtc7A2lzly3a_DL4qPRxeY5GqMeDfz1PNbjcMUqRQU0d7LKwY0hNMCYKCVPa48xA-gE7JxmdtyZ9bDma_TlorymM8Cul7LktedQX60q5dByV_MhPuAN4qKKRNpw1G2XrR_lhIv6Gt1fFBwxSrOd5QX9F7PX793WClKDvdx-Fyn_4gYYz7UtjDqDf-GvR5W-GqXZAHGO5zmMovhJq4jRkkYu6-XBbJ1xA2bgUfmbNwfOARM0GdDwH8xCxzbZR0PddSP2Zf5Cg8m97u0MBo8MH0AlS5A-rkuiiaMi97Y2uBpkDyb3WwpWLIsIojMjaImKTLfJaId1rEvJ0GEuU7vvAM1jNriWrYFOPGbGrmgBxNp0Xb9E4SQTUqwQSShjrQnDEeS1USg9QVKdR3NnKJLvspX0X8gdCDNd4AtJ7wyWQY-1oRIMS4nXma4BOEcvzlovMKOiVxGJ0MFe4usMvX0PSucCAbvkDqHHmpV7pQBpQ0AUTswD1WjuaAoz9ny2utwpoylSqcqAsTn7GLQfY_mKGALJSqA.g2BisWWxB_9J1cWAFjypMQ"},"failedCount":5,"packageQualifiedName":"examples.users.TestUserNoAdminCannotDo","relativePath":"examples\/users\/TestUserNoAdminCannotDo.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":317200,"millis":0.3172,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:19.858 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":10400,"millis":0.0104,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":936200,"millis":0.9362,"status":"passed"},"step":{"comments":["# The user to test this feature is read from a json file"],"background":true,"line":11,"prefix":"*","index":2,"text":"def jsonUserTest = read('UserTest.json')"}},{"result":{"nanos":654200,"millis":0.6542,"status":"passed"},"step":{"endLine":19,"line":16,"prefix":"*","docString":"read('UserReadModels.graphql')","index":0,"text":"def queryUserReadModels ="}},{"result":{"nanos":263400,"millis":0.2634,"status":"passed"},"step":{"line":20,"prefix":"Given","index":1,"text":"path 'graphql'"}},{"result":{"nanos":669700,"millis":0.6697,"status":"passed"},"step":{"line":21,"prefix":"And","index":2,"text":"header Authorization = newToken.tokenType + ' ' + newToken.idToken"}},{"result":{"nanos":50500,"millis":0.0505,"status":"passed"},"step":{"line":22,"prefix":"And","index":3,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":303000,"millis":0.303,"status":"passed"},"step":{"line":23,"prefix":"And","index":4,"text":"request { query: '#(queryUserReadModels)' }"}},{"result":{"nanos":248433300,"millis":248.4333,"status":"passed"},"step":{"line":24,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:32:19.863 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 102\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query UserReadModels {\\r\\n    UserReadModels {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n13:32:20.108 response time in milliseconds: 245\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 68\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:20 GMT\n1 < x-amzn-RequestId: 382c64a8-e678-428c-aa71-41fb798001db\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbWxFrpDoEFgvw=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5c4-253d22fa1d80e76e11bde08f;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 e5774f09cc2ae0875c0445786827ad1b.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: Pnck1DUJQs0hV9ITx3_Fc2fbd_VtdXzBjtNqmNf4m4TCZwCa4MTyVg==\n{\"data\":{\"UserReadModels\":[{\"role\":\"User\",\"id\":\"user31@test.com\"}]}}\n"},{"result":{"nanos":14000,"millis":0.014,"status":"passed"},"step":{"line":25,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":409300,"millis":0.4093,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":28,"prefix":"*","index":7,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":718900,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30","millis":0.7189,"status":"failed"},"step":{"comments":["# As the user is not admin, the response contains a field \"error\" and it is printed"],"line":30,"prefix":"*","index":8,"text":"match response.errors != '#notpresent'"},"stepLog":"13:32:20.111 classpath:examples\/users\/TestUserNoAdminCannotDo.feature:30\n* match response.errors != '#notpresent'\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30\n"}],"line":14,"description":"","durationMillis":252.7801,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30","executorName":"main","name":"List all the users. Only an admin user can, so the test shouldn't retrun datas","startTime":1621337539858,"refId":"[1:14]","endTime":1621337540111,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":560800,"millis":0.5608,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:20.124 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":15300,"millis":0.0153,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":659600,"millis":0.6596,"status":"passed"},"step":{"comments":["# The user to test this feature is read from a json file"],"background":true,"line":11,"prefix":"*","index":2,"text":"def jsonUserTest = read('UserTest.json')"}},{"result":{"nanos":498900,"millis":0.4989,"status":"passed"},"step":{"endLine":37,"line":34,"prefix":"*","docString":"read('SaveUser.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":192000,"millis":0.192,"status":"passed"},"step":{"line":39,"prefix":"Given","index":1,"text":"path 'graphql'"}},{"result":{"nanos":304700,"millis":0.3047,"status":"passed"},"step":{"line":40,"prefix":"And","index":2,"text":"header Authorization = newToken.tokenType + ' ' + newToken.idToken"}},{"result":{"nanos":916000,"millis":0.916,"status":"passed"},"step":{"line":41,"prefix":"And","index":3,"text":"request { query: '#(query)',  variables: '#(jsonUserTest)'}"}},{"result":{"nanos":1005694200,"millis":1005.6942,"status":"passed"},"step":{"line":42,"prefix":"When","index":4,"text":"method post"},"stepLog":"13:32:20.128 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 251\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_2\",\"role\":\"User\",\"username\":\"user36@test.com\"},\"query\":\"mutation SaveUser($username: String, $password: String, $role: String) {\\r\\n    SaveUser(input: {username: $username, password: $password, role: $role})\\r\\n} \"}\n\n13:32:21.132 response time in milliseconds: 1003\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 26\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:21 GMT\n1 < x-amzn-RequestId: 80027e49-e9ae-4054-a68c-614ba6ebe49b\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbW0FesjoEFpfg=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5c5-7a4feb4e30ecd85665dfb023;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 ce47d0f1e1d762a58db0f679e6a5cdeb.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: alRDxvyHeb7L3P3Oh3yR9SkldFJgAX54gLnW1kaajJx10AG09KDj4Q==\n{\"data\":{\"SaveUser\":true}}\n"},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":43,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":4007841100,"millis":4007.8411,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":45,"prefix":"*","index":6,"text":"wait(4000)"}},{"result":{"nanos":286600,"millis":0.2866,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":48,"prefix":"*","index":7,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":732800,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50","millis":0.7328,"status":"failed"},"step":{"comments":["# As the user is not admin, the response must contains a field \"error\""],"line":50,"prefix":"*","index":8,"text":"match response.errors != '#notpresent'"},"stepLog":"13:32:25.143 classpath:examples\/users\/TestUserNoAdminCannotDo.feature:50\n* match response.errors != '#notpresent'\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50\n"}],"line":33,"description":"","durationMillis":5017.7191,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50","executorName":"main","name":"The user not admin can't create a new user","startTime":1621337540123,"refId":"[2:33]","endTime":1621337545143,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":399500,"millis":0.3995,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:25.148 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":218500,"millis":0.2185,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":437600,"millis":0.4376,"status":"passed"},"step":{"comments":["# The user to test this feature is read from a json file"],"background":true,"line":11,"prefix":"*","index":2,"text":"def jsonUserTest = read('UserTest.json')"}},{"result":{"nanos":649900,"millis":0.6499,"status":"passed"},"step":{"endLine":58,"comments":["# Get the query from a .graphql file"],"line":55,"prefix":"*","docString":"read('UserReadModel.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":462500,"millis":0.4625,"status":"passed"},"step":{"endLine":65,"comments":["# Define the username of the user to list"],"line":60,"prefix":"*","docString":"{ \n   \"id\": \"#(jsonUserTest.username)\"\n}","index":1,"text":"def id ="}},{"result":{"nanos":642500,"millis":0.6425,"status":"passed"},"step":{"line":66,"prefix":"*","index":2,"text":"print id"},"stepLog":"13:32:25.151 [print] {\n  \"id\": \"user36@test.com\"\n}\n \n"},{"result":{"nanos":111400,"millis":0.1114,"status":"passed"},"step":{"line":68,"prefix":"Given","index":3,"text":"path 'graphql'"}},{"result":{"nanos":148100,"millis":0.1481,"status":"passed"},"step":{"line":69,"prefix":"And","index":4,"text":"header Authorization = newToken.tokenType + ' ' + newToken.idToken"}},{"result":{"nanos":40400,"millis":0.0404,"status":"passed"},"step":{"line":70,"prefix":"And","index":5,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":248800,"millis":0.2488,"status":"passed"},"step":{"line":71,"prefix":"And","index":6,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":128095900,"millis":128.0959,"status":"passed"},"step":{"line":72,"prefix":"When","index":7,"text":"method post"},"stepLog":"13:32:25.153 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 156\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"user36@test.com\"},\"query\":\"query UserReadModel($id: ID!) {\\r\\n    UserReadModel(id: $id) {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n13:32:25.279 response time in milliseconds: 125\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 65\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:26 GMT\n1 < x-amzn-RequestId: 4e1fd48e-d5dd-4b18-aea8-a116d279db83\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbXlE6LjoEFjOg=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5ca-7c23348d024902f45323194c;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 3a5cd718bb9eb50d9c931e1f7586b5a8.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: BC-puoPaMl4vPRp4ww4o-mzObIckZVEoZbKbDADI6qT29IZXmehJXA==\n{\"data\":{\"UserReadModel\":{\"role\":\"User\",\"id\":\"user36@test.com\"}}}\n"},{"result":{"nanos":10700,"millis":0.0107,"status":"passed"},"step":{"line":73,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":2009500,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76","millis":2.0095,"status":"failed"},"step":{"comments":["# As the user is not admin, the response of the query shouldn't contain the datas of the user tryed to saved"],"line":76,"prefix":"*","index":9,"text":"match response.data.UserReadModel != {id: '#(jsonUserTest.username)', role: '#(jsonUserTest.role)' }"},"stepLog":"13:32:25.282 classpath:examples\/users\/TestUserNoAdminCannotDo.feature:76\n* match response.data.UserReadModel != {id: '#(jsonUserTest.username)', role: '#(jsonUserTest.role)' }\nmatch failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76\n"}],"line":53,"description":"","durationMillis":133.4753,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76","executorName":"main","name":"The user can't list a user by id","startTime":1621337545148,"refId":"[3:53]","endTime":1621337545282,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":521300,"millis":0.5213,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:25.293 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":28900,"millis":0.0289,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":693700,"millis":0.6937,"status":"passed"},"step":{"comments":["# The user to test this feature is read from a json file"],"background":true,"line":11,"prefix":"*","index":2,"text":"def jsonUserTest = read('UserTest.json')"}},{"result":{"nanos":1144300,"millis":1.1443,"status":"passed"},"step":{"endLine":83,"line":80,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":693700,"millis":0.6937,"status":"passed"},"step":{"line":84,"prefix":"*","index":1,"text":"set jsonUserTest.role = \"changed role\""}},{"result":{"nanos":176700,"millis":0.1767,"status":"passed"},"step":{"line":86,"prefix":"Given","index":2,"text":"path 'graphql'"}},{"result":{"nanos":181100,"millis":0.1811,"status":"passed"},"step":{"line":87,"prefix":"And","index":3,"text":"header Authorization = newToken.tokenType + ' ' + newToken.idToken"}},{"result":{"nanos":190700,"millis":0.1907,"status":"passed"},"step":{"line":88,"prefix":"And","index":4,"text":"request { query: '#(query)',  variables: '#(jsonUserTest)'}"}},{"result":{"nanos":756266600,"millis":756.2666,"status":"passed"},"step":{"line":89,"prefix":"When","index":5,"text":"method post"},"stepLog":"13:32:25.298 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 228\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"password\":\"Password_2\",\"role\":\"changed role\",\"username\":\"user36@test.com\"},\"query\":\"mutation ChangeUserRole($username: String, $role: String) {\\r\\n  ChangeUserRole(input: {username: $username, role: $role})\\r\\n}\"}\n\n13:32:26.053 response time in milliseconds: 754\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 32\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:26 GMT\n1 < x-amzn-RequestId: 54f546a1-ddf2-473e-87f1-87987767c73e\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbXnEkVjoEFr4w=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5ca-0927d0f570d3ccd740da5970;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 5aa1be24b1cf8e3c10252fabac41cc27.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: eeKF4-t8ic_iuxL6PYpCJmGJBtmWuXRokkiHqjjvvx52rPCoTX3R-g==\n{\"data\":{\"ChangeUserRole\":true}}\n"},{"result":{"nanos":12900,"millis":0.0129,"status":"passed"},"step":{"line":90,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":4008866400,"millis":4008.8664,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":92,"prefix":"*","index":7,"text":"wait(4000)"}},{"result":{"nanos":745400,"millis":0.7454,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":95,"prefix":"*","index":8,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":705900,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97","millis":0.7059,"status":"failed"},"step":{"comments":["# As the user is not admin, the response must contain a field \"error\""],"line":97,"prefix":"*","index":9,"text":"match response.errors != '#notpresent'"},"stepLog":"13:32:30.064 classpath:examples\/users\/TestUserNoAdminCannotDo.feature:97\n* match response.errors != '#notpresent'\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97\n"}],"line":79,"description":"","durationMillis":4770.2276,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97","executorName":"main","name":"An user no admin can't change the role of other user","startTime":1621337545293,"refId":"[4:79]","endTime":1621337550064,"exampleIndex":-1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":871800,"millis":0.8718,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"13:32:30.073 over-writing existing variable 'wait' with new value: function(pause){ java.lang.Thread.sleep(pause) }\n"},{"result":{"nanos":19400,"millis":0.0194,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":1085000,"millis":1.085,"status":"passed"},"step":{"comments":["# The user to test this feature is read from a json file"],"background":true,"line":11,"prefix":"*","index":2,"text":"def jsonUserTest = read('UserTest.json')"}},{"result":{"nanos":1554400,"millis":1.5544,"status":"passed"},"step":{"endLine":105,"comments":["# Get the query from a .graphql file"],"line":102,"prefix":"*","docString":"read('DeleteUser.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":381900,"millis":0.3819,"status":"passed"},"step":{"endLine":112,"comments":["# Define the username of the user to delete"],"line":107,"prefix":"*","docString":"{ \n   \"username\": \"#(jsonUserTest.username)\"\n}","index":1,"text":"def id ="}},{"result":{"nanos":754100,"millis":0.7541,"status":"passed"},"step":{"line":113,"prefix":"*","index":2,"text":"print id"},"stepLog":"13:32:30.077 [print] {\n  \"username\": \"user36@test.com\"\n}\n \n"},{"result":{"nanos":256700,"millis":0.2567,"status":"passed"},"step":{"line":115,"prefix":"Given","index":3,"text":"path 'graphql'"}},{"result":{"nanos":230600,"millis":0.2306,"status":"passed"},"step":{"line":116,"prefix":"And","index":4,"text":"header Authorization = newToken.tokenType + ' ' + newToken.idToken"}},{"result":{"nanos":98900,"millis":0.0989,"status":"passed"},"step":{"line":117,"prefix":"And","index":5,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":376600,"millis":0.3766,"status":"passed"},"step":{"line":118,"prefix":"And","index":6,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":577407900,"millis":577.4079,"status":"passed"},"step":{"line":119,"prefix":"When","index":7,"text":"method post"},"stepLog":"13:32:30.081 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 148\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"username\":\"user36@test.com\"},\"query\":\"mutation DeleteUser($username: String) {\\r\\n    DeleteUser(input: {username: $username})\\r\\n}\"}\n\n13:32:30.656 response time in milliseconds: 575\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 28\n1 < Connection: keep-alive\n1 < Date: Tue, 18 May 2021 11:32:31 GMT\n1 < x-amzn-RequestId: eba6ef5f-46e7-4d43-9bc2-200942a6ad0c\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fhbYYG0nDoEFmfA=\n1 < X-Amzn-Trace-Id: Root=1-60a3a5cf-109241f1677c1a7b38accb87;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 17a71b4bf5d35b398b0fd90a5cd154a7.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD50-C1\n1 < X-Amz-Cf-Id: G9vVV9ZTpX6CQHW9QeMCC4HP9apkbsKsFgZs6T5k-JIjSCNyKxVBMQ==\n{\"data\":{\"DeleteUser\":true}}\n"},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":120,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":568200,"errorMessage":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123","millis":0.5682,"status":"failed"},"step":{"comments":["# As the user is not admin, the response of the query shouldn't contain the datas of the user tryed to saved"],"line":123,"prefix":"*","index":9,"text":"match response.errors != '#notpresent'"},"stepLog":"13:32:30.658 classpath:examples\/users\/TestUserNoAdminCannotDo.feature:123\n* match response.errors != '#notpresent'\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123\n"}],"line":100,"description":"","durationMillis":583.6173,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123","executorName":"main","name":"The user can't delete other users","startTime":1621337550073,"refId":"[5:100]","endTime":1621337550658,"exampleIndex":-1}],"name":"Test that an user not admin isn't allowed to do admin functions in the environment set from the java class","passedCount":0}]}],"line":23,"description":"","durationMillis":16860.1539,"failed":true,"error":"match failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:30\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:50\nmatch failed: NOT_EQUALS\n  $ | is equal (MAP:MAP)\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n  {\"role\":\"User\",\"id\":\"user36@test.com\"}\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:76\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:97\nmatch failed: NOT_EQUALS\n  $ | is equal (STRING:STRING)\n  '#notpresent'\n  '#notpresent'\n\nclasspath:examples\/users\/TestUserNoAdminCannotDo.feature:123\nclasspath:examples\/users\/TestUserChange.feature:63","executorName":"main","name":"The user admin save a new user","startTime":1621337533796,"refId":"[2:23]","endTime":1621337550658,"exampleIndex":-1}],"callDepth":0,"name":"Test the creation of a new user and get a new token in the environment set from the java class","description":"","resultDate":"2021-05-18 01:32:30 p.Â m.","durationMillis":56324.0376,"passedCount":0}