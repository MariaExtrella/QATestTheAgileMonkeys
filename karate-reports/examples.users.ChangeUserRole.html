<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>examples.users.ChangeUserRole</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">4</div>
      <div id="nav-fail" class="bg-danger">0</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2021-05-16 09:58:51 p.Â m.</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item passed">
            <a href="#[1:22]"><span>[1:22]</span> <span>List the user by id to check the role</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[2:51]"><span>[2:51]</span> <span>The admin user change the role of one of the user created before</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[3:76]"><span>[3:76]</span> <span>List the user by id to test if the change is done</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[4:105]"><span>[4:105]</span> <span>An user no admin change the role of other user. It should fail</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">examples/users/ChangeUserRole.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Test the change of the role of users in the graphQL API in the environment set from the java class</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:22]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:22]</span>
                <span class="scenario-name">List the user by id to check the role</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>1098</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:22]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:22]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">21:58:39.826 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">42</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">852</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">827</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">21:58:39.931 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">810</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">21:58:40.149 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

21:58:40.747 response time in milliseconds: 595
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:41 GMT
1 &lt; x-amzn-RequestId: 3e07f3d5-bec1-484a-8e29-75f57723850e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_pqHEwDoEFl1w=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17970-2ce31aa50767c75c22f695c7
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 0250a97a9fe8f37b6e3c4270db2dc8af.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: qb_CaAUSaWxR6G2EaRJOHXOcwoJGvE630eSrx7pLSCCEnBHT-rfbJg==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE3ZDQ3MjhiLTI4MmEtNDkyNi05MzJkLTY0YmI2NDg2NTU3NSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJiZTY0ZWQ5Ny04ZTUyLTQ3NjYtYThjZi1kNmUwYjBiNmVkZGYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.uMY7IjT7OWzIlLTlpeOAuvVS4HjEFCa3dwnnlwMWs5RBcDuqqyj4R5IO5WiyMPqSyNwK6Rvz3ClhGm-GxWRSRyYWgbO4L4fDA47iGegY0dDqE50OAL8dhAuX7kPG7q9iKb8oooG5o3K5XGSRZhwJDlorvApe13ze9FHI9Ybf6scCZ1i57YOnKhbJOr9Hcln_Vx7slLXo7VTFRslyEFB5d-hsgq-3OPiiPCu6dx3ZBiF14TV1NCinSyY-unzrOYSXwUCfgottARoER48MZuBZapn5oIhJb6xyVr0bvl-R3utJR9z_YqQAgZ3wl1tKwQq-RexMu3wNxvsosop2SgIRiQ&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.H8wN_VWhFOBfoKdHhzLiyiWfrugoUS_2EQs22CUn4KQmItWiRVI0TZiqv0UZAV8udv58WdULlvFH9H90xe7Oee0DyiR9BsjJFHc9lgtOxk9O-DfY1ZpaiZgAism4h_UeI1KjMh44nNZR9luQQrdLX7vEZi-8zv9elXeJjIODP_xHGYfGobjpnANXvZm428jT4ii3LRvHGxzo3KLOI8CC0zDCL2TUBI0onSznVwBdcptWqH0tFD1qvrXTcsye5NG40CkP5hBJuRNXUUIAzGP9-uKT7wEzgY9isiaJpuWHc1oz97gUBU0sL3td2LIw_1C2dSZbI_rUg5pyNdLxeQbiAA.qEBe1ZtPk3FyAftV.zw-Oreu68jJW88fAKF1X8n6t11S3IjbZXxkj3dpnwy9qixxQB_roSiHcR_9HOi2Y_fQRTauLEi4bKmioHPyoDN9J9QA28Q7cLy0x_3hYSrx39ZvK6tgPm74oE61tRSJX33sbPFpv853-tlslH3eXUoNTR090aFP3lKfDzgLF0df7cgYgYio6OhDYgoZ7taE5sPeMW3Pr_BvyBnmtYXEsVzVVTBycdE9UwTWS_enuGXJKex3AzHMXHGvsEpY2zxfotK5fhhNj6lUI2f3dXh2XN5Ux_4nR2UyoNW39RH_SrNiVL5bCG7TXdoiNRfbgnYLA03n8-HvBsx3Hklj6fkkWOxIeAprVoCtMWqG6RS38ZTqrW7C99GCRFJv8vxz2msrr779FZndDB-VKVCQlikIJB5OzFx8tFrm__2-Ie64Et-BPlOYozDI9KmqFC54V8OJqUPMY8H9Ajruyi_m3ssSYNdG8wr88-xUeOgOBfiATI6bXSzU5mgwHA4JGdY4e6H-qpcIXv2pKdTnqv3vKYfqnwG_rAUEx7NqxO0ZJH2_soa2ZpKwTA4JOeO01GXxeAzmdCspabjlcbhktwAEuD-MruMbU54OGBBOpPeZLyngR_V1ybyhylrAhZWQGSDrJFiRylPLM9SOso1m41nHCViSpEHJumZ6mlaBEUxdm99ABcWG0qB207oueRWz2BexVskeZKhjd5oXhGk4pu36my16uOJJebbWOEDEIkI9gjTfscj4Q9iL9-KkFBq1UpGC4YyRd-D7SJ6KRml3QqSaYkjOGHY5-jt3zykuglGrM-2nn0VWoEC-UTO1JBMYOpTX_-ow2VXdA1lZHIvQlKDgqjrV-wlLdnH10OhMzLx0UYltuXBQk6y1vhH1GbWaQltz15SlArI_iev6kUOsj-kR_AP8YFsM1-L29dWedAVz04LJGi62o3mSfDPLK4LIFLUCE_DhBbf0BAPnMNvgFzqAXvcYrRC0SBQDYGpuj_YiFJC11rDqz1GpO2V0lRi7_yugqXU7cmU1citfHnLNcU89ePnlMhT5OFqjKreaRtB04Rw6BtK_hSnKfiNj-UnoLetjndXNbcyorE8d5C3tgrdB75NCN082VnaRWiI0qhegbeWOlJv0sRnkNh9bnt_h7s__Qy762TXym2938ioxpMeKays4AGUY8bTzSMFRnylwGemVRZOfb8ne38lIAsVzybvhE1HnImLtju8lswE9vND8bmJKUjfGFLEtv2pSDZJcxXe-3t_tNjrYrS_S9X-E2ExXaxVo-1wot5JQvFgi6a-AoMSokuCfUdh3JYEhM1-WxWGTmWZ1uFcv4b-RuA4O752E172I.aBMXdqmuyKL_3zYv7YIxzw&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">21:58:40.753 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">21:58:40.758 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE3ZDQ3MjhiLTI4MmEtNDkyNi05MzJkLTY0YmI2NDg2NTU3NSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJiZTY0ZWQ5Ny04ZTUyLTQ3NjYtYThjZi1kNmUwYjBiNmVkZGYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.uMY7IjT7OWzIlLTlpeOAuvVS4HjEFCa3dwnnlwMWs5RBcDuqqyj4R5IO5WiyMPqSyNwK6Rvz3ClhGm-GxWRSRyYWgbO4L4fDA47iGegY0dDqE50OAL8dhAuX7kPG7q9iKb8oooG5o3K5XGSRZhwJDlorvApe13ze9FHI9Ybf6scCZ1i57YOnKhbJOr9Hcln_Vx7slLXo7VTFRslyEFB5d-hsgq-3OPiiPCu6dx3ZBiF14TV1NCinSyY-unzrOYSXwUCfgottARoER48MZuBZapn5oIhJb6xyVr0bvl-R3utJR9z_YqQAgZ3wl1tKwQq-RexMu3wNxvsosop2SgIRiQ&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.H8wN_VWhFOBfoKdHhzLiyiWfrugoUS_2EQs22CUn4KQmItWiRVI0TZiqv0UZAV8udv58WdULlvFH9H90xe7Oee0DyiR9BsjJFHc9lgtOxk9O-DfY1ZpaiZgAism4h_UeI1KjMh44nNZR9luQQrdLX7vEZi-8zv9elXeJjIODP_xHGYfGobjpnANXvZm428jT4ii3LRvHGxzo3KLOI8CC0zDCL2TUBI0onSznVwBdcptWqH0tFD1qvrXTcsye5NG40CkP5hBJuRNXUUIAzGP9-uKT7wEzgY9isiaJpuWHc1oz97gUBU0sL3td2LIw_1C2dSZbI_rUg5pyNdLxeQbiAA.qEBe1ZtPk3FyAftV.zw-Oreu68jJW88fAKF1X8n6t11S3IjbZXxkj3dpnwy9qixxQB_roSiHcR_9HOi2Y_fQRTauLEi4bKmioHPyoDN9J9QA28Q7cLy0x_3hYSrx39ZvK6tgPm74oE61tRSJX33sbPFpv853-tlslH3eXUoNTR090aFP3lKfDzgLF0df7cgYgYio6OhDYgoZ7taE5sPeMW3Pr_BvyBnmtYXEsVzVVTBycdE9UwTWS_enuGXJKex3AzHMXHGvsEpY2zxfotK5fhhNj6lUI2f3dXh2XN5Ux_4nR2UyoNW39RH_SrNiVL5bCG7TXdoiNRfbgnYLA03n8-HvBsx3Hklj6fkkWOxIeAprVoCtMWqG6RS38ZTqrW7C99GCRFJv8vxz2msrr779FZndDB-VKVCQlikIJB5OzFx8tFrm__2-Ie64Et-BPlOYozDI9KmqFC54V8OJqUPMY8H9Ajruyi_m3ssSYNdG8wr88-xUeOgOBfiATI6bXSzU5mgwHA4JGdY4e6H-qpcIXv2pKdTnqv3vKYfqnwG_rAUEx7NqxO0ZJH2_soa2ZpKwTA4JOeO01GXxeAzmdCspabjlcbhktwAEuD-MruMbU54OGBBOpPeZLyngR_V1ybyhylrAhZWQGSDrJFiRylPLM9SOso1m41nHCViSpEHJumZ6mlaBEUxdm99ABcWG0qB207oueRWz2BexVskeZKhjd5oXhGk4pu36my16uOJJebbWOEDEIkI9gjTfscj4Q9iL9-KkFBq1UpGC4YyRd-D7SJ6KRml3QqSaYkjOGHY5-jt3zykuglGrM-2nn0VWoEC-UTO1JBMYOpTX_-ow2VXdA1lZHIvQlKDgqjrV-wlLdnH10OhMzLx0UYltuXBQk6y1vhH1GbWaQltz15SlArI_iev6kUOsj-kR_AP8YFsM1-L29dWedAVz04LJGi62o3mSfDPLK4LIFLUCE_DhBbf0BAPnMNvgFzqAXvcYrRC0SBQDYGpuj_YiFJC11rDqz1GpO2V0lRi7_yugqXU7cmU1citfHnLNcU89ePnlMhT5OFqjKreaRtB04Rw6BtK_hSnKfiNj-UnoLetjndXNbcyorE8d5C3tgrdB75NCN082VnaRWiI0qhegbeWOlJv0sRnkNh9bnt_h7s__Qy762TXym2938ioxpMeKays4AGUY8bTzSMFRnylwGemVRZOfb8ne38lIAsVzybvhE1HnImLtju8lswE9vND8bmJKUjfGFLEtv2pSDZJcxXe-3t_tNjrYrS_S9X-E2ExXaxVo-1wot5JQvFgi6a-AoMSokuCfUdh3JYEhM1-WxWGTmWZ1uFcv4b-RuA4O752E172I.aBMXdqmuyKL_3zYv7YIxzw&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.18">
      <div class="step-ref bg-step">18</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:22]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print user_header</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.20">21:58:40.765 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref passed">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define the username of the user to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.31">
      <div class="step-ref passed">31</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserRole = read(&#39;UserRole.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref passed">32</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.32">{ 
   &quot;id&quot;: &quot;#(newUserRole.username)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.38">
      <div class="step-ref passed">38</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.38">21:58:40.769 [print] {
  &quot;id&quot;: &quot;user5@test.com&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.40">
      <div class="step-ref passed">40</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.42">
      <div class="step-ref passed">42</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.43">
      <div class="step-ref passed">43</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.44">
      <div class="step-ref passed">44</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.45">
      <div class="step-ref passed">45</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">162</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.45">21:58:40.775 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 155
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user5@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

21:58:40.933 response time in milliseconds: 157
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 64
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:41 GMT
1 &lt; x-amzn-RequestId: 3846d8da-5ef5-402d-ae8e-9f9472ba6950
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_puGJnjoEFxzQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17971-4cdad114502fa81d7ecc1ffb;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 66709b7391664c627ccebe2d9c55dd7f.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: xuV2p1hpUYjspIV3iqpfoUn-9wJSYXPDN20O4UVXfVJQIFWELaBM6g==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user5@test.com&quot;}}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.46">
      <div class="step-ref passed">46</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># If the user exists, the response of the query must contain the datas of the user. The role is ignored now</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.49">
      <div class="step-ref passed">49</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModel == {id: &#39;#(newUserRole.username)&#39;, role: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">23</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2:51]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2:51]</span>
                <span class="scenario-name">The admin user change the role of one of the user created before</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>5011</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2:51]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2:51]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">21:58:40.967 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">485</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">474</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">21:58:40.980 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">468</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">21:58:40.983 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

21:58:41.447 response time in milliseconds: 462
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:41 GMT
1 &lt; x-amzn-RequestId: b6daaad0-ec31-4971-949e-45628e938328
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_pxEhejoEFj6g=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17971-16d48e23649e5ea71810055f
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 bb4bb14bfdc4b50fa6e1881933804946.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: ziok2wKxA6yOmjp-d_iFJiW29yPXClKPOmsRiKX2JrqeMAe-WyU-mg==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjlmOTRmMmZmLWJiNGQtNDMyOC1iODY2LWU3NWZhZWQzMTIzNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJmMjMwNGJiNy1hMzc5LTRjMTctOGU3Ny1mNDhjN2EwN2JhYTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.VCIfC3GsGAlZvPbUzGub73slIpVnNyaTIiHnpwunhkyxowi3pSyN21wrPAHDt0P9OJFLm5tRTxrt7-QqarzQ1bmMDQ8yL7vCXg0LZ9zcFNFFa04n-QO_sop2Ripq2WpOofU__FaL46X6ldunFSLOuUF-m6fEOoW4vGLuoFAFFtrte8qSvEhmCyF2SUNvwpOgSLp1oNgMvteBnFmZWJVV-FutT1IX45OolSL4QCn2bb3xayqiKoqtXpcojor1mgZFqchlXdgdhc8rNEtBfIrp7fRGmMwaCYsWojsZeR75XYzDWyaulZJKNImSPwbIQIEqXXDgUva0onc6Qs88EMFpeg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ezI15x4fjyXBnxUIEBAzNdW-7OlHfVkUPYZTUfaggad2eNUHMVGTx3zUwOPh3meoI9gSSKWZur0jF_JeWSC9HA5iXXp6JPfyK-JqaH485RcPkcnR6gL_oUs05wiWPh1BjtRCaUO6gCcyxWuttccicXKPH5O0ciOfXhB2wUj3X7x0ONZTq9iamhF_fZhzGsCgb4uCZ1sp1AzsvbBTIFyKhxfJUjqP40q7ZZoH3RvbAH5fcBeHA1dWbxWnNrt9iT2g_I9cYXmi51UHKtD88aXeHv29XIh2VBi9Vq2AxbnGYbttl08pC6DkOpLgqaz6c1IpB-QTrNeMGuRCFwpiTqiaBA._x2V8s2EWkTSJkAv.zIvC9wN3whe7uKa6RdHXD8fvEhS3YeRvrqAKi7iDqKWYNdrOk99fq1NyAFzyqHHPH0IdHydWLqw-zH4w-DWJD51B05bpxg_5U9sXOrvn4qunODck62DCDjO5BEZDqSv0FuyHhcDgCnNl-It0j5bZAuE6S70TxlRUyUJWX-YNt5Z0cEF4kZD6kvr7_g809nev-23QfpEtiYG7zqJmnpC99oS8poU4qTZ8U7HQjQ0lrpNmCd-UevkhFtFmKdmD5fD6oi_v0hZdlM5waSYtIE0Es-bubLZwJErfyWNRYJn1lb2rOlmmbnjy2dyzLonj58vAjoi6BjDYFdfl6rVOr0arNv8BLXDmyQciYhty2Lbq0GgLX-mvx_3fDvP95RLApM1l7tf1oC_S7bS0QNE9AUdpyWEpY43_YbnMhfKHm19jUT5C9ZK6HSe61rTrLpfpdpZSWHD6Y1VJ-PgFck58esdjO_l-CkTUjrqKixJJeDjO3hdwcsrGD0N5UeI_zIIxKQgPNziNJ13QtfNBNME9UpDt05ortAP2-o4i336yWza0JQ-KvfoBkhdp58mS6lQIuTkMQonNk6F43OSUiNfoRiFVtJl66MV4UjbxAMvM-ayDM10nL1xUsaJC0WDoN2vHVeeyR1jRu3aPhhkANzrAwooB3A1AXZgCvxh7jiWZlfAdkfy-XuhdZzv2A9IOPHLA78dODHIs9_Diz1jXlqkcuVtbxU50a-_gLP7Z8Zp4D9h5a2bxNRHCzcOLfvAhW7CdQdH44zvv3Tdz32wwncq-qEGSHDh7Z38BhxveDtAuFc2fYXHX-QPfz-Lt5hvbGAgk2tHiaC-gHu2bUgfazdmjJw8qQQji7qJB_GoLlQJcDjeardGJmPeL4WUTtrx8g7k8MDeUtjctGa2MmsBxMVMGYgNIKA4u0n1G038DAQHbGHou30JubZnRFTjBOy1YqmofEjFrfrhSLMm1IsZouNFVeb8witnMoq0WXjkMTIILFPMYxzkU4d0oSLYEWotwZygIvtKOBCaW9AmVUzfR__U9FdBaScxPRyQ88OOyNBEgOacnkEff_v8-2tLC7VzcGOXXnAfw5E1gsx2CL-ddhcFEn7dN78Vy5dowjhrjqc9QsCOOk3vjz2vVHJ4BPjosgOPNzfBSaiHB7NlC9WyPVYPh57Ypfi1GpIsRHt44U2OT1Lt2suy91yYYXZGu6h4yyCarl46TAf9iZwwXxx22fbTNBwkbz_0otFf1jf9HH_rfelXxZSg6gx_YxseFY8JWO2gRxO_Fiq3W_B5zjvzuvkKb90LGaUT1dpvGl4Z_UudRShU6xE-CcasM8Gi8jaaFQgBfZb8.TQmADkuulOH1EHGO7HUs_A&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">21:58:41.453 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">21:58:41.457 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjlmOTRmMmZmLWJiNGQtNDMyOC1iODY2LWU3NWZhZWQzMTIzNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJmMjMwNGJiNy1hMzc5LTRjMTctOGU3Ny1mNDhjN2EwN2JhYTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.VCIfC3GsGAlZvPbUzGub73slIpVnNyaTIiHnpwunhkyxowi3pSyN21wrPAHDt0P9OJFLm5tRTxrt7-QqarzQ1bmMDQ8yL7vCXg0LZ9zcFNFFa04n-QO_sop2Ripq2WpOofU__FaL46X6ldunFSLOuUF-m6fEOoW4vGLuoFAFFtrte8qSvEhmCyF2SUNvwpOgSLp1oNgMvteBnFmZWJVV-FutT1IX45OolSL4QCn2bb3xayqiKoqtXpcojor1mgZFqchlXdgdhc8rNEtBfIrp7fRGmMwaCYsWojsZeR75XYzDWyaulZJKNImSPwbIQIEqXXDgUva0onc6Qs88EMFpeg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ezI15x4fjyXBnxUIEBAzNdW-7OlHfVkUPYZTUfaggad2eNUHMVGTx3zUwOPh3meoI9gSSKWZur0jF_JeWSC9HA5iXXp6JPfyK-JqaH485RcPkcnR6gL_oUs05wiWPh1BjtRCaUO6gCcyxWuttccicXKPH5O0ciOfXhB2wUj3X7x0ONZTq9iamhF_fZhzGsCgb4uCZ1sp1AzsvbBTIFyKhxfJUjqP40q7ZZoH3RvbAH5fcBeHA1dWbxWnNrt9iT2g_I9cYXmi51UHKtD88aXeHv29XIh2VBi9Vq2AxbnGYbttl08pC6DkOpLgqaz6c1IpB-QTrNeMGuRCFwpiTqiaBA._x2V8s2EWkTSJkAv.zIvC9wN3whe7uKa6RdHXD8fvEhS3YeRvrqAKi7iDqKWYNdrOk99fq1NyAFzyqHHPH0IdHydWLqw-zH4w-DWJD51B05bpxg_5U9sXOrvn4qunODck62DCDjO5BEZDqSv0FuyHhcDgCnNl-It0j5bZAuE6S70TxlRUyUJWX-YNt5Z0cEF4kZD6kvr7_g809nev-23QfpEtiYG7zqJmnpC99oS8poU4qTZ8U7HQjQ0lrpNmCd-UevkhFtFmKdmD5fD6oi_v0hZdlM5waSYtIE0Es-bubLZwJErfyWNRYJn1lb2rOlmmbnjy2dyzLonj58vAjoi6BjDYFdfl6rVOr0arNv8BLXDmyQciYhty2Lbq0GgLX-mvx_3fDvP95RLApM1l7tf1oC_S7bS0QNE9AUdpyWEpY43_YbnMhfKHm19jUT5C9ZK6HSe61rTrLpfpdpZSWHD6Y1VJ-PgFck58esdjO_l-CkTUjrqKixJJeDjO3hdwcsrGD0N5UeI_zIIxKQgPNziNJ13QtfNBNME9UpDt05ortAP2-o4i336yWza0JQ-KvfoBkhdp58mS6lQIuTkMQonNk6F43OSUiNfoRiFVtJl66MV4UjbxAMvM-ayDM10nL1xUsaJC0WDoN2vHVeeyR1jRu3aPhhkANzrAwooB3A1AXZgCvxh7jiWZlfAdkfy-XuhdZzv2A9IOPHLA78dODHIs9_Diz1jXlqkcuVtbxU50a-_gLP7Z8Zp4D9h5a2bxNRHCzcOLfvAhW7CdQdH44zvv3Tdz32wwncq-qEGSHDh7Z38BhxveDtAuFc2fYXHX-QPfz-Lt5hvbGAgk2tHiaC-gHu2bUgfazdmjJw8qQQji7qJB_GoLlQJcDjeardGJmPeL4WUTtrx8g7k8MDeUtjctGa2MmsBxMVMGYgNIKA4u0n1G038DAQHbGHou30JubZnRFTjBOy1YqmofEjFrfrhSLMm1IsZouNFVeb8witnMoq0WXjkMTIILFPMYxzkU4d0oSLYEWotwZygIvtKOBCaW9AmVUzfR__U9FdBaScxPRyQ88OOyNBEgOacnkEff_v8-2tLC7VzcGOXXnAfw5E1gsx2CL-ddhcFEn7dN78Vy5dowjhrjqc9QsCOOk3vjz2vVHJ4BPjosgOPNzfBSaiHB7NlC9WyPVYPh57Ypfi1GpIsRHt44U2OT1Lt2suy91yYYXZGu6h4yyCarl46TAf9iZwwXxx22fbTNBwkbz_0otFf1jf9HH_rfelXxZSg6gx_YxseFY8JWO2gRxO_Fiq3W_B5zjvzuvkKb90LGaUT1dpvGl4Z_UudRShU6xE-CcasM8Gi8jaaFQgBfZb8.TQmADkuulOH1EHGO7HUs_A&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.18">
      <div class="step-ref bg-step">18</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:51]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print user_header</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.20">21:58:41.459 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.53">
      <div class="step-ref passed">53</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.53">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user role</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.58">
      <div class="step-ref passed">58</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_datas = read(&#39;UserRole.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.60">
      <div class="step-ref passed">60</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.61">
      <div class="step-ref passed">61</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.62">
      <div class="step-ref passed">62</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;,  variables: &#39;#(user_datas)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.63">
      <div class="step-ref passed">63</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">489</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63">21:58:41.466 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 199
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;role&quot;:&quot;customer&quot;,&quot;username&quot;:&quot;user5@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

21:58:41.952 response time in milliseconds: 484
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:42 GMT
1 &lt; x-amzn-RequestId: 6c556405-ec96-4fbe-904e-71cf3e656ce6
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_p2HfqDoEF58A=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17972-2297bac968e854554f039917;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 71a0472adc0e71a3b21b29ba3bec35f2.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: C0fYBZ-p6tOQZGsoSpqvBFczc2lLl2PfKfNgKbruBIMIi0kG18Trqg==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.64">
      <div class="step-ref passed">64</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.67">
      <div class="step-ref passed">67</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4025</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.70">
      <div class="step-ref passed">70</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the change of the role can&#39;t be done, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.73">
      <div class="step-ref passed">73</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[3:76]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[3:76]</span>
                <span class="scenario-name">List the user by id to test if the change is done</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>782</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[3:76]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[3:76]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">21:58:45.987 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">483</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">473</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">21:58:45.997 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">470</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">21:58:45.999 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

21:58:46.464 response time in milliseconds: 464
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:46 GMT
1 &lt; x-amzn-RequestId: 4562a915-b1cc-4423-93c6-89592b78f11c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_qjE4zjoEFfug=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17976-0512402131ee30cf058da54d
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 b57cfda43c76a33a7043dd5bcd943c1c.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: rZMcRSLA2MQbwoKshxFIVpI-Bnf-9rJR1Kmsfs8fbiYCrmRYIKatCg==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjI4OTkwYjYxLThmYWMtNDNjNy1iMDMzLTU4MTc0ZjM5MjM4NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjYsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNiwiaWF0IjoxNjIxMTk1MTI2LCJqdGkiOiI2ZmMzYTAyOC0xNjE2LTQ4YTUtOTE5MC01ZGM5OTA1OTdiOWUiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.kpxwF7UMYDIfnRlt28LKy6bCyAwE1Uoy_sfI4DWxdn9cAlfHZuwex-BWrfsNwkaZ8Ty1ePhARL6f2dERGUaDcK_QExDGwLdW0M1MBauu47axp-Y4szkhNuhak3mftfupiyYz0MoMeXiVe506uINDsQUzQnKTFLXwktRjm2sMyo0u28I1iqafqYeDdPSDpeUbFxDJwOCVxaHComSIlqQ29nwb5W5rX647TeDlAZeCPGQ9uAO8-Fse9rmdTF0hbJFNYkUDX2vZ8-rCtqXHW1uWMKrgpu0Bd_zYtH1X7BvU8JL0yFuiZbn5649fIY0e4pO4b8x2MfMohFCfZSX6GkoH9Q&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ihlUjRmhMRndPuOs3mmfxoUjkIDeucCH0kzI93fGbyw72D6EaTik-cuQzIRoqk3r2gXNjXtNSAVWd1c2QLzL6hC1iZmYR7tf6Qm00sPJ6u7el7S2EANfgbG6mpz7JTXgaV8onrrXZIzTFtw_tTVMj_Qityzp2hwrm-efT-MJhSteNR6AYDhGNvWb9roZABsTz24mxeMntCZVa2v0Mc_R8ncMM9dqp-PJJNF2yufP834162RIPo5rxC7mAlMdgAWNsTGw6WMM0FA9birl1OBQpYyJcSy6I9DvFR5PU0UcW1n9fxL_4mhcnzXYIaCskzrDzq9O2egOvEoWn2PSiLHnbA.UVXS8oLc0_6QS3Gm.j7_xyn-3BUuQcmtUp0MU0SRkOyJtji9t3Bvb1R8al1YTeoRhQygSisPp3JouDMVOCGlzFK4V1CLs8Ec0KIG4463NU08ADsyR1PQCHaGfDG9CZIcAGyfvcV9mWdu9GTt-wlk5lTpflOrbiUB1D91GWetXRt9B0Mpn14yyYTjhydhg0R1mEbSjivRqT-GGYEloPe1saR4yo4RY0pNaX676qhecnr1J81DYsT3i3Llunbo7VtFoaU4qT4pYqLEVh6k_PiQaxYh0ucQuvNiHZKOvNs2UZPwnqqT8Y5I-xi5Jx6iRz4b_E_xtdH7X02PkcVs5XJIU9HxqHrsrhVKlFRBml-tM9tOr4c8VimzzZ7b-ugY_l6AgdNO2mt9GfQ5xOV-JYDicJmf4fp1SyGhuoD2nc8Oev-HjB4f67ZaA9WH6GweHGK9mau8FUUFWLW7Z_CLTFf5Fmm3lewtX_0TIZiCmdyfo1V03plaB06Eq5pkb_hsYmEwnJSPcDH17kywh9xBFWkHzz4Tde8qgzxcVHXXSDQOTrWtQf-Q4Iwpc-pLoDMrUhE1TyN6DjHvDLUs3xnx2x2r6rU5irfphtms9gBayT1rTXR39I0AZKOSn2vtpC3V9MlFobursSD6ZI0B2gGnf04Dp51Xa1m-aw3TRY2NdT61rtU6PaCt-e0houdqDRgDR1AevInxWuuniHwGf5fsIaGt6DtHkcCFbZv-zcvLC-krJfjMle2E15f_Ep5yVSMjDCvkTgS5ecaS_DBazoj-qn-NJPIb7Pj-lEtsRVP7mNyIJP8z8yG8h6PZAzoAbO6pq8dTiTqnNNCCch22zoJHidNLJuzJhMF6Fcp-5toshTwkecq5OhKGf6rvYKr_-3Sg4gxBe8fLnfx1_thvgHWtYMqJmrtpxPBFkRqCyTrznnP4CNm3Rco-H8UBXjXUGUELfTTRXTYVRJYENE6w_aaIpBk9rwYslXmbg2Me-m-5tMWByOyvt9K7AxKrLlrJ8XlFJ7b9T2rZN_yNqOFHSN2c27eNPwmuAM34O5ZrQ-RnxqVljhwRXr18ZzLRNZ_kV7KLpyOpRkPoK9lEHyDe-0ZDR2dNhVqYYr9GJcf0oawbj_77rZYn5ihcFnpJruQu1lERJMZMcU-uHcbd9BQvV4MRCLQsAlwP8mUTwK80LWvL54Cls6pwrTPpKyVb-dH-VzHf8C1TxDgLy1O37QAgNkJZdCgCf71Nsp2LjILlrwIxkkYTvqd0nImEc6SZtTvRNhvWe9Aq_DK_WMAEN7sz-DasnsNwJOpE0SHYjjgXgfwToViiE_ZRGZWQD5eCfbvmPoqHvjDTVwp3LwyJ1Z4Hhq-s.bDQhHnILyGeogFgjsyZzdg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">21:58:46.470 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">21:58:46.473 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjI4OTkwYjYxLThmYWMtNDNjNy1iMDMzLTU4MTc0ZjM5MjM4NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjYsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNiwiaWF0IjoxNjIxMTk1MTI2LCJqdGkiOiI2ZmMzYTAyOC0xNjE2LTQ4YTUtOTE5MC01ZGM5OTA1OTdiOWUiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.kpxwF7UMYDIfnRlt28LKy6bCyAwE1Uoy_sfI4DWxdn9cAlfHZuwex-BWrfsNwkaZ8Ty1ePhARL6f2dERGUaDcK_QExDGwLdW0M1MBauu47axp-Y4szkhNuhak3mftfupiyYz0MoMeXiVe506uINDsQUzQnKTFLXwktRjm2sMyo0u28I1iqafqYeDdPSDpeUbFxDJwOCVxaHComSIlqQ29nwb5W5rX647TeDlAZeCPGQ9uAO8-Fse9rmdTF0hbJFNYkUDX2vZ8-rCtqXHW1uWMKrgpu0Bd_zYtH1X7BvU8JL0yFuiZbn5649fIY0e4pO4b8x2MfMohFCfZSX6GkoH9Q&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ihlUjRmhMRndPuOs3mmfxoUjkIDeucCH0kzI93fGbyw72D6EaTik-cuQzIRoqk3r2gXNjXtNSAVWd1c2QLzL6hC1iZmYR7tf6Qm00sPJ6u7el7S2EANfgbG6mpz7JTXgaV8onrrXZIzTFtw_tTVMj_Qityzp2hwrm-efT-MJhSteNR6AYDhGNvWb9roZABsTz24mxeMntCZVa2v0Mc_R8ncMM9dqp-PJJNF2yufP834162RIPo5rxC7mAlMdgAWNsTGw6WMM0FA9birl1OBQpYyJcSy6I9DvFR5PU0UcW1n9fxL_4mhcnzXYIaCskzrDzq9O2egOvEoWn2PSiLHnbA.UVXS8oLc0_6QS3Gm.j7_xyn-3BUuQcmtUp0MU0SRkOyJtji9t3Bvb1R8al1YTeoRhQygSisPp3JouDMVOCGlzFK4V1CLs8Ec0KIG4463NU08ADsyR1PQCHaGfDG9CZIcAGyfvcV9mWdu9GTt-wlk5lTpflOrbiUB1D91GWetXRt9B0Mpn14yyYTjhydhg0R1mEbSjivRqT-GGYEloPe1saR4yo4RY0pNaX676qhecnr1J81DYsT3i3Llunbo7VtFoaU4qT4pYqLEVh6k_PiQaxYh0ucQuvNiHZKOvNs2UZPwnqqT8Y5I-xi5Jx6iRz4b_E_xtdH7X02PkcVs5XJIU9HxqHrsrhVKlFRBml-tM9tOr4c8VimzzZ7b-ugY_l6AgdNO2mt9GfQ5xOV-JYDicJmf4fp1SyGhuoD2nc8Oev-HjB4f67ZaA9WH6GweHGK9mau8FUUFWLW7Z_CLTFf5Fmm3lewtX_0TIZiCmdyfo1V03plaB06Eq5pkb_hsYmEwnJSPcDH17kywh9xBFWkHzz4Tde8qgzxcVHXXSDQOTrWtQf-Q4Iwpc-pLoDMrUhE1TyN6DjHvDLUs3xnx2x2r6rU5irfphtms9gBayT1rTXR39I0AZKOSn2vtpC3V9MlFobursSD6ZI0B2gGnf04Dp51Xa1m-aw3TRY2NdT61rtU6PaCt-e0houdqDRgDR1AevInxWuuniHwGf5fsIaGt6DtHkcCFbZv-zcvLC-krJfjMle2E15f_Ep5yVSMjDCvkTgS5ecaS_DBazoj-qn-NJPIb7Pj-lEtsRVP7mNyIJP8z8yG8h6PZAzoAbO6pq8dTiTqnNNCCch22zoJHidNLJuzJhMF6Fcp-5toshTwkecq5OhKGf6rvYKr_-3Sg4gxBe8fLnfx1_thvgHWtYMqJmrtpxPBFkRqCyTrznnP4CNm3Rco-H8UBXjXUGUELfTTRXTYVRJYENE6w_aaIpBk9rwYslXmbg2Me-m-5tMWByOyvt9K7AxKrLlrJ8XlFJ7b9T2rZN_yNqOFHSN2c27eNPwmuAM34O5ZrQ-RnxqVljhwRXr18ZzLRNZ_kV7KLpyOpRkPoK9lEHyDe-0ZDR2dNhVqYYr9GJcf0oawbj_77rZYn5ihcFnpJruQu1lERJMZMcU-uHcbd9BQvV4MRCLQsAlwP8mUTwK80LWvL54Cls6pwrTPpKyVb-dH-VzHf8C1TxDgLy1O37QAgNkJZdCgCf71Nsp2LjILlrwIxkkYTvqd0nImEc6SZtTvRNhvWe9Aq_DK_WMAEN7sz-DasnsNwJOpE0SHYjjgXgfwToViiE_ZRGZWQD5eCfbvmPoqHvjDTVwp3LwyJ1Z4Hhq-s.bDQhHnILyGeogFgjsyZzdg&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.18">
      <div class="step-ref bg-step">18</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:76]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print user_header</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.20">21:58:46.474 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.79">
      <div class="step-ref passed">79</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.79">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define the username of the user to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.85">
      <div class="step-ref passed">85</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserRole = read(&#39;UserRole.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.86">
      <div class="step-ref passed">86</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.86">{ 
   &quot;id&quot;: &quot;#(newUserRole.username)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.92">
      <div class="step-ref passed">92</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.92">21:58:46.476 [print] {
  &quot;id&quot;: &quot;user5@test.com&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.94">
      <div class="step-ref passed">94</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.96">
      <div class="step-ref passed">96</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.97">
      <div class="step-ref passed">97</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.98">
      <div class="step-ref passed">98</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.99">
      <div class="step-ref passed">99</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">292</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.99">21:58:46.479 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 155
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user5@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

21:58:46.768 response time in milliseconds: 288
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 68
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:47 GMT
1 &lt; x-amzn-RequestId: 1ec291be-699a-47b9-acbb-57bf8dada1ed
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_qoEpxjoEFaHQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17977-57e053791c3aa071349f004b;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 45a6d6ca246793c1ce56677d5f878656.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: NVxVhXQEtrc11-U50muvh9QGSajDBYI3pTH5MM-ZKS2iN7t9h8nTWA==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;customer&quot;,&quot;id&quot;:&quot;user5@test.com&quot;}}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.100">
      <div class="step-ref passed">100</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># If the change was made, the response of the query must contain the datas of the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.103">
      <div class="step-ref passed">103</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModel == {id: &#39;#(newUserRole.username)&#39;, role: &#39;#(newUserRole.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[4:105]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[4:105]</span>
                <span class="scenario-name">An user no admin change the role of other user. It should fail</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>5199</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[4:105]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[4:105]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">21:58:46.776 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">371</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.14.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">360</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.14.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.15">21:58:46.787 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">358</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.20">21:58:46.789 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

21:58:47.144 response time in milliseconds: 355
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:47 GMT
1 &lt; x-amzn-RequestId: 9859f6f1-9b5e-47b5-a532-8783f6e89be5
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_qrFUhDoEF8nA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17977-77cc3e981f5cdc2e62f26a75
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c0d1739fbc59ff80d4ec6a2a675c8aac.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: HTzbocd9A-DapwyBgb7CMjk9gLL8rPGIVhYfBnFiXxpeGTFHK61iEg==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIxNjNiOThhLTlmNjQtNGQyMy05M2Q0LTAxZDUxMTk3MzdkMiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNywiaWF0IjoxNjIxMTk1MTI3LCJqdGkiOiIxMDYzZWI0Zi05MDY5LTQyYTgtYmI4Ny1mZTgxMDVjN2Q3N2IiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.LB03oNK14LlQo66dF-sjdwnuzFQhIA_ipIOFNxkMAgif2o-hASyfGI8lNc5hXz-zQvmE-pNyMm6oFBof8sMq1THCT1jGececzNzRFO8mCA88x7D_6Fc-iFl-Od4uPQVe4Yu92h-t6SuZVIKceNEc1kzC3uw4xDMK3wXxXimfXP6ciXaJJUQSEGxawUFzCqFP_nW0xa0anQGnK9VlooaMSaTkggMEiVARUK8wGLFTYk-zKaaupkLMbbpLOcTgfFW7L3xtzGd0STUGnfl5KXGRoLBlXDsUD8lnbc2jnI9qiAYL-MFhIQ2C2784ZBGyK06YxkWKRdeLLZGT4DMMjpuSxw&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bI3AvcIuSwZyHe4ZbfhFiERjxNjdrdVuIHmXK3IVqIHbEerxPDqUE1Hi2yaINGAkwP0ihRXDpgrYe6OjN85wCWA0rhZeTfmh4Nh_BDuT1ODC3Uxlxxny6kezmLJ9qqbz04KOZeELgqUFSVQ1b0Isguk46m96ns3idsV9ftx52gf3dd5cwQjUclN7mbYXPCgkvWuqiuLeDwcYIBHLW0N3jljZdHcXoy-XwOwgaKYcY61nTRDh-piYYYLEzn0QiBrkLGpypKLMk51Kl3MiAN8UVw1uV6Dk9ZFkkCiLi2uZEGTmcoxFFeg5c9ZKSrmbl7AItvm-vmPGXM80KoGpY1i79g.-kn722B3DxuQy_B9.DavqOHWWn8KHpGkiJWV6V7IGYUbdVYWQhapggzoh1TM3yVB7Q4tQYP5Bhw3tDOBSbgPjWx8ig6cCS1Dl2deaLbADjSenJci3c9MhIEKDl7NZL9oyhBqjNexfaR16e2uBzoXGmq4ipE6OnmA94s8WVhTFi5JSrKIZd0xV3yv1vScsgvk3D7gaYjQeJsDub0wfc9517GXLG0J99Od0zfONL8wjFyV58joAkec6zYssxANiidVkUqRSXLSxe6p2gKc6RCxqicYc4QiB-5Itp9cDzV2VycgSInaTegwDALDno7r1Ir1otwhgq3VfCy6vYrVgupfgf6UFMSw7cIQdXkpWyElqYo_lJTHuiwSvdEDx59l6XunxkE6B7SPMzV76V0yooQOt2HNFqVCSKHQ06b8Ntr333lLCaezxtm4KFLGFnKJAYvMM8eS1JhXRLIBzwTHIOA0VwgjAlx3tIa1HhwdbI22_WnVZz8ZakTrwsD320lArNGmXlx198N_Zba7n78l2B6bUYiHpKOqIJH_HONb2wY-srnv05p6NA8MXQ8hPjWkEVFWhaLZ9aXnulSMY9UTIPUVXP7M1eCri8cOdNA1-1XlUNZtbSt4nx_Rjady4_gzbk4KEfeR8dKCyc-O03mEgh-_p3o9VpkJ--k05ixROUfr9VfU6F24ymFpQQXytGqYzDCWsBlVEN2EfZEHV_SIZ6MegupHl3caPzxd9SOkq5HD75K437mxGkJX_td8RnpWJM94gtD_k5U9l2rF5ojjQJMCRkDiqjjpfGkS6EUiK7oqFpzW8fAsSO8TCq2FtADyVQ5ao_mAsY04RenxfRZ6vzhPG-X1TeV1cWr_clw4xCyvlu04B94ZiFyLnFxSrnXbdKjdU3QS37sBqX3lmIqwSJUK7Rxyr520LnOFbmzdmC77f9D7-nPVehtmUHDjJhGBECARgccU8WIsVTuhqH6SKhHaLbNVXarLDuCg3iUbqnJ34-feAS-8JhKan1otnzO-goYGIZ7fEerqmOlFCdj2uMCOAa0g4HCjRpfNAd9XJi30DFHEPWWiWqmBZDj212HkLQj60v-nYy7DTc-A-ryadVoBUnh1QV11BqLEoQMw49S1gTTv6OyqWsEUhZ8O5mTbcDMLFMGR586H53BEN-vWf63YB_hR-aNJqpirI-0HSWObNhtSl_CzsyGe11-QAS4Y7x1hTTS_iVpY1hfhnW4lvpXbmZ0C8QeHxLcqr85FWZF6mLxc4fptIyOD1sfuHkfd5eJCbiiIb6VnX2cv8U2n9ySWmcy4uptZztlOEibFfe_UQAMX4fs0AbdYcHpuGc_h-xREpGF32Ded7vdlobuY.jz03egUreqqg66Nni_qgFw&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.14.0.call">
    <div class="step-container" id="0.14.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.14.0.call.0.25">21:58:47.147 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15">21:58:47.148 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIxNjNiOThhLTlmNjQtNGQyMy05M2Q0LTAxZDUxMTk3MzdkMiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNywiaWF0IjoxNjIxMTk1MTI3LCJqdGkiOiIxMDYzZWI0Zi05MDY5LTQyYTgtYmI4Ny1mZTgxMDVjN2Q3N2IiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.LB03oNK14LlQo66dF-sjdwnuzFQhIA_ipIOFNxkMAgif2o-hASyfGI8lNc5hXz-zQvmE-pNyMm6oFBof8sMq1THCT1jGececzNzRFO8mCA88x7D_6Fc-iFl-Od4uPQVe4Yu92h-t6SuZVIKceNEc1kzC3uw4xDMK3wXxXimfXP6ciXaJJUQSEGxawUFzCqFP_nW0xa0anQGnK9VlooaMSaTkggMEiVARUK8wGLFTYk-zKaaupkLMbbpLOcTgfFW7L3xtzGd0STUGnfl5KXGRoLBlXDsUD8lnbc2jnI9qiAYL-MFhIQ2C2784ZBGyK06YxkWKRdeLLZGT4DMMjpuSxw&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bI3AvcIuSwZyHe4ZbfhFiERjxNjdrdVuIHmXK3IVqIHbEerxPDqUE1Hi2yaINGAkwP0ihRXDpgrYe6OjN85wCWA0rhZeTfmh4Nh_BDuT1ODC3Uxlxxny6kezmLJ9qqbz04KOZeELgqUFSVQ1b0Isguk46m96ns3idsV9ftx52gf3dd5cwQjUclN7mbYXPCgkvWuqiuLeDwcYIBHLW0N3jljZdHcXoy-XwOwgaKYcY61nTRDh-piYYYLEzn0QiBrkLGpypKLMk51Kl3MiAN8UVw1uV6Dk9ZFkkCiLi2uZEGTmcoxFFeg5c9ZKSrmbl7AItvm-vmPGXM80KoGpY1i79g.-kn722B3DxuQy_B9.DavqOHWWn8KHpGkiJWV6V7IGYUbdVYWQhapggzoh1TM3yVB7Q4tQYP5Bhw3tDOBSbgPjWx8ig6cCS1Dl2deaLbADjSenJci3c9MhIEKDl7NZL9oyhBqjNexfaR16e2uBzoXGmq4ipE6OnmA94s8WVhTFi5JSrKIZd0xV3yv1vScsgvk3D7gaYjQeJsDub0wfc9517GXLG0J99Od0zfONL8wjFyV58joAkec6zYssxANiidVkUqRSXLSxe6p2gKc6RCxqicYc4QiB-5Itp9cDzV2VycgSInaTegwDALDno7r1Ir1otwhgq3VfCy6vYrVgupfgf6UFMSw7cIQdXkpWyElqYo_lJTHuiwSvdEDx59l6XunxkE6B7SPMzV76V0yooQOt2HNFqVCSKHQ06b8Ntr333lLCaezxtm4KFLGFnKJAYvMM8eS1JhXRLIBzwTHIOA0VwgjAlx3tIa1HhwdbI22_WnVZz8ZakTrwsD320lArNGmXlx198N_Zba7n78l2B6bUYiHpKOqIJH_HONb2wY-srnv05p6NA8MXQ8hPjWkEVFWhaLZ9aXnulSMY9UTIPUVXP7M1eCri8cOdNA1-1XlUNZtbSt4nx_Rjady4_gzbk4KEfeR8dKCyc-O03mEgh-_p3o9VpkJ--k05ixROUfr9VfU6F24ymFpQQXytGqYzDCWsBlVEN2EfZEHV_SIZ6MegupHl3caPzxd9SOkq5HD75K437mxGkJX_td8RnpWJM94gtD_k5U9l2rF5ojjQJMCRkDiqjjpfGkS6EUiK7oqFpzW8fAsSO8TCq2FtADyVQ5ao_mAsY04RenxfRZ6vzhPG-X1TeV1cWr_clw4xCyvlu04B94ZiFyLnFxSrnXbdKjdU3QS37sBqX3lmIqwSJUK7Rxyr520LnOFbmzdmC77f9D7-nPVehtmUHDjJhGBECARgccU8WIsVTuhqH6SKhHaLbNVXarLDuCg3iUbqnJ34-feAS-8JhKan1otnzO-goYGIZ7fEerqmOlFCdj2uMCOAa0g4HCjRpfNAd9XJi30DFHEPWWiWqmBZDj212HkLQj60v-nYy7DTc-A-ryadVoBUnh1QV11BqLEoQMw49S1gTTv6OyqWsEUhZ8O5mTbcDMLFMGR586H53BEN-vWf63YB_hR-aNJqpirI-0HSWObNhtSl_CzsyGe11-QAS4Y7x1hTTS_iVpY1hfhnW4lvpXbmZ0C8QeHxLcqr85FWZF6mLxc4fptIyOD1sfuHkfd5eJCbiiIb6VnX2cv8U2n9ySWmcy4uptZztlOEibFfe_UQAMX4fs0AbdYcHpuGc_h-xREpGF32Ded7vdlobuY.jz03egUreqqg66Nni_qgFw&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.18">
      <div class="step-ref bg-step">18</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:105]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print user_header</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.20">21:58:47.151 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># First it is necessary to sign to get a token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref passed">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUserNoAdmin.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.109">21:58:47.151 over-writing existing variable &#39;datas&#39; with new value: read(&#39;signinDatasUserNoAdmin.json&#39;)
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.112">
      <div class="step-ref passed">112</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">645</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.112.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">636</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.112.0.call.0.4">21:58:47.155 over-writing existing variable &#39;signIn&#39; with new value: call read(&#39;signin.feature&#39;) datas
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.112.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.112.0.call.0.15">21:58:47.163 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;user8@test.com&quot;,
  &quot;password&quot;: &quot;Password_1&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">633</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.112.0.call.0.20">21:58:47.165 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 93
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Password_1&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;user8@test.com&quot;}

21:58:47.794 response time in milliseconds: 627
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 3994
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:48 GMT
1 &lt; x-amzn-RequestId: e5112361-9aba-4180-8045-2f0a7815b461
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_qxFO6joEFevA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17978-06b349ce4d84121c01a3a07b
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c9966d06baf42da6ee92424751ed7202.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: QeMAdpJEZZjqbfQ90jEJvgPbckDZPkXD09pyYuQchexpkJ-7v-cfwA==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyOCwiaWF0IjoxNjIxMTk1MTI4LCJqdGkiOiI2ODI3NjE5NC05MjE2LTQ4MDQtODQ5Zi02MTJiNzQwODNkNjgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.dsANECBZ25q4qUq9aMSQVbtenwEguJ0aP5N7aPNrARX-jApvWBeF7eb_ghib4NpwXY5gIiuH-Ugof-zmGTh892sPiQHiVizKqAvL4L1miQ0sixprb-PBatXDlHZxqtl8fQdZ_oX2Zy9mWZXn2ZFzUHi59GxY1OvlUW_p7RytB-xeJWCs8ilZYS5GF-kt60_YbgiKi6fvPxYKAzDUfsDSMcGLhkWjDiDWN-E4LHGV_FZy6R2cvynbJhehtucABwrF3Gd1AbwDqGfSfssk4NdAHbDnMRjjhR1LsvPwMkiYAQ5EONKYRJtQBGKzfaN75Cl-g14YRXM6rw_0LXp10FXbEg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Y2nRk19Z2NfcC1_BIxRJ4L1LzkOqB0xmyNY2OR8NoquQ6CEMY_IHRXnNtqmGB7j12wrbIf8LRoTQ-628EgqY8xwb85oDweIu5lbVPqa00flz3gUVWvU6GtFcx79sE36sfDIXiPXZJpgYIgZGNXLTogZAh1FhTA9dxiFdBm5dLxqMUShqgjAIZnzcYLe0YUaMeg8p58ePBQbqZ8A5nOEbmCuqy1jikxyEJRsYhcJLwjl_JXQW5urzjMLBUBScsqH89sDUzXeLXeY9HR7-dnHzQ54MmMAscbNPmu1DwugQVMNwcCnU5saNb5hebkf9m2JJkWatJAQm219XxlyObakWJg.2c8LZX-tEeTxVnEB.P2ijWun7gSJ57Ds1CQ23tCj0ndyD9Lc6WLkTJunLMJmIi7lP_ncBMs9O3wPgvGQmFXbafNHdv1ctFK8W6XCsxo2D10TKFhWIelFM9sJEiPJgxVKibGIYk1dFHVHPSeySbrdgKJeumcSKtKQP0wwQ_x7dphhn0_rayE79kIUJ-YHhbXrZS4VwDGtxZC9a-pVl78bzqTi5yZs9eg_grrSHXTK722AkxSmOZb_rH-CYdGu4XkgLfhx-ZzhytcpOPycD2sonbIIE2mXqrZbx95h5U0XE9wtXHEzzlk6DZKv1_zQVlpgH5G80hZntpDNmvhCy4QhVZ32RikICbJWVYnc-jSURKfX2-K6GpktsRQOfyvmfK1a9i-M-VpM01dkFINFi8Ln_DqqzSVpV3uGORCc_PDMCIZ3iVD077tnrqfAbz_eb7MntQjY2oWbTNNuZ17JkwbM27kQgbmBiPCLzZYvb0lHrXcruFpzKHKECHgQ36ia15TpZDVVzTOUm6ZFyhlAzr9bUgMWb26rTfBKOEQ-4n1ZNe0Ukd-Nrx8eNI4ki5kKSWsESItckqQjrEIf0n0mC46xcKPCJI3VHVArikvV3u9luElrkslPzTPfoWckheEHzDRnvWMe1qUKcaYv0zv4S7zbKp4C1piZW_PtuV6EAuy7Q3lro0dF_A1CPA_oYAHOrXVkyT2ETRSr4wtcyxj_1EKcV6Y73qFWlxsY_-fa4baSJE9RJrh-Explr75UAdqkWLNKKlaMfNcuH2DWFcA2IkIC3AHzPdyNquFyEE_a8vG93vxYR62VTljeQrgVnf4iKEkZmxI3Lq6Vt7KZUQgU8ztg7deuhrgkoZJ2H2evTQGnWzimv7Tc2HxbrWOK0V1cbmt3fKtu1gSfhAFj57Rw0sGop91YzsLz6D6kkulQp_sGRX35rgmXnk_I_c6GFAy3V3G0B4wOkBQZrmQVmb3Mut0bBx0wfjI8Erf6PD4dgfrsQr_xj-l0-9HBkwejhp_fOHpxFlIVwzIGLhO4DLYUJx4ToFQmUo9oXLKX7OfVA8wQb8ASKFt1JRcIPqwSdbIcFEeop32sanLlTlUuDhmputgRCWeorDCQV0S1JEH8wyL9_DHdQcpYwNtBdFL6kgtgZrzgo1uwnx2G-Wr9fu54_p7PGdV4KdkytplZPqA9CAiiFpXrs4n6duSFdCTqyk1yz9vcqd2hFYKel_I98KDmHPwVYtFvrK2fouBiwq0EMPAhbRBjXS236B2ZX4wnfIiH3HYjrJKakSfgV7catlMywvlIRnlNVi5kzV-ZacGTWYWWZvT12VZ3xw-QLRKbBUtIYpRskNmZg1JV2X4r5MUo.ivFF3GTlnBDzwXtI2uc9gw&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.112.0.call">
    <div class="step-container" id="0.112.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.112.0.call.0.25">21:58:47.798 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.113">
      <div class="step-ref passed">113</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.113">21:58:47.800 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyOCwiaWF0IjoxNjIxMTk1MTI4LCJqdGkiOiI2ODI3NjE5NC05MjE2LTQ4MDQtODQ5Zi02MTJiNzQwODNkNjgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.dsANECBZ25q4qUq9aMSQVbtenwEguJ0aP5N7aPNrARX-jApvWBeF7eb_ghib4NpwXY5gIiuH-Ugof-zmGTh892sPiQHiVizKqAvL4L1miQ0sixprb-PBatXDlHZxqtl8fQdZ_oX2Zy9mWZXn2ZFzUHi59GxY1OvlUW_p7RytB-xeJWCs8ilZYS5GF-kt60_YbgiKi6fvPxYKAzDUfsDSMcGLhkWjDiDWN-E4LHGV_FZy6R2cvynbJhehtucABwrF3Gd1AbwDqGfSfssk4NdAHbDnMRjjhR1LsvPwMkiYAQ5EONKYRJtQBGKzfaN75Cl-g14YRXM6rw_0LXp10FXbEg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Y2nRk19Z2NfcC1_BIxRJ4L1LzkOqB0xmyNY2OR8NoquQ6CEMY_IHRXnNtqmGB7j12wrbIf8LRoTQ-628EgqY8xwb85oDweIu5lbVPqa00flz3gUVWvU6GtFcx79sE36sfDIXiPXZJpgYIgZGNXLTogZAh1FhTA9dxiFdBm5dLxqMUShqgjAIZnzcYLe0YUaMeg8p58ePBQbqZ8A5nOEbmCuqy1jikxyEJRsYhcJLwjl_JXQW5urzjMLBUBScsqH89sDUzXeLXeY9HR7-dnHzQ54MmMAscbNPmu1DwugQVMNwcCnU5saNb5hebkf9m2JJkWatJAQm219XxlyObakWJg.2c8LZX-tEeTxVnEB.P2ijWun7gSJ57Ds1CQ23tCj0ndyD9Lc6WLkTJunLMJmIi7lP_ncBMs9O3wPgvGQmFXbafNHdv1ctFK8W6XCsxo2D10TKFhWIelFM9sJEiPJgxVKibGIYk1dFHVHPSeySbrdgKJeumcSKtKQP0wwQ_x7dphhn0_rayE79kIUJ-YHhbXrZS4VwDGtxZC9a-pVl78bzqTi5yZs9eg_grrSHXTK722AkxSmOZb_rH-CYdGu4XkgLfhx-ZzhytcpOPycD2sonbIIE2mXqrZbx95h5U0XE9wtXHEzzlk6DZKv1_zQVlpgH5G80hZntpDNmvhCy4QhVZ32RikICbJWVYnc-jSURKfX2-K6GpktsRQOfyvmfK1a9i-M-VpM01dkFINFi8Ln_DqqzSVpV3uGORCc_PDMCIZ3iVD077tnrqfAbz_eb7MntQjY2oWbTNNuZ17JkwbM27kQgbmBiPCLzZYvb0lHrXcruFpzKHKECHgQ36ia15TpZDVVzTOUm6ZFyhlAzr9bUgMWb26rTfBKOEQ-4n1ZNe0Ukd-Nrx8eNI4ki5kKSWsESItckqQjrEIf0n0mC46xcKPCJI3VHVArikvV3u9luElrkslPzTPfoWckheEHzDRnvWMe1qUKcaYv0zv4S7zbKp4C1piZW_PtuV6EAuy7Q3lro0dF_A1CPA_oYAHOrXVkyT2ETRSr4wtcyxj_1EKcV6Y73qFWlxsY_-fa4baSJE9RJrh-Explr75UAdqkWLNKKlaMfNcuH2DWFcA2IkIC3AHzPdyNquFyEE_a8vG93vxYR62VTljeQrgVnf4iKEkZmxI3Lq6Vt7KZUQgU8ztg7deuhrgkoZJ2H2evTQGnWzimv7Tc2HxbrWOK0V1cbmt3fKtu1gSfhAFj57Rw0sGop91YzsLz6D6kkulQp_sGRX35rgmXnk_I_c6GFAy3V3G0B4wOkBQZrmQVmb3Mut0bBx0wfjI8Erf6PD4dgfrsQr_xj-l0-9HBkwejhp_fOHpxFlIVwzIGLhO4DLYUJx4ToFQmUo9oXLKX7OfVA8wQb8ASKFt1JRcIPqwSdbIcFEeop32sanLlTlUuDhmputgRCWeorDCQV0S1JEH8wyL9_DHdQcpYwNtBdFL6kgtgZrzgo1uwnx2G-Wr9fu54_p7PGdV4KdkytplZPqA9CAiiFpXrs4n6duSFdCTqyk1yz9vcqd2hFYKel_I98KDmHPwVYtFvrK2fouBiwq0EMPAhbRBjXS236B2ZX4wnfIiH3HYjrJKakSfgV7catlMywvlIRnlNVi5kzV-ZacGTWYWWZvT12VZ3xw-QLRKbBUtIYpRskNmZg1JV2X4r5MUo.ivFF3GTlnBDzwXtI2uc9gw&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.116">
      <div class="step-ref passed">116</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.116">21:58:47.801 over-writing existing variable &#39;idToken&#39; with new value: signIn.response.idToken
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.117">
      <div class="step-ref passed">117</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.117">21:58:47.801 over-writing existing variable &#39;user_header&#39; with new value: &quot;Bearer &quot; + idToken
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.118">
      <div class="step-ref passed">118</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print user_header</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.118">21:58:47.802 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># with the token, the change is tryied</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.122">
      <div class="step-ref passed">122</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.122">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user role</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.127">
      <div class="step-ref passed">127</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_datas = read(&#39;UserRole.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.129">
      <div class="step-ref passed">129</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.130">
      <div class="step-ref passed">130</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.131">
      <div class="step-ref passed">131</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;,  variables: &#39;#(user_datas)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.132">
      <div class="step-ref passed">132</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">155</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.132">21:58:47.806 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 199
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;role&quot;:&quot;customer&quot;,&quot;username&quot;:&quot;user5@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

21:58:47.959 response time in milliseconds: 153
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 162
1 &lt; Connection: keep-alive
1 &lt; Date: Sun, 16 May 2021 19:58:48 GMT
1 &lt; x-amzn-RequestId: a76ca5c6-950d-4f0e-8f71-5c21b849bcd6
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fb_q1E_jDoEFxUQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a17978-17480c234c7657b3649a5fd9;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e5bf2c9645151e78d8b35d4b366f79f6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: gkc-EhZu8vYjpBQUavqSt4dxaxd2_o9o0pPkcIm4igR1sGIXb4BgFg==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;ChangeUserRole&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:3}],&quot;message&quot;:&quot;Access denied for command &#39;ChangeUserRole&#39;&quot;}]}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.133">
      <div class="step-ref passed">133</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.136">
      <div class="step-ref passed">136</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4016</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.139">
      <div class="step-ref passed">139</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># As the user is not admin, the response must contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.142">
      <div class="step-ref passed">142</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

