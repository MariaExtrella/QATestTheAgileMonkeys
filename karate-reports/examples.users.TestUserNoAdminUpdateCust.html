<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>examples.users.TestUserNoAdminUpdateCust</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">1</div>
      <div id="nav-fail" class="bg-danger">0</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2021-05-17 06:10:30 p.Â m.</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item passed">
            <a href="#[1:10]"><span>[1:10]</span> <span>Update and list customers by an user not admin</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">examples/users/TestUserNoAdminUpdateCust.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Test the query SaveCustomer, CustomerReadModel and CustomerReadModels that an user not admin is allowed to do in the environment set from the java class</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:10]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:10]</span>
                <span class="scenario-name">Update and list customers by an user not admin</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>5941</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:10]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:10]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">18:10:24.088 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[1:10]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Get the idToken for one of the user created by the admin. Datas are read from a JSON file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.13">
      <div class="step-ref passed">13</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def datas = read(&#39;signinDatasUserNoAdmin.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">33</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.16">
      <div class="step-ref passed">16</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) datas</span>
      </div>
    </div>
    <div class="time-cell passed">889</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.16.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">864</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.16.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.16.0.call.0.15">18:10:24.177 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;user@test.com&quot;,
  &quot;password&quot;: &quot;Password_1&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">851</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.16.0.call.0.20">18:10:24.385 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 92
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Password_1&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;user@test.com&quot;}

18:10:25.033 response time in milliseconds: 644
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 3992
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 16:10:25 GMT
1 &lt; x-amzn-RequestId: e422da47-bc25-4ab5-914b-9118bb8977a3
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fexJsEvRjoEFj9A=
1 &lt; X-Amzn-Trace-Id: Root=1-60a29571-5f57cff75ff14fff499e7e28
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c317421ad77a6a1c3629f150c353ffe5.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: jehOsjIUyG02g3mcw0TjFyn83cn6bWhWRaUm8rfU8UMoClf1prJfdA==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNjc4MjUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI3MTQyNSwiaWF0IjoxNjIxMjY3ODI1LCJqdGkiOiIzZGFkMzgyZi1mZDY3LTRiZTAtYTQ4YS1jNGUwZDQyMzc4MGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.ICwV_tGQiRPzcTaZK1TOmcTs-rC_Sn7sXpjTzUI3yMOiftzSCYXYPK0x5OVyJWlcQBbSNWY1fxzMMiQadOmUgozHd6q7Vt16rGO60lcoNRw6DVnxoXe8f85cmxu1bK1uYpcMMg6NczzwBdofFvRNGPdymqwNihZLPSYCXVdGH9CoZTxiLydTVaAGO5DooRGAO-i8ip0Yj984PHQFl90pDBDbJj7ZQTG7xJUYQ7d8hbiiLXDYsWgTn8UZRV5K7bqUol9X9R1F-Gb6V515hXJxod7Ye0CGYYcvkHT1uQExJS1pfgQ8laS4RYjmKrcQuQns92S46DLGs3emHo6TgIwlqw&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.WgDlQcD9ytO4eCtIiSp_Gc-TdOnPoF8mujmqVICbDqnyTSQ070uv1oixGIbc2h8CNF-ivDgoTzT8vXODWEkpUJDILBDiHQzn66qZsqHwY0BbxD_rLiY5JqjcmcLUbzaetZsf5CM_AGpQnCaaEkIAB5cqYV8p9OyJqVSLOZs0LVgjzZWcjklWcJRTl60eh4-RLER0R12ZOBtTFQUv7Kqz5f7ZOePzgi_S9oniSvOQM8sUux4AjNxfWtyW_Jibd8Q4rFJ8aR2WgeHikyOCk_jx4MckPuef2MaQpl0n3qKmdoWuklYOEJqAe-h8sydSdn0K_5vonqqRsaxNrwIMtXtYmg.724pbnSdxPiPVWMh.xSAl_ZRCaa_GDUikvTlF2aFg1MvPmWU5eGM3mAupGws-xt9s3Y1DRCDOlXGXcssBo-eiSCnNxguuk5mIsa0zEJMRrd-MT8sjcQrNeUJljYV4I8Oec6O50QlOgXZh1QAis6TTNtBMdsWRVSDexF4xWu38ZGGtgXpdOyFyYLWWGJu3kTqx_lwTL3K2VmJZLhhYnDlDKdrVYYIBn9fKuzT02MBFCMVaSd5s5IFghJ1_d_Ke-PGleEJc7HMV-TqX2pRhzBOcRKj2wKq64or3xUVUzuCkWEZWu1n_90CJbhMb0y2m_a-Igb0fnXILJwYUih6MCX-064Xq9l9PNFkcHz5UL6-y8hv53PJLGpOhE9jySqpP3ReQKi6Quj4RMPkQbTUhPNAsH_og-UVLZPBPqZthgfaneq-6h0Y41ors0d20XoKoDnFuy5tkUt95fY_ogWQkQgojPyq35ZUipa3oxMRcQ_AhQI7ose3W85vnuvJp7-VeHnslVDFtnufHD7mdJDK2JX7z3lpeD-YV5DN5Ytpy1UVObaYpVZwfIfr-Lez-U9WwRKDDbECyHKgl4dmDd389MfSrZ0y3st_VoBEYPOqG_YP3_avdbr426OSqQj-xeLgPKbC9T0Cajz3GKA3xchcydcMlUwFJ5Hqpfp0E4zGleUmYPtOz9e0GQfvZnakHiqQ6DCc5meDnmqRLYcDsfyESW-AVjbL4r2bChY1oLSxFsqmFGIPW9pIsX_IiNqtjcwhruwLeFgal7KwDbntngre8sRo-PXtTZ_sL_Tg6wfwRiedIZOHCFDeSyvRKx2NDdszcS1VsXVFln5vKgS_l5aW4sKb9VZkdrNCRJhP-fdwZouAPHs12umE449YPAWAI0jFmfR7teJYGgdR9IiixoQ42hxAv-5qXKHYOLNFVom2AgJvjr5BdAEVHkl5jT5KxYIgGrmqMh32tyHu9ChjCugmSOMBrMxhxha_NY1X6v_FvjvbDxniN8Wb7l8FrIRUK_JLpzeTiKW80ZzEcHo0-K6nINFNdmCoNqGUHCZIzPbCkiUvI8Vs8fdSCuTenPa-STLZOEWOth-B24BSimiGDKElVQuwQ7PKNIccQcPu6xwGO33LZCQZBtJu9949qywut8m4oE78vz52i1PC2BB7bpBzSoftwSK5ujFS4saZvisPE2Jvq_d4ld7YMFZaTpaCmEwIcrFqFlILAXhqc4CXev3DmcIZF919sr4iyWYi99y1--wTMN05cJDOFr86sn7fFJeK1sEJOLPnQWf2JoqE8CAFa7StxQqAPKap9xtqPCShbDL45FK9bVimQF3Y9PuMTO7XaX5VPfRIzNByypQOTTzc.ln2qR9V_hK7HLDeQrPWIGA&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.16.0.call">
    <div class="step-container" id="0.16.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.16.0.call.0.25">18:10:25.037 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref passed">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.17">18:10:25.041 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNjc4MjUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI3MTQyNSwiaWF0IjoxNjIxMjY3ODI1LCJqdGkiOiIzZGFkMzgyZi1mZDY3LTRiZTAtYTQ4YS1jNGUwZDQyMzc4MGEiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.ICwV_tGQiRPzcTaZK1TOmcTs-rC_Sn7sXpjTzUI3yMOiftzSCYXYPK0x5OVyJWlcQBbSNWY1fxzMMiQadOmUgozHd6q7Vt16rGO60lcoNRw6DVnxoXe8f85cmxu1bK1uYpcMMg6NczzwBdofFvRNGPdymqwNihZLPSYCXVdGH9CoZTxiLydTVaAGO5DooRGAO-i8ip0Yj984PHQFl90pDBDbJj7ZQTG7xJUYQ7d8hbiiLXDYsWgTn8UZRV5K7bqUol9X9R1F-Gb6V515hXJxod7Ye0CGYYcvkHT1uQExJS1pfgQ8laS4RYjmKrcQuQns92S46DLGs3emHo6TgIwlqw&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.WgDlQcD9ytO4eCtIiSp_Gc-TdOnPoF8mujmqVICbDqnyTSQ070uv1oixGIbc2h8CNF-ivDgoTzT8vXODWEkpUJDILBDiHQzn66qZsqHwY0BbxD_rLiY5JqjcmcLUbzaetZsf5CM_AGpQnCaaEkIAB5cqYV8p9OyJqVSLOZs0LVgjzZWcjklWcJRTl60eh4-RLER0R12ZOBtTFQUv7Kqz5f7ZOePzgi_S9oniSvOQM8sUux4AjNxfWtyW_Jibd8Q4rFJ8aR2WgeHikyOCk_jx4MckPuef2MaQpl0n3qKmdoWuklYOEJqAe-h8sydSdn0K_5vonqqRsaxNrwIMtXtYmg.724pbnSdxPiPVWMh.xSAl_ZRCaa_GDUikvTlF2aFg1MvPmWU5eGM3mAupGws-xt9s3Y1DRCDOlXGXcssBo-eiSCnNxguuk5mIsa0zEJMRrd-MT8sjcQrNeUJljYV4I8Oec6O50QlOgXZh1QAis6TTNtBMdsWRVSDexF4xWu38ZGGtgXpdOyFyYLWWGJu3kTqx_lwTL3K2VmJZLhhYnDlDKdrVYYIBn9fKuzT02MBFCMVaSd5s5IFghJ1_d_Ke-PGleEJc7HMV-TqX2pRhzBOcRKj2wKq64or3xUVUzuCkWEZWu1n_90CJbhMb0y2m_a-Igb0fnXILJwYUih6MCX-064Xq9l9PNFkcHz5UL6-y8hv53PJLGpOhE9jySqpP3ReQKi6Quj4RMPkQbTUhPNAsH_og-UVLZPBPqZthgfaneq-6h0Y41ors0d20XoKoDnFuy5tkUt95fY_ogWQkQgojPyq35ZUipa3oxMRcQ_AhQI7ose3W85vnuvJp7-VeHnslVDFtnufHD7mdJDK2JX7z3lpeD-YV5DN5Ytpy1UVObaYpVZwfIfr-Lez-U9WwRKDDbECyHKgl4dmDd389MfSrZ0y3st_VoBEYPOqG_YP3_avdbr426OSqQj-xeLgPKbC9T0Cajz3GKA3xchcydcMlUwFJ5Hqpfp0E4zGleUmYPtOz9e0GQfvZnakHiqQ6DCc5meDnmqRLYcDsfyESW-AVjbL4r2bChY1oLSxFsqmFGIPW9pIsX_IiNqtjcwhruwLeFgal7KwDbntngre8sRo-PXtTZ_sL_Tg6wfwRiedIZOHCFDeSyvRKx2NDdszcS1VsXVFln5vKgS_l5aW4sKb9VZkdrNCRJhP-fdwZouAPHs12umE449YPAWAI0jFmfR7teJYGgdR9IiixoQ42hxAv-5qXKHYOLNFVom2AgJvjr5BdAEVHkl5jT5KxYIgGrmqMh32tyHu9ChjCugmSOMBrMxhxha_NY1X6v_FvjvbDxniN8Wb7l8FrIRUK_JLpzeTiKW80ZzEcHo0-K6nINFNdmCoNqGUHCZIzPbCkiUvI8Vs8fdSCuTenPa-STLZOEWOth-B24BSimiGDKElVQuwQ7PKNIccQcPu6xwGO33LZCQZBtJu9949qywut8m4oE78vz52i1PC2BB7bpBzSoftwSK5ujFS4saZvisPE2Jvq_d4ld7YMFZaTpaCmEwIcrFqFlILAXhqc4CXev3DmcIZF919sr4iyWYi99y1--wTMN05cJDOFr86sn7fFJeK1sEJOLPnQWf2JoqE8CAFa7StxQqAPKap9xtqPCShbDL45FK9bVimQF3Y9PuMTO7XaX5VPfRIzNByypQOTTzc.ln2qR9V_hK7HLDeQrPWIGA&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Create the Authorization header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref passed">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def idToken = signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.21">
      <div class="step-ref passed">21</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def user_header = &quot;Bearer &quot; + idToken</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Users can list all the customers</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref passed">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.30">
      <div class="step-ref passed">30</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.31">
      <div class="step-ref passed">31</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref passed">32</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.33">
      <div class="step-ref passed">33</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">366</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.33">18:10:25.054 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

18:10:25.416 response time in milliseconds: 361
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 1150
1 &lt; Connection: keep-alive
1 &lt; Date: Mon, 17 May 2021 16:10:25 GMT
1 &lt; x-amzn-RequestId: dc7edf48-7bd5-43c2-b1c6-f4cd3d64950e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fexJxGuBjoEF7iA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a29571-01af06853500429d5193b740;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 c81fed03bcdba8d8bb72a1d12196c83d.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD51-C2
1 &lt; X-Amz-Cf-Id: gIHjMRjRiTIXe8aMqzrzMTkQlESJa0823CuhxOVg-X6mFXfcqqWTrg==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;2000000011a&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer2 Surname&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;2&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;0000aaaa&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;20000000aa&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer4 surname&quot;,&quot;name&quot;:&quot;Customer4 name&quot;,&quot;id&quot;:&quot;20000000bb&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2000000012a&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;0000aaa11&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2000000photo&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;20000000nophoto&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;}]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.34">
      <div class="step-ref passed">34</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.37">
      <div class="step-ref passed">37</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.40">
      <div class="step-ref passed">40</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">11</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.41">
      <div class="step-ref passed">41</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Save the body of the response</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.44">
      <div class="step-ref passed">44</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def list_customers = response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.45">
      <div class="step-ref passed">45</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print list_customers</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.45">18:10:25.439 [print] [
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Surname Updated&quot;,
    &quot;name&quot;: &quot;Name Updated&quot;,
    &quot;id&quot;: &quot;2000000011a&quot;,
    &quot;userId&quot;: &quot;user@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer2 Surname&quot;,
    &quot;name&quot;: &quot;Name Updated&quot;,
    &quot;id&quot;: &quot;2&quot;,
    &quot;userId&quot;: &quot;user@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Surname Updated&quot;,
    &quot;name&quot;: &quot;Name Updated&quot;,
    &quot;id&quot;: &quot;0000aaaa&quot;,
    &quot;userId&quot;: &quot;user@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer surname&quot;,
    &quot;name&quot;: &quot;Name Updated&quot;,
    &quot;id&quot;: &quot;20000000aa&quot;,
    &quot;userId&quot;: &quot;user@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer4 surname&quot;,
    &quot;name&quot;: &quot;Customer4 name&quot;,
    &quot;id&quot;: &quot;20000000bb&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer surname&quot;,
    &quot;name&quot;: &quot;Customer name&quot;,
    &quot;id&quot;: &quot;2000000012a&quot;,
    &quot;userId&quot;: &quot;user8@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Surname Updated&quot;,
    &quot;name&quot;: &quot;Name Updated&quot;,
    &quot;id&quot;: &quot;0000aaa11&quot;,
    &quot;userId&quot;: &quot;user@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer surname&quot;,
    &quot;name&quot;: &quot;Customer name&quot;,
    &quot;id&quot;: &quot;2000000photo&quot;,
    &quot;userId&quot;: &quot;user8@test.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer3 Surname&quot;,
    &quot;name&quot;: &quot;Customer3&quot;,
    &quot;id&quot;: &quot;3&quot;,
    &quot;userId&quot;: &quot;admin@theagilemonkeys.com&quot;
  },
  {
    &quot;photoUrl&quot;: &quot;&quot;,
    &quot;surname&quot;: &quot;Customer surname&quot;,
    &quot;name&quot;: &quot;Customer name&quot;,
    &quot;id&quot;: &quot;20000000nophoto&quot;,
    &quot;userId&quot;: &quot;user8@test.com&quot;
  }
]
 
</div>   

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### List a customers by Id that doesn&#39;t exist</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.49">
      <div class="step-ref passed">49</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.49">read(&#39;CustomerReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define the id of a customer to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.54">
      <div class="step-ref passed">54</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customer_no_exist = read(&#39;CustomerReadModelNoExist.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.55">
      <div class="step-ref passed">55</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.55">{ 
   &quot;id&quot;: &quot;#(customer_no_exist.id)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.61">
      <div class="step-ref passed">61</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.62">
      <div class="step-ref passed">62</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.63">
      <div class="step-ref passed">63</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModel)&#39;, variables: &#39;#(id)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.64">
      <div class="step-ref passed">64</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">129</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.64">18:10:25.445 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 219
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;20aassadfasfd&quot;},&quot;query&quot;:&quot;query CustomerReadModel($id: ID!) {\r\n    CustomerReadModel(id: $id) {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

18:10:25.570 response time in milliseconds: 124
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 35
2 &lt; Connection: keep-alive
2 &lt; Date: Mon, 17 May 2021 16:10:26 GMT
2 &lt; x-amzn-RequestId: 8a740f52-eb01-4d05-9079-5cbf20797cc1
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fexJ0HnPDoEFnag=
2 &lt; X-Amzn-Trace-Id: Root=1-60a29571-1190833d457d31ae524e1aef;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 911151077fc74374130cb3f3f2d671e8.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD51-C2
2 &lt; X-Amz-Cf-Id: XDnyaeshFXOY-4QJXL3KE0ddE1fdyhKq8GsMo7bFAy2Q-kYT-N8RUg==
{&quot;data&quot;:{&quot;CustomerReadModel&quot;:null}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.65">
      <div class="step-ref passed">65</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.68">
      <div class="step-ref passed">68</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response contains an error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref passed">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModel != {id: &#39;#(customer_no_exist.id)&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#### Users can update a customer</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the customer in first position of the list of customers &#39;list_customers&#39; to update</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.77">
      <div class="step-ref passed">77</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customer_inList = list_customers[0]</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.78">
      <div class="step-ref passed">78</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print customer_inList</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.78">18:10:25.580 [print] {
  &quot;photoUrl&quot;: &quot;&quot;,
  &quot;surname&quot;: &quot;Surname Updated&quot;,
  &quot;name&quot;: &quot;Name Updated&quot;,
  &quot;id&quot;: &quot;2000000011a&quot;,
  &quot;userId&quot;: &quot;user@test.com&quot;
}
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.80">
      <div class="step-ref passed">80</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUpdateCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.80">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.86">
      <div class="step-ref passed">86</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set customer_inList.name = &quot;Name Updated again&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.87">
      <div class="step-ref passed">87</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set customer_inList.surname = &quot;Surname Updated again&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.88">
      <div class="step-ref passed">88</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set customer_inList.id = &quot;2000000011a&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">######  * set customer_inList.photoUrl = &quot;photoUpdated.jpg&quot;  --- FAIL</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.91">
      <div class="step-ref passed">91</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.92">
      <div class="step-ref passed">92</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.93">
      <div class="step-ref passed">93</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUpdateCustomer)&#39;, variables: &#39;#(customer_inList)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.94">
      <div class="step-ref passed">94</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">136</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.94">18:10:25.588 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 318
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated again&quot;,&quot;name&quot;:&quot;Name Updated again&quot;,&quot;id&quot;:&quot;2000000011a&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

18:10:25.722 response time in milliseconds: 133
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 30
3 &lt; Connection: keep-alive
3 &lt; Date: Mon, 17 May 2021 16:10:26 GMT
3 &lt; x-amzn-RequestId: 0d71400f-6adb-4431-a06b-d916003c5d70
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: fexJ2HJ0DoEFg-g=
3 &lt; X-Amzn-Trace-Id: Root=1-60a29572-4a09afa012618fe45e412468;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 0250a97a9fe8f37b6e3c4270db2dc8af.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD51-C2
3 &lt; X-Amz-Cf-Id: kxCUz8bA7N4pEZB30ZQ0zckd_XmndLfHb3KfMxhObf9ncr5gHSENAw==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.95">
      <div class="step-ref passed">95</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.97">
      <div class="step-ref passed">97</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4030</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.100">
      <div class="step-ref passed">100</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check if the response contains any error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.103">
      <div class="step-ref passed">103</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">### Check that the update was fine and the customer has the id of the last user who updated it</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.106">
      <div class="step-ref passed">106</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.107">
      <div class="step-ref passed">107</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.108">
      <div class="step-ref passed">108</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref passed">109</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">296</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.109">18:10:29.758 request:
4 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
4 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjZlYzgyZDExLTQ5OGMtNGQxYy04MmMyLWVmOTc0YjRjNGI2NyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjY3ODI1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjcxNDI1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNjc4MjUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.p0u_Jg-Zl1KfwRqIyT5xt9Xvfyccv77MlXkoHoWTnoiZ6SybYYKO0TX6LeSUP5lE-f6TZE37i1zDQLclvB6hUQXEkFCHK6_55XvxElUl6bt8lql1GbfcT8AKVp44sWjPoYmcmEJuw4VGA7EPC6XFLJ6CWVAsfquMKPRL8NWd28Y8ZUmuuoR0q6X5K9WCz2NEdIhGnqJ_dzfV2V8jO3p5M2m8D9muyXIU2xgIkpADKR9FXPPog-F81IhQrk_PKsx8vEEE68rjfJFuaoCwli8GgraiT6-_czFiLnpLr-fIFkfIo10csn1fBn96alMI_UrUEtNkwSYNXCmBZqDV1iDMsA
4 &gt; Content-Type: application/json; charset=UTF-8
4 &gt; Content-Length: 167
4 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
4 &gt; Connection: Keep-Alive
4 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
4 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

18:10:30.051 response time in milliseconds: 292
4 &lt; 200
4 &lt; Content-Type: application/json
4 &lt; Content-Length: 1162
4 &lt; Connection: keep-alive
4 &lt; Date: Mon, 17 May 2021 16:10:30 GMT
4 &lt; x-amzn-RequestId: f3befcbd-4dcc-4f77-acea-e8f2bc7c69b9
4 &lt; Access-Control-Allow-Origin: *
4 &lt; x-amz-apigw-id: fexKgFtBjoEFqAg=
4 &lt; X-Amzn-Trace-Id: Root=1-60a29576-028422632602a3aa439c069c;Sampled=0
4 &lt; X-Cache: Miss from cloudfront
4 &lt; Via: 1.1 b57cfda43c76a33a7043dd5bcd943c1c.cloudfront.net (CloudFront)
4 &lt; X-Amz-Cf-Pop: MAD51-C2
4 &lt; X-Amz-Cf-Id: -Z_Mtz1WCgVmBOxzjIfq6vb_fe5G9h44_QA0gaWhOcnlgvbJhT55jw==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated again&quot;,&quot;name&quot;:&quot;Name Updated again&quot;,&quot;id&quot;:&quot;2000000011a&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer2 Surname&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;2&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;0000aaaa&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;20000000aa&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer4 surname&quot;,&quot;name&quot;:&quot;Customer4 name&quot;,&quot;id&quot;:&quot;20000000bb&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2000000012a&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Surname Updated&quot;,&quot;name&quot;:&quot;Name Updated&quot;,&quot;id&quot;:&quot;0000aaa11&quot;,&quot;userId&quot;:&quot;user@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2000000photo&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;20000000nophoto&quot;,&quot;userId&quot;:&quot;user8@test.com&quot;}]}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.110">
      <div class="step-ref passed">110</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.113">
      <div class="step-ref passed">113</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.116">
      <div class="step-ref passed">116</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.117">
      <div class="step-ref passed">117</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#(customer_inList.id)&#39;, name: &#39;#(customer_inList.name)&#39;, surname: &#39;#(customer_inList.surname)&#39;, photoUrl: &#39;#(customer_inList.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">7</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

