<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>examples.users.TestUserChange</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">0</div>
      <div id="nav-fail" class="bg-danger">2</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2021-05-18 01:32:30 p.Â m.</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item failed">
            <a href="#[1:19]"><span>[1:19]</span> <span>Test if the API met the aceptance criteria</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2:23]"><span>[2:23]</span> <span>The user admin save a new user</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">examples/users/TestUserChange.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Test the creation of a new user and get a new token in the environment set from the java class</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:19]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:19]</span>
                <span class="scenario-name">Test if the API met the aceptance criteria</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>39464</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:19]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:19]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">13:31:34.288 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[1:19]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:19]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Is necessary to sign in the API as admin to create a new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.12">
      <div class="step-ref bg-step">12</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminDatas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">36</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:19]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) adminDatas</span>
      </div>
    </div>
    <div class="time-cell passed">727</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.15.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">704</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.15.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.15">13:31:34.378 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">692</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.20">13:31:34.587 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

13:31:35.072 response time in milliseconds: 480
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:35 GMT
1 &lt; x-amzn-RequestId: 2a7dfa15-165e-44e3-a4cb-d9de455dacf5
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbPtGC_joEFYKA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a597-4a662ad76320343c42a4273e
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 b7f1ef8baa42cd103b00928d6f7d73b6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: aHgxZuJcRhljkDJQVOaaaFZ-tE_QRG69_vgmz7w22MqCCkq44bWimw==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6Ijc5NGJlMjE1LWRiNTAtNDJmNi04MjMxLWVlMmZjMmI5MzlhNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc0OTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTA5NSwiaWF0IjoxNjIxMzM3NDk1LCJqdGkiOiI5NTU5YWExNC0xZGZjLTQyNDctYjk4Ny0xMDcxNDk4MTJkMzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GsQShvNM8SNJajTiXoRwr6SOK3LpYzjKjQeH-SA9TbFU9z4I6W7pBMZ94E7UWXIVzwa5WpspFC-CUr0GXEovDxlMyRrSMTc4dvCIA3eLy-EJx9H-75mkFhyicGCEe5T63Q4zL-OK0kJtAHd6BA--oe9MJrGK-T5jMnoEUbsrCtuSrBQe_2NYrUB2F14TjxxWBotgLz6qWcJOnLqiAuIBNeTwJUFIh9IbWvv9_s9Moc4dpegJpq6Kp6YIWfWaP9uXSEEwXDNzTSRC8PVOAVOenQMIZCRnBAPJEkCJP13CpAeck3h7qI6xLb46bzELT1YdFzWOKb4GFdAwKoLkB3fK8A&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ABR7JPFGfEDxaswy6Mc15BAo8TecmKwY9yoPQw7QDE9OQSzjv2egPT3oLJrJ0821oxJSyaRcwQPTe5A4ba55hYrvOphCuXn6ogigo18b-dKKF-6T9xBobkbe5i1nllAj5lypvUkrvzLyEYkdbL0w44_giKvXecs8CsFrrECMufJJXgUKrCWPSeSCHrU0V8xEKqKcQyhx_2kJ8JZBIkAkApLK8G7GkMSlCjPGz2zSTQSG5rlw09-6GIGWJyC0YH429K1pNbXmYKfOOw6kjnklcPtp9zX-hEMFwX0zC_-uze5RHsuqs6JFkc3gGbR1pX3Jm0BnPC-RI7UflI_rbakJNQ.ztWfAYehw0I6wKoI.DzpI4WdyblfjF4dJ4-Hs4xfsDcAt01Zuk844bStZKw538PfnYAVaNhDADJO3eyqoWRJDlBw8QnX3yC7ngj_7pLrUSYlpWEk8WWSYyU5ikkj92ShY2iDud9wVrWOtvUAsOiK8mBftMXWHRGRyTBJbglUxt16H1zPaQ0EIajCNzltfMhr1I-0Wjl7Rv0xmXXC2jG8GwBdrO8BDkIp5PUIcYK_CJexVvHcwCsYOsFefoVILZTm16zGDn6EFivkS3IpI6tQrkOkH94AeEoSghtSs0w-_NGaDmjDVd9Xquwhc0p2PdxU124kt9AhLiVvf2EUuK3tISYazv3FXcGe5wJ4ZLc2ZDHsL_7ooqmN24_40flW_XK6qruoGsw7-Z8UXhdaqBvpQZxFikWWpfwVP8HQDeXuUZ3nebdMpr4o_z4HYl2X3pO8vwb5cRpX_ZDpSde0tCQklc2Hqb50mXCuRTD6pVz3dMM7MkYbXB4cNJfcOIMrlT9ZXYX1-XhHJS1oVafvYA5mFjMuCCnO05emhUrFxHHCpz13CFK1Uj41PzQmff0XLlKCHxd31H0jd6gnch1syJZojjRXEr3UXmPfTDvwAQGvAUz7Z-hLRvyIiTD_1m-SS0BllU6LVznL0rWhUlHKu6wrzPCRY-cT_8zVLwwG5R6lSwuTjp1NzIOVYkAU4DLTxE8kOYhxBnxkdOzP8-6MC45t2GKPr7RBgiHEJBBpOy4cLpOOp4KNAMNm2xrRqLDMBTcmjfopJbxgg0BSceSjBz0MuTx5qddvCt34KzuAXweUotypwL-7bWqOKJ5l9A9egMoow2JPShQogfVFArsjzy7ztH0sjZ5BBAM7tkQZOaVqBIhQmSv6hSJmnniMIiXFP7v_AZ-CtEd1B2_eXW4dPjQ3ZaWwsxZ5Z7nAhW-HfGqw7xRTDa1Xe0rdJP90h7Asb0LZnZ4Q227F2FTwaqIQ662CT9fFIRuW4VodO3GSNkznpA-Djbx52cGhU7fUv_Laj0UGCfvv6AJyeal0UdvrAQZGLKmgE__7EBGX-FXzyyRxqSKBu3FxDjT0kC6iicP5SEVyxWSj5gHRo6G2NwbA_qJC3PabfUX_q-qsgw-6BmK7f9EHZShan7VvzJ6BtW1r6aOLDrB7h-3JTnQT3lgPx924ND5NPqGkRkZ7JnJ4faNQSQExbxWSMvAjmCfxJ1uOhckUTKsEiwWoztZg-WsYt3UsqAA2iwOrqNMDv5o9ZjxFANfukbzwBJhnJ0kop_F777elycs9-QvOXPNxPkoPVO87OVgMwjzhghkPJXhjY6dngG_Jtep-hy7_HQuaglIeIDJig6PHsyjZek5LXxlY.3Z1ebTtkwHz9B2Qw0Z7mkQ&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.25">13:31:35.077 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[1:19]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.16">
      <div class="step-ref bg-step">16</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.16">13:31:35.081 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6Ijc5NGJlMjE1LWRiNTAtNDJmNi04MjMxLWVlMmZjMmI5MzlhNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc0OTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTA5NSwiaWF0IjoxNjIxMzM3NDk1LCJqdGkiOiI5NTU5YWExNC0xZGZjLTQyNDctYjk4Ny0xMDcxNDk4MTJkMzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.GsQShvNM8SNJajTiXoRwr6SOK3LpYzjKjQeH-SA9TbFU9z4I6W7pBMZ94E7UWXIVzwa5WpspFC-CUr0GXEovDxlMyRrSMTc4dvCIA3eLy-EJx9H-75mkFhyicGCEe5T63Q4zL-OK0kJtAHd6BA--oe9MJrGK-T5jMnoEUbsrCtuSrBQe_2NYrUB2F14TjxxWBotgLz6qWcJOnLqiAuIBNeTwJUFIh9IbWvv9_s9Moc4dpegJpq6Kp6YIWfWaP9uXSEEwXDNzTSRC8PVOAVOenQMIZCRnBAPJEkCJP13CpAeck3h7qI6xLb46bzELT1YdFzWOKb4GFdAwKoLkB3fK8A&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ABR7JPFGfEDxaswy6Mc15BAo8TecmKwY9yoPQw7QDE9OQSzjv2egPT3oLJrJ0821oxJSyaRcwQPTe5A4ba55hYrvOphCuXn6ogigo18b-dKKF-6T9xBobkbe5i1nllAj5lypvUkrvzLyEYkdbL0w44_giKvXecs8CsFrrECMufJJXgUKrCWPSeSCHrU0V8xEKqKcQyhx_2kJ8JZBIkAkApLK8G7GkMSlCjPGz2zSTQSG5rlw09-6GIGWJyC0YH429K1pNbXmYKfOOw6kjnklcPtp9zX-hEMFwX0zC_-uze5RHsuqs6JFkc3gGbR1pX3Jm0BnPC-RI7UflI_rbakJNQ.ztWfAYehw0I6wKoI.DzpI4WdyblfjF4dJ4-Hs4xfsDcAt01Zuk844bStZKw538PfnYAVaNhDADJO3eyqoWRJDlBw8QnX3yC7ngj_7pLrUSYlpWEk8WWSYyU5ikkj92ShY2iDud9wVrWOtvUAsOiK8mBftMXWHRGRyTBJbglUxt16H1zPaQ0EIajCNzltfMhr1I-0Wjl7Rv0xmXXC2jG8GwBdrO8BDkIp5PUIcYK_CJexVvHcwCsYOsFefoVILZTm16zGDn6EFivkS3IpI6tQrkOkH94AeEoSghtSs0w-_NGaDmjDVd9Xquwhc0p2PdxU124kt9AhLiVvf2EUuK3tISYazv3FXcGe5wJ4ZLc2ZDHsL_7ooqmN24_40flW_XK6qruoGsw7-Z8UXhdaqBvpQZxFikWWpfwVP8HQDeXuUZ3nebdMpr4o_z4HYl2X3pO8vwb5cRpX_ZDpSde0tCQklc2Hqb50mXCuRTD6pVz3dMM7MkYbXB4cNJfcOIMrlT9ZXYX1-XhHJS1oVafvYA5mFjMuCCnO05emhUrFxHHCpz13CFK1Uj41PzQmff0XLlKCHxd31H0jd6gnch1syJZojjRXEr3UXmPfTDvwAQGvAUz7Z-hLRvyIiTD_1m-SS0BllU6LVznL0rWhUlHKu6wrzPCRY-cT_8zVLwwG5R6lSwuTjp1NzIOVYkAU4DLTxE8kOYhxBnxkdOzP8-6MC45t2GKPr7RBgiHEJBBpOy4cLpOOp4KNAMNm2xrRqLDMBTcmjfopJbxgg0BSceSjBz0MuTx5qddvCt34KzuAXweUotypwL-7bWqOKJ5l9A9egMoow2JPShQogfVFArsjzy7ztH0sjZ5BBAM7tkQZOaVqBIhQmSv6hSJmnniMIiXFP7v_AZ-CtEd1B2_eXW4dPjQ3ZaWwsxZ5Z7nAhW-HfGqw7xRTDa1Xe0rdJP90h7Asb0LZnZ4Q227F2FTwaqIQ662CT9fFIRuW4VodO3GSNkznpA-Djbx52cGhU7fUv_Laj0UGCfvv6AJyeal0UdvrAQZGLKmgE__7EBGX-FXzyyRxqSKBu3FxDjT0kC6iicP5SEVyxWSj5gHRo6G2NwbA_qJC3PabfUX_q-qsgw-6BmK7f9EHZShan7VvzJ6BtW1r6aOLDrB7h-3JTnQT3lgPx924ND5NPqGkRkZ7JnJ4faNQSQExbxWSMvAjmCfxJ1uOhckUTKsEiwWoztZg-WsYt3UsqAA2iwOrqNMDv5o9ZjxFANfukbzwBJhnJ0kop_F777elycs9-QvOXPNxPkoPVO87OVgMwjzhghkPJXhjY6dngG_Jtep-hy7_HQuaglIeIDJig6PHsyjZek5LXxlY.3Z1ebTtkwHz9B2Qw0Z7mkQ&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[1:19]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref bg-step">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.21">
      <div class="step-ref failed">21</div>
      
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>def testAdmin = call read(&#39;TestUserAdmin.feature&#39;) adminToken</span>
      </div>
    </div>
    <div class="time-cell failed">38697</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21">13:32:13.779 classpath:examples/users/TestUserChange.feature:21
* def testAdmin = call read(&#39;TestUserAdmin.feature&#39;) adminToken
match failed: CONTAINS
  $ | actual does not contain expected | actual array does not contain expected item - {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;#(datas.username)&quot;} (LIST:MAP)
  [{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]
  {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;#(datas.username)&quot;}

    $[2] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
    {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
    {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

      $[2].id | not equal (STRING:STRING)
      &#39;3&#39;
      &#39;2100000photo&#39;

        $[1] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
        {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
        {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

          $[1].id | not equal (STRING:STRING)
          &#39;23000000nophoto&#39;
          &#39;2100000photo&#39;

            $[0] | not equal | match failed for name: &#39;photoUrl&#39; (MAP:MAP)
            {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
            {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

              $[0].photoUrl | data types don&#39;t match (STRING:NULL)
              &#39;&#39;
              null

classpath:examples/users/TestUserAdmin.feature:190
classpath:examples/users/TestUserChange.feature:21
</div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.21.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.TestUserAdmin</div>
      </div>
      <div class="time-cell passed">38597</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:35.106 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># JSON file with the new user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.48">
      <div class="step-ref passed">48</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def NewUser = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.50">
      <div class="step-ref passed">50</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.51">
      <div class="step-ref passed">51</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">10</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.52">
      <div class="step-ref passed">52</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(NewUser)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.53">
      <div class="step-ref passed">53</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">2387</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.53">13:31:35.128 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 250
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user3@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

13:31:37.512 response time in milliseconds: 2382
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:38 GMT
1 &lt; x-amzn-RequestId: 2df09ada-fcec-4eef-b322-03ab9429c3eb
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbPxHJljoEFSLw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a598-28a602d80c3f805c0735ec0f;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 77fcce204f96e329df7227f192690939.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: RjRK9rnocmc_jTT4nv2W59kd4kO5e45zmfxM4SpHMl9mx5EaskcVOA==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.54">
      <div class="step-ref passed">54</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.57">
      <div class="step-ref passed">57</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4034</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.59">
      <div class="step-ref passed">59</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the user can&#39;t be created, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.61">
      <div class="step-ref passed">61</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">15</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:41.573 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#### Check the new user created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the username of the user to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.67">
      <div class="step-ref passed">67</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUser = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.68">
      <div class="step-ref passed">68</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.68">{ 
   &quot;id&quot;: &quot;#(newUser.username)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.74">
      <div class="step-ref passed">74</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.74">13:31:41.582 [print] {
  &quot;id&quot;: &quot;user3@test.com&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.76">
      <div class="step-ref passed">76</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.77">
      <div class="step-ref passed">77</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.78">
      <div class="step-ref passed">78</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.79">
      <div class="step-ref passed">79</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModel)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.80">
      <div class="step-ref passed">80</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">267</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.80">13:31:41.586 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 155
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user3@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

13:31:41.849 response time in milliseconds: 262
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 64
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:42 GMT
1 &lt; x-amzn-RequestId: 616533e6-2e93-413f-83d7-2955f918fbb3
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbQzE8LjoEFvaw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a59e-3216e87d6cdcaad859377933;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 803bb8de3c7a92b10030fcaaf02a53d3.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: bUoPhwk89XEPi5BAYd8fyWTg-SNQZkTbxqL8owRJgCcuTy5DtGYKFA==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user3@test.com&quot;}}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.81">
      <div class="step-ref passed">81</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.84">
      <div class="step-ref passed">84</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the new user was created, the response of the query must contain the datas of the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.86">
      <div class="step-ref passed">86</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModel == {id: &#39;#(newUser.username)&#39;, role: &#39;#(newUser.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:41.868 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">## the password format isn&#39;t allowed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.90">
      <div class="step-ref passed">90</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserBadPassword = read(&#39;newUser_BadPassword.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.92">
      <div class="step-ref passed">92</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.93">
      <div class="step-ref passed">93</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.94">
      <div class="step-ref passed">94</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.95">
      <div class="step-ref passed">95</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;, variables: &#39;#(newUserBadPassword)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.96">
      <div class="step-ref passed">96</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">451</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.96">13:31:41.876 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 254
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;userBadPass@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

13:31:42.323 response time in milliseconds: 445
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 155
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:43 GMT
1 &lt; x-amzn-RequestId: c3381013-b301-49ce-9895-881f9c04f145
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbQ2H3rjoEF1ew=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a59e-11bf968b7c940d9e107d80c7;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 546db6834bf5885f55b5457c969e7ad6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: hpmmKCcypQT_I9-IrjXj_nF3wjztlO2nCev1Eo9X7u5pjpXR0l2C6Q==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;An account with the given email already exists.&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.97">
      <div class="step-ref passed">97</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.98">
      <div class="step-ref passed">98</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4013</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.101">
      <div class="step-ref passed">101</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The response return an error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.103">
      <div class="step-ref passed">103</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">## the username format isn&#39;t allowed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.106">
      <div class="step-ref passed">106</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newUserBadUsername = read(&#39;newUser_BadUsername.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.108">
      <div class="step-ref passed">108</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.109">
      <div class="step-ref passed">109</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.110">
      <div class="step-ref passed">110</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.111">
      <div class="step-ref passed">111</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;, variables: &#39;#(newUserBadUsername)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.112">
      <div class="step-ref passed">112</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">487</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.112">13:31:46.346 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 250
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_1&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user10test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

13:31:46.829 response time in milliseconds: 482
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 137
2 &lt; Connection: keep-alive
2 &lt; Date: Tue, 18 May 2021 11:31:47 GMT
2 &lt; x-amzn-RequestId: 52e0adc3-b33f-47b8-aa32-c99a08213c9d
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fhbRiEmsDoEFYwQ=
2 &lt; X-Amzn-Trace-Id: Root=1-60a3a5a3-5aab27c43b5d4fa53cbd6633;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 86b86f43445d5446c8b16910b2a9b8f9.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: 93eM9BBYpRP6zKInOWLx1fSXS3rbTQ8H_NjmKhgUq1bsVpRuzeaTAQ==
{&quot;data&quot;:{&quot;SaveUser&quot;:null},&quot;errors&quot;:[{&quot;path&quot;:[&quot;SaveUser&quot;],&quot;locations&quot;:[{&quot;line&quot;:2,&quot;column&quot;:5}],&quot;message&quot;:&quot;Invalid email address format.&quot;}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.113">
      <div class="step-ref passed">113</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.114">
      <div class="step-ref passed">114</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.117">
      <div class="step-ref passed">117</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The response return an error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.119">
      <div class="step-ref passed">119</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:50.847 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the query from a .feature field</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.125">
      <div class="step-ref passed">125</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.126">
      <div class="step-ref passed">126</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.127">
      <div class="step-ref passed">127</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.128">
      <div class="step-ref passed">128</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.129">
      <div class="step-ref passed">129</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">136</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.129">13:31:50.851 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 102
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

13:31:50.985 response time in milliseconds: 133
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 67
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:51 GMT
1 &lt; x-amzn-RequestId: 24fdf896-db2a-4ac6-8cea-059786273350
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbSOHm4joEFlLA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5a7-312544025cc74a4048952774;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 3d894cf86d3eca85fdb4b21f62292766.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: eUPd32PMW5_yPwKKhGS9j0F622xkcakPzTIwGlWgMMpzh-UVPicJXA==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user3@test.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.130">
      <div class="step-ref passed">130</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.133">
      <div class="step-ref passed">133</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the list is displayed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.135">
      <div class="step-ref passed">135</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.136">
      <div class="step-ref passed">136</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModels contains { id: &#39;#ignore&#39;, role: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:50.998 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### without photo</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># JSON file with the new user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># In this case, the photoUrl field isn&#39;t filled</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.144">
      <div class="step-ref passed">144</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def new_customerNoPhoto = read(&#39;NewCustomerNoPhoto.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.146">
      <div class="step-ref passed">146</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.147">
      <div class="step-ref passed">147</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.148">
      <div class="step-ref passed">148</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(new_customerNoPhoto)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.149">
      <div class="step-ref passed">149</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">228</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.149">13:31:51.007 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 284
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;photo&quot;:&quot;&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

13:31:51.232 response time in milliseconds: 224
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 30
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:31:52 GMT
1 &lt; x-amzn-RequestId: 63ec105c-f02f-4f2e-bdff-6cbede740d8f
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbSQGvxDoEFVZw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5a7-335999883ec1cfdc3976f61c;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 6e828213221a8cbea0c54b35955f0008.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: dGj55rLY7bsV-ilKKAh77rsYDpyouI1LnODuTrNUvwjRU32mBrU7ew==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.150">
      <div class="step-ref passed">150</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.152">
      <div class="step-ref passed">152</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4010</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.155">
      <div class="step-ref passed">155</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">9</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.157">
      <div class="step-ref passed">157</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">### This time, the field photo is filled</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.160">
      <div class="step-ref passed">160</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def new_customerPhoto = read(&#39;NewCustomerPhoto.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.162">
      <div class="step-ref passed">162</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.163">
      <div class="step-ref passed">163</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.164">
      <div class="step-ref passed">164</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveCustomer)&#39;,  variables: &#39;#(new_customerPhoto)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.165">
      <div class="step-ref passed">165</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">277</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.165">13:31:55.258 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 290
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;photo&quot;:&quot;photo.jpg&quot;,&quot;id&quot;:&quot;2100000photo&quot;},&quot;query&quot;:&quot;mutation SaveCustomer($id: ID, $name: String, $surname: String, $photo: String) {\r\n    SaveCustomer(input: {id: $id, name: $name, surname: $surname, photo: $photo})\r\n} &quot;}

13:31:55.533 response time in milliseconds: 274
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Tue, 18 May 2021 11:31:56 GMT
2 &lt; x-amzn-RequestId: ecbcfa81-3a11-4b94-88a3-8669b300a5f3
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fhbS7GfkjoEFz8Q=
2 &lt; X-Amzn-Trace-Id: Root=1-60a3a5ac-2ea0b03c389fd967583ebf8a;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 713e5c81a0f7ad564b97cf451e92aaac.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: iwaTHRdRfZRuQTdbLGfH6xb9OzUVPgucGyN08sho0Ki2ut1SGYKVyw==
{&quot;data&quot;:{&quot;SaveCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.166">
      <div class="step-ref passed">166</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.168">
      <div class="step-ref passed">168</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4015</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.171">
      <div class="step-ref passed">171</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># If the customer is saved, the response shouldn&#39;t contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.173">
      <div class="step-ref passed">173</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#### List all the customers to check that the creation was fine</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.178">
      <div class="step-ref passed">178</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.179">
      <div class="step-ref passed">179</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.180">
      <div class="step-ref passed">180</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.181">
      <div class="step-ref passed">181</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">283</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.181">13:31:59.554 request:
3 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
3 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
3 &gt; Content-Type: application/json; charset=UTF-8
3 &gt; Content-Length: 167
3 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
3 &gt; Connection: Keep-Alive
3 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
3 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

13:31:59.834 response time in milliseconds: 279
3 &lt; 200
3 &lt; Content-Type: application/json
3 &lt; Content-Length: 397
3 &lt; Connection: keep-alive
3 &lt; Date: Tue, 18 May 2021 11:32:00 GMT
3 &lt; x-amzn-RequestId: f8d99be7-031c-4c9d-bb93-9f0f31b1f7d9
3 &lt; Access-Control-Allow-Origin: *
3 &lt; x-amz-apigw-id: fhbTmEmpjoEF8oQ=
3 &lt; X-Amzn-Trace-Id: Root=1-60a3a5b0-39fbbf934d395acc4968b084;Sampled=0
3 &lt; X-Cache: Miss from cloudfront
3 &lt; Via: 1.1 b7f1ef8baa42cd103b00928d6f7d73b6.cloudfront.net (CloudFront)
3 &lt; X-Amz-Cf-Pop: MAD50-C1
3 &lt; X-Amz-Cf-Id: G_ztc6ocSHMKnLbwnVQTBtFH7ycrCS1gO0XjPaJd1TAArJeC4HQnTw==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.182">
      <div class="step-ref passed">182</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.185">
      <div class="step-ref passed">185</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.188">
      <div class="step-ref passed">188</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check the customers created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.190">
      <div class="step-ref failed">190</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#(new_customerPhoto.id)&#39;, name: &#39;#(new_customerPhoto.name)&#39;, surname: &#39;#(new_customerPhoto.surname)&#39;, photoUrl: &#39;#(new_customerPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell failed">16</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.190">13:31:59.853 classpath:examples/users/TestUserAdmin.feature:190
* match response.data.CustomerReadModels contains {id: &#39;#(new_customerPhoto.id)&#39;, name: &#39;#(new_customerPhoto.name)&#39;, surname: &#39;#(new_customerPhoto.surname)&#39;, photoUrl: &#39;#(new_customerPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }
match failed: CONTAINS
  $ | actual does not contain expected | actual array does not contain expected item - {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;#(datas.username)&quot;} (LIST:MAP)
  [{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]
  {&quot;id&quot;:&quot;2100000photo&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;photoUrl&quot;:null,&quot;userId&quot;:&quot;#(datas.username)&quot;}

    $[2] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
    {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
    {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

      $[2].id | not equal (STRING:STRING)
      &#39;3&#39;
      &#39;2100000photo&#39;

        $[1] | not equal | match failed for name: &#39;id&#39; (MAP:MAP)
        {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
        {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

          $[1].id | not equal (STRING:STRING)
          &#39;23000000nophoto&#39;
          &#39;2100000photo&#39;

            $[0] | not equal | match failed for name: &#39;photoUrl&#39; (MAP:MAP)
            {&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}
            {&quot;photoUrl&quot;:null,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;#(datas.username)&quot;}

              $[0].photoUrl | data types don&#39;t match (STRING:NULL)
              &#39;&#39;
              null

classpath:examples/users/TestUserAdmin.feature:190
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.191">
      <div class="step-ref skipped">191</div>
      <div class="step-indent"></div>
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#(new_customerNoPhoto.id)&#39;, name: &#39;#(new_customerNoPhoto.name)&#39;, surname: &#39;#(new_customerNoPhoto.surname)&#39;, photoUrl: &#39;#(new_customerNoPhoto.photoUrl)&#39;, userId: &#39;#(datas.username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:31:59.862 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Change the role of the new user created before &#39;NewUser&#39;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># JSON file with the new user role</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.198">
      <div class="step-ref passed">198</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def NewUserRole = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.200">
      <div class="step-ref passed">200</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set NewUserRole.role = &quot;role changed&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.202">
      <div class="step-ref passed">202</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.203">
      <div class="step-ref passed">203</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.204">
      <div class="step-ref passed">204</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryChangeUserRole)&#39;,  variables: &#39;#(NewUserRole)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.205">
      <div class="step-ref passed">205</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">480</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.205">13:31:59.869 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 227
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;role changed&quot;,&quot;username&quot;:&quot;user3@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

13:32:00.346 response time in milliseconds: 476
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:01 GMT
1 &lt; x-amzn-RequestId: 58a0d788-0244-48df-90ab-2cd27bcfe171
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbTpH1oDoEFQiQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5b0-41a296c26d075dd55d018618;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 17a71b4bf5d35b398b0fd90a5cd154a7.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: J-DMA81Kmg8_4nAbfuzuBSNeYsxfYoNnRbgJLCZg4qv8HP8jl_GXkA==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.206">
      <div class="step-ref passed">206</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.208">
      <div class="step-ref passed">208</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4006</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.211">
      <div class="step-ref passed">211</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the change of the role can&#39;t be done, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.213">
      <div class="step-ref passed">213</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:32:04.361 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the user to delete as the &#39;NewUser&#39; created before</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.219">
      <div class="step-ref passed">219</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def UserDelete = read(&#39;NewUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.220">
      <div class="step-ref passed">220</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def username =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.220">{ 
   &quot;username&quot;: &quot;#(UserDelete.username)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.226">
      <div class="step-ref passed">226</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.227">
      <div class="step-ref passed">227</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.228">
      <div class="step-ref passed">228</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.229">
      <div class="step-ref passed">229</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteUser)&#39;, variables: &#39;#(username)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.230">
      <div class="step-ref passed">230</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">593</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.230">13:32:04.366 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 147
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;username&quot;:&quot;user3@test.com&quot;},&quot;query&quot;:&quot;mutation DeleteUser($username: String) {\r\n    DeleteUser(input: {username: $username})\r\n}&quot;}

13:32:04.956 response time in milliseconds: 590
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 28
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:05 GMT
1 &lt; x-amzn-RequestId: 6600f0d0-6be8-433a-90b7-4ad73e1c08c0
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbUVE4CjoEFbBg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5b5-5fae45fe23973c5b164c7293;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 86b86f43445d5446c8b16910b2a9b8f9.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: MZEhxIlqGeEVG2kB5BoPjfqXvECADH-EIR7kfP3j3Ol1U4v8-NoD7A==
{&quot;data&quot;:{&quot;DeleteUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.231">
      <div class="step-ref passed">231</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.233">
      <div class="step-ref passed">233</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4004</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that there aren&#39;t errors and the user is properly deleted</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.236">
      <div class="step-ref passed">236</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#### List all users to check that the user was deleted</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.240">
      <div class="step-ref passed">240</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.241">
      <div class="step-ref passed">241</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.242">
      <div class="step-ref passed">242</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.243">
      <div class="step-ref passed">243</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">291</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.243">13:32:08.967 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 102
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

13:32:09.254 response time in milliseconds: 287
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 30
2 &lt; Connection: keep-alive
2 &lt; Date: Tue, 18 May 2021 11:32:10 GMT
2 &lt; x-amzn-RequestId: 4e945f26-91c4-4df2-ad2b-6e9b7fdff231
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fhbVEHwKjoEFWEw=
2 &lt; X-Amzn-Trace-Id: Root=1-60a3a5b9-276b580f7d3d49407f5ca3c9;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 89229acad212ad74c20ccd0ac96a8cbe.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: usecmwxJrnvAm5f2iXzSJWXq7xfFi90K17_FJCm4f7JPJYOUhkFZvQ==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.244">
      <div class="step-ref passed">244</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.247">
      <div class="step-ref passed">247</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.249">
      <div class="step-ref passed">249</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.250">
      <div class="step-ref passed">250</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModels !contains {id: &#39;#(UserDelete.id)&#39;, role: &#39;#(UserDelete.role)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.6">13:32:09.268 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the querys so they can be used in all Scenarios</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.11">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModel =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.15">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.19">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.23">read(&#39;SaveCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.27">
      <div class="step-ref passed">27</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryCustReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.27">read(&#39;CustomerReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.31">
      <div class="step-ref passed">31</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryChangeUserRole =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.31">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.35">
      <div class="step-ref passed">35</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteUser =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.35">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryDeleteCustomer =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.21.0.call.0.39">read(&#39;DeleteCustomer.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#### List the customers to select one to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.256">
      <div class="step-ref passed">256</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.257">
      <div class="step-ref passed">257</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.258">
      <div class="step-ref passed">258</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryCustReadModels)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.259">
      <div class="step-ref passed">259</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">290</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.259">13:32:09.275 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 167
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query CustomerReadModels {\r\n    CustomerReadModels {\r\n        id\r\n        name\r\n        surname\r\n        photoUrl\r\n        userId\r\n    }\r\n}&quot;}

13:32:09.562 response time in milliseconds: 286
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 397
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:10 GMT
1 &lt; x-amzn-RequestId: 54823f7e-cfb1-4c93-b758-22451a2d2965
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbVHGa1DoEFnPQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5ba-760952d9457d63845b12877d;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 546db6834bf5885f55b5457c969e7ad6.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: wcTZej7EvNpR3bZY-Vx25rn7p7TBD_wm56nv3CFQCkQBCdSNxFzwbg==
{&quot;data&quot;:{&quot;CustomerReadModels&quot;:[{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;23000000nophoto&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer3 Surname&quot;,&quot;name&quot;:&quot;Customer3&quot;,&quot;id&quot;:&quot;3&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.260">
      <div class="step-ref passed">260</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.263">
      <div class="step-ref passed">263</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check that the response doesn&#39;t contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.266">
      <div class="step-ref passed">266</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.267">
      <div class="step-ref passed">267</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.data.CustomerReadModels contains {id: &#39;#ignore&#39;, name: &#39;#ignore&#39;, surname: &#39;#ignore&#39;, photoUrl: &#39;#ignore&#39;, userId: &#39;#ignore&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Save the body of the response and get the first to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.270">
      <div class="step-ref passed">270</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def list_customers = response.data.CustomerReadModels</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.271">
      <div class="step-ref passed">271</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def customer_toDelete = list_customers[0]</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#### Delete the customer</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.275">
      <div class="step-ref passed">275</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.276">
      <div class="step-ref passed">276</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = adminToken.tokenType + &#39; &#39; + adminToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.277">
      <div class="step-ref passed">277</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryDeleteCustomer)&#39;, variables: &#39;#(customer_toDelete)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.278">
      <div class="step-ref passed">278</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">197</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.21.0.call.0.278">13:32:09.572 request:
2 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
2 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI3OTRiZTIxNS1kYjUwLTQyZjYtODIzMS1lZTJmYzJiOTM5YTUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzQ5NSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTA5NSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzQ5NSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fKOsGvg_1YRrYmLgM5HBci2nv7AEKT-sVsMxEEz7MYBnuj4J0Cs6V2-07NDGGjRCPqv2my3mgcmJkXhPfEwqoYQhT65g0_ELXWoGTRsXjxiKoWn5U8ZnLSuIZ3wUHfUoKbTns0JDf1sTw4LWFl8MSgLvApPFQH51lp8qbTEH6UKBmIf_930M3rkvWGQ1bKSrGcj_fVkBNsu_B_pnczKK7hz4DowA-dUxwrDcIMpPTYrhoZIPYWrj1eDIXuXf4Ab0bxEPKEonY01lLlnaROb9Y3AqdPv5jUg1XMyuZeIT6LOUsuqrDznLkuLv_X_EPHT0uGk1nSzr_Nkv6jz0QL7beg
2 &gt; Content-Type: application/json; charset=UTF-8
2 &gt; Content-Length: 233
2 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
2 &gt; Connection: Keep-Alive
2 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
2 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;photoUrl&quot;:&quot;&quot;,&quot;surname&quot;:&quot;Customer surname&quot;,&quot;name&quot;:&quot;Customer name&quot;,&quot;id&quot;:&quot;2100000photo&quot;,&quot;userId&quot;:&quot;admin@theagilemonkeys.com&quot;},&quot;query&quot;:&quot;mutation DeleteCustomer($id: ID) {\r\n    DeleteCustomer(input: {id: $id})\r\n} \r\n&quot;}

13:32:09.767 response time in milliseconds: 194
2 &lt; 200
2 &lt; Content-Type: application/json
2 &lt; Content-Length: 32
2 &lt; Connection: keep-alive
2 &lt; Date: Tue, 18 May 2021 11:32:10 GMT
2 &lt; x-amzn-RequestId: 278b2312-d20f-4296-8b78-7f605aa3ebab
2 &lt; Access-Control-Allow-Origin: *
2 &lt; x-amz-apigw-id: fhbVKGqqDoEFVqw=
2 &lt; X-Amzn-Trace-Id: Root=1-60a3a5ba-3e86d9ff0b8da9577b59a803;Sampled=0
2 &lt; X-Cache: Miss from cloudfront
2 &lt; Via: 1.1 0645caa18be2b3be5e4612d40f45a0ba.cloudfront.net (CloudFront)
2 &lt; X-Amz-Cf-Pop: MAD50-C1
2 &lt; X-Amz-Cf-Id: Svh09xxGPAVycX9CMmo87rVzCyy6ZnRPNGXftFAdOgNkSb2ud0hRug==
{&quot;data&quot;:{&quot;DeleteCustomer&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.279">
      <div class="step-ref passed">279</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.281">
      <div class="step-ref passed">281</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4010</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.284">
      <div class="step-ref passed">284</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Check if the response contains any error</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.21.0.call">
    <div class="step-container" id="0.21.0.call.0.287">
      <div class="step-ref passed">287</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2:23]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2:23]</span>
                <span class="scenario-name">The user admin save a new user</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>16860</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2:23]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2:23]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.6">13:32:13.796 karate.env system property was: prod 
</div>   

  

</div>
</div>
          <div data-parent="[2:23]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:23]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Is necessary to sign in the API as admin to create a new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Get the idToken for the admin user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.12">
      <div class="step-ref bg-step">12</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminDatas = read(&#39;signinDatasUser.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:23]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Call the feature to sign in the API with the JSON file that contains the admin&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def signIn = call read(&#39;signin.feature&#39;) adminDatas</span>
      </div>
    </div>
    <div class="time-cell passed">383</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.15.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">376</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.4">
      <div class="step-ref bg-step">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.15.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.15">
      <div class="step-ref bg-step">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.15">13:32:13.805 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;admin@theagilemonkeys.com&quot;,
  &quot;password&quot;: &quot;Admin.2020&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.17">
      <div class="step-ref bg-step">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.18">
      <div class="step-ref bg-step">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.19">
      <div class="step-ref bg-step">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.20">
      <div class="step-ref bg-step">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">370</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.20">13:32:13.807 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 104
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Admin.2020&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;admin@theagilemonkeys.com&quot;}

13:32:14.175 response time in milliseconds: 367
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 4011
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:15 GMT
1 &lt; x-amzn-RequestId: 04162efd-1fe1-41c2-88ba-34af999cea22
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbV0HR6DoEFkuA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5be-450b9917684d42ce100343df
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 a72068a5d77ecba7daccda339a668499.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: pneYtOlARLWNwWWYYTBNUW2zv5Shb-0O1w9JljihLm0PpcpQfv5RTA==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImU3NDA0ZDAzLWIzNTMtNGU0ZC04N2FmLTM2ZDFhY2M3ZmVjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1MzQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTEzNCwiaWF0IjoxNjIxMzM3NTM1LCJqdGkiOiIxY2U1OTE5Mi1mZTE0LTRkODItOGE4NC1kYjYwYWIwNmM3NzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Mhji8aor-kqgm47EY10cXB1DzHrY-wttp4UIte5Eacb59VjLoCZN3Nv-QPRNHmSuHcS1truGj7yGcB5DbQE-K79C77pW0I9IhQ8P9oK8auAHBACF6qYtYp2Ti38NKz9QN8OZM-obf2dLFFFjdX6LfjcCli5eZ5mcLv3IwUHk_tdVSI_8_-rmjQdjwp_dl-mtJF5F3fmC9eMw23uxFHsxrefQs4Zn2yNjpSakYOFmssJC3xxBGMha0G0pLcdQZ26wtt7iyJZu_aMri4jLXjZZ_NDnn1Veflvydfw_xOEegwo192fF8gzjmQF51YySva6HDH58PiJ4nNOq2kJtQ73RCg&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.PxyfwH7qKVI3KHh112PN9lS57rQ0X_AajSqWLPyPi7bu6fc1sUqIi9qO4lxzBzgOrLXvNOQGVZ7Ifu0pASCSYB1pp6FduvOfL52D-qOEd1ghlZ8J7EbBnVPNVDoqBEUKW3j0abIKv3hF3SLWSQuo2ZCrNhxvQOtztMpA_6LbSoENjmdDwwRvXpC-kS87uuUkHQgsmPVb8Baar_dmjBkEY7Yf2t7kX8k9iFX4N5Hcy2rCgpQI5gez8-pFzaK7mDeqYYDxoJhOW5kcB4xdO0j3-Qm0S2cqnK0jmch9Ua60jwp8nAvBXKu_5X4c5-gWhvojPN3dG_eTETe4c7du5bwY7w.2eP_SPwjh3d8m1tR.M6UsCIEcHiwVFgHp5jtxSGHEXaNQzryu_zOo3pAYWuJR8s9GNpY6eCWen1k7BrCFSIIGtb0Bs3u_HiQwVLKS_kBneFZpvZbwYriAWPbkxTydz0FiduHoxHXdYM761nNE8nuHpzh6oIRvGL5YdW-634Y-ZXHHBbBManMJF2L65ESN8oWElrEbDWdGnlm-d0C1XQR7zfz7mvO1IXLYR44mclimhg80QF3nNuimifFyqvdpKPWAnJsmpSamRiktcnXCsncNpcpyXh8QqXB4yc7Vi-u_l9_sJR3K18wHedH1eX0G-x7w_G5H2gHjT8F3gmHzJZtxPY6vIdPgPKbE10spJKfRyGIMLV9iqrriqo9p0e0FPO6Xqm-bw5lMFRwFKKs12vDm1qADKXtdT_AAT9QVlJfW6sTtXdWEjoMGbMqvHZJZXM0McyKc9flwD89z7f3dV1tAEXx1TRFtxImYabGR1_DWZ5_KKKgpwrcwcPtee2hEQBsxqcAw_WJCXLXQlX7x7OJuqh9Nmhff48XdZmAzyts73aUi-IiqZlzMp7gbsq_LFN89A28jhPAaLiH2ICSY0Y2Lu7u-IfrnJ9iv_X4BqiYefYOo7daHIUJ894JohqobPZdaRd5MbRL73Q3kHANgTTm2lMNaH_6P2M6ZM8Con4UHutbiv7WG67PThGtZmJtLrfLVPOQhovW12z8Oj-UN9VTfV9T_MRgmLIgDZcFePrRrdFUuJ3yeeuKZANTxrTsoBVxqNg2WRsA9p5VB6GOgReD1kBlWBroVYzY3wScpVNNPeQA8qozE3KnR0LuzwGfsBZA2uVH3F0fsn6AWaiy9igngVgUcwHQflxwdyrL7bgHgcOffRQn18OBn91tLLCzCOEux6UwF3lMlmuRBLxuqfTlZ1ZfkiHWpL6EqMI5NvlkgUvcWleVLpnjFHpKXm549YsFHsm4m8LAF6DTEkd2HoT22VMRmEvi4nPeT3d-mJN-6Vaa19pnC88P7D99n9afhRtw2YrQ5ahORbBv0Nr9EW2OT82CzIUtBVERBJpFBIlniWgFnuJYhlEeOzfNkwOOOYXiWMc0r749CwkO6kib86L9Y8cslpBM9q_VAoCNDrZ8lUJrZLhES5YJId7wbmQxSAsqlVX2m4t2GG3TFjxmoZyLGQo4qR08gWv2k7oZIjeP9WxNk2vL8afVf4k01pHf81OqM-ag0HohZmSI2VZmWgVuZtQ1iyHfgjB9s4ScXK7dlNehB-wJZfuWSja7q9CcrO52VMX9gEzbz6ptJYp9sWSVT_mDpZ9SsZys8_TQAclY7H8CRVsCXkcOxKdyY4NRTIl3NbEJp2GAjacIu5so.Q6D08IRGIA6T4I5ZL3QRkg&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.21">
      <div class="step-ref bg-step">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.24">
      <div class="step-ref bg-step">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.15.0.call">
    <div class="step-container" id="0.15.0.call.0.25">
      <div class="step-ref bg-step">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.15.0.call.0.25">13:32:14.179 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[2:23]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.16">
      <div class="step-ref bg-step">16</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.16">13:32:14.182 [print] {
  &quot;expiresIn&quot;: &quot;3600&quot;,
  &quot;idToken&quot;: &quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ&quot;,
  &quot;accessToken&quot;: &quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImU3NDA0ZDAzLWIzNTMtNGU0ZC04N2FmLTM2ZDFhY2M3ZmVjZSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1MzQsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTEzNCwiaWF0IjoxNjIxMzM3NTM1LCJqdGkiOiIxY2U1OTE5Mi1mZTE0LTRkODItOGE4NC1kYjYwYWIwNmM3NzMiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.Mhji8aor-kqgm47EY10cXB1DzHrY-wttp4UIte5Eacb59VjLoCZN3Nv-QPRNHmSuHcS1truGj7yGcB5DbQE-K79C77pW0I9IhQ8P9oK8auAHBACF6qYtYp2Ti38NKz9QN8OZM-obf2dLFFFjdX6LfjcCli5eZ5mcLv3IwUHk_tdVSI_8_-rmjQdjwp_dl-mtJF5F3fmC9eMw23uxFHsxrefQs4Zn2yNjpSakYOFmssJC3xxBGMha0G0pLcdQZ26wtt7iyJZu_aMri4jLXjZZ_NDnn1Veflvydfw_xOEegwo192fF8gzjmQF51YySva6HDH58PiJ4nNOq2kJtQ73RCg&quot;,
  &quot;tokenType&quot;: &quot;Bearer&quot;,
  &quot;refreshToken&quot;: &quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.PxyfwH7qKVI3KHh112PN9lS57rQ0X_AajSqWLPyPi7bu6fc1sUqIi9qO4lxzBzgOrLXvNOQGVZ7Ifu0pASCSYB1pp6FduvOfL52D-qOEd1ghlZ8J7EbBnVPNVDoqBEUKW3j0abIKv3hF3SLWSQuo2ZCrNhxvQOtztMpA_6LbSoENjmdDwwRvXpC-kS87uuUkHQgsmPVb8Baar_dmjBkEY7Yf2t7kX8k9iFX4N5Hcy2rCgpQI5gez8-pFzaK7mDeqYYDxoJhOW5kcB4xdO0j3-Qm0S2cqnK0jmch9Ua60jwp8nAvBXKu_5X4c5-gWhvojPN3dG_eTETe4c7du5bwY7w.2eP_SPwjh3d8m1tR.M6UsCIEcHiwVFgHp5jtxSGHEXaNQzryu_zOo3pAYWuJR8s9GNpY6eCWen1k7BrCFSIIGtb0Bs3u_HiQwVLKS_kBneFZpvZbwYriAWPbkxTydz0FiduHoxHXdYM761nNE8nuHpzh6oIRvGL5YdW-634Y-ZXHHBbBManMJF2L65ESN8oWElrEbDWdGnlm-d0C1XQR7zfz7mvO1IXLYR44mclimhg80QF3nNuimifFyqvdpKPWAnJsmpSamRiktcnXCsncNpcpyXh8QqXB4yc7Vi-u_l9_sJR3K18wHedH1eX0G-x7w_G5H2gHjT8F3gmHzJZtxPY6vIdPgPKbE10spJKfRyGIMLV9iqrriqo9p0e0FPO6Xqm-bw5lMFRwFKKs12vDm1qADKXtdT_AAT9QVlJfW6sTtXdWEjoMGbMqvHZJZXM0McyKc9flwD89z7f3dV1tAEXx1TRFtxImYabGR1_DWZ5_KKKgpwrcwcPtee2hEQBsxqcAw_WJCXLXQlX7x7OJuqh9Nmhff48XdZmAzyts73aUi-IiqZlzMp7gbsq_LFN89A28jhPAaLiH2ICSY0Y2Lu7u-IfrnJ9iv_X4BqiYefYOo7daHIUJ894JohqobPZdaRd5MbRL73Q3kHANgTTm2lMNaH_6P2M6ZM8Con4UHutbiv7WG67PThGtZmJtLrfLVPOQhovW12z8Oj-UN9VTfV9T_MRgmLIgDZcFePrRrdFUuJ3yeeuKZANTxrTsoBVxqNg2WRsA9p5VB6GOgReD1kBlWBroVYzY3wScpVNNPeQA8qozE3KnR0LuzwGfsBZA2uVH3F0fsn6AWaiy9igngVgUcwHQflxwdyrL7bgHgcOffRQn18OBn91tLLCzCOEux6UwF3lMlmuRBLxuqfTlZ1ZfkiHWpL6EqMI5NvlkgUvcWleVLpnjFHpKXm549YsFHsm4m8LAF6DTEkd2HoT22VMRmEvi4nPeT3d-mJN-6Vaa19pnC88P7D99n9afhRtw2YrQ5ahORbBv0Nr9EW2OT82CzIUtBVERBJpFBIlniWgFnuJYhlEeOzfNkwOOOYXiWMc0r749CwkO6kib86L9Y8cslpBM9q_VAoCNDrZ8lUJrZLhES5YJId7wbmQxSAsqlVX2m4t2GG3TFjxmoZyLGQo4qR08gWv2k7oZIjeP9WxNk2vL8afVf4k01pHf81OqM-ag0HohZmSI2VZmWgVuZtQ1iyHfgjB9s4ScXK7dlNehB-wJZfuWSja7q9CcrO52VMX9gEzbz6ptJYp9sWSVT_mDpZ9SsZys8_TQAclY7H8CRVsCXkcOxKdyY4NRTIl3NbEJp2GAjacIu5so.Q6D08IRGIA6T4I5ZL3QRkg&quot;
}
 
</div>   

  

</div>
</div>
          <div data-parent="[2:23]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref bg-step">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def adminToken = signIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.24">
      <div class="step-ref passed">24</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def querySaveUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.24">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># JSON file with the new user&#39;s datas</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.29">
      <div class="step-ref passed">29</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def NewUser = read(&#39;UserToChange.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.31">
      <div class="step-ref passed">31</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref passed">32</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = signIn.response.tokenType + &#39; &#39; + signIn.response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.33">
      <div class="step-ref passed">33</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(querySaveUser)&#39;,  variables: &#39;#(NewUser)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.34">
      <div class="step-ref passed">34</div>
      
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1115</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.34">13:32:14.189 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJlNzQwNGQwMy1iMzUzLTRlNGQtODdhZi0zNmQxYWNjN2ZlY2UiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTMzNzUzNCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTM0MTEzNCwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTMzNzUzNSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.395wFpGyJLTQ6jzljtNiyZc4JOSg-2WyNakzn0Fp2QxQ63SCselgyxGPYqQhuTG8rVK1ZJKTJ_LQiAqBjYafHDGv_O4B-Y-I-8OMm7tODhPzU2Be4joTZPDvQrMo7UQSqcMqzmMXmgVqADuqvMfJfV4SfLU1Ndgxzeq4OFvhHXdV26Qmg1WWDB0R3iQFlUY53qgpqrBRNkSS0kgQA7osrdo9oH93PGfvXRF8at2uMm3IVmObz-mxulC6mvlQ08uLd4EScFjuzdsHgx4pijfvL7gBSgwh2w-HAKAXqaJe9VD1KhIZqOWvNfMwUObialHvSiHa17bDYRFAe4LYo0LVaQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 251
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user31@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

13:32:15.302 response time in milliseconds: 1113
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:16 GMT
1 &lt; x-amzn-RequestId: 43e4f6e3-cf34-4770-a3a0-1e766cc8acae
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbV4EjljoEFaYg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5bf-7f96152e539a0bdb0d156287;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 77fcce204f96e329df7227f192690939.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: icbmT0Lyp9ipc1m0RRaksRwMQCmRe3WkPM2-QuNSbdxd6_5V0LoWrw==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref passed">35</div>
      
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.38">
      <div class="step-ref passed">38</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4008</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.40">
      <div class="step-ref passed">40</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># if the user can&#39;t be created, the response contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.42">
      <div class="step-ref passed">42</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match response.errors == &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># The new user need to obtain a token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.45">
      <div class="step-ref passed">45</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def clientId = adminDatas.clientId</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.46">
      <div class="step-ref passed">46</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def username = NewUser.username</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.47">
      <div class="step-ref passed">47</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def password = NewUser.password</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.48">
      <div class="step-ref passed">48</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newSignUser =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.48">{
  &quot;clientId&quot;: &quot;#(clientId)&quot;,
 &quot;username&quot;: &quot;#(username)&quot;,
 &quot;password&quot;: &quot;#(password)&quot;
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.56">
      <div class="step-ref passed">56</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newSignIn = call read(&#39;signin.feature&#39;) newSignUser</span>
      </div>
    </div>
    <div class="time-cell passed">526</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.56.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.signin</div>
      </div>
      <div class="time-cell passed">518</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.4">
      <div class="step-ref passed">4</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.7">
      <div class="step-ref passed">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.56.0.call.0.7">{
  		&quot;clientId&quot;: &quot;#(clientId)&quot;,
        &quot;username&quot;: &quot;#(username)&quot;,
  		&quot;password&quot;: &quot;#(password)&quot;
	}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.15">
      <div class="step-ref passed">15</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print query</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.56.0.call.0.15">13:32:19.322 [print] {
  &quot;clientId&quot;: &quot;799hogucm363v55l7dk2n1l5u0&quot;,
  &quot;username&quot;: &quot;user31@test.com&quot;,
  &quot;password&quot;: &quot;Password_2&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.17">
      <div class="step-ref passed">17</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/auth/sign-in&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.18">
      <div class="step-ref passed">18</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request query</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.19">
      <div class="step-ref passed">19</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">513</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.56.0.call.0.20">13:32:19.325 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/auth/sign-in
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 94
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;password&quot;:&quot;Password_2&quot;,&quot;clientId&quot;:&quot;799hogucm363v55l7dk2n1l5u0&quot;,&quot;username&quot;:&quot;user31@test.com&quot;}

13:32:19.836 response time in milliseconds: 510
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 3995
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:20 GMT
1 &lt; x-amzn-RequestId: bd271945-72e5-493a-a948-6ee71db50071
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbWsH4QDoEFcXQ=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5c4-7f3007411be5648f12ff096d
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 803bb8de3c7a92b10030fcaaf02a53d3.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: a7rS0gy4-Y1FBPQFoWms7VwThQTR9XUYzQD3RMLRT-AZWWvWiva7jQ==
{&quot;expiresIn&quot;:&quot;3600&quot;,&quot;idToken&quot;:&quot;eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ&quot;,&quot;accessToken&quot;:&quot;eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEzMzc1NDAsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTM0MTE0MCwiaWF0IjoxNjIxMzM3NTQwLCJqdGkiOiI0NWNlMzZkNC0yNzI3LTQyNWItYjA5ZS02ZmM2YzM2NGVmNTkiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2In0.JAjWj8BpGHq4Cs5Ak0ICx9FmuJkwy1b-pfk2Cpvl3LkP3i3HdgFb22CU2ooMDE1xaSa0LUNiDlAlcAZ4s-ssJO815BTEQzPKwA_uhXIyPKPlSWAwPbtwdMK8M46KhC0ahE28ZHDQkRpj3iQvefKoGkrF7Am3iuvogWLv1XcitdHoKiiSw4jsS_9Y_oYN49EAPHPuJo1boFIDzDf-MxbjOrM5lLC3eDqR__QRZJ1TlbrWvLm99M9HrYYSU4ZTNuvgQLYdyXzmT8BS8wqA1ppx4jliMP1XBN1NVFgPTR6Cq4KI64oJFuLPfdB8A4Va3oe1iuegsTNf3o1uVuBm5X7wyw&quot;,&quot;tokenType&quot;:&quot;Bearer&quot;,&quot;refreshToken&quot;:&quot;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ndYp09cJ5M8qPfypXRgADIAZ9pCbdLduIF73cpoEtzYJY5UC_m8HAudBw7OQgwLyQPKI6mQ00yNKFFPNzoKHo7yLn2hxsSabqB71vrxmkC-GIkoUo_PFy3aiJYO_lYqRTg2EcftvGZDiRjWHVoEXs7E_Naj0LYssgpDRyHwL-wRZ63OQxKCjDdXAz1_LosF4YbT9-KhrkSWFzPFUJPf_kJCPUJhZU_wEm9AOR6MwZ5g35Xptm9nFAQTVYpOOSAFPN3n0fXI70Ngsa4QgZiH-Qbobh5iNXPzBjGuNbKyKu-AGILntSv_Fft9J42E_UvkSFxL2lr8bf6TFbbiGzhnHXQ.uy0bhxPj74zgXWoJ.re2CuZ3IZJY2Ak5HC3CvirfAVw1YOZHnnnIvQEFCCY7F0SPkU-LalVt7FXFgLP6txSGkr6gpaNjH5MXV1GfDpuKUVHKbzYgV9nylk2Qed-9qsdgihHMEqHeT5YkP1nfUycrKWeFvwoxRe6QvmECjRctQsMfHb9gsl15W76sDRAYBkYv1UGJxeRHH46l7JxR0u5GKX59ah4spo_jYQ0hNReLtu3AJIas96WhoXjR6DxmukJD5RWK4tGj2BA5BtyeWJ04rcThDFxsxQWJ3mmpAm6srmohzAXwMxrXigTyr4mIw1SLxwDRAKsmANiF5okZZCspSkgxYoyeeU5pItuNq0DEJmj0GgPoi5IISyjdoMQO-Htv1_wJgFEn4c4iFCaMEoyW_hGFDjkcWb3wJcAZ0V8SyvO4Grs-bVYafdb6572U2RHiPcK0uXoE4kjyvvbBoxcz5puhe6ejkM_d9jpP8wRu3x7mYldAiazKQQ9kFsjJCl_AtY0wQ7ctH17L_wr6rhYj_hj7KL3oUQEvBA5-koCw6Fe55SGchRkGcC4WxgLQlPB-k8FuZujQ_PCIGpMRHmCv8h1Hih1nnx0J9FbQYGvm21vYFmwStmu2BbD68A_LenkDGgtBjYvJTWKo0Zty-LzKIZO3DSM8mrg0lpTEmpf1vJYQLjy_R8AP4jJkA5-Ks0A_YXYnXHoa4ReQiFC4xEg2tNK0F9MLeyro0Pg6WMYL3tPbx20jX-xjd0LOBed57Hs3P8-sSlHGMPI55anJ2Puwj-dXi20rT9WzPB_AmuVf0CrFkpqxHDXmuzQtc7A2lzly3a_DL4qPRxeY5GqMeDfz1PNbjcMUqRQU0d7LKwY0hNMCYKCVPa48xA-gE7JxmdtyZ9bDma_TlorymM8Cul7LktedQX60q5dByV_MhPuAN4qKKRNpw1G2XrR_lhIv6Gt1fFBwxSrOd5QX9F7PX793WClKDvdx-Fyn_4gYYz7UtjDqDf-GvR5W-GqXZAHGO5zmMovhJq4jRkkYu6-XBbJ1xA2bgUfmbNwfOARM0GdDwH8xCxzbZR0PddSP2Zf5Cg8m97u0MBo8MH0AlS5A-rkuiiaMi97Y2uBpkDyb3WwpWLIsIojMjaImKTLfJaId1rEvJ0GEuU7vvAM1jNriWrYFOPGbGrmgBxNp0Xb9E4SQTUqwQSShjrQnDEeS1USg9QVKdR3NnKJLvspX0X8gdCDNd4AtJ7wyWQY-1oRIMS4nXma4BOEcvzlovMKOiVxGJ0MFe4usMvX0PSucCAbvkDqHHmpV7pQBpQ0AUTswD1WjuaAoz9ny2utwpoylSqcqAsTn7GLQfY_mKGALJSqA.g2BisWWxB_9J1cWAFjypMQ&quot;}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment">#Get the idToken for the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def tokenid = response.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.56.0.call">
    <div class="step-container" id="0.56.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print tokenid</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.56.0.call.0.25">13:32:19.840 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ 
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.57">
      <div class="step-ref passed">57</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def newToken = newSignIn.response</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># create the authorization header for the new user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Now test the API by the user</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.63">
      <div class="step-ref failed">63</div>
      
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>def newUserTest = call read(&#39;TestUserNoAdminCannotDo.feature&#39;) newToken</span>
      </div>
    </div>
    <div class="time-cell failed">10815</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63">13:32:30.658 classpath:examples/users/TestUserChange.feature:63
* def newUserTest = call read(&#39;TestUserNoAdminCannotDo.feature&#39;) newToken
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:30
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:50
match failed: NOT_EQUALS
  $ | is equal (MAP:MAP)
  {&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user36@test.com&quot;}
  {&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user36@test.com&quot;}

classpath:examples/users/TestUserNoAdminCannotDo.feature:76
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:97
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:123
classpath:examples/users/TestUserChange.feature:63
</div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.63.0.call">
        <div class="step-ref passed">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">examples.users.TestUserNoAdminCannotDo</div>
      </div>
      <div class="time-cell passed">10758</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.6">13:32:19.858 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user to test this feature is read from a json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def jsonUserTest = read(&#39;UserTest.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.16">
      <div class="step-ref passed">16</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def queryUserReadModels =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.16">read(&#39;UserReadModels.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.20">
      <div class="step-ref passed">20</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.21">
      <div class="step-ref passed">21</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = newToken.tokenType + &#39; &#39; + newToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.22">
      <div class="step-ref passed">22</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.23">
      <div class="step-ref passed">23</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(queryUserReadModels)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.24">
      <div class="step-ref passed">24</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">248</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.24">13:32:19.863 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 102
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;query&quot;:&quot;query UserReadModels {\r\n    UserReadModels {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

13:32:20.108 response time in milliseconds: 245
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 68
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:20 GMT
1 &lt; x-amzn-RequestId: 382c64a8-e678-428c-aa71-41fb798001db
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbWxFrpDoEFgvw=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5c4-253d22fa1d80e76e11bde08f;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 e5774f09cc2ae0875c0445786827ad1b.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: Pnck1DUJQs0hV9ITx3_Fc2fbd_VtdXzBjtNqmNf4m4TCZwCa4MTyVg==
{&quot;data&quot;:{&quot;UserReadModels&quot;:[{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user31@test.com&quot;}]}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.25">
      <div class="step-ref passed">25</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.28">
      <div class="step-ref passed">28</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># As the user is not admin, the response contains a field &quot;error&quot; and it is printed</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.30">
      <div class="step-ref failed">30</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.30">13:32:20.111 classpath:examples/users/TestUserNoAdminCannotDo.feature:30
* match response.errors != &#39;#notpresent&#39;
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:30
</div>   

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.6">13:32:20.124 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user to test this feature is read from a json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def jsonUserTest = read(&#39;UserTest.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.34">
      <div class="step-ref passed">34</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.34">read(&#39;SaveUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.39">
      <div class="step-ref passed">39</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.40">
      <div class="step-ref passed">40</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = newToken.tokenType + &#39; &#39; + newToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.41">
      <div class="step-ref passed">41</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;,  variables: &#39;#(jsonUserTest)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.42">
      <div class="step-ref passed">42</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">1006</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.42">13:32:20.128 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 251
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;User&quot;,&quot;username&quot;:&quot;user36@test.com&quot;},&quot;query&quot;:&quot;mutation SaveUser($username: String, $password: String, $role: String) {\r\n    SaveUser(input: {username: $username, password: $password, role: $role})\r\n} &quot;}

13:32:21.132 response time in milliseconds: 1003
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 26
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:21 GMT
1 &lt; x-amzn-RequestId: 80027e49-e9ae-4054-a68c-614ba6ebe49b
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbW0FesjoEFpfg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5c5-7a4feb4e30ecd85665dfb023;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 ce47d0f1e1d762a58db0f679e6a5cdeb.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: alRDxvyHeb7L3P3Oh3yR9SkldFJgAX54gLnW1kaajJx10AG09KDj4Q==
{&quot;data&quot;:{&quot;SaveUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.43">
      <div class="step-ref passed">43</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.45">
      <div class="step-ref passed">45</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4008</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.48">
      <div class="step-ref passed">48</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># As the user is not admin, the response must contains a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.50">
      <div class="step-ref failed">50</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.50">13:32:25.143 classpath:examples/users/TestUserNoAdminCannotDo.feature:50
* match response.errors != &#39;#notpresent&#39;
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:50
</div>   

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.6">13:32:25.148 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user to test this feature is read from a json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def jsonUserTest = read(&#39;UserTest.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.55">
      <div class="step-ref passed">55</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.55">read(&#39;UserReadModel.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the username of the user to list</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.60">
      <div class="step-ref passed">60</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.60">{ 
   &quot;id&quot;: &quot;#(jsonUserTest.username)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.66">
      <div class="step-ref passed">66</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.66">13:32:25.151 [print] {
  &quot;id&quot;: &quot;user36@test.com&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.68">
      <div class="step-ref passed">68</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.69">
      <div class="step-ref passed">69</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = newToken.tokenType + &#39; &#39; + newToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.70">
      <div class="step-ref passed">70</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.71">
      <div class="step-ref passed">71</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.72">
      <div class="step-ref passed">72</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">128</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.72">13:32:25.153 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 156
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;id&quot;:&quot;user36@test.com&quot;},&quot;query&quot;:&quot;query UserReadModel($id: ID!) {\r\n    UserReadModel(id: $id) {\r\n        id\r\n        role\r\n    }\r\n}&quot;}

13:32:25.279 response time in milliseconds: 125
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 65
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:26 GMT
1 &lt; x-amzn-RequestId: 4e1fd48e-d5dd-4b18-aea8-a116d279db83
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbXlE6LjoEFjOg=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5ca-7c23348d024902f45323194c;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 3a5cd718bb9eb50d9c931e1f7586b5a8.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: BC-puoPaMl4vPRp4ww4o-mzObIckZVEoZbKbDADI6qT29IZXmehJXA==
{&quot;data&quot;:{&quot;UserReadModel&quot;:{&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user36@test.com&quot;}}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.73">
      <div class="step-ref passed">73</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># As the user is not admin, the response of the query shouldn&#39;t contain the datas of the user tryed to saved</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.76">
      <div class="step-ref failed">76</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.data.UserReadModel != {id: &#39;#(jsonUserTest.username)&#39;, role: &#39;#(jsonUserTest.role)&#39; }</span>
      </div>
    </div>
    <div class="time-cell failed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.76">13:32:25.282 classpath:examples/users/TestUserNoAdminCannotDo.feature:76
* match response.data.UserReadModel != {id: &#39;#(jsonUserTest.username)&#39;, role: &#39;#(jsonUserTest.role)&#39; }
match failed: NOT_EQUALS
  $ | is equal (MAP:MAP)
  {&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user36@test.com&quot;}
  {&quot;role&quot;:&quot;User&quot;,&quot;id&quot;:&quot;user36@test.com&quot;}

classpath:examples/users/TestUserNoAdminCannotDo.feature:76
</div>   

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.6">13:32:25.293 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user to test this feature is read from a json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def jsonUserTest = read(&#39;UserTest.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.80">
      <div class="step-ref passed">80</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.80">read(&#39;ChangeUserRole.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.84">
      <div class="step-ref passed">84</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set jsonUserTest.role = &quot;changed role&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.86">
      <div class="step-ref passed">86</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.87">
      <div class="step-ref passed">87</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = newToken.tokenType + &#39; &#39; + newToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.88">
      <div class="step-ref passed">88</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;,  variables: &#39;#(jsonUserTest)&#39;}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.89">
      <div class="step-ref passed">89</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">756</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.89">13:32:25.298 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 228
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;password&quot;:&quot;Password_2&quot;,&quot;role&quot;:&quot;changed role&quot;,&quot;username&quot;:&quot;user36@test.com&quot;},&quot;query&quot;:&quot;mutation ChangeUserRole($username: String, $role: String) {\r\n  ChangeUserRole(input: {username: $username, role: $role})\r\n}&quot;}

13:32:26.053 response time in milliseconds: 754
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 32
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:26 GMT
1 &lt; x-amzn-RequestId: 54f546a1-ddf2-473e-87f1-87987767c73e
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbXnEkVjoEFr4w=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5ca-0927d0f570d3ccd740da5970;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 5aa1be24b1cf8e3c10252fabac41cc27.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: eeKF4-t8ic_iuxL6PYpCJmGJBtmWuXRokkiHqjjvvx52rPCoTX3R-g==
{&quot;data&quot;:{&quot;ChangeUserRole&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.90">
      <div class="step-ref passed">90</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Introduce a pause so the user can be saved before the next test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.92">
      <div class="step-ref passed">92</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>wait(4000)</span>
      </div>
    </div>
    <div class="time-cell passed">4009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># if the response status is not 200, the test finish</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.95">
      <div class="step-ref passed">95</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>if (responseStatus != 200) karate.abort()</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># As the user is not admin, the response must contain a field &quot;error&quot;</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.97">
      <div class="step-ref failed">97</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.97">13:32:30.064 classpath:examples/users/TestUserNoAdminCannotDo.feature:97
* match response.errors != &#39;#notpresent&#39;
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:97
</div>   

  

</div>
</div>
    </div>
    <div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define a function to introduce a sleep in the test</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.6">
      <div class="step-ref passed">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def wait = function(pause){ java.lang.Thread.sleep(pause) }</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.6">13:32:30.073 over-writing existing variable &#39;wait&#39; with new value: function(pause){ java.lang.Thread.sleep(pause) }
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.8">
      <div class="step-ref passed">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url httpUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># The user to test this feature is read from a json file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.11">
      <div class="step-ref passed">11</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def jsonUserTest = read(&#39;UserTest.json&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Get the query from a .graphql file</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.102">
      <div class="step-ref passed">102</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def query =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.102">read(&#39;DeleteUser.graphql&#39;)</div>

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># Define the username of the user to delete</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.107">
      <div class="step-ref passed">107</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def id =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.63.0.call.0.107">{ 
   &quot;username&quot;: &quot;#(jsonUserTest.username)&quot;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.113">
      <div class="step-ref passed">113</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print id</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.113">13:32:30.077 [print] {
  &quot;username&quot;: &quot;user36@test.com&quot;
}
 
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.115">
      <div class="step-ref passed">115</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;graphql&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.116">
      <div class="step-ref passed">116</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Authorization = newToken.tokenType + &#39; &#39; + newToken.idToken</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.117">
      <div class="step-ref passed">117</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.118">
      <div class="step-ref passed">118</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { query: &#39;#(query)&#39;, variables: &#39;#(id)&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.119">
      <div class="step-ref passed">119</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">577</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.119">13:32:30.081 request:
1 &gt; POST https://pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com/test-qa-estrella-prod/graphql
1 &gt; Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI0MmYyZWE2Yy1iMDMxLTQ0NWQtODY4NS1iNmUyNDQwNTJhMDYiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjQyYTkwZTQ5LWQ2NGYtNDg4YS04OWFkLWI1ZjYwNWJlNjMxNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMzM3NTQwLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiNDJmMmVhNmMtYjAzMS00NDVkLTg2ODUtYjZlMjQ0MDUyYTA2IiwiZXhwIjoxNjIxMzQxMTQwLCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEzMzc1NDAsImVtYWlsIjoidXNlcjMxQHRlc3QuY29tIn0.kW5A_bhtkTRH33U_Vl2aB-j13UpDj0htD4vnOW_PrJM7jIDXOUenbAZLmjZGbK-OJE9j-GWWKsNo09OHSBfZSvRyJJ75zwGalHSbR6KKXMANRviCadcjvII4IGNyTL5H-Jh9mBMcnoKpFOmS4Yor6WqHRwkf5osVieCC3-15TN5I5n5_DTv6oSX88J2jPkWjD_IzxbDybIUONhDUSVhg-4eXS3_34a9pC_CxA_6M4sogYNkad0jysyZAKuMIowgiJtU_CpJb7_D_u2OSJeYxLl4Ul7d4OHkpSu3RbrFzAzspVrhmVPGe7PnIqdR50z9hi8xXbYQXN_cGvaJ72J0boQ
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; Content-Length: 148
1 &gt; Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/16.0.1)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;variables&quot;:{&quot;username&quot;:&quot;user36@test.com&quot;},&quot;query&quot;:&quot;mutation DeleteUser($username: String) {\r\n    DeleteUser(input: {username: $username})\r\n}&quot;}

13:32:30.656 response time in milliseconds: 575
1 &lt; 200
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 28
1 &lt; Connection: keep-alive
1 &lt; Date: Tue, 18 May 2021 11:32:31 GMT
1 &lt; x-amzn-RequestId: eba6ef5f-46e7-4d43-9bc2-200942a6ad0c
1 &lt; Access-Control-Allow-Origin: *
1 &lt; x-amz-apigw-id: fhbYYG0nDoEFmfA=
1 &lt; X-Amzn-Trace-Id: Root=1-60a3a5cf-109241f1677c1a7b38accb87;Sampled=0
1 &lt; X-Cache: Miss from cloudfront
1 &lt; Via: 1.1 17a71b4bf5d35b398b0fd90a5cd154a7.cloudfront.net (CloudFront)
1 &lt; X-Amz-Cf-Pop: MAD50-C1
1 &lt; X-Amz-Cf-Id: G9vVV9ZTpX6CQHW9QeMCC4HP9apkbsKsFgZs6T5k-JIjSCNyKxVBMQ==
{&quot;data&quot;:{&quot;DeleteUser&quot;:true}}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.120">
      <div class="step-ref passed">120</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container">
      <div class="step-ref passed"></div>
      <div class="step-indent"></div>
      <div class="step-cell comment"># As the user is not admin, the response of the query shouldn&#39;t contain the datas of the user tryed to saved</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row" data-parent="0.63.0.call">
    <div class="step-container" id="0.63.0.call.0.123">
      <div class="step-ref failed">123</div>
      <div class="step-indent"></div>
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match response.errors != &#39;#notpresent&#39;</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.63.0.call.0.123">13:32:30.658 classpath:examples/users/TestUserNoAdminCannotDo.feature:123
* match response.errors != &#39;#notpresent&#39;
match failed: NOT_EQUALS
  $ | is equal (STRING:STRING)
  &#39;#notpresent&#39;
  &#39;#notpresent&#39;

classpath:examples/users/TestUserNoAdminCannotDo.feature:123
</div>   

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

