{"failedCount":0,"prefixedPath":"classpath:examples\/users\/ChangeUserRole.feature","packageQualifiedName":"examples.users.ChangeUserRole","loopIndex":-1,"relativePath":"examples\/users\/ChangeUserRole.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2515300,"millis":2.5153,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"21:58:39.826 karate.env system property was: prod \n"},{"result":{"nanos":37900,"millis":0.0379,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":41569400,"millis":41.5694,"status":"passed"},"step":{"comments":["# Get the idToken for the admin user"],"background":true,"line":11,"prefix":"*","index":2,"text":"def datas = read('signinDatasUser.json')"}},{"result":{"nanos":852016500,"millis":852.0165,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":14,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":827.431,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":2734000,"millis":2.734,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":4488400,"millis":4.4884,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:58:39.931 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":6499000,"millis":6.499,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":38200,"millis":0.0382,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":711700,"millis":0.7117,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":810372800,"millis":810.3728,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:40.149 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n21:58:40.747 response time in milliseconds: 595\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:41 GMT\n1 < x-amzn-RequestId: 3e07f3d5-bec1-484a-8e29-75f57723850e\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_pqHEwDoEFl1w=\n1 < X-Amzn-Trace-Id: Root=1-60a17970-2ce31aa50767c75c22f695c7\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 0250a97a9fe8f37b6e3c4270db2dc8af.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: qb_CaAUSaWxR6G2EaRJOHXOcwoJGvE630eSrx7pLSCCEnBHT-rfbJg==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE3ZDQ3MjhiLTI4MmEtNDkyNi05MzJkLTY0YmI2NDg2NTU3NSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJiZTY0ZWQ5Ny04ZTUyLTQ3NjYtYThjZi1kNmUwYjBiNmVkZGYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.uMY7IjT7OWzIlLTlpeOAuvVS4HjEFCa3dwnnlwMWs5RBcDuqqyj4R5IO5WiyMPqSyNwK6Rvz3ClhGm-GxWRSRyYWgbO4L4fDA47iGegY0dDqE50OAL8dhAuX7kPG7q9iKb8oooG5o3K5XGSRZhwJDlorvApe13ze9FHI9Ybf6scCZ1i57YOnKhbJOr9Hcln_Vx7slLXo7VTFRslyEFB5d-hsgq-3OPiiPCu6dx3ZBiF14TV1NCinSyY-unzrOYSXwUCfgottARoER48MZuBZapn5oIhJb6xyVr0bvl-R3utJR9z_YqQAgZ3wl1tKwQq-RexMu3wNxvsosop2SgIRiQ\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.H8wN_VWhFOBfoKdHhzLiyiWfrugoUS_2EQs22CUn4KQmItWiRVI0TZiqv0UZAV8udv58WdULlvFH9H90xe7Oee0DyiR9BsjJFHc9lgtOxk9O-DfY1ZpaiZgAism4h_UeI1KjMh44nNZR9luQQrdLX7vEZi-8zv9elXeJjIODP_xHGYfGobjpnANXvZm428jT4ii3LRvHGxzo3KLOI8CC0zDCL2TUBI0onSznVwBdcptWqH0tFD1qvrXTcsye5NG40CkP5hBJuRNXUUIAzGP9-uKT7wEzgY9isiaJpuWHc1oz97gUBU0sL3td2LIw_1C2dSZbI_rUg5pyNdLxeQbiAA.qEBe1ZtPk3FyAftV.zw-Oreu68jJW88fAKF1X8n6t11S3IjbZXxkj3dpnwy9qixxQB_roSiHcR_9HOi2Y_fQRTauLEi4bKmioHPyoDN9J9QA28Q7cLy0x_3hYSrx39ZvK6tgPm74oE61tRSJX33sbPFpv853-tlslH3eXUoNTR090aFP3lKfDzgLF0df7cgYgYio6OhDYgoZ7taE5sPeMW3Pr_BvyBnmtYXEsVzVVTBycdE9UwTWS_enuGXJKex3AzHMXHGvsEpY2zxfotK5fhhNj6lUI2f3dXh2XN5Ux_4nR2UyoNW39RH_SrNiVL5bCG7TXdoiNRfbgnYLA03n8-HvBsx3Hklj6fkkWOxIeAprVoCtMWqG6RS38ZTqrW7C99GCRFJv8vxz2msrr779FZndDB-VKVCQlikIJB5OzFx8tFrm__2-Ie64Et-BPlOYozDI9KmqFC54V8OJqUPMY8H9Ajruyi_m3ssSYNdG8wr88-xUeOgOBfiATI6bXSzU5mgwHA4JGdY4e6H-qpcIXv2pKdTnqv3vKYfqnwG_rAUEx7NqxO0ZJH2_soa2ZpKwTA4JOeO01GXxeAzmdCspabjlcbhktwAEuD-MruMbU54OGBBOpPeZLyngR_V1ybyhylrAhZWQGSDrJFiRylPLM9SOso1m41nHCViSpEHJumZ6mlaBEUxdm99ABcWG0qB207oueRWz2BexVskeZKhjd5oXhGk4pu36my16uOJJebbWOEDEIkI9gjTfscj4Q9iL9-KkFBq1UpGC4YyRd-D7SJ6KRml3QqSaYkjOGHY5-jt3zykuglGrM-2nn0VWoEC-UTO1JBMYOpTX_-ow2VXdA1lZHIvQlKDgqjrV-wlLdnH10OhMzLx0UYltuXBQk6y1vhH1GbWaQltz15SlArI_iev6kUOsj-kR_AP8YFsM1-L29dWedAVz04LJGi62o3mSfDPLK4LIFLUCE_DhBbf0BAPnMNvgFzqAXvcYrRC0SBQDYGpuj_YiFJC11rDqz1GpO2V0lRi7_yugqXU7cmU1citfHnLNcU89ePnlMhT5OFqjKreaRtB04Rw6BtK_hSnKfiNj-UnoLetjndXNbcyorE8d5C3tgrdB75NCN082VnaRWiI0qhegbeWOlJv0sRnkNh9bnt_h7s__Qy762TXym2938ioxpMeKays4AGUY8bTzSMFRnylwGemVRZOfb8ne38lIAsVzybvhE1HnImLtju8lswE9vND8bmJKUjfGFLEtv2pSDZJcxXe-3t_tNjrYrS_S9X-E2ExXaxVo-1wot5JQvFgi6a-AoMSokuCfUdh3JYEhM1-WxWGTmWZ1uFcv4b-RuA4O752E172I.aBMXdqmuyKL_3zYv7YIxzw\"}\n"},{"result":{"nanos":29300,"millis":0.0293,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":1238500,"millis":1.2385,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1297100,"millis":1.2971,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:58:40.753 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":827.431,"startTime":1621195119923,"failed":false,"refId":"[1:6]","endTime":1621195120754,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":2108900,"millis":2.1089,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"21:58:40.758 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImE3ZDQ3MjhiLTI4MmEtNDkyNi05MzJkLTY0YmI2NDg2NTU3NSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJiZTY0ZWQ5Ny04ZTUyLTQ3NjYtYThjZi1kNmUwYjBiNmVkZGYiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.uMY7IjT7OWzIlLTlpeOAuvVS4HjEFCa3dwnnlwMWs5RBcDuqqyj4R5IO5WiyMPqSyNwK6Rvz3ClhGm-GxWRSRyYWgbO4L4fDA47iGegY0dDqE50OAL8dhAuX7kPG7q9iKb8oooG5o3K5XGSRZhwJDlorvApe13ze9FHI9Ybf6scCZ1i57YOnKhbJOr9Hcln_Vx7slLXo7VTFRslyEFB5d-hsgq-3OPiiPCu6dx3ZBiF14TV1NCinSyY-unzrOYSXwUCfgottARoER48MZuBZapn5oIhJb6xyVr0bvl-R3utJR9z_YqQAgZ3wl1tKwQq-RexMu3wNxvsosop2SgIRiQ\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.H8wN_VWhFOBfoKdHhzLiyiWfrugoUS_2EQs22CUn4KQmItWiRVI0TZiqv0UZAV8udv58WdULlvFH9H90xe7Oee0DyiR9BsjJFHc9lgtOxk9O-DfY1ZpaiZgAism4h_UeI1KjMh44nNZR9luQQrdLX7vEZi-8zv9elXeJjIODP_xHGYfGobjpnANXvZm428jT4ii3LRvHGxzo3KLOI8CC0zDCL2TUBI0onSznVwBdcptWqH0tFD1qvrXTcsye5NG40CkP5hBJuRNXUUIAzGP9-uKT7wEzgY9isiaJpuWHc1oz97gUBU0sL3td2LIw_1C2dSZbI_rUg5pyNdLxeQbiAA.qEBe1ZtPk3FyAftV.zw-Oreu68jJW88fAKF1X8n6t11S3IjbZXxkj3dpnwy9qixxQB_roSiHcR_9HOi2Y_fQRTauLEi4bKmioHPyoDN9J9QA28Q7cLy0x_3hYSrx39ZvK6tgPm74oE61tRSJX33sbPFpv853-tlslH3eXUoNTR090aFP3lKfDzgLF0df7cgYgYio6OhDYgoZ7taE5sPeMW3Pr_BvyBnmtYXEsVzVVTBycdE9UwTWS_enuGXJKex3AzHMXHGvsEpY2zxfotK5fhhNj6lUI2f3dXh2XN5Ux_4nR2UyoNW39RH_SrNiVL5bCG7TXdoiNRfbgnYLA03n8-HvBsx3Hklj6fkkWOxIeAprVoCtMWqG6RS38ZTqrW7C99GCRFJv8vxz2msrr779FZndDB-VKVCQlikIJB5OzFx8tFrm__2-Ie64Et-BPlOYozDI9KmqFC54V8OJqUPMY8H9Ajruyi_m3ssSYNdG8wr88-xUeOgOBfiATI6bXSzU5mgwHA4JGdY4e6H-qpcIXv2pKdTnqv3vKYfqnwG_rAUEx7NqxO0ZJH2_soa2ZpKwTA4JOeO01GXxeAzmdCspabjlcbhktwAEuD-MruMbU54OGBBOpPeZLyngR_V1ybyhylrAhZWQGSDrJFiRylPLM9SOso1m41nHCViSpEHJumZ6mlaBEUxdm99ABcWG0qB207oueRWz2BexVskeZKhjd5oXhGk4pu36my16uOJJebbWOEDEIkI9gjTfscj4Q9iL9-KkFBq1UpGC4YyRd-D7SJ6KRml3QqSaYkjOGHY5-jt3zykuglGrM-2nn0VWoEC-UTO1JBMYOpTX_-ow2VXdA1lZHIvQlKDgqjrV-wlLdnH10OhMzLx0UYltuXBQk6y1vhH1GbWaQltz15SlArI_iev6kUOsj-kR_AP8YFsM1-L29dWedAVz04LJGi62o3mSfDPLK4LIFLUCE_DhBbf0BAPnMNvgFzqAXvcYrRC0SBQDYGpuj_YiFJC11rDqz1GpO2V0lRi7_yugqXU7cmU1citfHnLNcU89ePnlMhT5OFqjKreaRtB04Rw6BtK_hSnKfiNj-UnoLetjndXNbcyorE8d5C3tgrdB75NCN082VnaRWiI0qhegbeWOlJv0sRnkNh9bnt_h7s__Qy762TXym2938ioxpMeKays4AGUY8bTzSMFRnylwGemVRZOfb8ne38lIAsVzybvhE1HnImLtju8lswE9vND8bmJKUjfGFLEtv2pSDZJcxXe-3t_tNjrYrS_S9X-E2ExXaxVo-1wot5JQvFgi6a-AoMSokuCfUdh3JYEhM1-WxWGTmWZ1uFcv4b-RuA4O752E172I.aBMXdqmuyKL_3zYv7YIxzw\"\n}\n \n"},{"result":{"nanos":813900,"millis":0.8139,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"background":true,"line":18,"prefix":"*","index":5,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":6099900,"millis":6.0999,"status":"passed"},"step":{"background":true,"line":19,"prefix":"*","index":6,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":1003100,"millis":1.0031,"status":"passed"},"step":{"background":true,"line":20,"prefix":"*","index":7,"text":"print user_header"},"stepLog":"21:58:40.765 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q \n"},{"result":{"nanos":1081800,"millis":1.0818,"status":"passed"},"step":{"endLine":28,"comments":["# Get the query from a .graphql file"],"line":25,"prefix":"*","docString":"read('UserReadModel.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":873900,"millis":0.8739,"status":"passed"},"step":{"comments":["# Define the username of the user to list"],"line":31,"prefix":"*","index":1,"text":"def newUserRole = read('UserRole.json')"}},{"result":{"nanos":863800,"millis":0.8638,"status":"passed"},"step":{"endLine":37,"line":32,"prefix":"*","docString":"{ \n   \"id\": \"#(newUserRole.username)\"\n}","index":2,"text":"def id ="}},{"result":{"nanos":809200,"millis":0.8092,"status":"passed"},"step":{"line":38,"prefix":"*","index":3,"text":"print id"},"stepLog":"21:58:40.769 [print] {\n  \"id\": \"user5@test.com\"\n}\n \n"},{"result":{"nanos":395100,"millis":0.3951,"status":"passed"},"step":{"line":40,"prefix":"Given","index":4,"text":"path 'graphql'"}},{"result":{"nanos":1314000,"millis":1.314,"status":"passed"},"step":{"line":42,"prefix":"And","index":5,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":94200,"millis":0.0942,"status":"passed"},"step":{"line":43,"prefix":"And","index":6,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":1192100,"millis":1.1921,"status":"passed"},"step":{"line":44,"prefix":"And","index":7,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":161763000,"millis":161.763,"status":"passed"},"step":{"line":45,"prefix":"When","index":8,"text":"method post"},"stepLog":"21:58:40.775 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJhN2Q0NzI4Yi0yODJhLTQ5MjYtOTMyZC02NGJiNjQ4NjU1NzUiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.uQrzdhudBGP1mp2vUcu2g9QNb8N6SLAez8PzBL0NC29n2lJi5YcW2a4E2toyqbbvvH0sBLvY9l31jBJwSi-rha7_AxEqbnFjzJ6JMBdX3GRRyLx6vPEoA6YrGYxJfhFgSYNGFSZE6kRgbgkVvCrlrjc9wS44Ge2JSMriicGW87TQNm78f0hSqqNuZddQiuGJngc84jLwhbdmf76gIPTpJcwlrJdsEFXsEjN0ZiO-yPTNco-LFKZszzxdwsrlM_y5yh_HZ378T3EPnvPAzT5LYRa1zkt30fiWeR8NhN-fI_F5sZ3fF6dOU64oDWQDM_ApnFyLOtpAitPQCgxtl1ma_Q\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 155\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"user5@test.com\"},\"query\":\"query UserReadModel($id: ID!) {\\r\\n    UserReadModel(id: $id) {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n21:58:40.933 response time in milliseconds: 157\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 64\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:41 GMT\n1 < x-amzn-RequestId: 3846d8da-5ef5-402d-ae8e-9f9472ba6950\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_puGJnjoEFxzQ=\n1 < X-Amzn-Trace-Id: Root=1-60a17971-4cdad114502fa81d7ecc1ffb;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 66709b7391664c627ccebe2d9c55dd7f.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: xuV2p1hpUYjspIV3iqpfoUn-9wJSYXPDN20O4UVXfVJQIFWELaBM6g==\n{\"data\":{\"UserReadModel\":{\"role\":\"User\",\"id\":\"user5@test.com\"}}}\n"},{"result":{"nanos":15600,"millis":0.0156,"status":"passed"},"step":{"line":46,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":23081700,"millis":23.0817,"status":"passed"},"step":{"comments":["# If the user exists, the response of the query must contain the datas of the user. The role is ignored now"],"line":49,"prefix":"*","index":10,"text":"match response.data.UserReadModel == {id: '#(newUserRole.username)', role: '#ignore' }"}}],"executorName":"main","line":22,"name":"List the user by id to check the role","description":"","durationMillis":1097.6493,"startTime":1621195119702,"failed":false,"refId":"[1:22]","endTime":1621195120958,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":756800,"millis":0.7568,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"21:58:40.967 karate.env system property was: prod \n"},{"result":{"nanos":8100,"millis":0.0081,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":762300,"millis":0.7623,"status":"passed"},"step":{"comments":["# Get the idToken for the admin user"],"background":true,"line":11,"prefix":"*","index":2,"text":"def datas = read('signinDatasUser.json')"}},{"result":{"nanos":485060200,"millis":485.0602,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":14,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":473.6245,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":16800,"millis":0.0168,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":1382000,"millis":1.382,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":891500,"millis":0.8915,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:58:40.980 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":363300,"millis":0.3633,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":240100,"millis":0.2401,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":468091600,"millis":468.0916,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:40.983 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n21:58:41.447 response time in milliseconds: 462\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:41 GMT\n1 < x-amzn-RequestId: b6daaad0-ec31-4971-949e-45628e938328\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_pxEhejoEFj6g=\n1 < X-Amzn-Trace-Id: Root=1-60a17971-16d48e23649e5ea71810055f\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 bb4bb14bfdc4b50fa6e1881933804946.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: ziok2wKxA6yOmjp-d_iFJiW29yPXClKPOmsRiKX2JrqeMAe-WyU-mg==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjlmOTRmMmZmLWJiNGQtNDMyOC1iODY2LWU3NWZhZWQzMTIzNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJmMjMwNGJiNy1hMzc5LTRjMTctOGU3Ny1mNDhjN2EwN2JhYTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.VCIfC3GsGAlZvPbUzGub73slIpVnNyaTIiHnpwunhkyxowi3pSyN21wrPAHDt0P9OJFLm5tRTxrt7-QqarzQ1bmMDQ8yL7vCXg0LZ9zcFNFFa04n-QO_sop2Ripq2WpOofU__FaL46X6ldunFSLOuUF-m6fEOoW4vGLuoFAFFtrte8qSvEhmCyF2SUNvwpOgSLp1oNgMvteBnFmZWJVV-FutT1IX45OolSL4QCn2bb3xayqiKoqtXpcojor1mgZFqchlXdgdhc8rNEtBfIrp7fRGmMwaCYsWojsZeR75XYzDWyaulZJKNImSPwbIQIEqXXDgUva0onc6Qs88EMFpeg\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ezI15x4fjyXBnxUIEBAzNdW-7OlHfVkUPYZTUfaggad2eNUHMVGTx3zUwOPh3meoI9gSSKWZur0jF_JeWSC9HA5iXXp6JPfyK-JqaH485RcPkcnR6gL_oUs05wiWPh1BjtRCaUO6gCcyxWuttccicXKPH5O0ciOfXhB2wUj3X7x0ONZTq9iamhF_fZhzGsCgb4uCZ1sp1AzsvbBTIFyKhxfJUjqP40q7ZZoH3RvbAH5fcBeHA1dWbxWnNrt9iT2g_I9cYXmi51UHKtD88aXeHv29XIh2VBi9Vq2AxbnGYbttl08pC6DkOpLgqaz6c1IpB-QTrNeMGuRCFwpiTqiaBA._x2V8s2EWkTSJkAv.zIvC9wN3whe7uKa6RdHXD8fvEhS3YeRvrqAKi7iDqKWYNdrOk99fq1NyAFzyqHHPH0IdHydWLqw-zH4w-DWJD51B05bpxg_5U9sXOrvn4qunODck62DCDjO5BEZDqSv0FuyHhcDgCnNl-It0j5bZAuE6S70TxlRUyUJWX-YNt5Z0cEF4kZD6kvr7_g809nev-23QfpEtiYG7zqJmnpC99oS8poU4qTZ8U7HQjQ0lrpNmCd-UevkhFtFmKdmD5fD6oi_v0hZdlM5waSYtIE0Es-bubLZwJErfyWNRYJn1lb2rOlmmbnjy2dyzLonj58vAjoi6BjDYFdfl6rVOr0arNv8BLXDmyQciYhty2Lbq0GgLX-mvx_3fDvP95RLApM1l7tf1oC_S7bS0QNE9AUdpyWEpY43_YbnMhfKHm19jUT5C9ZK6HSe61rTrLpfpdpZSWHD6Y1VJ-PgFck58esdjO_l-CkTUjrqKixJJeDjO3hdwcsrGD0N5UeI_zIIxKQgPNziNJ13QtfNBNME9UpDt05ortAP2-o4i336yWza0JQ-KvfoBkhdp58mS6lQIuTkMQonNk6F43OSUiNfoRiFVtJl66MV4UjbxAMvM-ayDM10nL1xUsaJC0WDoN2vHVeeyR1jRu3aPhhkANzrAwooB3A1AXZgCvxh7jiWZlfAdkfy-XuhdZzv2A9IOPHLA78dODHIs9_Diz1jXlqkcuVtbxU50a-_gLP7Z8Zp4D9h5a2bxNRHCzcOLfvAhW7CdQdH44zvv3Tdz32wwncq-qEGSHDh7Z38BhxveDtAuFc2fYXHX-QPfz-Lt5hvbGAgk2tHiaC-gHu2bUgfazdmjJw8qQQji7qJB_GoLlQJcDjeardGJmPeL4WUTtrx8g7k8MDeUtjctGa2MmsBxMVMGYgNIKA4u0n1G038DAQHbGHou30JubZnRFTjBOy1YqmofEjFrfrhSLMm1IsZouNFVeb8witnMoq0WXjkMTIILFPMYxzkU4d0oSLYEWotwZygIvtKOBCaW9AmVUzfR__U9FdBaScxPRyQ88OOyNBEgOacnkEff_v8-2tLC7VzcGOXXnAfw5E1gsx2CL-ddhcFEn7dN78Vy5dowjhrjqc9QsCOOk3vjz2vVHJ4BPjosgOPNzfBSaiHB7NlC9WyPVYPh57Ypfi1GpIsRHt44U2OT1Lt2suy91yYYXZGu6h4yyCarl46TAf9iZwwXxx22fbTNBwkbz_0otFf1jf9HH_rfelXxZSg6gx_YxseFY8JWO2gRxO_Fiq3W_B5zjvzuvkKb90LGaUT1dpvGl4Z_UudRShU6xE-CcasM8Gi8jaaFQgBfZb8.TQmADkuulOH1EHGO7HUs_A\"}\n"},{"result":{"nanos":21300,"millis":0.0213,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":1249500,"millis":1.2495,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1360900,"millis":1.3609,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:58:41.453 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":473.6245,"startTime":1621195120978,"failed":false,"refId":"[1:6]","endTime":1621195121453,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":2410000,"millis":2.41,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"21:58:41.457 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjlmOTRmMmZmLWJiNGQtNDMyOC1iODY2LWU3NWZhZWQzMTIzNiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjEsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyMSwiaWF0IjoxNjIxMTk1MTIxLCJqdGkiOiJmMjMwNGJiNy1hMzc5LTRjMTctOGU3Ny1mNDhjN2EwN2JhYTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.VCIfC3GsGAlZvPbUzGub73slIpVnNyaTIiHnpwunhkyxowi3pSyN21wrPAHDt0P9OJFLm5tRTxrt7-QqarzQ1bmMDQ8yL7vCXg0LZ9zcFNFFa04n-QO_sop2Ripq2WpOofU__FaL46X6ldunFSLOuUF-m6fEOoW4vGLuoFAFFtrte8qSvEhmCyF2SUNvwpOgSLp1oNgMvteBnFmZWJVV-FutT1IX45OolSL4QCn2bb3xayqiKoqtXpcojor1mgZFqchlXdgdhc8rNEtBfIrp7fRGmMwaCYsWojsZeR75XYzDWyaulZJKNImSPwbIQIEqXXDgUva0onc6Qs88EMFpeg\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ezI15x4fjyXBnxUIEBAzNdW-7OlHfVkUPYZTUfaggad2eNUHMVGTx3zUwOPh3meoI9gSSKWZur0jF_JeWSC9HA5iXXp6JPfyK-JqaH485RcPkcnR6gL_oUs05wiWPh1BjtRCaUO6gCcyxWuttccicXKPH5O0ciOfXhB2wUj3X7x0ONZTq9iamhF_fZhzGsCgb4uCZ1sp1AzsvbBTIFyKhxfJUjqP40q7ZZoH3RvbAH5fcBeHA1dWbxWnNrt9iT2g_I9cYXmi51UHKtD88aXeHv29XIh2VBi9Vq2AxbnGYbttl08pC6DkOpLgqaz6c1IpB-QTrNeMGuRCFwpiTqiaBA._x2V8s2EWkTSJkAv.zIvC9wN3whe7uKa6RdHXD8fvEhS3YeRvrqAKi7iDqKWYNdrOk99fq1NyAFzyqHHPH0IdHydWLqw-zH4w-DWJD51B05bpxg_5U9sXOrvn4qunODck62DCDjO5BEZDqSv0FuyHhcDgCnNl-It0j5bZAuE6S70TxlRUyUJWX-YNt5Z0cEF4kZD6kvr7_g809nev-23QfpEtiYG7zqJmnpC99oS8poU4qTZ8U7HQjQ0lrpNmCd-UevkhFtFmKdmD5fD6oi_v0hZdlM5waSYtIE0Es-bubLZwJErfyWNRYJn1lb2rOlmmbnjy2dyzLonj58vAjoi6BjDYFdfl6rVOr0arNv8BLXDmyQciYhty2Lbq0GgLX-mvx_3fDvP95RLApM1l7tf1oC_S7bS0QNE9AUdpyWEpY43_YbnMhfKHm19jUT5C9ZK6HSe61rTrLpfpdpZSWHD6Y1VJ-PgFck58esdjO_l-CkTUjrqKixJJeDjO3hdwcsrGD0N5UeI_zIIxKQgPNziNJ13QtfNBNME9UpDt05ortAP2-o4i336yWza0JQ-KvfoBkhdp58mS6lQIuTkMQonNk6F43OSUiNfoRiFVtJl66MV4UjbxAMvM-ayDM10nL1xUsaJC0WDoN2vHVeeyR1jRu3aPhhkANzrAwooB3A1AXZgCvxh7jiWZlfAdkfy-XuhdZzv2A9IOPHLA78dODHIs9_Diz1jXlqkcuVtbxU50a-_gLP7Z8Zp4D9h5a2bxNRHCzcOLfvAhW7CdQdH44zvv3Tdz32wwncq-qEGSHDh7Z38BhxveDtAuFc2fYXHX-QPfz-Lt5hvbGAgk2tHiaC-gHu2bUgfazdmjJw8qQQji7qJB_GoLlQJcDjeardGJmPeL4WUTtrx8g7k8MDeUtjctGa2MmsBxMVMGYgNIKA4u0n1G038DAQHbGHou30JubZnRFTjBOy1YqmofEjFrfrhSLMm1IsZouNFVeb8witnMoq0WXjkMTIILFPMYxzkU4d0oSLYEWotwZygIvtKOBCaW9AmVUzfR__U9FdBaScxPRyQ88OOyNBEgOacnkEff_v8-2tLC7VzcGOXXnAfw5E1gsx2CL-ddhcFEn7dN78Vy5dowjhrjqc9QsCOOk3vjz2vVHJ4BPjosgOPNzfBSaiHB7NlC9WyPVYPh57Ypfi1GpIsRHt44U2OT1Lt2suy91yYYXZGu6h4yyCarl46TAf9iZwwXxx22fbTNBwkbz_0otFf1jf9HH_rfelXxZSg6gx_YxseFY8JWO2gRxO_Fiq3W_B5zjvzuvkKb90LGaUT1dpvGl4Z_UudRShU6xE-CcasM8Gi8jaaFQgBfZb8.TQmADkuulOH1EHGO7HUs_A\"\n}\n \n"},{"result":{"nanos":849300,"millis":0.8493,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"background":true,"line":18,"prefix":"*","index":5,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":414400,"millis":0.4144,"status":"passed"},"step":{"background":true,"line":19,"prefix":"*","index":6,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":767800,"millis":0.7678,"status":"passed"},"step":{"background":true,"line":20,"prefix":"*","index":7,"text":"print user_header"},"stepLog":"21:58:41.459 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ \n"},{"result":{"nanos":1318400,"millis":1.3184,"status":"passed"},"step":{"endLine":56,"line":53,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":899300,"millis":0.8993,"status":"passed"},"step":{"comments":["# JSON file with the new user role"],"line":58,"prefix":"*","index":1,"text":"def user_datas = read('UserRole.json')"}},{"result":{"nanos":356300,"millis":0.3563,"status":"passed"},"step":{"line":60,"prefix":"Given","index":2,"text":"path 'graphql'"}},{"result":{"nanos":647000,"millis":0.647,"status":"passed"},"step":{"line":61,"prefix":"And","index":3,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":662800,"millis":0.6628,"status":"passed"},"step":{"line":62,"prefix":"And","index":4,"text":"request { query: '#(query)',  variables: '#(user_datas)'}"}},{"result":{"nanos":489299700,"millis":489.2997,"status":"passed"},"step":{"line":63,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:41.466 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiI5Zjk0ZjJmZi1iYjRkLTQzMjgtYjg2Ni1lNzVmYWVkMzEyMzYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyMSwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyMSwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.fgaCD3KdhBTnq2b7PCqEpPky1_2I2NfGjkQmQT_3MoeipVdr6EFsh4hxr1Q5lnMoo0iQ6zdHrZx5T_XgAtAF-LEz4zusXRytpfnACY5DOfs1gLNDyMIgYYDPiDzOyilknr3LK5hKESCNYgoQD2y3Gf2U82j7sYsWVlOXadafa4BgPp41digbxJ07VTCor6dcrQN0MutL4oauogtuf7abSTQsAXtjan3q1yW7shlyr_VCs5gs1LV_t6rouAhPcBEi-Myz2QRtFvUPX7HRF4kJGBwhWu0Qo-G6NxDbQ6KooLRY74WRKMI2YT7ry-pQHkjHVDOGW7uP5OonLlIaVcGqTQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 199\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"role\":\"customer\",\"username\":\"user5@test.com\"},\"query\":\"mutation ChangeUserRole($username: String, $role: String) {\\r\\n  ChangeUserRole(input: {username: $username, role: $role})\\r\\n}\"}\n\n21:58:41.952 response time in milliseconds: 484\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 32\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:42 GMT\n1 < x-amzn-RequestId: 6c556405-ec96-4fbe-904e-71cf3e656ce6\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_p2HfqDoEF58A=\n1 < X-Amzn-Trace-Id: Root=1-60a17972-2297bac968e854554f039917;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 71a0472adc0e71a3b21b29ba3bec35f2.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: C0fYBZ-p6tOQZGsoSpqvBFczc2lLl2PfKfNgKbruBIMIi0kG18Trqg==\n{\"data\":{\"ChangeUserRole\":true}}\n"},{"result":{"nanos":24700,"millis":0.0247,"status":"passed"},"step":{"line":64,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":4024611700,"millis":4024.6117,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":67,"prefix":"*","index":7,"text":"wait(4000)"}},{"result":{"nanos":1670900,"millis":1.6709,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":70,"prefix":"*","index":8,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":673900,"millis":0.6739,"status":"passed"},"step":{"comments":["# if the change of the role can't be done, the response contains a field \"error\""],"line":73,"prefix":"*","index":9,"text":"match response.errors == '#notpresent'"}}],"executorName":"main","line":51,"name":"The admin user change the role of one of the user created before","description":"","durationMillis":5011.1936,"startTime":1621195120966,"failed":false,"refId":"[2:51]","endTime":1621195125982,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":342700,"millis":0.3427,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"21:58:45.987 karate.env system property was: prod \n"},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":952400,"millis":0.9524,"status":"passed"},"step":{"comments":["# Get the idToken for the admin user"],"background":true,"line":11,"prefix":"*","index":2,"text":"def datas = read('signinDatasUser.json')"}},{"result":{"nanos":482916800,"millis":482.9168,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":14,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":473.0352,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":750300,"millis":0.7503,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":537900,"millis":0.5379,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:58:45.997 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":196500,"millis":0.1965,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":76200,"millis":0.0762,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":469754300,"millis":469.7543,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:45.999 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n21:58:46.464 response time in milliseconds: 464\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:46 GMT\n1 < x-amzn-RequestId: 4562a915-b1cc-4423-93c6-89592b78f11c\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_qjE4zjoEFfug=\n1 < X-Amzn-Trace-Id: Root=1-60a17976-0512402131ee30cf058da54d\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 b57cfda43c76a33a7043dd5bcd943c1c.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: rZMcRSLA2MQbwoKshxFIVpI-Bnf-9rJR1Kmsfs8fbiYCrmRYIKatCg==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjI4OTkwYjYxLThmYWMtNDNjNy1iMDMzLTU4MTc0ZjM5MjM4NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjYsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNiwiaWF0IjoxNjIxMTk1MTI2LCJqdGkiOiI2ZmMzYTAyOC0xNjE2LTQ4YTUtOTE5MC01ZGM5OTA1OTdiOWUiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.kpxwF7UMYDIfnRlt28LKy6bCyAwE1Uoy_sfI4DWxdn9cAlfHZuwex-BWrfsNwkaZ8Ty1ePhARL6f2dERGUaDcK_QExDGwLdW0M1MBauu47axp-Y4szkhNuhak3mftfupiyYz0MoMeXiVe506uINDsQUzQnKTFLXwktRjm2sMyo0u28I1iqafqYeDdPSDpeUbFxDJwOCVxaHComSIlqQ29nwb5W5rX647TeDlAZeCPGQ9uAO8-Fse9rmdTF0hbJFNYkUDX2vZ8-rCtqXHW1uWMKrgpu0Bd_zYtH1X7BvU8JL0yFuiZbn5649fIY0e4pO4b8x2MfMohFCfZSX6GkoH9Q\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ihlUjRmhMRndPuOs3mmfxoUjkIDeucCH0kzI93fGbyw72D6EaTik-cuQzIRoqk3r2gXNjXtNSAVWd1c2QLzL6hC1iZmYR7tf6Qm00sPJ6u7el7S2EANfgbG6mpz7JTXgaV8onrrXZIzTFtw_tTVMj_Qityzp2hwrm-efT-MJhSteNR6AYDhGNvWb9roZABsTz24mxeMntCZVa2v0Mc_R8ncMM9dqp-PJJNF2yufP834162RIPo5rxC7mAlMdgAWNsTGw6WMM0FA9birl1OBQpYyJcSy6I9DvFR5PU0UcW1n9fxL_4mhcnzXYIaCskzrDzq9O2egOvEoWn2PSiLHnbA.UVXS8oLc0_6QS3Gm.j7_xyn-3BUuQcmtUp0MU0SRkOyJtji9t3Bvb1R8al1YTeoRhQygSisPp3JouDMVOCGlzFK4V1CLs8Ec0KIG4463NU08ADsyR1PQCHaGfDG9CZIcAGyfvcV9mWdu9GTt-wlk5lTpflOrbiUB1D91GWetXRt9B0Mpn14yyYTjhydhg0R1mEbSjivRqT-GGYEloPe1saR4yo4RY0pNaX676qhecnr1J81DYsT3i3Llunbo7VtFoaU4qT4pYqLEVh6k_PiQaxYh0ucQuvNiHZKOvNs2UZPwnqqT8Y5I-xi5Jx6iRz4b_E_xtdH7X02PkcVs5XJIU9HxqHrsrhVKlFRBml-tM9tOr4c8VimzzZ7b-ugY_l6AgdNO2mt9GfQ5xOV-JYDicJmf4fp1SyGhuoD2nc8Oev-HjB4f67ZaA9WH6GweHGK9mau8FUUFWLW7Z_CLTFf5Fmm3lewtX_0TIZiCmdyfo1V03plaB06Eq5pkb_hsYmEwnJSPcDH17kywh9xBFWkHzz4Tde8qgzxcVHXXSDQOTrWtQf-Q4Iwpc-pLoDMrUhE1TyN6DjHvDLUs3xnx2x2r6rU5irfphtms9gBayT1rTXR39I0AZKOSn2vtpC3V9MlFobursSD6ZI0B2gGnf04Dp51Xa1m-aw3TRY2NdT61rtU6PaCt-e0houdqDRgDR1AevInxWuuniHwGf5fsIaGt6DtHkcCFbZv-zcvLC-krJfjMle2E15f_Ep5yVSMjDCvkTgS5ecaS_DBazoj-qn-NJPIb7Pj-lEtsRVP7mNyIJP8z8yG8h6PZAzoAbO6pq8dTiTqnNNCCch22zoJHidNLJuzJhMF6Fcp-5toshTwkecq5OhKGf6rvYKr_-3Sg4gxBe8fLnfx1_thvgHWtYMqJmrtpxPBFkRqCyTrznnP4CNm3Rco-H8UBXjXUGUELfTTRXTYVRJYENE6w_aaIpBk9rwYslXmbg2Me-m-5tMWByOyvt9K7AxKrLlrJ8XlFJ7b9T2rZN_yNqOFHSN2c27eNPwmuAM34O5ZrQ-RnxqVljhwRXr18ZzLRNZ_kV7KLpyOpRkPoK9lEHyDe-0ZDR2dNhVqYYr9GJcf0oawbj_77rZYn5ihcFnpJruQu1lERJMZMcU-uHcbd9BQvV4MRCLQsAlwP8mUTwK80LWvL54Cls6pwrTPpKyVb-dH-VzHf8C1TxDgLy1O37QAgNkJZdCgCf71Nsp2LjILlrwIxkkYTvqd0nImEc6SZtTvRNhvWe9Aq_DK_WMAEN7sz-DasnsNwJOpE0SHYjjgXgfwToViiE_ZRGZWQD5eCfbvmPoqHvjDTVwp3LwyJ1Z4Hhq-s.bDQhHnILyGeogFgjsyZzdg\"}\n"},{"result":{"nanos":17300,"millis":0.0173,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":681300,"millis":0.6813,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":999900,"millis":0.9999,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:58:46.470 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":473.0352,"startTime":1621195125996,"failed":false,"refId":"[1:6]","endTime":1621195126470,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":1136000,"millis":1.136,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"21:58:46.473 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6IjI4OTkwYjYxLThmYWMtNDNjNy1iMDMzLTU4MTc0ZjM5MjM4NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjYsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNiwiaWF0IjoxNjIxMTk1MTI2LCJqdGkiOiI2ZmMzYTAyOC0xNjE2LTQ4YTUtOTE5MC01ZGM5OTA1OTdiOWUiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.kpxwF7UMYDIfnRlt28LKy6bCyAwE1Uoy_sfI4DWxdn9cAlfHZuwex-BWrfsNwkaZ8Ty1ePhARL6f2dERGUaDcK_QExDGwLdW0M1MBauu47axp-Y4szkhNuhak3mftfupiyYz0MoMeXiVe506uINDsQUzQnKTFLXwktRjm2sMyo0u28I1iqafqYeDdPSDpeUbFxDJwOCVxaHComSIlqQ29nwb5W5rX647TeDlAZeCPGQ9uAO8-Fse9rmdTF0hbJFNYkUDX2vZ8-rCtqXHW1uWMKrgpu0Bd_zYtH1X7BvU8JL0yFuiZbn5649fIY0e4pO4b8x2MfMohFCfZSX6GkoH9Q\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.ihlUjRmhMRndPuOs3mmfxoUjkIDeucCH0kzI93fGbyw72D6EaTik-cuQzIRoqk3r2gXNjXtNSAVWd1c2QLzL6hC1iZmYR7tf6Qm00sPJ6u7el7S2EANfgbG6mpz7JTXgaV8onrrXZIzTFtw_tTVMj_Qityzp2hwrm-efT-MJhSteNR6AYDhGNvWb9roZABsTz24mxeMntCZVa2v0Mc_R8ncMM9dqp-PJJNF2yufP834162RIPo5rxC7mAlMdgAWNsTGw6WMM0FA9birl1OBQpYyJcSy6I9DvFR5PU0UcW1n9fxL_4mhcnzXYIaCskzrDzq9O2egOvEoWn2PSiLHnbA.UVXS8oLc0_6QS3Gm.j7_xyn-3BUuQcmtUp0MU0SRkOyJtji9t3Bvb1R8al1YTeoRhQygSisPp3JouDMVOCGlzFK4V1CLs8Ec0KIG4463NU08ADsyR1PQCHaGfDG9CZIcAGyfvcV9mWdu9GTt-wlk5lTpflOrbiUB1D91GWetXRt9B0Mpn14yyYTjhydhg0R1mEbSjivRqT-GGYEloPe1saR4yo4RY0pNaX676qhecnr1J81DYsT3i3Llunbo7VtFoaU4qT4pYqLEVh6k_PiQaxYh0ucQuvNiHZKOvNs2UZPwnqqT8Y5I-xi5Jx6iRz4b_E_xtdH7X02PkcVs5XJIU9HxqHrsrhVKlFRBml-tM9tOr4c8VimzzZ7b-ugY_l6AgdNO2mt9GfQ5xOV-JYDicJmf4fp1SyGhuoD2nc8Oev-HjB4f67ZaA9WH6GweHGK9mau8FUUFWLW7Z_CLTFf5Fmm3lewtX_0TIZiCmdyfo1V03plaB06Eq5pkb_hsYmEwnJSPcDH17kywh9xBFWkHzz4Tde8qgzxcVHXXSDQOTrWtQf-Q4Iwpc-pLoDMrUhE1TyN6DjHvDLUs3xnx2x2r6rU5irfphtms9gBayT1rTXR39I0AZKOSn2vtpC3V9MlFobursSD6ZI0B2gGnf04Dp51Xa1m-aw3TRY2NdT61rtU6PaCt-e0houdqDRgDR1AevInxWuuniHwGf5fsIaGt6DtHkcCFbZv-zcvLC-krJfjMle2E15f_Ep5yVSMjDCvkTgS5ecaS_DBazoj-qn-NJPIb7Pj-lEtsRVP7mNyIJP8z8yG8h6PZAzoAbO6pq8dTiTqnNNCCch22zoJHidNLJuzJhMF6Fcp-5toshTwkecq5OhKGf6rvYKr_-3Sg4gxBe8fLnfx1_thvgHWtYMqJmrtpxPBFkRqCyTrznnP4CNm3Rco-H8UBXjXUGUELfTTRXTYVRJYENE6w_aaIpBk9rwYslXmbg2Me-m-5tMWByOyvt9K7AxKrLlrJ8XlFJ7b9T2rZN_yNqOFHSN2c27eNPwmuAM34O5ZrQ-RnxqVljhwRXr18ZzLRNZ_kV7KLpyOpRkPoK9lEHyDe-0ZDR2dNhVqYYr9GJcf0oawbj_77rZYn5ihcFnpJruQu1lERJMZMcU-uHcbd9BQvV4MRCLQsAlwP8mUTwK80LWvL54Cls6pwrTPpKyVb-dH-VzHf8C1TxDgLy1O37QAgNkJZdCgCf71Nsp2LjILlrwIxkkYTvqd0nImEc6SZtTvRNhvWe9Aq_DK_WMAEN7sz-DasnsNwJOpE0SHYjjgXgfwToViiE_ZRGZWQD5eCfbvmPoqHvjDTVwp3LwyJ1Z4Hhq-s.bDQhHnILyGeogFgjsyZzdg\"\n}\n \n"},{"result":{"nanos":212200,"millis":0.2122,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"background":true,"line":18,"prefix":"*","index":5,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":158400,"millis":0.1584,"status":"passed"},"step":{"background":true,"line":19,"prefix":"*","index":6,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":266800,"millis":0.2668,"status":"passed"},"step":{"background":true,"line":20,"prefix":"*","index":7,"text":"print user_header"},"stepLog":"21:58:46.474 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ \n"},{"result":{"nanos":836300,"millis":0.8363,"status":"passed"},"step":{"endLine":82,"comments":["# Get the query from a .graphql file"],"line":79,"prefix":"*","docString":"read('UserReadModel.graphql')","index":0,"text":"def query ="}},{"result":{"nanos":319900,"millis":0.3199,"status":"passed"},"step":{"comments":["# Define the username of the user to list"],"line":85,"prefix":"*","index":1,"text":"def newUserRole = read('UserRole.json')"}},{"result":{"nanos":236300,"millis":0.2363,"status":"passed"},"step":{"endLine":91,"line":86,"prefix":"*","docString":"{ \n   \"id\": \"#(newUserRole.username)\"\n}","index":2,"text":"def id ="}},{"result":{"nanos":713100,"millis":0.7131,"status":"passed"},"step":{"line":92,"prefix":"*","index":3,"text":"print id"},"stepLog":"21:58:46.476 [print] {\n  \"id\": \"user5@test.com\"\n}\n \n"},{"result":{"nanos":136400,"millis":0.1364,"status":"passed"},"step":{"line":94,"prefix":"Given","index":4,"text":"path 'graphql'"}},{"result":{"nanos":252200,"millis":0.2522,"status":"passed"},"step":{"line":96,"prefix":"And","index":5,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":93700,"millis":0.0937,"status":"passed"},"step":{"line":97,"prefix":"And","index":6,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":520100,"millis":0.5201,"status":"passed"},"step":{"line":98,"prefix":"And","index":7,"text":"request { query: '#(query)', variables: '#(id)' }"}},{"result":{"nanos":291853300,"millis":291.8533,"status":"passed"},"step":{"line":99,"prefix":"When","index":8,"text":"method post"},"stepLog":"21:58:46.479 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiIyODk5MGI2MS04ZmFjLTQzYzctYjAzMy01ODE3NGYzOTIzODQiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNiwiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNiwiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.mUPe1VioOA05ElUupTO7-crXtxTEMA2FwybR9Qh2N-0uWrDElt8mA7Ik_kgXnqd0HO6lLkNFZTQNq_35WEMGVloDqcHZrF5TeTma-5F9cKFT2N9UzXVbBHtK44MniYH4rkOM2kG3B_DTm9sUidIBK6jC-ApZ5B28c5JpfCaJBsO5WG6yf6NpahVzxqx8SLhNwDInGfdeLO3kJT2en-8z0jlKIBlKPRJxqyQQ_6wNVP6wvcFYCvhYcucFElDl6wpaMT7xyfEu_byFZLkoy1wyI0KWgehXr5TGfQXejzOajJZYjbw9zPFHQg9HS_tfPk4weEqEYUXZS51X6duuKT-UQQ\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 155\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"user5@test.com\"},\"query\":\"query UserReadModel($id: ID!) {\\r\\n    UserReadModel(id: $id) {\\r\\n        id\\r\\n        role\\r\\n    }\\r\\n}\"}\n\n21:58:46.768 response time in milliseconds: 288\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 68\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:47 GMT\n1 < x-amzn-RequestId: 1ec291be-699a-47b9-acbb-57bf8dada1ed\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_qoEpxjoEFaHQ=\n1 < X-Amzn-Trace-Id: Root=1-60a17977-57e053791c3aa071349f004b;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 45a6d6ca246793c1ce56677d5f878656.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: NVxVhXQEtrc11-U50muvh9QGSajDBYI3pTH5MM-ZKS2iN7t9h8nTWA==\n{\"data\":{\"UserReadModel\":{\"role\":\"customer\",\"id\":\"user5@test.com\"}}}\n"},{"result":{"nanos":16300,"millis":0.0163,"status":"passed"},"step":{"line":100,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":797000,"millis":0.797,"status":"passed"},"step":{"comments":["# If the change was made, the response of the query must contain the datas of the user"],"line":103,"prefix":"*","index":10,"text":"match response.data.UserReadModel == {id: '#(newUserRole.username)', role: '#(newUserRole.role)' }"}}],"executorName":"main","line":76,"name":"List the user by id to test if the change is done","description":"","durationMillis":781.7691,"startTime":1621195125986,"failed":false,"refId":"[3:76]","endTime":1621195126771,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":219300,"millis":0.2193,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"21:58:46.776 karate.env system property was: prod \n"},{"result":{"nanos":7400,"millis":0.0074,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":717200,"millis":0.7172,"status":"passed"},"step":{"comments":["# Get the idToken for the admin user"],"background":true,"line":11,"prefix":"*","index":2,"text":"def datas = read('signinDatasUser.json')"}},{"result":{"nanos":370969300,"millis":370.9693,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the admin's datas"],"background":true,"line":14,"prefix":"*","index":3,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":360.192,"callArg":{"password":"Admin.2020","clientId":"799hogucm363v55l7dk2n1l5u0","username":"admin@theagilemonkeys.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":442900,"millis":0.4429,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":666400,"millis":0.6664,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:58:46.787 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"admin@theagilemonkeys.com\",\n  \"password\": \"Admin.2020\"\n}\n \n"},{"result":{"nanos":156900,"millis":0.1569,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":7700,"millis":0.0077,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":51900,"millis":0.0519,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":357778600,"millis":357.7786,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:46.789 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 104\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Admin.2020\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"admin@theagilemonkeys.com\"}\n\n21:58:47.144 response time in milliseconds: 355\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 4011\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:47 GMT\n1 < x-amzn-RequestId: 9859f6f1-9b5e-47b5-a532-8783f6e89be5\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_qrFUhDoEF8nA=\n1 < X-Amzn-Trace-Id: Root=1-60a17977-77cc3e981f5cdc2e62f26a75\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 c0d1739fbc59ff80d4ec6a2a675c8aac.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: HTzbocd9A-DapwyBgb7CMjk9gLL8rPGIVhYfBnFiXxpeGTFHK61iEg==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIxNjNiOThhLTlmNjQtNGQyMy05M2Q0LTAxZDUxMTk3MzdkMiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNywiaWF0IjoxNjIxMTk1MTI3LCJqdGkiOiIxMDYzZWI0Zi05MDY5LTQyYTgtYmI4Ny1mZTgxMDVjN2Q3N2IiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.LB03oNK14LlQo66dF-sjdwnuzFQhIA_ipIOFNxkMAgif2o-hASyfGI8lNc5hXz-zQvmE-pNyMm6oFBof8sMq1THCT1jGececzNzRFO8mCA88x7D_6Fc-iFl-Od4uPQVe4Yu92h-t6SuZVIKceNEc1kzC3uw4xDMK3wXxXimfXP6ciXaJJUQSEGxawUFzCqFP_nW0xa0anQGnK9VlooaMSaTkggMEiVARUK8wGLFTYk-zKaaupkLMbbpLOcTgfFW7L3xtzGd0STUGnfl5KXGRoLBlXDsUD8lnbc2jnI9qiAYL-MFhIQ2C2784ZBGyK06YxkWKRdeLLZGT4DMMjpuSxw\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bI3AvcIuSwZyHe4ZbfhFiERjxNjdrdVuIHmXK3IVqIHbEerxPDqUE1Hi2yaINGAkwP0ihRXDpgrYe6OjN85wCWA0rhZeTfmh4Nh_BDuT1ODC3Uxlxxny6kezmLJ9qqbz04KOZeELgqUFSVQ1b0Isguk46m96ns3idsV9ftx52gf3dd5cwQjUclN7mbYXPCgkvWuqiuLeDwcYIBHLW0N3jljZdHcXoy-XwOwgaKYcY61nTRDh-piYYYLEzn0QiBrkLGpypKLMk51Kl3MiAN8UVw1uV6Dk9ZFkkCiLi2uZEGTmcoxFFeg5c9ZKSrmbl7AItvm-vmPGXM80KoGpY1i79g.-kn722B3DxuQy_B9.DavqOHWWn8KHpGkiJWV6V7IGYUbdVYWQhapggzoh1TM3yVB7Q4tQYP5Bhw3tDOBSbgPjWx8ig6cCS1Dl2deaLbADjSenJci3c9MhIEKDl7NZL9oyhBqjNexfaR16e2uBzoXGmq4ipE6OnmA94s8WVhTFi5JSrKIZd0xV3yv1vScsgvk3D7gaYjQeJsDub0wfc9517GXLG0J99Od0zfONL8wjFyV58joAkec6zYssxANiidVkUqRSXLSxe6p2gKc6RCxqicYc4QiB-5Itp9cDzV2VycgSInaTegwDALDno7r1Ir1otwhgq3VfCy6vYrVgupfgf6UFMSw7cIQdXkpWyElqYo_lJTHuiwSvdEDx59l6XunxkE6B7SPMzV76V0yooQOt2HNFqVCSKHQ06b8Ntr333lLCaezxtm4KFLGFnKJAYvMM8eS1JhXRLIBzwTHIOA0VwgjAlx3tIa1HhwdbI22_WnVZz8ZakTrwsD320lArNGmXlx198N_Zba7n78l2B6bUYiHpKOqIJH_HONb2wY-srnv05p6NA8MXQ8hPjWkEVFWhaLZ9aXnulSMY9UTIPUVXP7M1eCri8cOdNA1-1XlUNZtbSt4nx_Rjady4_gzbk4KEfeR8dKCyc-O03mEgh-_p3o9VpkJ--k05ixROUfr9VfU6F24ymFpQQXytGqYzDCWsBlVEN2EfZEHV_SIZ6MegupHl3caPzxd9SOkq5HD75K437mxGkJX_td8RnpWJM94gtD_k5U9l2rF5ojjQJMCRkDiqjjpfGkS6EUiK7oqFpzW8fAsSO8TCq2FtADyVQ5ao_mAsY04RenxfRZ6vzhPG-X1TeV1cWr_clw4xCyvlu04B94ZiFyLnFxSrnXbdKjdU3QS37sBqX3lmIqwSJUK7Rxyr520LnOFbmzdmC77f9D7-nPVehtmUHDjJhGBECARgccU8WIsVTuhqH6SKhHaLbNVXarLDuCg3iUbqnJ34-feAS-8JhKan1otnzO-goYGIZ7fEerqmOlFCdj2uMCOAa0g4HCjRpfNAd9XJi30DFHEPWWiWqmBZDj212HkLQj60v-nYy7DTc-A-ryadVoBUnh1QV11BqLEoQMw49S1gTTv6OyqWsEUhZ8O5mTbcDMLFMGR586H53BEN-vWf63YB_hR-aNJqpirI-0HSWObNhtSl_CzsyGe11-QAS4Y7x1hTTS_iVpY1hfhnW4lvpXbmZ0C8QeHxLcqr85FWZF6mLxc4fptIyOD1sfuHkfd5eJCbiiIb6VnX2cv8U2n9ySWmcy4uptZztlOEibFfe_UQAMX4fs0AbdYcHpuGc_h-xREpGF32Ded7vdlobuY.jz03egUreqqg66Nni_qgFw\"}\n"},{"result":{"nanos":9400,"millis":0.0094,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":343400,"millis":0.3434,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":718700,"millis":0.7187,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:58:47.147 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":360.192,"startTime":1621195126785,"failed":false,"refId":"[1:6]","endTime":1621195127147,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":894200,"millis":0.8942,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":4,"text":"print signIn.response"},"stepLog":"21:58:47.148 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJldmVudF9pZCI6ImIxNjNiOThhLTlmNjQtNGQyMy05M2Q0LTAxZDUxMTk3MzdkMiIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyNywiaWF0IjoxNjIxMTk1MTI3LCJqdGkiOiIxMDYzZWI0Zi05MDY5LTQyYTgtYmI4Ny1mZTgxMDVjN2Q3N2IiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiYWViM2YyYTctM2U5ZS00YTk3LWFjZTgtZmU0MWFkMTE4ODkwIn0.LB03oNK14LlQo66dF-sjdwnuzFQhIA_ipIOFNxkMAgif2o-hASyfGI8lNc5hXz-zQvmE-pNyMm6oFBof8sMq1THCT1jGececzNzRFO8mCA88x7D_6Fc-iFl-Od4uPQVe4Yu92h-t6SuZVIKceNEc1kzC3uw4xDMK3wXxXimfXP6ciXaJJUQSEGxawUFzCqFP_nW0xa0anQGnK9VlooaMSaTkggMEiVARUK8wGLFTYk-zKaaupkLMbbpLOcTgfFW7L3xtzGd0STUGnfl5KXGRoLBlXDsUD8lnbc2jnI9qiAYL-MFhIQ2C2784ZBGyK06YxkWKRdeLLZGT4DMMjpuSxw\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.bI3AvcIuSwZyHe4ZbfhFiERjxNjdrdVuIHmXK3IVqIHbEerxPDqUE1Hi2yaINGAkwP0ihRXDpgrYe6OjN85wCWA0rhZeTfmh4Nh_BDuT1ODC3Uxlxxny6kezmLJ9qqbz04KOZeELgqUFSVQ1b0Isguk46m96ns3idsV9ftx52gf3dd5cwQjUclN7mbYXPCgkvWuqiuLeDwcYIBHLW0N3jljZdHcXoy-XwOwgaKYcY61nTRDh-piYYYLEzn0QiBrkLGpypKLMk51Kl3MiAN8UVw1uV6Dk9ZFkkCiLi2uZEGTmcoxFFeg5c9ZKSrmbl7AItvm-vmPGXM80KoGpY1i79g.-kn722B3DxuQy_B9.DavqOHWWn8KHpGkiJWV6V7IGYUbdVYWQhapggzoh1TM3yVB7Q4tQYP5Bhw3tDOBSbgPjWx8ig6cCS1Dl2deaLbADjSenJci3c9MhIEKDl7NZL9oyhBqjNexfaR16e2uBzoXGmq4ipE6OnmA94s8WVhTFi5JSrKIZd0xV3yv1vScsgvk3D7gaYjQeJsDub0wfc9517GXLG0J99Od0zfONL8wjFyV58joAkec6zYssxANiidVkUqRSXLSxe6p2gKc6RCxqicYc4QiB-5Itp9cDzV2VycgSInaTegwDALDno7r1Ir1otwhgq3VfCy6vYrVgupfgf6UFMSw7cIQdXkpWyElqYo_lJTHuiwSvdEDx59l6XunxkE6B7SPMzV76V0yooQOt2HNFqVCSKHQ06b8Ntr333lLCaezxtm4KFLGFnKJAYvMM8eS1JhXRLIBzwTHIOA0VwgjAlx3tIa1HhwdbI22_WnVZz8ZakTrwsD320lArNGmXlx198N_Zba7n78l2B6bUYiHpKOqIJH_HONb2wY-srnv05p6NA8MXQ8hPjWkEVFWhaLZ9aXnulSMY9UTIPUVXP7M1eCri8cOdNA1-1XlUNZtbSt4nx_Rjady4_gzbk4KEfeR8dKCyc-O03mEgh-_p3o9VpkJ--k05ixROUfr9VfU6F24ymFpQQXytGqYzDCWsBlVEN2EfZEHV_SIZ6MegupHl3caPzxd9SOkq5HD75K437mxGkJX_td8RnpWJM94gtD_k5U9l2rF5ojjQJMCRkDiqjjpfGkS6EUiK7oqFpzW8fAsSO8TCq2FtADyVQ5ao_mAsY04RenxfRZ6vzhPG-X1TeV1cWr_clw4xCyvlu04B94ZiFyLnFxSrnXbdKjdU3QS37sBqX3lmIqwSJUK7Rxyr520LnOFbmzdmC77f9D7-nPVehtmUHDjJhGBECARgccU8WIsVTuhqH6SKhHaLbNVXarLDuCg3iUbqnJ34-feAS-8JhKan1otnzO-goYGIZ7fEerqmOlFCdj2uMCOAa0g4HCjRpfNAd9XJi30DFHEPWWiWqmBZDj212HkLQj60v-nYy7DTc-A-ryadVoBUnh1QV11BqLEoQMw49S1gTTv6OyqWsEUhZ8O5mTbcDMLFMGR586H53BEN-vWf63YB_hR-aNJqpirI-0HSWObNhtSl_CzsyGe11-QAS4Y7x1hTTS_iVpY1hfhnW4lvpXbmZ0C8QeHxLcqr85FWZF6mLxc4fptIyOD1sfuHkfd5eJCbiiIb6VnX2cv8U2n9ySWmcy4uptZztlOEibFfe_UQAMX4fs0AbdYcHpuGc_h-xREpGF32Ded7vdlobuY.jz03egUreqqg66Nni_qgFw\"\n}\n \n"},{"result":{"nanos":312900,"millis":0.3129,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"background":true,"line":18,"prefix":"*","index":5,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":446300,"millis":0.4463,"status":"passed"},"step":{"background":true,"line":19,"prefix":"*","index":6,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":549700,"millis":0.5497,"status":"passed"},"step":{"background":true,"line":20,"prefix":"*","index":7,"text":"print user_header"},"stepLog":"21:58:47.151 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZWIzZjJhNy0zZTllLTRhOTctYWNlOC1mZTQxYWQxMTg4OTAiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZXZlbnRfaWQiOiJiMTYzYjk4YS05ZjY0LTRkMjMtOTNkNC0wMWQ1MTE5NzM3ZDIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTYyMTE5NTEyNywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfbUh1ZUFyMlF1IiwiY29nbml0bzp1c2VybmFtZSI6ImFlYjNmMmE3LTNlOWUtNGE5Ny1hY2U4LWZlNDFhZDExODg5MCIsImV4cCI6MTYyMTE5ODcyNywiY3VzdG9tOnJvbGUiOiJBZG1pbiIsImlhdCI6MTYyMTE5NTEyNywiZW1haWwiOiJhZG1pbkB0aGVhZ2lsZW1vbmtleXMuY29tIn0.otEGzfv94rxX1m1DyWndV3Ku2FYIsTa0c92npyP5Jfy22F6OaxrFWVlIjvKQ0m0CI4HIcN5P5SlrjtmK_4xvu3AL-G5zoSOY7KiZKUG220zOhxWcmUm9kLrwg5p5-swumy7_lps_5j8aOcodYVtm4ajZ4UdH5hMe3wmQMz-cqM-lFmlVQlyuEG_c0uA2621vg7Rar2dCBcrw56kjMXWwQNO3srMVByS52Uekli8TtyTuOW6P_7AbALHPGfO_6xzpE5kFEnsEhAnEm2WGLlN2olkYcdW25-OpX2AAj1v0guVChWgZ3iD2tr22ST6Z6c6Pdzl1jstZ0L_sorbMjQYl4g \n"},{"result":{"nanos":3930200,"millis":3.9302,"status":"passed"},"step":{"comments":["# First it is necessary to sign to get a token"],"line":109,"prefix":"*","index":0,"text":"def datas = read('signinDatasUserNoAdmin.json')"},"stepLog":"21:58:47.151 over-writing existing variable 'datas' with new value: read('signinDatasUserNoAdmin.json')\n"},{"result":{"nanos":645035900,"millis":645.0359,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the user's datas"],"line":112,"prefix":"*","index":1,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":635.5611,"callArg":{"password":"Password_1","clientId":"799hogucm363v55l7dk2n1l5u0","username":"user8@test.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":14500,"millis":0.0145,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"},"stepLog":"21:58:47.155 over-writing existing variable 'signIn' with new value: call read('signin.feature') datas\n"},{"result":{"nanos":477200,"millis":0.4772,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":568700,"millis":0.5687,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:58:47.163 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"user8@test.com\",\n  \"password\": \"Password_1\"\n}\n \n"},{"result":{"nanos":178600,"millis":0.1786,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":7000,"millis":0.007,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":63100,"millis":0.0631,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":633281700,"millis":633.2817,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:58:47.165 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 93\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Password_1\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"user8@test.com\"}\n\n21:58:47.794 response time in milliseconds: 627\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 3994\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:48 GMT\n1 < x-amzn-RequestId: e5112361-9aba-4180-8045-2f0a7815b461\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_qxFO6joEFevA=\n1 < X-Amzn-Trace-Id: Root=1-60a17978-06b349ce4d84121c01a3a07b\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 c9966d06baf42da6ee92424751ed7202.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: QeMAdpJEZZjqbfQ90jEJvgPbckDZPkXD09pyYuQchexpkJ-7v-cfwA==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyOCwiaWF0IjoxNjIxMTk1MTI4LCJqdGkiOiI2ODI3NjE5NC05MjE2LTQ4MDQtODQ5Zi02MTJiNzQwODNkNjgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.dsANECBZ25q4qUq9aMSQVbtenwEguJ0aP5N7aPNrARX-jApvWBeF7eb_ghib4NpwXY5gIiuH-Ugof-zmGTh892sPiQHiVizKqAvL4L1miQ0sixprb-PBatXDlHZxqtl8fQdZ_oX2Zy9mWZXn2ZFzUHi59GxY1OvlUW_p7RytB-xeJWCs8ilZYS5GF-kt60_YbgiKi6fvPxYKAzDUfsDSMcGLhkWjDiDWN-E4LHGV_FZy6R2cvynbJhehtucABwrF3Gd1AbwDqGfSfssk4NdAHbDnMRjjhR1LsvPwMkiYAQ5EONKYRJtQBGKzfaN75Cl-g14YRXM6rw_0LXp10FXbEg\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Y2nRk19Z2NfcC1_BIxRJ4L1LzkOqB0xmyNY2OR8NoquQ6CEMY_IHRXnNtqmGB7j12wrbIf8LRoTQ-628EgqY8xwb85oDweIu5lbVPqa00flz3gUVWvU6GtFcx79sE36sfDIXiPXZJpgYIgZGNXLTogZAh1FhTA9dxiFdBm5dLxqMUShqgjAIZnzcYLe0YUaMeg8p58ePBQbqZ8A5nOEbmCuqy1jikxyEJRsYhcJLwjl_JXQW5urzjMLBUBScsqH89sDUzXeLXeY9HR7-dnHzQ54MmMAscbNPmu1DwugQVMNwcCnU5saNb5hebkf9m2JJkWatJAQm219XxlyObakWJg.2c8LZX-tEeTxVnEB.P2ijWun7gSJ57Ds1CQ23tCj0ndyD9Lc6WLkTJunLMJmIi7lP_ncBMs9O3wPgvGQmFXbafNHdv1ctFK8W6XCsxo2D10TKFhWIelFM9sJEiPJgxVKibGIYk1dFHVHPSeySbrdgKJeumcSKtKQP0wwQ_x7dphhn0_rayE79kIUJ-YHhbXrZS4VwDGtxZC9a-pVl78bzqTi5yZs9eg_grrSHXTK722AkxSmOZb_rH-CYdGu4XkgLfhx-ZzhytcpOPycD2sonbIIE2mXqrZbx95h5U0XE9wtXHEzzlk6DZKv1_zQVlpgH5G80hZntpDNmvhCy4QhVZ32RikICbJWVYnc-jSURKfX2-K6GpktsRQOfyvmfK1a9i-M-VpM01dkFINFi8Ln_DqqzSVpV3uGORCc_PDMCIZ3iVD077tnrqfAbz_eb7MntQjY2oWbTNNuZ17JkwbM27kQgbmBiPCLzZYvb0lHrXcruFpzKHKECHgQ36ia15TpZDVVzTOUm6ZFyhlAzr9bUgMWb26rTfBKOEQ-4n1ZNe0Ukd-Nrx8eNI4ki5kKSWsESItckqQjrEIf0n0mC46xcKPCJI3VHVArikvV3u9luElrkslPzTPfoWckheEHzDRnvWMe1qUKcaYv0zv4S7zbKp4C1piZW_PtuV6EAuy7Q3lro0dF_A1CPA_oYAHOrXVkyT2ETRSr4wtcyxj_1EKcV6Y73qFWlxsY_-fa4baSJE9RJrh-Explr75UAdqkWLNKKlaMfNcuH2DWFcA2IkIC3AHzPdyNquFyEE_a8vG93vxYR62VTljeQrgVnf4iKEkZmxI3Lq6Vt7KZUQgU8ztg7deuhrgkoZJ2H2evTQGnWzimv7Tc2HxbrWOK0V1cbmt3fKtu1gSfhAFj57Rw0sGop91YzsLz6D6kkulQp_sGRX35rgmXnk_I_c6GFAy3V3G0B4wOkBQZrmQVmb3Mut0bBx0wfjI8Erf6PD4dgfrsQr_xj-l0-9HBkwejhp_fOHpxFlIVwzIGLhO4DLYUJx4ToFQmUo9oXLKX7OfVA8wQb8ASKFt1JRcIPqwSdbIcFEeop32sanLlTlUuDhmputgRCWeorDCQV0S1JEH8wyL9_DHdQcpYwNtBdFL6kgtgZrzgo1uwnx2G-Wr9fu54_p7PGdV4KdkytplZPqA9CAiiFpXrs4n6duSFdCTqyk1yz9vcqd2hFYKel_I98KDmHPwVYtFvrK2fouBiwq0EMPAhbRBjXS236B2ZX4wnfIiH3HYjrJKakSfgV7catlMywvlIRnlNVi5kzV-ZacGTWYWWZvT12VZ3xw-QLRKbBUtIYpRskNmZg1JV2X4r5MUo.ivFF3GTlnBDzwXtI2uc9gw\"}\n"},{"result":{"nanos":16500,"millis":0.0165,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":380100,"millis":0.3801,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":573700,"millis":0.5737,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:58:47.798 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":635.5611,"startTime":1621195127162,"failed":false,"refId":"[1:6]","endTime":1621195127798,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":715600,"millis":0.7156,"status":"passed"},"step":{"line":113,"prefix":"*","index":2,"text":"print signIn.response"},"stepLog":"21:58:47.800 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjExOTUxMjgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTE5ODcyOCwiaWF0IjoxNjIxMTk1MTI4LCJqdGkiOiI2ODI3NjE5NC05MjE2LTQ4MDQtODQ5Zi02MTJiNzQwODNkNjgiLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIn0.dsANECBZ25q4qUq9aMSQVbtenwEguJ0aP5N7aPNrARX-jApvWBeF7eb_ghib4NpwXY5gIiuH-Ugof-zmGTh892sPiQHiVizKqAvL4L1miQ0sixprb-PBatXDlHZxqtl8fQdZ_oX2Zy9mWZXn2ZFzUHi59GxY1OvlUW_p7RytB-xeJWCs8ilZYS5GF-kt60_YbgiKi6fvPxYKAzDUfsDSMcGLhkWjDiDWN-E4LHGV_FZy6R2cvynbJhehtucABwrF3Gd1AbwDqGfSfssk4NdAHbDnMRjjhR1LsvPwMkiYAQ5EONKYRJtQBGKzfaN75Cl-g14YRXM6rw_0LXp10FXbEg\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Y2nRk19Z2NfcC1_BIxRJ4L1LzkOqB0xmyNY2OR8NoquQ6CEMY_IHRXnNtqmGB7j12wrbIf8LRoTQ-628EgqY8xwb85oDweIu5lbVPqa00flz3gUVWvU6GtFcx79sE36sfDIXiPXZJpgYIgZGNXLTogZAh1FhTA9dxiFdBm5dLxqMUShqgjAIZnzcYLe0YUaMeg8p58ePBQbqZ8A5nOEbmCuqy1jikxyEJRsYhcJLwjl_JXQW5urzjMLBUBScsqH89sDUzXeLXeY9HR7-dnHzQ54MmMAscbNPmu1DwugQVMNwcCnU5saNb5hebkf9m2JJkWatJAQm219XxlyObakWJg.2c8LZX-tEeTxVnEB.P2ijWun7gSJ57Ds1CQ23tCj0ndyD9Lc6WLkTJunLMJmIi7lP_ncBMs9O3wPgvGQmFXbafNHdv1ctFK8W6XCsxo2D10TKFhWIelFM9sJEiPJgxVKibGIYk1dFHVHPSeySbrdgKJeumcSKtKQP0wwQ_x7dphhn0_rayE79kIUJ-YHhbXrZS4VwDGtxZC9a-pVl78bzqTi5yZs9eg_grrSHXTK722AkxSmOZb_rH-CYdGu4XkgLfhx-ZzhytcpOPycD2sonbIIE2mXqrZbx95h5U0XE9wtXHEzzlk6DZKv1_zQVlpgH5G80hZntpDNmvhCy4QhVZ32RikICbJWVYnc-jSURKfX2-K6GpktsRQOfyvmfK1a9i-M-VpM01dkFINFi8Ln_DqqzSVpV3uGORCc_PDMCIZ3iVD077tnrqfAbz_eb7MntQjY2oWbTNNuZ17JkwbM27kQgbmBiPCLzZYvb0lHrXcruFpzKHKECHgQ36ia15TpZDVVzTOUm6ZFyhlAzr9bUgMWb26rTfBKOEQ-4n1ZNe0Ukd-Nrx8eNI4ki5kKSWsESItckqQjrEIf0n0mC46xcKPCJI3VHVArikvV3u9luElrkslPzTPfoWckheEHzDRnvWMe1qUKcaYv0zv4S7zbKp4C1piZW_PtuV6EAuy7Q3lro0dF_A1CPA_oYAHOrXVkyT2ETRSr4wtcyxj_1EKcV6Y73qFWlxsY_-fa4baSJE9RJrh-Explr75UAdqkWLNKKlaMfNcuH2DWFcA2IkIC3AHzPdyNquFyEE_a8vG93vxYR62VTljeQrgVnf4iKEkZmxI3Lq6Vt7KZUQgU8ztg7deuhrgkoZJ2H2evTQGnWzimv7Tc2HxbrWOK0V1cbmt3fKtu1gSfhAFj57Rw0sGop91YzsLz6D6kkulQp_sGRX35rgmXnk_I_c6GFAy3V3G0B4wOkBQZrmQVmb3Mut0bBx0wfjI8Erf6PD4dgfrsQr_xj-l0-9HBkwejhp_fOHpxFlIVwzIGLhO4DLYUJx4ToFQmUo9oXLKX7OfVA8wQb8ASKFt1JRcIPqwSdbIcFEeop32sanLlTlUuDhmputgRCWeorDCQV0S1JEH8wyL9_DHdQcpYwNtBdFL6kgtgZrzgo1uwnx2G-Wr9fu54_p7PGdV4KdkytplZPqA9CAiiFpXrs4n6duSFdCTqyk1yz9vcqd2hFYKel_I98KDmHPwVYtFvrK2fouBiwq0EMPAhbRBjXS236B2ZX4wnfIiH3HYjrJKakSfgV7catlMywvlIRnlNVi5kzV-ZacGTWYWWZvT12VZ3xw-QLRKbBUtIYpRskNmZg1JV2X4r5MUo.ivFF3GTlnBDzwXtI2uc9gw\"\n}\n \n"},{"result":{"nanos":547600,"millis":0.5476,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"line":116,"prefix":"*","index":3,"text":"def idToken = signIn.response.idToken"},"stepLog":"21:58:47.801 over-writing existing variable 'idToken' with new value: signIn.response.idToken\n"},{"result":{"nanos":487300,"millis":0.4873,"status":"passed"},"step":{"line":117,"prefix":"*","index":4,"text":"def user_header = \"Bearer \" + idToken"},"stepLog":"21:58:47.801 over-writing existing variable 'user_header' with new value: \"Bearer \" + idToken\n"},{"result":{"nanos":405000,"millis":0.405,"status":"passed"},"step":{"line":118,"prefix":"*","index":5,"text":"print user_header"},"stepLog":"21:58:47.802 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw \n"},{"result":{"nanos":505400,"millis":0.5054,"status":"passed"},"step":{"endLine":125,"comments":["# with the token, the change is tryied"],"line":122,"prefix":"*","docString":"read('ChangeUserRole.graphql')","index":6,"text":"def query ="}},{"result":{"nanos":431600,"millis":0.4316,"status":"passed"},"step":{"comments":["# JSON file with the new user role"],"line":127,"prefix":"*","index":7,"text":"def user_datas = read('UserRole.json')"}},{"result":{"nanos":193500,"millis":0.1935,"status":"passed"},"step":{"line":129,"prefix":"Given","index":8,"text":"path 'graphql'"}},{"result":{"nanos":268700,"millis":0.2687,"status":"passed"},"step":{"line":130,"prefix":"And","index":9,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":242000,"millis":0.242,"status":"passed"},"step":{"line":131,"prefix":"And","index":10,"text":"request { query: '#(query)',  variables: '#(user_datas)'}"}},{"result":{"nanos":155238100,"millis":155.2381,"status":"passed"},"step":{"line":132,"prefix":"When","index":11,"text":"method post"},"stepLog":"21:58:47.806 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyYWQ2MWM2Yi02OTNjLTQ3OTgtYjJjZS01NGRiOWFiMDdhMGEiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjM3ODg3NThkLTU0N2EtNDBkOC05YTFjLWQ1YWRhYjQ0OTUyOSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMTk1MTI4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMmFkNjFjNmItNjkzYy00Nzk4LWIyY2UtNTRkYjlhYjA3YTBhIiwiZXhwIjoxNjIxMTk4NzI4LCJjdXN0b206cm9sZSI6InVzZXIiLCJpYXQiOjE2MjExOTUxMjgsImVtYWlsIjoidXNlcjhAdGVzdC5jb20ifQ.DD2L_XI3K68nOmBOtKg24ZGvTPxdsO3JSIkBvsLaZqB5r0NI9IxdihqqPzD6Zh81ri_7o8mjW4qWb7-b57x8v9Gwm5P0h8yX3Dad3Oxb9G93C6kknVQ9CDz4PA18aUjsuHPl7GIUOOB03YODmYqotuL04hIYo7efcf1Pl_cAbQKzdtRw8IX945A8iqJ7GVZOm3TM82ePR7-k_aGw2yF6E9NvIfxHcz3cQevAPVdf1xTo3DWKQ4yoGbyG7b0j5Z9oBF4G9bnZs8c18X9tFx0IkJ3Xeol7BxTgHqBtcmXLVWFCmtaQujyGIudxwWUwyGd4hWGYhxlDOtzDrgz64r5Jdw\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 199\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"role\":\"customer\",\"username\":\"user5@test.com\"},\"query\":\"mutation ChangeUserRole($username: String, $role: String) {\\r\\n  ChangeUserRole(input: {username: $username, role: $role})\\r\\n}\"}\n\n21:58:47.959 response time in milliseconds: 153\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 162\n1 < Connection: keep-alive\n1 < Date: Sun, 16 May 2021 19:58:48 GMT\n1 < x-amzn-RequestId: a76ca5c6-950d-4f0e-8f71-5c21b849bcd6\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: fb_q1E_jDoEFxUQ=\n1 < X-Amzn-Trace-Id: Root=1-60a17978-17480c234c7657b3649a5fd9;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 e5bf2c9645151e78d8b35d4b366f79f6.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: gkc-EhZu8vYjpBQUavqSt4dxaxd2_o9o0pPkcIm4igR1sGIXb4BgFg==\n{\"data\":{\"ChangeUserRole\":null},\"errors\":[{\"path\":[\"ChangeUserRole\"],\"locations\":[{\"line\":2,\"column\":3}],\"message\":\"Access denied for command 'ChangeUserRole'\"}]}\n"},{"result":{"nanos":12600,"millis":0.0126,"status":"passed"},"step":{"line":133,"prefix":"Then","index":12,"text":"status 200"}},{"result":{"nanos":4015620400,"millis":4015.6204,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":136,"prefix":"*","index":13,"text":"wait(4000)"}},{"result":{"nanos":397200,"millis":0.3972,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":139,"prefix":"*","index":14,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":543900,"millis":0.5439,"status":"passed"},"step":{"comments":["# As the user is not admin, the response must contains a field \"error\""],"line":142,"prefix":"*","index":15,"text":"match response.errors != '#notpresent'"}}],"executorName":"main","line":105,"name":"An user no admin change the role of other user. It should fail","description":"","durationMillis":5198.6913,"startTime":1621195126775,"failed":false,"refId":"[4:105]","endTime":1621195131977,"exampleIndex":-1}],"callDepth":0,"name":"Test the change of the role of users in the graphQL API in the environment set from the java class","description":"","resultDate":"2021-05-16 09:58:51 p.Â m.","durationMillis":12089.3033,"passedCount":4}