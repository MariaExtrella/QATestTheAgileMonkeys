{"failedCount":0,"prefixedPath":"classpath:examples\/users\/TestUserNoAdminDeleteCust.feature","packageQualifiedName":"examples.users.TestUserNoAdminDeleteCust","loopIndex":-1,"relativePath":"examples\/users\/TestUserNoAdminDeleteCust.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1353400,"millis":1.3534,"status":"passed"},"step":{"comments":["# Define a function to introduce a sleep in the test"],"background":true,"line":6,"prefix":"*","index":0,"text":"def wait = function(pause){ java.lang.Thread.sleep(pause) }"},"stepLog":"21:21:54.310 karate.env system property was: prod \n"},{"result":{"nanos":159600,"millis":0.1596,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":1,"text":"url httpUrl"}},{"result":{"nanos":39711400,"millis":39.7114,"status":"passed"},"step":{"comments":["# Get the idToken for one of the user created by the admin"],"line":13,"prefix":"*","index":0,"text":"def datas = read('signinDatasUserNoAdmin.json')"}},{"result":{"nanos":857289000,"millis":857.289,"status":"passed"},"step":{"comments":["# Call the feature to sign in the API with the JSON file that contains the user's datas"],"line":16,"prefix":"*","index":1,"text":"def signIn = call read('signin.feature') datas"},"callResults":[{"prefixedPath":"classpath:examples\/users\/signin.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2021-05-17 09:22:02 p.Â m.","durationMillis":834.7354,"callArg":{"password":"Password_1","clientId":"799hogucm363v55l7dk2n1l5u0","username":"user@test.com"},"failedCount":0,"packageQualifiedName":"examples.users.signin","relativePath":"examples\/users\/signin.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":20000,"millis":0.02,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url httpUrl"}},{"result":{"nanos":2481100,"millis":2.4811,"status":"passed"},"step":{"endLine":14,"line":7,"prefix":"*","docString":"{\n  \t\t\"clientId\": \"#(clientId)\",\n        \"username\": \"#(username)\",\n  \t\t\"password\": \"#(password)\"\n\t}","index":0,"text":"def query ="}},{"result":{"nanos":4553500,"millis":4.5535,"status":"passed"},"step":{"line":15,"prefix":"*","index":1,"text":"print query"},"stepLog":"21:21:54.402 [print] {\n  \"clientId\": \"799hogucm363v55l7dk2n1l5u0\",\n  \"username\": \"user@test.com\",\n  \"password\": \"Password_1\"\n}\n \n"},{"result":{"nanos":6695300,"millis":6.6953,"status":"passed"},"step":{"line":17,"prefix":"Given","index":2,"text":"path '\/auth\/sign-in'"}},{"result":{"nanos":99100,"millis":0.0991,"status":"passed"},"step":{"line":18,"prefix":"And","index":3,"text":"request query"}},{"result":{"nanos":664100,"millis":0.6641,"status":"passed"},"step":{"line":19,"prefix":"And","index":4,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":818066800,"millis":818.0668,"status":"passed"},"step":{"line":20,"prefix":"When","index":5,"text":"method post"},"stepLog":"21:21:54.615 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/auth\/sign-in\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 92\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"password\":\"Password_1\",\"clientId\":\"799hogucm363v55l7dk2n1l5u0\",\"username\":\"user@test.com\"}\n\n21:21:55.226 response time in milliseconds: 607\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 3992\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 19:21:55 GMT\n1 < x-amzn-RequestId: d68743e7-a3da-499c-9bd3-e94ce3927a4f\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: ffNNBHv0DoEFX4Q=\n1 < X-Amzn-Trace-Id: Root=1-60a2c253-78bca10f7f1c4b8b04431798\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 66709b7391664c627ccebe2d9c55dd7f.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: DNuxLSssVt_EYYb8sEcUFsvZyoQFLIPOyAZnspGvQxFdayf1XH-1YA==\n{\"expiresIn\":\"3600\",\"idToken\":\"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w\",\"accessToken\":\"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNzkzMTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI4MjkxNSwiaWF0IjoxNjIxMjc5MzE1LCJqdGkiOiI5MGM1YTkyYS04Zjk1LTQwYjgtYTJkMy0xYzk2OGIzMmQ4ZTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.Jk0Baud1MoPl_z1zF7xZQ8plxQmix0wVFVWvnFtNd2cu7PugNQG_Eik6c3eCUHWg4jaepOgIueNJTxRJFMRau8FDCjhZXRG334cHTaLkkudlAshO2hMNVh8Nru2ppjAYjYWGLNV0QV3g73R1Utl__sz72zBg67wI-L28tXiLJpympnuOQSl1CAE3UP4oqR22180WdDPROuT3vPIt7P4WLBWjOMm5OgkQob4E2ASCVnHbwKsV1JAXPzP0VKo9Pox998W12NTBfheN1v-ZBkrc1hylQZN86aobnC-Xlz25UpuDvH4NUuNUvGDL2Bp25Tvfx1XvKbf7ErVMMWxrrOfDbg\",\"tokenType\":\"Bearer\",\"refreshToken\":\"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Ud6CNt56-4l0LvOS2HAbcFiXTY4Mdw18n6ufZ9gckXG8joagOQEKG-RAWmMWH5CgfY3GbHBc3eITME4ryuX_k5bOpGKCDkZrukcm0kbW_LS3daw9xxVSt3Njfrm9K685HRVVR4NlsBTETjuq_1voYAMPmDbCH9lC_cbwGUIhL0vPRGUMFofdNOyfrHMmGkpQVUP5cqrZ8_bQuSH9_dzO6cnyiWAHfVvAJlAiKLUmhx5S53wZY7JeFtpeBz70H3276cll2Zk3Fu8nueJPWrDzpAf6yVr7W_c8svrp68dbveLjrznmZjuWXnLO11-IYoNQBHTdWB1AKsz_BG1m4TIXVg.5teXC-5cFcqlwV11.8YfLT50ZAEpsptaf5orFrqWvPkYEYg1ZXjZZvB2o8KXAHC9dxibQqZ6gKUhnmAiODZ00tufkAh_rdOI9jG28TjOlVg7QNcoEPE9XOsLFH-7LdE8s8YRVjIsQ42p9dUSsXphkxkvbd2THr_PtYeybq4S6Z27AHWMrVBuOu48W_geMPt4Xtbz9DlDw8Isj4Q5uzaUkPan-WrwIOgEAddJGQM12D14NEj_0CqJDpIz4_-xLUNtlum1r5KEAsz7D7R3SFdHFVZgYWNk4ImiFHTIaxxTchUv-NjQz9YHPFeOPtMRyLHG_PHCSZhQi_5cw9zKo85Z8kis4brP_BM8eiJzF-oSbc9Id6wHTDl6-3qB-HYq2ny0jgIob6FL9aw2kGssH7YDmBL09CLR_SL6tSIQcBI8_wqjNYnsoylkzNySl0p9k1lwi5YlZqIdzrrtA8kt0gAsM9i0daMW0P-Lq2EtgvxRDpeCL-9cimGMKMfiEBOuqKYrR6e402FxCSLgTMykymRZEjGUUvOHwxdF56HmzvoBNcVFY_x2YyLSGs9YXr4tv6wkIjzJcFqSKM0kBU27iIewvFbBCW9ulO1HtaWA_nC_IkwKV_yAH27E7b-Qzk6x2RHBPBPwXJwkHxgIUgZgrYRHE22ZLDlmlAhbk2EBHeLPvihHmpha18eBvII-sPOBdQgjsk7LehAgy46VUJMwV-hV8zIaBJmwBjB9CXRKcKcyib9UqzKkdxCFz4cSTKD_V8-bc9AzSbdTCvYr4gzixGvtg9_05Bd0bsbxO9xRvfg1CCKQDcBhRxlx2fmOTJmPErW_f0bniBgFVyeo8eHXxJ51GevLQZF8Yfxbg-Jl_BLLo09C2LGS2N0y_klVt2dXjnmK5Ol8DCW4-sV2zexPoQC5SLz-ouvZGHyePGAjP3GZVgnvtC2BQl8o_s-7878WRrWRDGIeNSh2tZgCT105Wmd_FT6I0g8dfi2yEPmU4--_rT5SHEjIt-KmCxkFXEBix18JG6k3LhSHnRJj3-weT2u9JP6YDERAag6ATkzqPYu0q-11aFUTL0B_SahstFiFU4RVNx26Wj57W1tWZN4V8xqQxMAMlXQnoOgCBxhlub19Ah-4-OF6dP7wHMpIBdB1q1GHGFqy43NDOmhB0UB57UmO_PX5g_6ddRu_6D-eYoA1xkcfIMsUZfqUnsSS7OuiolvLxWxoWlDMzegqFWn4mf3BFiuxC5xofb3l65IsKR5BZiyMPvRTQaC7czYqEAAN1xO_M1GnEeFDzEQIri2ASPxA_6mrITLEgTHn_34dyPNsSgJsqjWzH3x4IbKeXJneWKLxV2xRo2p9RNUY7Pzc.OjY31wKQfRep4ZuL20ZcLg\"}\n"},{"result":{"nanos":23400,"millis":0.0234,"status":"passed"},"step":{"line":21,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":890000,"millis":0.89,"status":"passed"},"step":{"comments":["#Get the idToken for the user"],"line":24,"prefix":"*","index":7,"text":"def tokenid = response.idToken"}},{"result":{"nanos":1242100,"millis":1.2421,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"print tokenid"},"stepLog":"21:21:55.231 [print] eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w \n"}],"executorName":"main","line":6,"name":"obtain a token for the admin user","description":"","durationMillis":834.7354,"startTime":1621279314395,"failed":false,"refId":"[1:6]","endTime":1621279315231,"exampleIndex":-1}],"name":"Get a token for the user to sign in the API","passedCount":1}]},{"result":{"nanos":2128400,"millis":2.1284,"status":"passed"},"step":{"line":17,"prefix":"*","index":2,"text":"print signIn.response"},"stepLog":"21:21:55.236 [print] {\n  \"expiresIn\": \"3600\",\n  \"idToken\": \"eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w\",\n  \"accessToken\": \"eyJraWQiOiJIcWFQSnUyR1YzN1F5TnBnVlIwSXRHRHJqQ3huZk41aEFvK1ZmZGNtNDBVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2MjEyNzkzMTUsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbVwvZXUtd2VzdC0xX21IdWVBcjJRdSIsImV4cCI6MTYyMTI4MjkxNSwiaWF0IjoxNjIxMjc5MzE1LCJqdGkiOiI5MGM1YTkyYS04Zjk1LTQwYjgtYTJkMy0xYzk2OGIzMmQ4ZTciLCJjbGllbnRfaWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsInVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIn0.Jk0Baud1MoPl_z1zF7xZQ8plxQmix0wVFVWvnFtNd2cu7PugNQG_Eik6c3eCUHWg4jaepOgIueNJTxRJFMRau8FDCjhZXRG334cHTaLkkudlAshO2hMNVh8Nru2ppjAYjYWGLNV0QV3g73R1Utl__sz72zBg67wI-L28tXiLJpympnuOQSl1CAE3UP4oqR22180WdDPROuT3vPIt7P4WLBWjOMm5OgkQob4E2ASCVnHbwKsV1JAXPzP0VKo9Pox998W12NTBfheN1v-ZBkrc1hylQZN86aobnC-Xlz25UpuDvH4NUuNUvGDL2Bp25Tvfx1XvKbf7ErVMMWxrrOfDbg\",\n  \"tokenType\": \"Bearer\",\n  \"refreshToken\": \"eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.Ud6CNt56-4l0LvOS2HAbcFiXTY4Mdw18n6ufZ9gckXG8joagOQEKG-RAWmMWH5CgfY3GbHBc3eITME4ryuX_k5bOpGKCDkZrukcm0kbW_LS3daw9xxVSt3Njfrm9K685HRVVR4NlsBTETjuq_1voYAMPmDbCH9lC_cbwGUIhL0vPRGUMFofdNOyfrHMmGkpQVUP5cqrZ8_bQuSH9_dzO6cnyiWAHfVvAJlAiKLUmhx5S53wZY7JeFtpeBz70H3276cll2Zk3Fu8nueJPWrDzpAf6yVr7W_c8svrp68dbveLjrznmZjuWXnLO11-IYoNQBHTdWB1AKsz_BG1m4TIXVg.5teXC-5cFcqlwV11.8YfLT50ZAEpsptaf5orFrqWvPkYEYg1ZXjZZvB2o8KXAHC9dxibQqZ6gKUhnmAiODZ00tufkAh_rdOI9jG28TjOlVg7QNcoEPE9XOsLFH-7LdE8s8YRVjIsQ42p9dUSsXphkxkvbd2THr_PtYeybq4S6Z27AHWMrVBuOu48W_geMPt4Xtbz9DlDw8Isj4Q5uzaUkPan-WrwIOgEAddJGQM12D14NEj_0CqJDpIz4_-xLUNtlum1r5KEAsz7D7R3SFdHFVZgYWNk4ImiFHTIaxxTchUv-NjQz9YHPFeOPtMRyLHG_PHCSZhQi_5cw9zKo85Z8kis4brP_BM8eiJzF-oSbc9Id6wHTDl6-3qB-HYq2ny0jgIob6FL9aw2kGssH7YDmBL09CLR_SL6tSIQcBI8_wqjNYnsoylkzNySl0p9k1lwi5YlZqIdzrrtA8kt0gAsM9i0daMW0P-Lq2EtgvxRDpeCL-9cimGMKMfiEBOuqKYrR6e402FxCSLgTMykymRZEjGUUvOHwxdF56HmzvoBNcVFY_x2YyLSGs9YXr4tv6wkIjzJcFqSKM0kBU27iIewvFbBCW9ulO1HtaWA_nC_IkwKV_yAH27E7b-Qzk6x2RHBPBPwXJwkHxgIUgZgrYRHE22ZLDlmlAhbk2EBHeLPvihHmpha18eBvII-sPOBdQgjsk7LehAgy46VUJMwV-hV8zIaBJmwBjB9CXRKcKcyib9UqzKkdxCFz4cSTKD_V8-bc9AzSbdTCvYr4gzixGvtg9_05Bd0bsbxO9xRvfg1CCKQDcBhRxlx2fmOTJmPErW_f0bniBgFVyeo8eHXxJ51GevLQZF8Yfxbg-Jl_BLLo09C2LGS2N0y_klVt2dXjnmK5Ol8DCW4-sV2zexPoQC5SLz-ouvZGHyePGAjP3GZVgnvtC2BQl8o_s-7878WRrWRDGIeNSh2tZgCT105Wmd_FT6I0g8dfi2yEPmU4--_rT5SHEjIt-KmCxkFXEBix18JG6k3LhSHnRJj3-weT2u9JP6YDERAag6ATkzqPYu0q-11aFUTL0B_SahstFiFU4RVNx26Wj57W1tWZN4V8xqQxMAMlXQnoOgCBxhlub19Ah-4-OF6dP7wHMpIBdB1q1GHGFqy43NDOmhB0UB57UmO_PX5g_6ddRu_6D-eYoA1xkcfIMsUZfqUnsSS7OuiolvLxWxoWlDMzegqFWn4mf3BFiuxC5xofb3l65IsKR5BZiyMPvRTQaC7czYqEAAN1xO_M1GnEeFDzEQIri2ASPxA_6mrITLEgTHn_34dyPNsSgJsqjWzH3x4IbKeXJneWKLxV2xRo2p9RNUY7Pzc.OjY31wKQfRep4ZuL20ZcLg\"\n}\n \n"},{"result":{"nanos":936400,"millis":0.9364,"status":"passed"},"step":{"comments":["# Create the Authorization header"],"line":20,"prefix":"*","index":3,"text":"def idToken = signIn.response.idToken"}},{"result":{"nanos":8118100,"millis":8.1181,"status":"passed"},"step":{"line":21,"prefix":"*","index":4,"text":"def user_header = \"Bearer \" + idToken"}},{"result":{"nanos":1666500,"millis":1.6665,"status":"passed"},"step":{"line":22,"prefix":"*","index":5,"text":"print user_header"},"stepLog":"21:21:55.247 [print] Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w \n"},{"result":{"nanos":1586100,"millis":1.5861,"status":"passed"},"step":{"endLine":28,"comments":["#### List the customers to select one to delete"],"line":25,"prefix":"*","docString":"read('CustomerReadModels.graphql')","index":6,"text":"def queryCustReadModels ="}},{"result":{"nanos":526800,"millis":0.5268,"status":"passed"},"step":{"line":29,"prefix":"Given","index":7,"text":"path 'graphql'"}},{"result":{"nanos":1808300,"millis":1.8083,"status":"passed"},"step":{"line":30,"prefix":"And","index":8,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":710500,"millis":0.7105,"status":"passed"},"step":{"line":31,"prefix":"And","index":9,"text":"request { query: '#(queryCustReadModels)'}"}},{"result":{"nanos":1885336700,"millis":1885.3367,"status":"passed"},"step":{"line":32,"prefix":"When","index":10,"text":"method post"},"stepLog":"21:21:55.255 request:\n1 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n1 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 167\n1 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n1 > Accept-Encoding: gzip,deflate\n{\"query\":\"query CustomerReadModels {\\r\\n    CustomerReadModels {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n21:21:57.135 response time in milliseconds: 1879\n1 < 200\n1 < Content-Type: application\/json\n1 < Content-Length: 612\n1 < Connection: keep-alive\n1 < Date: Mon, 17 May 2021 19:21:57 GMT\n1 < x-amzn-RequestId: 33fe7092-0b16-4297-82c2-3093d436dfe5\n1 < Access-Control-Allow-Origin: *\n1 < x-amz-apigw-id: ffNNHEn9joEFlBQ=\n1 < X-Amzn-Trace-Id: Root=1-60a2c253-5da77161157ce0fa21d09b94;Sampled=0\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 f381783b1a4d3b0a57fef757bbb97dc2.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MAD51-C2\n1 < X-Amz-Cf-Id: N9dmFWfoBninRtBWFgmYHz_neZvpiRh00tgns5WOZV7i8qjY4e7V0g==\n{\"data\":{\"CustomerReadModels\":[{\"photoUrl\":\"\",\"surname\":\"Customer Incomplete surname\",\"name\":null,\"id\":\"Customer Incomplete\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer Incomplete surname\",\"name\":null,\"id\":\"20000022Incomplete\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"2000000photo\",\"userId\":\"user@test.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer3 Surname\",\"name\":\"Customer3\",\"id\":\"3\",\"userId\":\"admin@theagilemonkeys.com\"},{\"photoUrl\":\"\",\"surname\":\"Customer surname\",\"name\":\"Customer name\",\"id\":\"20000000nophoto\",\"userId\":\"user@test.com\"}]}}\n"},{"result":{"nanos":30600,"millis":0.0306,"status":"passed"},"step":{"line":33,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":5439500,"millis":5.4395,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":36,"prefix":"*","index":12,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":5438600,"millis":5.4386,"status":"passed"},"step":{"comments":["# Check that the response doesn't contains a field \"error\""],"line":39,"prefix":"*","index":13,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":468200,"millis":0.4682,"status":"passed"},"step":{"line":40,"prefix":"*","index":14,"text":"match response.data.CustomerReadModels contains {id: '#ignore', name: '#ignore', surname: '#ignore', photoUrl: '#ignore', userId: '#ignore' }"}},{"result":{"nanos":1308500,"millis":1.3085,"status":"passed"},"step":{"comments":["# Save the body of the response and get the first to delete"],"line":43,"prefix":"*","index":15,"text":"def list_customers = response.data.CustomerReadModels"}},{"result":{"nanos":2536800,"millis":2.5368,"status":"passed"},"step":{"line":44,"prefix":"*","index":16,"text":"def customer_toDelete = list_customers[0]"}},{"result":{"nanos":656200,"millis":0.6562,"status":"passed"},"step":{"endLine":50,"comments":["#### Delete the customer"],"line":47,"prefix":"*","docString":"read('DeleteCustomer.graphql')","index":17,"text":"def queryDeleteCustomer ="}},{"result":{"nanos":140200,"millis":0.1402,"status":"passed"},"step":{"line":51,"prefix":"Given","index":18,"text":"path 'graphql'"}},{"result":{"nanos":223400,"millis":0.2234,"status":"passed"},"step":{"line":52,"prefix":"And","index":19,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":516400,"millis":0.5164,"status":"passed"},"step":{"line":53,"prefix":"And","index":20,"text":"request { query: '#(queryDeleteCustomer)', variables: '#(customer_toDelete)'}"}},{"result":{"nanos":596986500,"millis":596.9865,"status":"passed"},"step":{"line":54,"prefix":"When","index":21,"text":"method post"},"stepLog":"21:21:57.157 request:\n2 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n2 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 228\n2 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n2 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"photoUrl\":\"\",\"surname\":\"Customer Incomplete surname\",\"name\":null,\"id\":\"Customer Incomplete\",\"userId\":\"user@test.com\"},\"query\":\"mutation DeleteCustomer($id: ID) {\\r\\n    DeleteCustomer(input: {id: $id})\\r\\n} \\r\\n\"}\n\n21:21:57.749 response time in milliseconds: 591\n2 < 200\n2 < Content-Type: application\/json\n2 < Content-Length: 32\n2 < Connection: keep-alive\n2 < Date: Mon, 17 May 2021 19:21:58 GMT\n2 < x-amzn-RequestId: 8df518ae-aa81-49c4-b7d4-2e0ce502ff2b\n2 < Access-Control-Allow-Origin: *\n2 < x-amz-apigw-id: ffNNcGotjoEFkmg=\n2 < X-Amzn-Trace-Id: Root=1-60a2c255-6e73ecc552c3813c3e3cc7a8;Sampled=0\n2 < X-Cache: Miss from cloudfront\n2 < Via: 1.1 b57cfda43c76a33a7043dd5bcd943c1c.cloudfront.net (CloudFront)\n2 < X-Amz-Cf-Pop: MAD51-C2\n2 < X-Amz-Cf-Id: emNT9kjl_jYHAGK91P6BFk5FLLB6bZpWlqZ_xWzPDUZCuM3YT6gI3g==\n{\"data\":{\"DeleteCustomer\":true}}\n"},{"result":{"nanos":20400,"millis":0.0204,"status":"passed"},"step":{"line":55,"prefix":"Then","index":22,"text":"status 200"}},{"result":{"nanos":4023387000,"millis":4023.387,"status":"passed"},"step":{"comments":["# Introduce a pause so the user can be saved before the next test"],"line":57,"prefix":"*","index":23,"text":"wait(4000)"}},{"result":{"nanos":1199000,"millis":1.199,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":60,"prefix":"*","index":24,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":940700,"millis":0.9407,"status":"passed"},"step":{"comments":["# Check if the response contains any error"],"line":63,"prefix":"*","index":25,"text":"match response.errors == '#notpresent'"}},{"result":{"nanos":1368400,"millis":1.3684,"status":"passed"},"step":{"endLine":71,"comments":["#### Check that the customer has been deleted consulting by id"],"line":66,"prefix":"*","docString":"{ \n   \"id\": \"#(customer_toDelete.id)\"\n}","index":26,"text":"def id ="}},{"result":{"nanos":1514000,"millis":1.514,"status":"passed"},"step":{"line":72,"prefix":"*","index":27,"text":"def queryCustReadModel = read('CustomerReadModel.graphql')"}},{"result":{"nanos":467100,"millis":0.4671,"status":"passed"},"step":{"line":74,"prefix":"Given","index":28,"text":"path 'graphql'"}},{"result":{"nanos":436400,"millis":0.4364,"status":"passed"},"step":{"line":75,"prefix":"And","index":29,"text":"header Authorization = signIn.response.tokenType + ' ' + signIn.response.idToken"}},{"result":{"nanos":443700,"millis":0.4437,"status":"passed"},"step":{"line":76,"prefix":"And","index":30,"text":"request { query: '#(queryCustReadModel)', variables: '#(id)'}"}},{"result":{"nanos":272802500,"millis":272.8025,"status":"passed"},"step":{"line":77,"prefix":"When","index":31,"text":"method post"},"stepLog":"21:22:01.786 request:\n3 > POST https:\/\/pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\/test-qa-estrella-prod\/graphql\n3 > Authorization: Bearer eyJraWQiOiJHa3NQT29DVkd3b2NMV0ROZ0tvNVE0R3ViRFNUV0xNeDhHYVJmSFZcL0U3QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyMjRjNjczNy04OGIwLTQ2YTQtODZhNC1lMmNlYTE4ODNlNDIiLCJhdWQiOiI3OTlob2d1Y20zNjN2NTVsN2RrMm4xbDV1MCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6IjU2MjM1YTQ4LWRiZTItNDdlYy1hMTcyLTk2Mzc3MjhhMTJiOCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjIxMjc5MzE1LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0xLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtMV9tSHVlQXIyUXUiLCJjb2duaXRvOnVzZXJuYW1lIjoiMjI0YzY3MzctODhiMC00NmE0LTg2YTQtZTJjZWExODgzZTQyIiwiZXhwIjoxNjIxMjgyOTE1LCJjdXN0b206cm9sZSI6IlVzZXIiLCJpYXQiOjE2MjEyNzkzMTUsImVtYWlsIjoidXNlckB0ZXN0LmNvbSJ9.o8cq6udQbFo0w4K3GJhb_8bcX9GHCtn_2foSmT3WnNrnyyiI4QkS1k_KwundWf09S63A8AImKcKDOTIqY9HvrLjRJh-3uHebXA3XwvJEkjyVgveVnzb3VFSfNBCIHQu5tgePEvj7mDQKcrVsebJ2VR_g068fD0ak1kEVRhRWL7bbSUJaIl-MBqlCBSPSzC6EY-ipd0ow8PSr_f0tMpzAtF-kpDeEM1FozCVg0ngN8nCCVSsC5VBs-FacNSojEZFwCAkjxIi5j0YoqS3t1qxjJBkQ8pI5B1tUm9ox4F60wNw_3Kuh58_GUR5eXM_wd-8HnDiVfwzjfi4cYpYrQrwp1w\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 225\n3 > Host: pnbbxqm2y9.execute-api.eu-west-1.amazonaws.com\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/16.0.1)\n3 > Accept-Encoding: gzip,deflate\n{\"variables\":{\"id\":\"Customer Incomplete\"},\"query\":\"query CustomerReadModel($id: ID!) {\\r\\n    CustomerReadModel(id: $id) {\\r\\n        id\\r\\n        name\\r\\n        surname\\r\\n        photoUrl\\r\\n        userId\\r\\n    }\\r\\n}\"}\n\n21:22:02.056 response time in milliseconds: 269\n3 < 200\n3 < Content-Type: application\/json\n3 < Content-Length: 35\n3 < Connection: keep-alive\n3 < Date: Mon, 17 May 2021 19:22:02 GMT\n3 < x-amzn-RequestId: d70ad43a-5620-4954-a4c4-9dbbb6921ac7\n3 < Access-Control-Allow-Origin: *\n3 < x-amz-apigw-id: ffNOHE2IjoEFx0w=\n3 < X-Amzn-Trace-Id: Root=1-60a2c25a-398616c313f743015a6ed6b9;Sampled=0\n3 < X-Cache: Miss from cloudfront\n3 < Via: 1.1 bb4bb14bfdc4b50fa6e1881933804946.cloudfront.net (CloudFront)\n3 < X-Amz-Cf-Pop: MAD51-C2\n3 < X-Amz-Cf-Id: mloN3fjdG1hCmml53ZwDjQN8iry20KS1QkBsPnaNZcc6_-oOD1jTKg==\n{\"data\":{\"CustomerReadModel\":null}}\n"},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":78,"prefix":"Then","index":32,"text":"status 200"}},{"result":{"nanos":346700,"millis":0.3467,"status":"passed"},"step":{"comments":["# if the response status is not 200, the test finish"],"line":81,"prefix":"*","index":33,"text":"if (responseStatus != 200) karate.abort()"}},{"result":{"nanos":775900,"millis":0.7759,"status":"passed"},"step":{"comments":["# The response shouldn't return any data"],"line":84,"prefix":"*","index":34,"text":"match response.data.CustomerReadModel != {id: '#(customer_toDelete.id)', name: '#ignore', surname: '#ignore', photoUrl: '#ignore', userId: '#ignore' }"}},{"result":{"nanos":463500,"millis":0.4635,"status":"passed"},"step":{"line":85,"prefix":"*","index":35,"text":"match response.errors == '#notpresent'"}}],"executorName":"main","line":10,"name":"Querys for an user not admin","description":"","durationMillis":7719.2563,"startTime":1621279314191,"failed":false,"refId":"[1:10]","endTime":1621279322060,"exampleIndex":-1}],"callDepth":0,"name":"Test to delete customers by a not admin user in the environment set from the java class","description":"","resultDate":"2021-05-17 09:22:02 p.Â m.","durationMillis":7719.2563,"passedCount":1}